(self.webpackChunkngx_admin_demo=self.webpackChunkngx_admin_demo||[]).push([[76],{96596:()=>{var e,d,s,a,o,u,f,i,r;window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var e=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,d={timestamp:"J5S9",version:"4.12.1 (Standard)",revision:"64749bb245",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:e},status:"unloaded",basePath:function(){var o=window.CKEDITOR_BASEPATH||"";if(!o)for(var u=document.getElementsByTagName("script"),f=0;f<u.length;f++){var i=u[f].src.match(e);if(i){o=i[1];break}}if(-1==o.indexOf(":/")&&"//"!=o.slice(0,2)&&(o=0===o.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+o:location.href.match(/^[^\?]*\/(?:)/)[0]+o),!o)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return o}(),getUrl:function(o){return-1==o.indexOf(":/")&&0!==o.indexOf("/")&&(o=this.basePath+o),this.timestamp&&"/"!=o.charAt(o.length-1)&&!/[&?]t=/.test(o)&&(o+=(0<=o.indexOf("?")?"&":"?")+"t="+this.timestamp),o},domReady:function(){function o(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",o,!1),u()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",o),u())}catch(i){}}function u(){for(var i;i=f.shift();)i()}var f=[];return function(i){if(f.push(i),"complete"===document.readyState&&setTimeout(o,1),1==f.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",o),window.attachEvent("onload",o),i=!1;try{i=!window.frameElement}catch(l){}document.documentElement.doScroll&&i&&function r(){try{document.documentElement.doScroll("left")}catch(l){return void setTimeout(r,1)}o()}()}}}()},s=window.CKEDITOR_GETURL;if(s){var a=d.getUrl;d.getUrl=function(o){return s.call(d,o)||a.call(d,o)}}return d}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var s,d=CKEDITOR.event.prototype;for(s in d)null==e[s]&&(e[s]=d[s])},CKEDITOR.event.prototype=function(){function e(a){var o=d(this);return o[a]||(o[a]=new s(a))}var a,o,u,f,d=function(a){return(a=a.getPrivate&&a.getPrivate()||a._||(a._={})).events||(a.events={})},s=function(a){this.name=a,this.listeners=[]};return s.prototype={getListenerIndex:function(a){for(var o=0,u=this.listeners;o<u.length;o++)if(u[o].fn==a)return o;return-1}},{define:function(a,o){var u=e.call(this,a);CKEDITOR.tools.extend(u,o,!0)},on:function(a,o,u,f,i){function r(m,g,C,h){return!1!==o.call(u,m={name:a,sender:this,editor:m,data:g,listenerData:f,stop:C,cancel:h,removeListener:l})&&m.data}function l(){t.removeListener(a,o)}var n=e.call(this,a);if(0>n.getListenerIndex(o)){n=n.listeners,u||(u=this),isNaN(i)&&(i=10);var t=this;r.fn=o,r.priority=i;for(var c=n.length-1;0<=c;c--)if(n[c].priority<=i)return n.splice(c+1,0,r),{removeListener:l};n.unshift(r)}return{removeListener:l}},once:function(){var a=Array.prototype.slice.call(arguments),o=a[1];return a[1]=function(u){return u.removeListener(),o.apply(this,arguments)},this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,a},fire:(a=0,o=function(){a=1},u=0,f=function(){u=1},function(i,r,l){var n=d(this)[i];i=a;var t=u;if(a=u=0,n&&(c=n.listeners).length)for(var m,c=c.slice(0),g=0;g<c.length;g++){if(n.errorProof)try{m=c[g].call(this,l,r,o,f)}catch(h){}else m=c[g].call(this,l,r,o,f);if(!1===m?u=1:void 0!==m&&(r=m),a||u)break}return r=!u&&(void 0===r||r),a=i,u=t,r}),fireOnce:function(a,o,u){return o=this.fire(a,o,u),delete d(this)[a],o},removeListener:function(a,o){var u=d(this)[a];if(u){var f=u.getListenerIndex(o);0<=f&&u.listeners.splice(f,1)}},removeAllListeners:function(){var o,a=d(this);for(o in a)delete a[o]},hasListeners:function(a){return(a=d(this)[a])&&0<a.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,d){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,d,this)},CKEDITOR.editor.prototype.fireOnce=function(e,d){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,d,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),d=e.match(/edge[ \/](\d+.?\d*)/),s=-1<e.indexOf("trident/");(s={ie:s=!(!d&&!s),edge:!!d,webkit:!s&&-1<e.indexOf(" applewebkit/"),air:-1<e.indexOf(" adobeair/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<e.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var o=document.domain,u=window.location.hostname;return o!=u&&o!="["+u+"]"},secure:"https:"==location.protocol}).gecko="Gecko"==navigator.product&&!s.webkit&&!s.ie,s.webkit&&(-1<e.indexOf("chrome")?s.chrome=!0:s.safari=!0);var a=0;return s.ie&&(a=d?parseFloat(d[1]):s.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,s.ie9Compat=9==a,s.ie8Compat=8==a,s.ie7Compat=7==a,s.ie6Compat=7>a||s.quirks),s.gecko&&(d=e.match(/rv:([\d\.]+)/))&&(a=1e4*(d=d[1].split("."))[0]+100*(d[1]||0)+1*(d[2]||0)),s.air&&(a=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),s.webkit&&(a=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),s.version=a,s.isCompatible=!(s.ie&&7>a||s.gecko&&4e4>a||s.webkit&&534>a),s.hidpi=2<=window.devicePixelRatio,s.needsBrFiller=s.gecko||s.webkit||s.ie&&10<a,s.needsNbspFiller=s.ie&&11>a,s.cssClass="cke_browser_"+(s.ie?"ie":s.gecko?"gecko":s.webkit?"webkit":"unknown"),s.quirks&&(s.cssClass+=" cke_browser_quirks"),s.ie&&(s.cssClass+=" cke_browser_ie"+(s.quirks?"6 cke_browser_iequirks":s.version)),s.air&&(s.cssClass+=" cke_browser_air"),s.iOS&&(s.cssClass+=" cke_browser_ios"),s.hidpi&&(s.cssClass+=" cke_hidpi"),s}()),"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},CKEDITOR.domReady(function(){var e=CKEDITOR.loadFullCore,d=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():d&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*d))}),CKEDITOR.status="basic_loaded"),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(e,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:e,additionalData:d})},CKEDITOR.error=function(e,d){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:e,additionalData:d})},CKEDITOR.on("log",function(e){if(window.console&&window.console.log){var d=console[e.data.type]?e.data.type:"log",s=e.data.errorCode;(e=e.data.additionalData)?console[d]("[CKEDITOR] Error code: "+s+".",e):console[d]("[CKEDITOR] Error code: "+s+"."),console[d]("[CKEDITOR] For more information about this error go to https://ckeditor.com/docs/ckeditor4/latest/guide/dev_errors.html#"+s)}},null,null,999),CKEDITOR.dom={},function(){function e(t,c,m){this._minInterval=t,this._context=m,this._lastOutput=this._scheduledTimer=0,this._output=CKEDITOR.tools.bind(c,m||{});var g=this;this.input=function(){function C(){g._lastOutput=(new Date).getTime(),g._scheduledTimer=0,g._call()}if(!g._scheduledTimer||!1!==g._reschedule()){var h=(new Date).getTime()-g._lastOutput;h<g._minInterval?g._scheduledTimer=setTimeout(C,g._minInterval-h):C()}}}function d(t,c,m){e.call(this,t,c,m),this._args=[];var g=this;this.input=CKEDITOR.tools.override(this.input,function(C){return function(){g._args=Array.prototype.slice.call(arguments),C.call(this)}})}var t,c,s=[],a=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",o=/&/g,u=/>/g,f=/</g,i=/"/g,r=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,l={lt:"<",gt:">",amp:"&",quot:'"',nbsp:"\xa0",shy:"\xad"},n=function(t,c){return"#"==c[0]?String.fromCharCode(parseInt(c.slice(1),10)):l[c]};CKEDITOR.on("reset",function(){s=[]}),CKEDITOR.tools={arrayCompare:function(t,c){if(!t&&!c)return!0;if(!t||!c||t.length!=c.length)return!1;for(var m=0;m<t.length;m++)if(t[m]!=c[m])return!1;return!0},getIndex:function(t,c){for(var m=0;m<t.length;++m)if(c(t[m]))return m;return-1},clone:function(t){var c;if(t&&t instanceof Array){c=[];for(var m=0;m<t.length;m++)c[m]=CKEDITOR.tools.clone(t[m]);return c}if(null===t||"object"!=typeof t||t instanceof String||t instanceof Number||t instanceof Boolean||t instanceof Date||t instanceof RegExp||t.nodeType||t.window===t)return t;for(m in c=new t.constructor,t)c[m]=CKEDITOR.tools.clone(t[m]);return c},capitalize:function(t,c){return t.charAt(0).toUpperCase()+(c?t.slice(1):t.slice(1).toLowerCase())},extend:function(t){var m,g,c=arguments.length;"boolean"==typeof(m=arguments[c-1])?c--:"boolean"==typeof(m=arguments[c-2])&&(g=arguments[c-1],c-=2);for(var C=1;C<c;C++){var h=arguments[C]||{};CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(h),function(I){(!0===m||null==t[I])&&(!g||I in g)&&(t[I]=h[I])})}return t},prototypedCopy:function(t){var c=function(){};return c.prototype=t,new c},copy:function(t){var m,c={};for(m in t)c[m]=t[m];return c},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},isEmpty:function(t){for(var c in t)if(t.hasOwnProperty(c))return!1;return!0},cssVendorPrefix:function(t,c,m){return m?a+t+":"+c+";"+t+":"+c:((m={})[t]=c,m[a+t]=c,m)},cssStyleToDomStyle:(t=document.createElement("div").style,c=void 0!==t.cssFloat?"cssFloat":void 0!==t.styleFloat?"styleFloat":"float",function(m){return"float"==m?c:m.replace(/-./g,function(g){return g.substr(1).toUpperCase()})}),buildStyleHtml:function(t){t=[].concat(t);for(var c,m=[],g=0;g<t.length;g++)(c=t[g])&&(/@import|[{}]/.test(c)?m.push("<style>"+c+"</style>"):m.push('<link type="text/css" rel=stylesheet href="'+c+'">'));return m.join("")},htmlEncode:function(t){return null==t?"":String(t).replace(o,"&amp;").replace(u,"&gt;").replace(f,"&lt;")},htmlDecode:function(t){return t.replace(r,n)},htmlEncodeAttr:function(t){return CKEDITOR.tools.htmlEncode(t).replace(i,"&quot;")},htmlDecodeAttr:function(t){return CKEDITOR.tools.htmlDecode(t)},transformPlainTextToHtml:function(t,c){var m=c==CKEDITOR.ENTER_BR,g=(g=this.htmlEncode(t.replace(/\r\n/g,"\n"))).replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),C=c==CKEDITOR.ENTER_P?"p":"div";if(!m){var h=/\n{2}/g;if(h.test(g)){var I="<"+C+">",D="</"+C+">";g=I+g.replace(h,function(){return D+I})+D}}return g=g.replace(/\n/g,"<br>"),m||(g=g.replace(new RegExp("<br>(?=</"+C+">)"),function(k){return CKEDITOR.tools.repeat(k,2)})),(g=g.replace(/^ | $/g,"&nbsp;")).replace(/(>|\s) /g,function(k,b){return b+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var t=0;return function(){return++t}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var t="e",c=0;8>c;c++)t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return t},override:function(t,c){var m=c(t);return m.prototype=t.prototype,m},setTimeout:function(t,c,m,g,C){return C||(C=window),m||(m=C),C.setTimeout(function(){g?t.apply(m,[].concat(g)):t.apply(m)},c||0)},throttle:function(t,c,m){return new this.buffers.throttle(t,c,m)},trim:function(){var t=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(c){return c.replace(t,"")}}(),ltrim:function(){var t=/^[ \t\n\r]+/g;return function(c){return c.replace(t,"")}}(),rtrim:function(){var t=/[ \t\n\r]+$/g;return function(c){return c.replace(t,"")}}(),indexOf:function(t,c){if("function"==typeof c){for(var m=0,g=t.length;m<g;m++)if(c(t[m]))return m}else{if(t.indexOf)return t.indexOf(c);for(m=0,g=t.length;m<g;m++)if(t[m]===c)return m}return-1},search:function(t,c){var m=CKEDITOR.tools.indexOf(t,c);return 0<=m?t[m]:null},bind:function(t,c){return function(){return t.apply(c,arguments)}},createClass:function(t){var c=t.$,m=t.base,g=t.privates||t._,C=t.proto;if(t=t.statics,!c&&(c=function(){m&&this.base.apply(this,arguments)}),g){var h=c;c=function(){var D,I=this._||(this._={});for(D in g){var k=g[D];I[D]="function"==typeof k?CKEDITOR.tools.bind(k,this):k}h.apply(this,arguments)}}return m&&(c.prototype=this.prototypedCopy(m.prototype),c.prototype.constructor=c,c.base=m,c.baseProto=m.prototype,c.prototype.base=function I(){this.base=m.prototype.base,m.apply(this,arguments),this.base=I}),C&&this.extend(c.prototype,C,!0),t&&this.extend(c,t,!0),c},addFunction:function(t,c){return s.push(function(){return t.apply(c||this,arguments)})-1},removeFunction:function(t){s[t]=null},callFunction:function(t){var c=s[t];return c&&c.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var c,t=/^-?\d+\.?\d*px$/;return function(m){return c=CKEDITOR.tools.trim(m+"")+"px",t.test(c)?c:m||""}}(),convertToPx:function(){var t;return function(c){if(t||(t=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(t)),!/%$/.test(c)){var m=0>parseFloat(c);return m&&(c=c.replace("-","")),t.setStyle("width",c),c=t.$.clientWidth,m?-c:c}return c}}(),repeat:function(t,c){return Array(c+1).join(t)},tryThese:function(){for(var t,c=0,m=arguments.length;c<m;c++){var g=arguments[c];try{t=g();break}catch(C){}}return t},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(t){return function(){var c=arguments,m=this;window.setTimeout(function(){t.apply(m,c)},0)}},normalizeCssText:function(t,c){var g,m=[],C=CKEDITOR.tools.parseCssText(t,!0,c);for(g in C)m.push(g+":"+C[g]);return m.sort(),m.length?m.join(";")+";":""},convertRgbToHex:function(t){return t.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(c,m,g,C){for(c=[m,g,C],m=0;3>m;m++)c[m]=("0"+parseInt(c[m],10).toString(16)).slice(-2);return"#"+c.join("")})},normalizeHex:function(t){return t.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(c,m,g,C){return 3==(c=m.toLowerCase()).length&&(c=[(c=c.split(""))[0],c[0],c[1],c[1],c[2],c[2]].join("")),"#"+c+C})},parseCssText:function(t,c,m){var g={};return m&&(t=new CKEDITOR.dom.element("span").setAttribute("style",t).getAttribute("style")||""),t&&(t=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(t))),!t||";"==t||t.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(C,h,I){c&&("font-family"==(h=h.toLowerCase())&&(I=I.replace(/\s*,\s*/g,",")),I=CKEDITOR.tools.trim(I)),g[h]=I}),g},writeCssText:function(t,c){var m,g=[];for(m in t)g.push(m+":"+t[m]);return c&&g.sort(),g.join("; ")},objectCompare:function(t,c,m){var g;if(!t&&!c)return!0;if(!t||!c)return!1;for(g in t)if(t[g]!=c[g])return!1;if(!m)for(g in c)if(t[g]!=c[g])return!1;return!0},objectKeys:function(t){return CKEDITOR.tools.object.keys(t)},convertArrayToObject:function(t,c){var m={};1==arguments.length&&(c=!0);for(var g=0,C=t.length;g<C;++g)m[t[g]]=c;return m},fixDomain:function(){for(var t;;)try{t=window.parent.document.domain;break}catch(c){if(!(t=t?t.replace(/.+?(?:\.|$)/,""):document.domain))break;document.domain=t}return!!t},eventsBuffer:function(t,c,m){return new this.buffers.event(t,c,m)},enableHtml5Elements:function(t,c){for(var C,m="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),g=m.length;g--;)C=t.createElement(m[g]),c&&t.appendChild(C)},checkIfAnyArrayItemMatches:function(t,c){for(var m=0,g=t.length;m<g;++m)if(t[m].match(c))return!0;return!1},checkIfAnyObjectPropertyMatches:function(t,c){for(var m in t)if(m.match(c))return!0;return!1},keystrokeToString:function(t,c){var m=this.keystrokeToArray(t,c);return m.display=m.display.join("+"),m.aria=m.aria.join("+"),m},keystrokeToArray:function(t,c){var m=16711680&c,g=65535&c,C=CKEDITOR.env.mac,h=[],I=[];return m&CKEDITOR.CTRL&&(h.push(C?"\u2318":t[17]),I.push(C?t[224]:t[17])),m&CKEDITOR.ALT&&(h.push(C?"\u2325":t[18]),I.push(t[18])),m&CKEDITOR.SHIFT&&(h.push(C?"\u21e7":t[16]),I.push(t[16])),g&&(t[g]?(h.push(t[g]),I.push(t[g])):(h.push(String.fromCharCode(g)),I.push(String.fromCharCode(g)))),{display:h,aria:I}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==",getCookie:function(t){t=t.toLowerCase();for(var m,c=document.cookie.split(";"),C=0;C<c.length;C++)if(m=c[C].split("="),decodeURIComponent(CKEDITOR.tools.trim(m[0]).toLowerCase())===t)return decodeURIComponent(1<m.length?m[1]:"");return null},setCookie:function(t,c){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(c)+";path=/"},getCsrfToken:function(){if(!(t=CKEDITOR.tools.getCookie("ckCsrfToken"))||40!=t.length){var t=[],c="";if(window.crypto&&window.crypto.getRandomValues)t=new Uint8Array(40),window.crypto.getRandomValues(t);else for(var m=0;40>m;m++)t.push(Math.floor(256*Math.random()));for(m=0;m<t.length;m++){var g="abcdefghijklmnopqrstuvwxyz0123456789".charAt(t[m]%36);c+=.5<Math.random()?g.toUpperCase():g}t=c,CKEDITOR.tools.setCookie("ckCsrfToken",t)}return t},escapeCss:function(t){return t?window.CSS&&CSS.escape?CSS.escape(t):isNaN(parseInt(t.charAt(0),10))?t:"\\3"+t.charAt(0)+" "+t.substring(1,t.length):""},getMouseButton:function(t){return!!(t=t.data?t.data.$:t)&&(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.ie6Compat)?4===t.button?CKEDITOR.MOUSE_BUTTON_MIDDLE:1===t.button?CKEDITOR.MOUSE_BUTTON_LEFT:CKEDITOR.MOUSE_BUTTON_RIGHT:t.button)},convertHexStringToBytes:function(t){var g,c=[],m=t.length/2;for(g=0;g<m;g++)c.push(parseInt(t.substr(2*g,2),16));return c},convertBytesToBase64:function(t){var g,c="",m=t.length;for(g=0;g<m;g+=3){var D,C=t.slice(g,g+3),h=C.length,I=[];if(3>h)for(D=h;3>D;D++)C[D]=0;for(I[0]=(252&C[0])>>2,I[1]=(3&C[0])<<4|C[1]>>4,I[2]=(15&C[1])<<2|(192&C[2])>>6,I[3]=63&C[2],D=0;4>D;D++)c=D<=h?c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(I[D]):c+"="}return c},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",windowtext:"windowtext",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_borderStyle:"none hidden dotted dashed solid double groove ridge inset outset".split(" "),_widthRegExp:/^(thin|medium|thick|[\+-]?\d+(\.\d+)?[a-z%]+|[\+-]?0+(\.0+)?|\.\d+[a-z%]+)$/,_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(t){var c={},m=this._findColor(t);return m.length&&(c.color=m[0],CKEDITOR.tools.array.forEach(m,function(g){t=t.replace(g,"")})),(t=CKEDITOR.tools.trim(t))&&(c.unprocessed=t),c},margin:function(t){return CKEDITOR.tools.style.parse.sideShorthand(t,function(c){return c.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset|revert)/g)||["0px"]})},sideShorthand:function(t,c){function m(h){g.top=C[h[0]],g.right=C[h[1]],g.bottom=C[h[2]],g.left=C[h[3]]}var g={},C=c?c(t):t.split(/\s+/);switch(C.length){case 1:m([0,0,0,0]);break;case 2:m([0,1,0,1]);break;case 3:m([0,1,2,1]);break;case 4:m([0,1,2,3])}return g},border:function(t){return CKEDITOR.tools.style.border.fromCssRule(t)},_findColor:function(t){var c=[],m=CKEDITOR.tools.array;return(c=(c=c.concat(t.match(this._rgbaRegExp)||[])).concat(t.match(this._hslaRegExp)||[])).concat(m.filter(t.split(/\s+/),function(g){return!!g.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)||g.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(t,c,m){var g=[];return this.forEach(t,function(C,h){c.call(m,C,h,t)&&g.push(C)}),g},find:function(t,c,m){for(var g=t.length,C=0;C<g;){if(c.call(m,t[C],C,t))return t[C];C++}},forEach:function(t,c,m){var C,g=t.length;for(C=0;C<g;C++)c.call(m,t[C],C,t)},map:function(t,c,m){for(var g=[],C=0;C<t.length;C++)g.push(c.call(m,t[C],C,t));return g},reduce:function(t,c,m,g){for(var C=0;C<t.length;C++)m=c.call(g,m,t[C],C,t);return m},every:function(t,c,m){return!t.length||(c=this.filter(t,c,m),t.length===c.length)}},object:{DONT_ENUMS:"toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),entries:function(t){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(t),function(c){return[c,t[c]]})},values:function(t){return CKEDITOR.tools.array.map(CKEDITOR.tools.object.keys(t),function(c){return t[c]})},keys:function(t){var C,c=Object.prototype.hasOwnProperty,m=[],g=CKEDITOR.tools.object.DONT_ENUMS;for(C in t)m.push(C);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)for(C=0;C<g.length;C++)c.call(t,g[C])&&m.push(g[C]);return m},findKey:function(t,c){if("object"!=typeof t)return null;for(var m in t)if(t[m]===c)return m;return null},merge:function(t,c){var m=CKEDITOR.tools,g=m.clone(t),C=m.clone(c);return m.array.forEach(m.object.keys(C),function(h){g[h]="object"==typeof C[h]&&"object"==typeof g[h]?m.object.merge(g[h],C[h]):C[h]}),g}},getAbsoluteRectPosition:function(t,c){var g=CKEDITOR.tools.copy(c);!function m(h){if(h){var I=h.getClientRect();g.top+=I.top,g.left+=I.left,"x"in g&&"y"in g&&(g.x+=I.x,g.y+=I.y),m(h.getWindow().getFrame())}}(t.getFrame());var C=CKEDITOR.document.getWindow().getScrollPosition();return g.top+=C.y,g.left+=C.x,"x"in g&&"y"in g&&(g.y+=C.y,g.x+=C.x),g.right=g.left+g.width,g.bottom=g.top+g.height,g}},e.prototype={reset:function(){this._lastOutput=0,this._clearTimer()},_reschedule:function(){return!1},_call:function(){this._output()},_clearTimer:function(){this._scheduledTimer&&clearTimeout(this._scheduledTimer),this._scheduledTimer=0}},(d.prototype=CKEDITOR.tools.prototypedCopy(e.prototype))._reschedule=function(){this._scheduledTimer&&this._clearTimer()},d.prototype._call=function(){this._output.apply(this._context,this._args)},CKEDITOR.tools.buffers={},CKEDITOR.tools.buffers.event=e,CKEDITOR.tools.buffers.throttle=d,CKEDITOR.tools.style.border=CKEDITOR.tools.createClass({$:function(t){this.width=(t=t||{}).width,this.style=t.style,this.color=t.color,this._.normalize()},_:{normalizeMap:{color:[[/windowtext/g,"black"]]},normalize:function(){for(var t in this._.normalizeMap){var c=this[t];c&&(this[t]=CKEDITOR.tools.array.reduce(this._.normalizeMap[t],function(m,g){return m.replace(g[0],g[1])},c))}}},proto:{toString:function(){return CKEDITOR.tools.array.filter([this.width,this.style,this.color],function(t){return!!t}).join(" ")}},statics:{fromCssRule:function(t){var c={},m=t.split(/\s+/g);return(t=CKEDITOR.tools.style.parse._findColor(t)).length&&(c.color=t[0]),CKEDITOR.tools.array.forEach(m,function(g){c.style||-1===CKEDITOR.tools.indexOf(CKEDITOR.tools.style.parse._borderStyle,g)?!c.width&&CKEDITOR.tools.style.parse._widthRegExp.test(g)&&(c.width=g):c.style=g}),new CKEDITOR.tools.style.border(c)},splitCssValues:function(t,c){c=c||{};var m=CKEDITOR.tools.array.reduce(["width","style","color"],function(g,C){var h=t["border-"+C]||c[C];return g[C]=h?CKEDITOR.tools.style.parse.sideShorthand(h):null,g},{});return CKEDITOR.tools.array.reduce(["top","right","bottom","left"],function(g,C){var I,h={};for(I in m)h[I]=t["border-"+C+"-"+I]||m[I]&&m[I][C];return g["border-"+C]=new CKEDITOR.tools.style.border(h),g},{})}}}),CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf,CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray,CKEDITOR.MOUSE_BUTTON_LEFT=0,CKEDITOR.MOUSE_BUTTON_MIDDLE=1,CKEDITOR.MOUSE_BUTTON_RIGHT=2}(),CKEDITOR.dtd=(d=function(l,n){for(var t=CKEDITOR.tools.clone(l),c=1;c<arguments.length;c++)for(var m in n=arguments[c])delete t[m];return t},a={},o={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},u={command:1,link:1,meta:1,noscript:1,script:1,style:1},f={},r={center:1,dir:1,noframes:1},(e=CKEDITOR.tools.extend)(s={},{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},i={"#":1},{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(a,o,s,r),d={a:d(s,{a:1,button:1}),abbr:s,address:a,area:f,article:a,aside:a,audio:e({source:1,track:1},a),b:s,base:f,bdi:s,bdo:s,blockquote:a,body:a,br:f,button:d(s,{a:1,button:1}),canvas:s,caption:a,cite:s,code:s,col:f,colgroup:{col:1},command:f,datalist:e({option:1},s),dd:a,del:s,details:e({summary:1},a),dfn:s,div:a,dl:{dt:1,dd:1},dt:a,em:s,embed:f,fieldset:e({legend:1},a),figcaption:a,figure:e({figcaption:1},a),footer:a,form:a,h1:s,h2:s,h3:s,h4:s,h5:s,h6:s,head:e({title:1,base:1},u),header:a,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:f,html:e({head:1,body:1},a,u),i:s,iframe:i,img:f,input:f,ins:s,kbd:s,keygen:f,label:s,legend:s,li:a,link:f,main:a,map:a,mark:s,menu:e({li:1},a),meta:f,meter:d(s,{meter:1}),nav:a,noscript:e({link:1,meta:1,style:1},s),object:e({param:1},s),ol:{li:1},optgroup:{option:1},option:i,output:s,p:s,param:f,pre:s,progress:d(s,{progress:1}),q:s,rp:s,rt:s,ruby:e({rp:1,rt:1},s),s,samp:s,script:i,section:a,select:{optgroup:1,option:1},small:s,source:f,span:s,strong:s,style:i,sub:s,summary:e({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},s),sup:s,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:a,textarea:i,tfoot:{tr:1},th:a,thead:{tr:1},time:d(s,{time:1}),title:i,tr:{th:1,td:1},track:f,u:s,ul:{li:1},var:s,video:e({source:1,track:1},a),wbr:f,acronym:s,applet:e({param:1},a),basefont:f,big:s,center:a,dialog:f,dir:{li:1},font:s,isindex:f,noframes:a,strike:s,tt:s},e(d,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},o,r),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:s,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},d.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),d),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var d=this.$;d.preventDefault?d.preventDefault():d.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(d,s){return function(a){"undefined"!=typeof CKEDITOR&&d.fire(s,new CKEDITOR.dom.event(a))}};return{getPrivate:function(){var d;return(d=this.getCustomData("_"))||this.setCustomData("_",d={}),d},on:function(d){var s=this.getCustomData("_cke_nativeListeners");return s||this.setCustomData("_cke_nativeListeners",s={}),s[d]||(s=s[d]=e(this,d),this.$.addEventListener?this.$.addEventListener(d,s,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+d,s)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(d){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(d)){var s=this.getCustomData("_cke_nativeListeners"),a=s&&s[d];a&&(this.$.removeEventListener?this.$.removeEventListener(d,a,!1):this.$.detachEvent&&this.$.detachEvent("on"+d,a),delete s[d])}},removeAllListeners:function(){var s,d=this.getCustomData("_cke_nativeListeners");for(s in d){var a=d[s];this.$.detachEvent?this.$.detachEvent("on"+s,a):this.$.removeEventListener&&this.$.removeEventListener(s,a,!1),delete d[s]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var d={};CKEDITOR.on("reset",function(){d={}}),e.equals=function(s){try{return s&&s.$===this.$}catch(a){return!1}},e.setCustomData=function(s,a){var o=this.getUniqueId();return(d[o]||(d[o]={}))[s]=a,this},e.getCustomData=function(s){var a=this.$["data-cke-expando"];return(a=a&&d[a])&&s in a?a[s]:null},e.removeCustomData=function(s){var a,o,u;return(a=(a=this.$["data-cke-expando"])&&d[a])&&(o=a[s],u=s in a,delete a[s]),u?o:null},e.clearCustomData=function(){this.removeAllListeners();var s=this.$["data-cke-expando"];s&&delete d[s]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,d){return e.append(this,d),e},clone:function(e,d){var o=this.$.cloneNode(e);return function s(u){if(u["data-cke-expando"]&&(u["data-cke-expando"]=!1),(u.nodeType==CKEDITOR.NODE_ELEMENT||u.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(d||u.nodeType!=CKEDITOR.NODE_ELEMENT||u.removeAttribute("id",!1),e)){u=u.childNodes;for(var f=0;f<u.length;f++)s(u[f])}}(o),o=new CKEDITOR.dom.node(o),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&function a(u){if(u.type==CKEDITOR.NODE_ELEMENT||u.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(u.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var f=u.getName();":"==f[0]&&u.renameNode(f.substring(1))}if(e)for(f=0;f<u.getChildCount();f++)a(u.getChild(f))}}(o),o},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var d=[],s=this.getDocument().$.documentElement,a=this.$;a&&a!=s;){var o=a.parentNode;o&&d.unshift(this.getIndex.call({$:a},e)),a=o}return d},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function d(f,i){var r=i?f.nextSibling:f.previousSibling;return r&&r.nodeType==CKEDITOR.NODE_TEXT?s(r)?d(r,i):r:null}function s(f){return!f.nodeValue||f.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var u,a=this.$,o=-1;if(!this.$.parentNode||e&&a.nodeType==CKEDITOR.NODE_TEXT&&s(a)&&!d(a)&&!d(a,!0))return-1;do{e&&a!=this.$&&a.nodeType==CKEDITOR.NODE_TEXT&&(u||s(a))||(o++,u=a.nodeType==CKEDITOR.NODE_TEXT)}while(a=a.previousSibling);return o},getNextSourceNode:function(e,d,s){if(s&&!s.call){var a=s;s=function(u){return!u.equals(a)}}var o;if(!(e=!e&&this.getFirst&&this.getFirst())){if(this.type==CKEDITOR.NODE_ELEMENT&&s&&!1===s(this,!0))return null;e=this.getNext()}for(;!e&&(o=(o||this).getParent());){if(s&&!1===s(o,!0))return null;e=o.getNext()}return!e||s&&!1===s(e)?null:d&&d!=e.type?e.getNextSourceNode(!1,d,s):e},getPreviousSourceNode:function(e,d,s){if(s&&!s.call){var a=s;s=function(u){return!u.equals(a)}}var o;if(!(e=!e&&this.getLast&&this.getLast())){if(this.type==CKEDITOR.NODE_ELEMENT&&s&&!1===s(this,!0))return null;e=this.getPrevious()}for(;!e&&(o=(o||this).getParent());){if(s&&!1===s(o,!0))return null;e=o.getPrevious()}return!e||s&&!1===s(e)?null:d&&e.type!=d?e.getPreviousSourceNode(!1,d,s):e},getPrevious:function(e){var s,d=this.$;do{s=(d=d.previousSibling)&&10!=d.nodeType&&new CKEDITOR.dom.node(d)}while(s&&e&&!e(s));return s},getNext:function(e){var s,d=this.$;do{s=(d=d.nextSibling)&&new CKEDITOR.dom.node(d)}while(s&&e&&!e(s));return s},getParent:function(e){var d=this.$.parentNode;return d&&(d.nodeType==CKEDITOR.NODE_ELEMENT||e&&d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(d):null},getParents:function(e){var d=this,s=[];do{s[e?"push":"unshift"](d)}while(d=d.getParent());return s},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var d=this.contains?this:this.getParent();do{if(d.contains(e))return d}while(d=d.getParent());return null},getPosition:function(e){var d=this.$,s=e.$;if(d.compareDocumentPosition)return d.compareDocumentPosition(s);if(d==s)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(d.contains){if(d.contains(s))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(s.contains(d))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in d)return 0>d.sourceIndex||0>s.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:d.sourceIndex<s.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}d=this.getAddress(),e=e.getAddress(),s=Math.min(d.length,e.length);for(var a=0;a<s;a++)if(d[a]!=e[a])return d[a]<e[a]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return d.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,d){var a,o,s=this.$;for(d||(s=s.parentNode),"function"==typeof e?(o=!0,a=e):(o=!1,a=function(u){return u="string"==typeof u.nodeName?u.nodeName.toLowerCase():"","string"==typeof e?u==e:u in e});s;){if(a(o?new CKEDITOR.dom.node(s):s))return new CKEDITOR.dom.node(s);try{s=s.parentNode}catch(u){s=null}}return null},hasAscendant:function(e,d){var s=this.$;for(d||(s=s.parentNode);s;){if(s.nodeName&&s.nodeName.toLowerCase()==e)return!0;s=s.parentNode}return!1},move:function(e,d){e.append(this.remove(),d)},remove:function(e){var d=this.$,s=d.parentNode;if(s){if(e)for(;e=d.firstChild;)s.insertBefore(d.removeChild(e),d);s.removeChild(d)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.ltrim(e.getText()),s=e.getLength();if(!d){e.remove();continue}d.length<s&&(e.split(s-d.length),this.$.removeChild(this.$.firstChild))}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var d=CKEDITOR.tools.rtrim(e.getText()),s=e.getLength();if(!d){e.remove();continue}d.length<s&&(e.split(d.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&1==e.type&&"br"==e.nodeName.toLowerCase()&&e.parentNode.removeChild(e)},isReadOnly:function(e){var d=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(d=this.getParent()),CKEDITOR.env.edge&&d&&d.is("textarea","input")&&(e=!0),!e&&d&&void 0!==d.$.isContentEditable)return!(d.$.isContentEditable||d.data("cke-editable"));for(;d;){if(d.data("cke-editable"))return!1;if(d.hasAttribute("contenteditable"))return"false"==d.getAttribute("contenteditable");d=d.getParent()}return!0}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,d="CSS1Compat"==e.compatMode;return{width:(d?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(d?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:{x:(e=e.document).documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0}},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var d=new CKEDITOR.dom.element("link");d.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(d)}},appendStyleText:function(e){if(this.$.createStyleSheet){var d=this.$.createStyleSheet("");d.cssText=e}else{var s=new CKEDITOR.dom.element("style",this);s.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(s)}return d||s.$.sheet},createElement:function(e,d){var s=new CKEDITOR.dom.element(e,this);return d&&(d.attributes&&s.setAttributes(d.attributes),d.styles&&s.setStyles(d.styles)),s},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var e;try{e=this.$.activeElement}catch(d){return null}return new CKEDITOR.dom.element(e)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,d){for(var s=this.$.documentElement,a=0;s&&a<e.length;a++){var o=e[a];if(d)for(var u=-1,f=0;f<s.childNodes.length;f++){var i=s.childNodes[f];if((!0!==d||3!=i.nodeType||!i.previousSibling||3!=i.previousSibling.nodeType)&&++u==o){s=i;break}}else s=s.childNodes[o]}return s?new CKEDITOR.dom.node(s):null},getElementsByTag:function(e,d){return CKEDITOR.env.ie&&8>=document.documentMode||!d||(e=d+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null},toArray:function(){return CKEDITOR.tools.array.map(this.$,function(e){return new CKEDITOR.dom.node(e)})}},CKEDITOR.dom.element=function(e,d){"string"==typeof e&&(e=(d?d.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e="string"==typeof e?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,d){var s=new CKEDITOR.dom.element("div",d);return s.setHtml(e),s.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,d,s,a){var o=d.getCustomData("list_marker_id")||d.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),u=d.getCustomData("list_marker_names")||d.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[o]=d,u[s]=1,d.setCustomData(s,a)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var d in e)CKEDITOR.dom.element.clearMarkers(e,e[d],1)},CKEDITOR.dom.element.clearMarkers=function(e,d,s){var u,a=d.getCustomData("list_marker_names"),o=d.getCustomData("list_marker_id");for(u in a)d.removeCustomData(u);d.removeCustomData("list_marker_names"),s&&(d.removeCustomData("list_marker_id"),delete e[o])},function(){function e(i,r){return-1<(" "+i+" ").replace(u," ").indexOf(" "+r+" ")}function d(i){var r=!0;return i.$.id||(i.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),r=!1),function(){r||i.removeAttribute("id")}}function s(i,r){var l=CKEDITOR.tools.escapeCss(i.$.id);return"#"+l+" "+r.split(/,\s*/).join(", #"+l+" ")}function a(i){for(var r=0,l=0,n=f[i].length;l<n;l++)r+=parseFloat(this.getComputedStyle(f[i][l])||0,10)||0;return r}var o=void 0!==(o=document.createElement("_").classList)&&null!==String(o.add).match(/\[Native code\]/gi),u=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:o?function(i){return this.$.classList.add(i),this}:function(i){var r=this.$.className;return r&&(e(r,i)||(r+=" "+i)),this.$.className=r||i,this},removeClass:o?function(i){var r=this.$;return r.classList.remove(i),r.className||r.removeAttribute("class"),this}:function(i){var r=this.getAttribute("class");return r&&e(r,i)&&((r=r.replace(new RegExp("(?:^|\\s+)"+i+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",r):this.removeAttribute("class")),this},hasClass:function(i){return e(this.$.className,i)},append:function(i,r){return"string"==typeof i&&(i=this.getDocument().createElement(i)),r?this.$.insertBefore(i.$,this.$.firstChild):this.$.appendChild(i.$),i},appendHtml:function(i){if(this.$.childNodes.length){var r=new CKEDITOR.dom.element("div",this.getDocument());r.setHtml(i),r.moveChildren(this)}else this.setHtml(i)},appendText:function(i){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=i:this.append(new CKEDITOR.dom.text(i))},appendBogus:function(i){if(i||CKEDITOR.env.needsBrFiller){for(i=this.getLast();i&&i.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(i.getText());)i=i.getPrevious();i&&i.is&&i.is("br")||(i=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&i.setAttribute("type","_moz"),this.append(i))}},breakParent:function(i,r){var l=new CKEDITOR.dom.range(this.getDocument());l.setStartAfter(this),l.setEndAfter(i);var t,n=l.extractContents(!1,r||!1);if(l.insertNode(this.remove()),CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(l=new CKEDITOR.dom.element("div");t=n.getFirst();)t.$.style.backgroundColor&&(t.$.style.backgroundColor=t.$.style.backgroundColor),l.append(t);l.insertAfter(this),l.remove(!0)}else n.insertAfterNode(this)},contains:document.compareDocumentPosition?function(i){return!!(16&this.$.compareDocumentPosition(i.$))}:function(i){var r=this.$;return i.type!=CKEDITOR.NODE_ELEMENT?r.contains(i.getParent().$):r!=i.$&&r.contains(i.$)},focus:function(){function i(){try{this.$.focus()}catch(r){}}return function(r){r?CKEDITOR.tools.setTimeout(i,100,this):i.call(this)}}(),getHtml:function(){var i=this.$.innerHTML;return CKEDITOR.env.ie?i.replace(/<\?[^>]*>/g,""):i},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var i=this.$.ownerDocument.createElement("div");return i.appendChild(this.$.cloneNode(!0)),i.innerHTML},getClientRect:function(i){var r=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!r.width&&(r.width=r.right-r.left),!r.height&&(r.height=r.bottom-r.top),i?CKEDITOR.tools.getAbsoluteRectPosition(this.getWindow(),r):r},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(i){try{var r=this.$;if(this.getParent())return r.innerHTML=i;var l=this.getDocument()._getHtml5ShivFrag();return l.appendChild(r),r.innerHTML=i,l.removeChild(r),i}catch(n){for(this.$.innerHTML="",(r=new CKEDITOR.dom.element("body",this.getDocument())).$.innerHTML=i,r=r.getChildren();r.count();)this.append(r.getItem(0));return i}}:function(i){return this.$.innerHTML=i},setText:function(){var i=document.createElement("p");return i.innerHTML="x",i=i.textContent,function(r){this.$[i?"textContent":"innerText"]=r}}(),getAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(r){switch(r){case"class":r="className";break;case"http-equiv":r="httpEquiv";break;case"name":return this.$.name;case"tabindex":return 0!==(r=this.$.getAttribute(r,2))&&0===this.$.tabIndex&&(r=null),r;case"checked":return((r=this.$.attributes.getNamedItem(r)).specified?r.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[r];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(r,2)}:function(r){return this.$.getAttribute(r,2)},getAttributes:function(i){var n,r={},l=this.$.attributes;for(i=CKEDITOR.tools.isArray(i)?i:[],n=0;n<l.length;n++)-1===CKEDITOR.tools.indexOf(i,l[n].name)&&(r[l[n].name]=l[n].value);return r},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(i){var r=this.getWindow().$.getComputedStyle(this.$,null);return r?r.getPropertyValue(i):""}:function(i){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(i)]},getDtd:function(){var i=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return i},i},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var i=this.$.tabIndex;return 0!==i||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?i:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var i=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var r=this.$.scopeName;"HTML"!=r&&(i=r.toLowerCase()+":"+i)}return this.getName=function(){return i},this.getName()},getValue:function(){return this.$.value},getFirst:function(i){var r=this.$.firstChild;return(r=r&&new CKEDITOR.dom.node(r))&&i&&!i(r)&&(r=r.getNext(i)),r},getLast:function(i){var r=this.$.lastChild;return(r=r&&new CKEDITOR.dom.node(r))&&i&&!i(r)&&(r=r.getPrevious(i)),r},getStyle:function(i){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(i)]},is:function(){var i=this.getName();if("object"==typeof arguments[0])return!!arguments[0][i];for(var r=0;r<arguments.length;r++)if(arguments[r]==i)return!0;return!1},isEditable:function(i){var r=this.getName();return!(this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[r]||CKEDITOR.dtd.$empty[r]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()||!1!==i&&(!(i=CKEDITOR.dtd[r]||CKEDITOR.dtd.span)||!i["#"]))},isIdentical:function(i){var r=this.clone(0,1);if(i=i.clone(0,1),r.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),i.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),r.$.isEqualNode)return r.$.style.cssText=CKEDITOR.tools.normalizeCssText(r.$.style.cssText),i.$.style.cssText=CKEDITOR.tools.normalizeCssText(i.$.style.cssText),r.$.isEqualNode(i.$);if(r=r.getOuterHtml(),i=i.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var l=this.getParent();l.type==CKEDITOR.NODE_ELEMENT&&((l=l.clone()).setHtml(r),r=l.getHtml(),l.setHtml(i),i=l.getHtml())}return r==i},isVisible:function(){var r,l,i=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return i&&CKEDITOR.env.webkit&&!(r=this.getWindow()).equals(CKEDITOR.document.getWindow())&&(l=r.$.frameElement)&&(i=new CKEDITOR.dom.element(l).isVisible()),!!i},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var i=this.getChildren(),r=0,l=i.count();r<l;r++){var n=i.getItem(r);if((n.type!=CKEDITOR.NODE_ELEMENT||!n.data("cke-bookmark"))&&(n.type==CKEDITOR.NODE_ELEMENT&&!n.isEmptyInlineRemoveable()||n.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(n.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var i=this.$.attributes,r=0;r<i.length;r++){var l=i[r];switch(l.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(l.specified)return!0}}return!1}:function(){var i=this.$.attributes,r=i.length,l={"data-cke-expando":1,_moz_dirty:1};return 0<r&&(2<r||!l[i[0].nodeName]||2==r&&!l[i[1].nodeName])},hasAttribute:function(){function i(r){var l=this.$.attributes.getNamedItem(r);if("input"==this.getName())switch(r){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return"checkbox"==(r=this.getAttribute("type"))||"radio"==r?"on"!=this.$.value:!!this.$.value}return!!l&&l.specified}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(r){return"name"==r?!!this.$.name:i.call(this,r)}:i:function(r){return!!this.$.attributes.getNamedItem(r)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(i,r){var n,l=this.$;if(l!=(i=i.$))if(r)for(;n=l.lastChild;)i.insertBefore(l.removeChild(n),i.firstChild);else for(;n=l.firstChild;)i.appendChild(l.removeChild(n))},mergeSiblings:function(){function i(r,l,n){if(l&&l.type==CKEDITOR.NODE_ELEMENT){for(var t=[];l.data("cke-bookmark")||l.isEmptyInlineRemoveable();)if(t.push(l),!(l=n?l.getNext():l.getPrevious())||l.type!=CKEDITOR.NODE_ELEMENT)return;if(r.isIdentical(l)){for(var c=n?r.getLast():r.getFirst();t.length;)t.shift().move(r,!n);l.moveChildren(r,!n),l.remove(),c&&c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings()}}}return function(r){(!1===r||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(i(this,this.getNext(),!0),i(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var i=function(r,l){return this.$.setAttribute(r,l),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(r,l){return"class"==r?this.$.className=l:"style"==r?this.$.style.cssText=l:"tabindex"==r?this.$.tabIndex=l:"checked"==r?this.$.checked=l:"contenteditable"==r?i.call(this,"contentEditable",l):i.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(r,l){if("src"==r&&l.match(/^http:\/\//))try{i.apply(this,arguments)}catch(n){}else i.apply(this,arguments);return this}:i}(),setAttributes:function(i){for(var r in i)this.setAttribute(r,i[r]);return this},setValue:function(i){return this.$.value=i,this},removeAttribute:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(r){"class"==r?r="className":"tabindex"==r?r="tabIndex":"contenteditable"==r&&(r="contentEditable"),this.$.removeAttribute(r)}:function(r){this.$.removeAttribute(r)},removeAttributes:function(i){if(CKEDITOR.tools.isArray(i))for(var r=0;r<i.length;r++)this.removeAttribute(i[r]);else for(r in i=i||this.getAttributes())i.hasOwnProperty(r)&&this.removeAttribute(r)},removeStyle:function(i){if((r=this.$.style).removeProperty||"border"!=i&&"margin"!=i&&"padding"!=i)r.removeProperty?r.removeProperty(i):r.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(i)),this.$.style.cssText||this.removeAttribute("style");else{var n,l=["top","left","right","bottom"];"border"==i&&(n=["color","style","width"]);for(var r=[],t=0;t<l.length;t++)if(n)for(var c=0;c<n.length;c++)r.push([i,l[t],n[c]].join("-"));else r.push([i,l[t]].join("-"));for(i=0;i<r.length;i++)this.removeStyle(r[i])}},setStyle:function(i,r){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(i)]=r,this},setStyles:function(i){for(var r in i)this.setStyle(r,i[r]);return this},setOpacity:function(i){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(i=Math.round(100*i),this.setStyle("filter",100<=i?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+i+")")):this.setStyle("opacity",i)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var r=this.getElementsByTag("*"),l=0,n=r.count();l<n;l++)r.getItem(l).setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var i=this;"html"!=i.getName();){if("static"!=i.getComputedStyle("position"))return i;i=i.getParent()}return null},getDocumentPosition:function(i){var r=0,l=0,n=this.getDocument(),t=n.getBody(),c="BackCompat"==n.$.compatMode;if(!document.documentElement.getBoundingClientRect||CKEDITOR.env.ie&&8===CKEDITOR.env.version)for(C=this,h=null;C&&"body"!=C.getName()&&"html"!=C.getName();){for(r+=C.$.offsetLeft-C.$.scrollLeft,l+=C.$.offsetTop-C.$.scrollTop,C.equals(this)||(r+=C.$.clientLeft||0,l+=C.$.clientTop||0);h&&!h.equals(C);)r-=h.$.scrollLeft,l-=h.$.scrollTop,h=h.getParent();h=C,C=(m=C.$.offsetParent)?new CKEDITOR.dom.element(m):null}else{var m=this.$.getBoundingClientRect(),g=n.$.documentElement,C=g.clientTop||t.$.clientTop||0,h=g.clientLeft||t.$.clientLeft||0,I=!0;CKEDITOR.env.ie&&(I=n.getDocumentElement().contains(this),n=n.getBody().contains(this),I=c&&n||!c&&I),I&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(r=t.$.scrollLeft||g.scrollLeft,l=t.$.scrollTop||g.scrollTop):(r=(l=c?t.$:g).scrollLeft,l=l.scrollTop),r=m.left+r-h,l=m.top+l-C)}return i&&(m=this.getWindow(),C=i.getWindow(),!m.equals(C)&&m.$.frameElement&&(r+=(i=new CKEDITOR.dom.element(m.$.frameElement).getDocumentPosition(i)).x,l+=i.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||c||(r+=this.$.clientLeft?1:0,l+=this.$.clientTop?1:0),{x:r,y:l}},scrollIntoView:function(i){var r=this.getParent();if(r)do{if((r.$.clientWidth&&r.$.clientWidth<r.$.scrollWidth||r.$.clientHeight&&r.$.clientHeight<r.$.scrollHeight)&&!r.is("body")&&this.scrollIntoParent(r,i,1),r.is("html")){var l=r.getWindow();try{var n=l.$.frameElement;n&&(r=new CKEDITOR.dom.element(n))}catch(t){}}}while(r=r.getParent())},scrollIntoParent:function(i,r,l){var n,t,c,m;function g(O,R){/body|html/.test(i.getName())?i.getWindow().$.scrollBy(O,R):(i.$.scrollLeft+=O,i.$.scrollTop+=R)}function C(O,R){var _={x:0,y:0};if(!O.is(I?"body":"html")){var w=O.$.getBoundingClientRect();_.x=w.left,_.y=w.top}return(w=O.getWindow()).equals(R)||(w=C(CKEDITOR.dom.element.get(w.$.frameElement),R),_.x+=w.x,_.y+=w.y),_}function h(O,R){return parseInt(O.getComputedStyle("margin-"+R)||0,10)||0}!i&&(i=this.getWindow());var I="BackCompat"==(c=i.getDocument()).$.compatMode;i instanceof CKEDITOR.dom.window&&(i=I?c.getBody():c.getDocumentElement()),CKEDITOR.env.webkit&&(c=this.getEditor(!1))&&(c._.previousScrollTop=null),t=C(this,c=i.getWindow());var D=C(i,c),k=this.$.offsetHeight;n=this.$.offsetWidth;var b=i.$.clientHeight,p=i.$.clientWidth;c=t.x-h(this,"left")-D.x||0,m=t.y-h(this,"top")-D.y||0,n=t.x+n+h(this,"right")-(D.x+p)||0,t=t.y+k+h(this,"bottom")-(D.y+b)||0,(0>m||0<t)&&g(0,!0===r?m:!1===r?t:0>m?m:t),l&&(0>c||0<n)&&g(0>c?c:n,0)},setState:function(i,r,l){switch(r=r||"cke",i){case CKEDITOR.TRISTATE_ON:this.addClass(r+"_on"),this.removeClass(r+"_off"),this.removeClass(r+"_disabled"),l&&this.setAttribute("aria-pressed",!0),l&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(r+"_disabled"),this.removeClass(r+"_off"),this.removeClass(r+"_on"),l&&this.setAttribute("aria-disabled",!0),l&&this.removeAttribute("aria-pressed");break;default:this.addClass(r+"_off"),this.removeClass(r+"_on"),this.removeClass(r+"_disabled"),l&&this.removeAttribute("aria-pressed"),l&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var i=this.$;return i&&new CKEDITOR.dom.document(i.contentWindow.document)},copyAttributes:function(i,r){var l=this.$.attributes;r=r||{};for(var n=0;n<l.length;n++){var m,t=l[n],c=t.nodeName.toLowerCase();c in r||("checked"==c&&(m=this.getAttribute(c))?i.setAttribute(c,m):(!CKEDITOR.env.ie||this.hasAttribute(c))&&(null===(m=this.getAttribute(c))&&(m=t.nodeValue),i.setAttribute(c,m)))}""!==this.$.style.cssText&&(i.$.style.cssText=this.$.style.cssText)},renameNode:function(i){if(this.getName()!=i){var r=this.getDocument();i=new CKEDITOR.dom.element(i,r),this.copyAttributes(i),this.moveChildren(i),this.getParent(!0)&&this.$.parentNode.replaceChild(i.$,this.$),i.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=i.$,delete this.getName}},getChild:function(){function i(r,l){var n=r.childNodes;if(0<=l&&l<n.length)return n[l]}return function(r){var l=this.$;if(r.slice)for(r=r.slice();0<r.length&&l;)l=i(l,r.shift());else l=i(l,r);return l?new CKEDITOR.dom.node(l):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function i(r){return r.type==CKEDITOR.NODE_ELEMENT&&r.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(r){r.data.getTarget().getAscendant(i,!0)||r.data.preventDefault()})},getDirection:function(i){return i?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(i,r){return i="data-"+i,void 0===r?this.getAttribute(i):(!1===r?this.removeAttribute(i):this.setAttribute(i,r),null)},getEditor:function(i){var l,n,t,r=CKEDITOR.instances;for(l in i=i||void 0===i,r)if((n=r[l]).element.equals(this)&&n.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!i&&(t=n.editable())&&(t.equals(this)||t.contains(this)))return n;return null},find:function(i){var r=d(this);return i=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(s(this,i))),r(),i},findOne:function(i){var r=d(this);return i=this.$.querySelector(s(this,i)),r(),i?new CKEDITOR.dom.element(i):null},forEach:function(i,r,l){if(!(l||r&&this.type!=r))var n=i(this);if(!1!==n){l=this.getChildren();for(var t=0;t<l.count();t++)(n=l.getItem(t)).type==CKEDITOR.NODE_ELEMENT?n.forEach(i,r):r&&n.type!=r||i(n)}}});var f={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(i,r,l){"number"==typeof r&&(!l||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(r-=a.call(this,i)),this.setStyle(i,r+"px"))},CKEDITOR.dom.element.prototype.getSize=function(i,r){var l=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(i)],this.$["client"+CKEDITOR.tools.capitalize(i)])||0;return r&&(l-=a.call(this,i)),l}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){(e=e.$).parentNode.insertBefore(this.$,e.nextSibling)},getHtml:function(){var e=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(e),e.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.document.prototype,!0,{find:1,findOne:1}),function(){function e(c,m){var g=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,g.collapsed)return this.end(),null;g.optimize()}var C,h=g.startContainer;C=g.endContainer;var k,I=g.startOffset,D=g.endOffset,b=this.guard,p=this.type,O=c?"getPreviousSourceNode":"getNextSourceNode";if(!c&&!this._.guardLTR){var R=C.type==CKEDITOR.NODE_ELEMENT?C:C.getParent(),_=C.type==CKEDITOR.NODE_ELEMENT?C.getChild(D):C.getNext();this._.guardLTR=function(y,F){return!(F&&R.equals(y)||_&&y.equals(_)||y.type==CKEDITOR.NODE_ELEMENT&&F&&y.equals(g.root))}}if(c&&!this._.guardRTL){var w=h.type==CKEDITOR.NODE_ELEMENT?h:h.getParent(),v=h.type==CKEDITOR.NODE_ELEMENT?I?h.getChild(I-1):null:h.getPrevious();this._.guardRTL=function(y,F){return!(F&&w.equals(y)||v&&y.equals(v)||y.type==CKEDITOR.NODE_ELEMENT&&F&&y.equals(g.root))}}var K=c?this._.guardRTL:this._.guardLTR;for(k=b?function(y,F){return!1!==K(y,F)&&b(y,F)}:K,this.current?C=this.current[O](!1,p,k):(c?C.type==CKEDITOR.NODE_ELEMENT&&(C=0<D?C.getChild(D-1):!1===k(C,!0)?null:C.getPreviousSourceNode(!0,p,k)):(C=h).type==CKEDITOR.NODE_ELEMENT&&((C=C.getChild(I))||(C=!1===k(h,!0)?null:h.getNextSourceNode(!0,p,k))),C&&!1===k(C)&&(C=null));C&&!this._.end;){if(this.current=C,this.evaluator&&!1===this.evaluator(C)){if(m&&this.evaluator)return!1}else if(!m)return C;C=C[O](!1,p,k)}return this.end(),this.current=null}function d(c){for(var m,g=null;m=e.call(this,c);)g=m;return g}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(c){this.range=c,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return!1!==e.call(this,0,1)},checkBackward:function(){return!1!==e.call(this,1,1)},lastForward:function(){return d.call(this)},lastBackward:function(){return d.call(this,1)},reset:function(){delete this.current,this._={}}}});var s={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},a={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(c){return!("none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in a||!s[this.getComputedStyle("display")])||!!(this.is(CKEDITOR.dtd.$block)||c&&this.is(c))},CKEDITOR.dom.walker.blockBoundary=function(c){return function(m){return!(m.type==CKEDITOR.NODE_ELEMENT&&m.isBlockBoundary(c))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(c,m){function g(C){return C&&C.getName&&"span"==C.getName()&&C.data("cke-bookmark")}return function(C){var h,I;return h=C&&C.type!=CKEDITOR.NODE_ELEMENT&&(I=C.getParent())&&g(I),h=c?h:h||g(C),!!(m^h)}},CKEDITOR.dom.walker.whitespaces=function(c){return function(m){var g;return m&&m.type==CKEDITOR.NODE_TEXT&&(g=!CKEDITOR.tools.trim(m.getText())||CKEDITOR.env.webkit&&m.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE),!!(c^g)}},CKEDITOR.dom.walker.invisible=function(c){var m=CKEDITOR.dom.walker.whitespaces(),g=CKEDITOR.env.webkit?1:0;return function(C){return m(C)?C=1:(C.type==CKEDITOR.NODE_TEXT&&(C=C.getParent()),C=C.$.offsetWidth<=g),!!(c^C)}},CKEDITOR.dom.walker.nodeType=function(c,m){return function(g){return!!(m^g.type==c)}},CKEDITOR.dom.walker.bogus=function(c){function m(g){return!u(g)&&!f(g)}return function(g){var C=CKEDITOR.env.needsBrFiller?g.is&&g.is("br"):g.getText&&o.test(g.getText());return C&&(C=g.getParent(),g=g.getNext(m),C=C.isBlockBoundary()&&(!g||g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary())),!!(c^C)}},CKEDITOR.dom.walker.temp=function(c){return function(m){return m.type!=CKEDITOR.NODE_ELEMENT&&(m=m.getParent()),m=m&&m.hasAttribute("data-cke-temp"),!!(c^m)}};var o=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,u=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(),i=CKEDITOR.dom.walker.temp(),r=function(c){return f(c)||u(c)||c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.$inline)&&!c.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(c){return function(m){return m=u(m)||f(m)||i(m),!!(c^m)}};var l=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(c){return function(m){for(var g=0,C=m.getChildCount();g<C;++g)if(!l(m.getChild(g)))return!!c;return!c}};var n=CKEDITOR.dom.walker.empty(),t=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(c){var g,m={};for(g in c)CKEDITOR.dtd[g]["#"]&&(m[g]=1);return m}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(c){return function(m){return m=!l(m)&&!!(m.type==CKEDITOR.NODE_TEXT||m.type==CKEDITOR.NODE_ELEMENT&&(m.is(CKEDITOR.dtd.$inline)||m.is("hr")||"false"==m.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&m.is(t)&&n(m))),!!(c^m)}},CKEDITOR.dom.element.prototype.getBogus=function(){var c=this;do{c=c.getPreviousSourceNode()}while(r(c));return!(!c||!(CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&o.test(c.getText())))&&c}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var d=e instanceof CKEDITOR.dom.document;this.document=d?e:e.getDocument(),this.root=d?e.getBody():e},function(){function e(n){n.collapsed=n.startContainer&&n.endContainer&&n.startContainer.equals(n.endContainer)&&n.startOffset==n.endOffset}function d(n,t,c,m,g){function C(G,Y,Z,te){var S=Z?G.getPrevious():G.getNext();return te&&D||(b||te?Y.append(G.clone(!0,g),Z):(G.remove(),k&&Y.append(G,Z))),S}n.optimizeBookmark();var D=0===t,k=1==t,b=2==t;t=b||k;var w,v,K,y,F,W,G,Y,p=n.startContainer,O=n.endContainer,R=n.startOffset,_=n.endOffset;if(b&&O.type==CKEDITOR.NODE_TEXT&&(p.equals(O)||p.type===CKEDITOR.NODE_ELEMENT&&p.getFirst().equals(O)))c.append(n.document.createText(O.substring(R,_)));else{O.type==CKEDITOR.NODE_TEXT?b?W=!0:O=O.split(_):0<O.getChildCount()?_>=O.getChildCount()?(O=O.getChild(_-1),v=!0):O=O.getChild(_):y=v=!0,p.type==CKEDITOR.NODE_TEXT?b?F=!0:p.split(R):0<p.getChildCount()?0===R?(p=p.getChild(R),w=!0):p=p.getChild(R-1):K=w=!0;for(var E,L,B,x=p.getParents(),T=O.getParents(),N=function(){var G,te=Math.min(x.length,T.length);for(G=0;G<te;G++)if(!x[G].equals(T[G]))return G;return G-1}(),A=x.length-1,P=T.length-1,H=c,q=-1,j=N;j<=A;j++){for(B=(L=x[j]).getNext(),j!=A||L.equals(T[j])&&A<P?t&&(E=H.append(L.clone(0,g))):w?C(L,H,!1,K):F&&H.append(n.document.createText(L.substring(R)));B;){if(B.equals(T[j])){q=j;break}B=C(B,H)}H=E}for(H=c,j=N;j<=P;j++)if(B=(c=T[j]).getPrevious(),c.equals(x[j]))t&&(H=H.getChild(0));else{if(j!=P||c.equals(x[j])&&P<A?t&&(E=H.append(c.clone(0,g))):v?C(c,H,!1,y):W&&H.append(n.document.createText(c.substring(0,_))),j>q)for(;B;)B=C(B,H,!0);H=E}b||(G=N-1,Y=K&&y&&!p.equals(O),G<A-1||G<P-1||Y?(Y?n.moveToPosition(O,CKEDITOR.POSITION_BEFORE_START):P==G+1&&v?n.moveToPosition(T[G],CKEDITOR.POSITION_BEFORE_END):n.moveToPosition(T[G+1],CKEDITOR.POSITION_BEFORE_START),m&&(G=x[G+1])&&G.type==CKEDITOR.NODE_ELEMENT&&((Y=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',n.document)).insertAfter(G),G.mergeSiblings(!1),n.moveToBookmark({startNode:Y}))):n.collapse(!0))}}function s(){var n=!1,t=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!0),m=CKEDITOR.dom.walker.bogus();return function(g){return!(!c(g)&&!t(g))||(m(g)&&!n?n=!0:!(g.type==CKEDITOR.NODE_TEXT&&(g.hasAscendant("pre")||CKEDITOR.tools.trim(g.getText()).length)||g.type==CKEDITOR.NODE_ELEMENT&&!g.is(u)))}}function o(n){return function(){var t;return this[n?"getPreviousNode":"getNextNode"](function(c){return!t&&l(c)&&(t=c),r(c)&&!(f(c)&&c.equals(t))})}}var u={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},f=CKEDITOR.dom.walker.bogus(),i=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,r=CKEDITOR.dom.walker.editable(),l=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var n=new CKEDITOR.dom.range(this.root);return n._setStartContainer(this.startContainer),n.startOffset=this.startOffset,n._setEndContainer(this.endContainer),n.endOffset=this.endOffset,n.collapsed=this.collapsed,n},collapse:function(n){n?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(n){var t=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||d(this,2,t,!1,void 0===n||n),t},deleteContents:function(n){this.collapsed||d(this,0,null,n)},extractContents:function(n,t){var c=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||d(this,1,c,n,void 0===t||t),c},createBookmark:function(n){var t,c,m,g,C=this.collapsed;return(t=this.document.createElement("span")).data("cke-bookmark",1),t.setStyle("display","none"),t.setHtml("&nbsp;"),n&&(m="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",m+(C?"C":"S"))),C||((c=t.clone()).setHtml("&nbsp;"),n&&c.setAttribute("id",m+"E"),(g=this.clone()).collapse(),g.insertNode(c)),(g=this.clone()).collapse(!0),g.insertNode(t),c?(this.setStartAfter(t),this.setEndBefore(c)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),{startNode:n?m+(C?"C":"S"):t,endNode:n?m+"E":c,serializable:n,collapsed:C}},createBookmark2:function(){function n(m){var h,g=m.container,C=m.offset,I=C;if((h=(h=g).type!=CKEDITOR.NODE_ELEMENT||0===I||I==h.getChildCount()?0:h.getChild(I-1).type==CKEDITOR.NODE_TEXT&&h.getChild(I).type==CKEDITOR.NODE_TEXT)&&(C=(g=g.getChild(C-1)).getLength()),g.type==CKEDITOR.NODE_ELEMENT&&0<C){e:{for(h=g;C--;)if(0<=(I=h.getChild(C).getIndex(!0))){C=I;break e}C=-1}C+=1}if(g.type==CKEDITOR.NODE_TEXT){for(h=g,I=0;(h=h.getPrevious())&&h.type==CKEDITOR.NODE_TEXT;)I+=h.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;h=I,g.getText()?C+=h:(I=g.getPrevious(c),h?(C=h,g=I?I.getNext():g.getParent().getFirst()):(g=g.getParent(),C=I?I.getIndex(!0)+1:0))}m.container=g,m.offset=C}function t(m,g){var C=g.getCustomData("cke-fillingChar");if(C){var h=m.container;C.equals(h)&&(m.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=m.offset&&(m.offset=h.getIndex(),m.container=h.getParent()))}}var c=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(m){var g=this.collapsed,C={container:this.startContainer,offset:this.startOffset},h={container:this.endContainer,offset:this.endOffset};return m&&(n(C),t(C,this.root),g||(n(h),t(h,this.root))),{start:C.container.getAddress(m),end:g?null:h.container.getAddress(m),startOffset:C.offset,endOffset:h.offset,normalized:m,collapsed:g,is2:!0}}}(),moveToBookmark:function(n){if(n.is2){var t=this.document.getByAddress(n.start,n.normalized),c=n.startOffset,m=n.end&&this.document.getByAddress(n.end,n.normalized);n=n.endOffset,this.setStart(t,c),m?this.setEnd(m,n):this.collapse(!0)}else t=(c=n.serializable)?this.document.getById(n.startNode):n.startNode,n=c?this.document.getById(n.endNode):n.endNode,this.setStartBefore(t),t.remove(),n?(this.setEndBefore(n),n.remove()):this.collapse(!0)},getBoundaryNodes:function(){var g,n=this.startContainer,t=this.endContainer,c=this.startOffset,m=this.endOffset;if(n.type==CKEDITOR.NODE_ELEMENT)if((g=n.getChildCount())>c)n=n.getChild(c);else if(1>g)n=n.getPreviousSourceNode();else{for(n=n.$;n.lastChild;)n=n.lastChild;n=(n=new CKEDITOR.dom.node(n)).getNextSourceNode()||n}if(t.type==CKEDITOR.NODE_ELEMENT)if((g=t.getChildCount())>m)t=t.getChild(m).getPreviousSourceNode(!0);else if(1>g)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t)}return n.getPosition(t)&CKEDITOR.POSITION_FOLLOWING&&(n=t),{startNode:n,endNode:t}},getCommonAncestor:function(n,t){var m=this.endContainer,c=(c=this.startContainer).equals(m)?n&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(m);return t&&!c.is?c.getParent():c},optimize:function(){var n=this.startContainer,t=this.startOffset;n.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=n.getLength()&&this.setStartAfter(n):this.setStartBefore(n)),t=this.endOffset,(n=this.endContainer).type!=CKEDITOR.NODE_ELEMENT&&(t?t>=n.getLength()&&this.setEndAfter(n):this.setEndBefore(n))},optimizeBookmark:function(){var n=this.startContainer,t=this.endContainer;n.is&&n.is("span")&&n.data("cke-bookmark")&&this.setStartAt(n,CKEDITOR.POSITION_BEFORE_START),t&&t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(n,t){var c=this.startContainer,m=this.startOffset,g=this.collapsed;if((!n||g)&&c&&c.type==CKEDITOR.NODE_TEXT){if(m)if(m>=c.getLength())m=c.getIndex()+1,c=c.getParent();else{var C=c.split(m);m=c.getIndex()+1,c=c.getParent(),this.startContainer.equals(this.endContainer)?this.setEnd(C,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset+=1)}else m=c.getIndex(),c=c.getParent();if(this.setStart(c,m),g)return void this.collapse(!0)}c=this.endContainer,m=this.endOffset,t||g||!c||c.type!=CKEDITOR.NODE_TEXT||(m?(m>=c.getLength()||c.split(m),m=c.getIndex()+1):m=c.getIndex(),c=c.getParent(),this.setEnd(c,m))},enlarge:function(n,t){function c(H){return H&&H.type==CKEDITOR.NODE_ELEMENT&&H.hasAttribute("contenteditable")?null:H}var m=new RegExp(/[^\s\ufeff]/);switch(n){case CKEDITOR.ENLARGE_INLINE:var g=1;case CKEDITOR.ENLARGE_ELEMENT:var C=function(H,E){var L,B;for((L=new CKEDITOR.dom.range(I)).setStart(H,E),L.setEndAt(I,CKEDITOR.POSITION_BEFORE_END),(L=new CKEDITOR.dom.walker(L)).guard=function(q){return!(q.type==CKEDITOR.NODE_ELEMENT&&q.isBlockBoundary())};B=L.next();)if(B.type!=CKEDITOR.NODE_TEXT||(w=B!=H?B.getText():B.substring(E),m.test(w)))return!1;return!0};if(this.collapsed)break;var D,k,b,p,O,_,w,h=this.getCommonAncestor(),I=this.root,R=!1,v=this.startOffset;for((_=this.startContainer).type==CKEDITOR.NODE_TEXT?(v&&(R=!!(_=!CKEDITOR.tools.trim(_.substring(0,v)).length&&_)),_&&((p=_.getPrevious())||(b=_.getParent()))):(v&&(p=_.getChild(v-1)||_.getLast()),p||(b=_)),b=c(b);b||p;){if(b&&!p){if(!O&&b.equals(h)&&(O=!0),g?b.isBlockBoundary():!I.contains(b))break;R&&"inline"==b.getComputedStyle("display")||(R=!1,O?D=b:this.setStartBefore(b)),p=b.getPrevious()}for(;p;)if(_=!1,p.type==CKEDITOR.NODE_COMMENT)p=p.getPrevious();else{if(p.type==CKEDITOR.NODE_TEXT)w=p.getText(),m.test(w)&&(p=null),_=/[\s\ufeff]$/.test(w);else if((p.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||t&&p.is("br"))&&!p.data("cke-bookmark"))if(R&&CKEDITOR.dtd.$removeEmpty[p.getName()]){if(w=p.getText(),m.test(w))p=null;else{v=p.$.getElementsByTagName("*");for(var y,K=0;y=v[K++];)if(!CKEDITOR.dtd.$removeEmpty[y.nodeName.toLowerCase()]){p=null;break}}p&&(_=!!w.length)}else p=null;if(_&&(R?O?D=b:b&&this.setStartBefore(b):R=!0),p){if(_=p.getPrevious(),!b&&!_){b=p,p=null;break}p=_}else b=null}b&&(b=c(b.getParent()))}for(v=this.endOffset,b=p=null,O=R=!1,(_=this.endContainer).type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(_.substring(v)).length?R=!0:(R=!_.getLength(),v==_.getLength()?(p=_.getNext())||(b=_.getParent()):C(_,v)&&(b=_.getParent())):(p=_.getChild(v))||(b=_);b||p;){if(b&&!p){if(!O&&b.equals(h)&&(O=!0),g?b.isBlockBoundary():!I.contains(b))break;R&&"inline"==b.getComputedStyle("display")||(R=!1,O?k=b:b&&this.setEndAfter(b)),p=b.getNext()}for(;p;){if(_=!1,p.type==CKEDITOR.NODE_TEXT)w=p.getText(),C(p,0)||(p=null),_=/^[\s\ufeff]/.test(w);else if(p.type==CKEDITOR.NODE_ELEMENT){if((0<p.$.offsetWidth||t&&p.is("br"))&&!p.data("cke-bookmark"))if(R&&CKEDITOR.dtd.$removeEmpty[p.getName()]){if(w=p.getText(),m.test(w))p=null;else for(v=p.$.getElementsByTagName("*"),K=0;y=v[K++];)if(!CKEDITOR.dtd.$removeEmpty[y.nodeName.toLowerCase()]){p=null;break}p&&(_=!!w.length)}else p=null}else _=1;if(_&&R&&(O?k=b:this.setEndAfter(b)),p){if(_=p.getNext(),!b&&!_){b=p,p=null;break}p=_}else b=null}b&&(b=c(b.getParent()))}D&&k&&(h=D.contains(k)?k:D,this.setStartBefore(h),this.setEndAfter(h));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:(b=new CKEDITOR.dom.range(this.root)).setStartAt(I=this.root,CKEDITOR.POSITION_AFTER_START),b.setEnd(this.startContainer,this.startOffset),b=new CKEDITOR.dom.walker(b);var F,W,x=CKEDITOR.dom.walker.blockBoundary(n==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),T=null,N=function(H){if(H.type==CKEDITOR.NODE_ELEMENT&&"false"==H.getAttribute("contenteditable"))if(T){if(T.equals(H))return void(T=null)}else T=H;else if(T)return;var E=x(H);return E||(F=H),E};if(g=function(H){var E=N(H);return!E&&H.is&&H.is("br")&&(W=H),E},b.guard=N,b=b.lastBackward(),this.setStartAt(F=F||I,!F.is("br")&&(!b&&this.checkStartOfBlock()||b&&F.contains(b))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),n==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){b=this.clone(),b=new CKEDITOR.dom.walker(b);var A=CKEDITOR.dom.walker.whitespaces(),P=CKEDITOR.dom.walker.bookmark();if(b.evaluator=function(H){return!A(H)&&!P(H)},(b=b.previous())&&b.type==CKEDITOR.NODE_ELEMENT&&b.is("br"))break}(b=this.clone()).collapse(),b.setEndAt(I,CKEDITOR.POSITION_BEFORE_END),(b=new CKEDITOR.dom.walker(b)).guard=n==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?g:N,F=T=W=null,b=b.lastForward(),this.setEndAt(F=F||I,!b&&this.checkEndOfBlock()||b&&F.contains(b)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),W&&this.setEndAfter(W)}},shrink:function(n,t,c){var m="boolean"==typeof c?c:!c||"boolean"!=typeof c.shrinkOnBlockBoundary||c.shrinkOnBlockBoundary,g=c&&c.skipBogus;if(!this.collapsed){n=n||CKEDITOR.SHRINK_TEXT;var C=this.clone(),h=this.startContainer,I=this.endContainer,D=this.startOffset,k=this.endOffset,b=c=1;h&&h.type==CKEDITOR.NODE_TEXT&&(D?D>=h.getLength()?C.setStartAfter(h):(C.setStartBefore(h),c=0):C.setStartBefore(h)),I&&I.type==CKEDITOR.NODE_TEXT&&(k?k>=I.getLength()?C.setEndAfter(I):(C.setEndAfter(I),b=0):C.setEndBefore(I)),C=new CKEDITOR.dom.walker(C);var R,p=CKEDITOR.dom.walker.bookmark(),O=CKEDITOR.dom.walker.bogus();return C.evaluator=function(_){return _.type==(n==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)},C.guard=function(_,w){return!!(g&&O(_)||p(_))||!(n==CKEDITOR.SHRINK_ELEMENT&&_.type==CKEDITOR.NODE_TEXT||w&&_.equals(R)||!1===m&&_.type==CKEDITOR.NODE_ELEMENT&&_.isBlockBoundary()||_.type==CKEDITOR.NODE_ELEMENT&&_.hasAttribute("contenteditable"))&&(w||_.type!=CKEDITOR.NODE_ELEMENT||(R=_),!0)},c&&(h=C[n==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(h,t?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),b&&(C.reset(),(C=C[n==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(C,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!c&&!b)}},insertNode:function(n){this.optimizeBookmark(),this.trim(!1,!0);var t=this.startContainer,c=t.getChild(this.startOffset);c?n.insertBefore(c):t.append(n),n.getParent()&&n.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(n)},moveToPosition:function(n,t){this.setStartAt(n,t),this.collapse(!0)},moveToRange:function(n){this.setStart(n.startContainer,n.startOffset),this.setEnd(n.endContainer,n.endOffset)},selectNodeContents:function(n){this.setStart(n,0),this.setEnd(n,n.type==CKEDITOR.NODE_TEXT?n.getLength():n.getChildCount())},setStart:function(n,t){n.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[n.getName()]&&(t=n.getIndex(),n=n.getParent()),this._setStartContainer(n),this.startOffset=t,this.endContainer||(this._setEndContainer(n),this.endOffset=t),e(this)},setEnd:function(n,t){n.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[n.getName()]&&(t=n.getIndex()+1,n=n.getParent()),this._setEndContainer(n),this.endOffset=t,this.startContainer||(this._setStartContainer(n),this.startOffset=t),e(this)},setStartAfter:function(n){this.setStart(n.getParent(),n.getIndex()+1)},setStartBefore:function(n){this.setStart(n.getParent(),n.getIndex())},setEndAfter:function(n){this.setEnd(n.getParent(),n.getIndex()+1)},setEndBefore:function(n){this.setEnd(n.getParent(),n.getIndex())},setStartAt:function(n,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setStart(n,0);break;case CKEDITOR.POSITION_BEFORE_END:n.type==CKEDITOR.NODE_TEXT?this.setStart(n,n.getLength()):this.setStart(n,n.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(n);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(n)}e(this)},setEndAt:function(n,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setEnd(n,0);break;case CKEDITOR.POSITION_BEFORE_END:n.type==CKEDITOR.NODE_TEXT?this.setEnd(n,n.getLength()):this.setEnd(n,n.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(n);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(n)}e(this)},fixBlock:function(n,t){var c=this.createBookmark(),m=this.document.createElement(t);this.collapse(n),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(m),m.trim(),this.insertNode(m);var g=m.getBogus();return g&&g.remove(),m.appendBogus(),this.moveToBookmark(c),m},splitBlock:function(n,t){var c=new CKEDITOR.dom.elementPath(this.startContainer,this.root),m=new CKEDITOR.dom.elementPath(this.endContainer,this.root),g=c.block,C=m.block,h=null;return c.blockLimit.equals(m.blockLimit)?("br"!=n&&(g||(g=this.fixBlock(!0,n),C=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),C||(C=this.fixBlock(!1,n))),c=g&&this.checkStartOfBlock(),m=C&&this.checkEndOfBlock(),this.deleteContents(),g&&g.equals(C)&&(m?(h=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(C,CKEDITOR.POSITION_AFTER_END),C=null):c?(h=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START),g=null):(C=this.splitElement(g,t||!1),g.is("ul","ol")||g.appendBogus())),{previousBlock:g,nextBlock:C,wasStartOfBlock:c,wasEndOfBlock:m,elementPath:h}):null},splitElement:function(n,t){if(!this.collapsed)return null;this.setEndAt(n,CKEDITOR.POSITION_BEFORE_END);var c=this.extractContents(!1,t||!1),m=n.clone(!1,t||!1);return c.appendTo(m),m.insertAfter(n),this.moveToPosition(n,CKEDITOR.POSITION_AFTER_END),m},removeEmptyBlocksAtEnd:function(){function n(m){return function(g){return!(t(g)||c(g)||g.type==CKEDITOR.NODE_ELEMENT&&g.isEmptyInlineRemoveable()||m.is("table")&&g.is("caption"))}}var t=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(m){for(var I,g=this.createBookmark(),C=this[m?"endPath":"startPath"](),h=C.block||C.blockLimit;h&&!h.equals(C.root)&&!h.getFirst(n(h));)I=h.getParent(),this[m?"setEndAt":"setStartAt"](h,CKEDITOR.POSITION_AFTER_END),h.remove(1),h=I;this.moveToBookmark(g)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(n,t){var c=t==CKEDITOR.START,m=this.clone();return m.collapse(c),m[c?"setStartAt":"setEndAt"](n,c?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),(m=new CKEDITOR.dom.walker(m)).evaluator=function(n){var t=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(m){return!(!c(m)&&!t(m))||!n&&f(m)||m.type==CKEDITOR.NODE_ELEMENT&&m.is(CKEDITOR.dtd.$removeEmpty)}}(c),m[c?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var n=this.startContainer,t=this.startOffset;return CKEDITOR.env.ie&&t&&n.type==CKEDITOR.NODE_TEXT&&(n=CKEDITOR.tools.ltrim(n.substring(0,t)),i.test(n)&&this.trim(0,1)),this.trim(),n=new CKEDITOR.dom.elementPath(this.startContainer,this.root),(t=this.clone()).collapse(!0),t.setStartAt(n.block||n.blockLimit,CKEDITOR.POSITION_AFTER_START),(n=new CKEDITOR.dom.walker(t)).evaluator=s(),n.checkBackward()},checkEndOfBlock:function(){var n=this.endContainer,t=this.endOffset;return CKEDITOR.env.ie&&n.type==CKEDITOR.NODE_TEXT&&(n=CKEDITOR.tools.rtrim(n.substring(t)),i.test(n)&&this.trim(1,0)),this.trim(),n=new CKEDITOR.dom.elementPath(this.endContainer,this.root),(t=this.clone()).collapse(!1),t.setEndAt(n.block||n.blockLimit,CKEDITOR.POSITION_BEFORE_END),(n=new CKEDITOR.dom.walker(t)).evaluator=s(),n.checkForward()},getPreviousNode:function(n,t,c){var m=this.clone();return m.collapse(1),m.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START),(c=new CKEDITOR.dom.walker(m)).evaluator=n,c.guard=t,c.previous()},getNextNode:function(n,t,c){var m=this.clone();return m.collapse(),m.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END),(c=new CKEDITOR.dom.walker(m)).evaluator=n,c.guard=t,c.next()},checkReadOnly:function(){function n(t,c){for(;t;){if(t.type==CKEDITOR.NODE_ELEMENT){if("false"==t.getAttribute("contentEditable")&&!t.data("cke-editable"))return 0;if(t.is("html")||"true"==t.getAttribute("contentEditable")&&(t.contains(c)||t.equals(c)))break}t=t.getParent()}return 1}return function(){var t=this.startContainer,c=this.endContainer;return!(n(t,c)&&n(c,t))}}(),moveToElementEditablePosition:function(n,t){if(n.type==CKEDITOR.NODE_ELEMENT&&!n.isEditable(!1))return this.moveToPosition(n,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;n;){if(n.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&i.test(n.getText())?this.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(n,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),c=1;break}if(n.type==CKEDITOR.NODE_ELEMENT)if(n.isEditable())this.moveToPosition(n,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(t&&n.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(n,CKEDITOR.POSITION_BEFORE_START);else if("false"==n.getAttribute("contenteditable")&&n.is(CKEDITOR.dtd.$block))return this.setStartBefore(n),this.setEndAfter(n),!0;var m=n,g=c,C=void 0;m.type==CKEDITOR.NODE_ELEMENT&&m.isEditable(!1)&&(C=m[t?"getLast":"getFirst"](l)),g||C||(C=m[t?"getPrevious":"getNext"](l)),n=C}return!!c},moveToClosestEditablePosition:function(n,t){var c,g,C,m=0,h=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return n?(c=new CKEDITOR.dom.range(this.root)).moveToPosition(n,h[t?0:1]):c=this.clone(),n&&!n.is(CKEDITOR.dtd.$block)?m=1:(g=c[t?"getNextEditableNode":"getPreviousEditableNode"]())&&(m=1,(C=g.type==CKEDITOR.NODE_ELEMENT)&&g.is(CKEDITOR.dtd.$block)&&"false"==g.getAttribute("contenteditable")?(c.setStartAt(g,CKEDITOR.POSITION_BEFORE_START),c.setEndAt(g,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&C&&g.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(c.setEnd(g,0),c.collapse()):c.moveToPosition(g,h[t?1:0])),m&&this.moveToRange(c),!!m},moveToElementEditStart:function(n){return this.moveToElementEditablePosition(n)},moveToElementEditEnd:function(n){return this.moveToElementEditablePosition(n,!0)},getEnclosedNode:function(){if((n=this.clone()).optimize(),n.startContainer.type!=CKEDITOR.NODE_ELEMENT||n.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var n=new CKEDITOR.dom.walker(n),t=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);n.evaluator=function(g){return c(g)&&t(g)};var m=n.next();return n.reset(),m&&m.equals(n.previous())?m:null},getTouchedStartNode:function(){var n=this.startContainer;return this.collapsed||n.type!=CKEDITOR.NODE_ELEMENT?n:n.getChild(this.startOffset)||n},getTouchedEndNode:function(){var n=this.endContainer;return this.collapsed||n.type!=CKEDITOR.NODE_ELEMENT?n:n.getChild(this.endOffset-1)||n},getNextEditableNode:o(),getPreviousEditableNode:o(1),_getTableElement:function(n){n=n||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var t=this.startContainer,c=this.endContainer,m=t.getAscendant("table",!0),g=c.getAscendant("table",!0);return m&&!this.root.contains(m)?null:CKEDITOR.env.safari&&m&&c.equals(this.root)?t.getAscendant(n,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(n,!0):m&&g&&(m.equals(g)||m.contains(g)||g.contains(m))?t.getAscendant(n,!0):null},scrollIntoView:function(){var t,c,m,n=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),g=this.clone();g.optimize(),(m=g.startContainer.type==CKEDITOR.NODE_TEXT)?(c=g.startContainer.getText(),t=g.startContainer.split(g.startOffset),n.insertAfter(g.startContainer)):g.insertNode(n),n.scrollIntoView(),m&&(g.startContainer.setText(c),t.remove()),n.remove()},getClientRects:function(){function c(g,C,h){return g=CKEDITOR.tools.extend({},g),C&&(g=CKEDITOR.tools.getAbsoluteRectPosition(h.document.getWindow(),g)),!g.width&&(g.width=g.right-g.left),!g.height&&(g.height=g.bottom-g.top),g}function m(g){var h,C=g.startNode;return g=g.endNode,C.setText("\u200b"),C.removeStyle("display"),g?(g.setText("\u200b"),g.removeStyle("display"),h=[C.getClientRect(),g.getClientRect()],g.remove()):h=[C.getClientRect(),C.getClientRect()],C.remove(),{right:Math.max(h[0].right,h[1].right),bottom:Math.max(h[0].bottom,h[1].bottom),left:Math.min(h[0].left,h[1].left),top:Math.min(h[0].top,h[1].top),width:Math.abs(h[0].left-h[1].left),height:Math.max(h[0].bottom,h[1].bottom)-Math.min(h[0].top,h[1].top)}}return void 0!==this.document.getSelection?function(g){var h,C=this.root.getDocument().$.createRange();return C.setStart(this.startContainer.$,this.startOffset),C.setEnd(this.endContainer.$,this.endOffset),h=function(g,C){var D,k,b,h=CKEDITOR.tools.array.map(g,function(p){return p}),I=new CKEDITOR.dom.range(C.root);if(C.startContainer instanceof CKEDITOR.dom.element&&(k=0===C.startOffset&&C.startContainer.hasAttribute("data-widget")),C.endContainer instanceof CKEDITOR.dom.element&&(b=(b=C.endOffset===(C.endContainer.getChildCount?C.endContainer.getChildCount():C.endContainer.length))&&C.endContainer.hasAttribute("data-widget")),k&&I.setStart(C.startContainer.getParent(),C.startContainer.getIndex()),b&&I.setEnd(C.endContainer.getParent(),C.endContainer.getIndex()+1),(k||b)&&(C=I),I=C.cloneContents().find("[data-cke-widget-id]").toArray(),I=CKEDITOR.tools.array.map(I,function(p){var O=C.root.editor;return p=p.getAttribute("data-cke-widget-id"),O.widgets.instances[p].element}))return I=CKEDITOR.tools.array.map(I,function(p){var O;return O=p.getParent().hasClass("cke_widget_wrapper")?p.getParent():p,(D=this.root.getDocument().$.createRange()).setStart(O.getParent().$,O.getIndex()),D.setEnd(O.getParent().$,O.getIndex()+1),(O=D.getClientRects()).widgetRect=p.getClientRect(),O},C),CKEDITOR.tools.array.forEach(I,function(p){var R;!function O(_){CKEDITOR.tools.array.forEach(h,function(w,v){var K=CKEDITOR.tools.objectCompare(p[_],w);K||(K=CKEDITOR.tools.objectCompare(p.widgetRect,w)),K&&(Array.prototype.splice.call(h,v,p.length-_,p.widgetRect),R=!0)}),R||(_<h.length-1?O(_+1):h.push(p.widgetRect))}(0)}),h}(h=C.getClientRects(),this),h.length||(h=function(g,C,h){var I;return C.collapsed?h.startContainer instanceof CKEDITOR.dom.element?(g=h.checkStartOfBlock(),I=new CKEDITOR.dom.text("\u200b"),g?h.startContainer.append(I,!0):0===h.startOffset?I.insertBefore(h.startContainer.getFirst()):(h=h.startContainer.getChildren().getItem(h.startOffset-1),I.insertAfter(h)),C.setStart(I.$,0),C.setEnd(I.$,0),g=C.getClientRects(),I.remove()):h.startContainer instanceof CKEDITOR.dom.text&&(""===h.startContainer.getText()?(h.startContainer.setText("\u200b"),g=C.getClientRects(),h.startContainer.setText("")):g=[m(h.createBookmark())]):g=[m(h.createBookmark())],g}(h,C,this)),CKEDITOR.tools.array.map(h,function(I){return c(I,g,this)},this)}:function(g){return[c(m(this.createBookmark()),g,this)]}}(),_setStartContainer:function(n){this.startContainer=n},_setEndContainer:function(n){this.endContainer=n},_find:function(n,t){var C,h,I,D,c=this.getCommonAncestor(),m=this.getBoundaryNodes(),g=[];if(c&&c.find)for(h=c.find(n),C=0;C<h.count();C++)c=h.getItem(C),(t||!c.isReadOnly())&&(I=c.getPosition(m.startNode)&CKEDITOR.POSITION_FOLLOWING||m.startNode.equals(c),D=c.getPosition(m.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||m.endNode.equals(c),I&&D&&g.push(c));return g}},CKEDITOR.dom.range.mergeRanges=function(n){return CKEDITOR.tools.array.reduce(n,function(t,c){var m=t[t.length-1],g=!1;if((c=c.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),m){var C=new CKEDITOR.dom.range(c.root),h=(g=new CKEDITOR.dom.walker(C),CKEDITOR.dom.walker.whitespaces());for(C.setStart(m.endContainer,m.endOffset),C.setEnd(c.startContainer,c.startOffset),C=g.next();h(C)||c.endContainer.equals(C);)C=g.next();g=!C}return g?m.setEnd(c.endContainer,c.endOffset):t.push(c),t},[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(l){1>arguments.length||(this.range=l,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function s(l,n,t,c){e:{null==c&&(c=function(l){var n=[];return l.forEach(function(t){if("true"==t.getAttribute("contenteditable"))return n.push(t),!1},CKEDITOR.NODE_ELEMENT,!0),n}(t));for(var m;m=c.shift();)if(m.getDtd().p){c={element:m,remaining:c};break e}c=null}return c?(m=CKEDITOR.filter.instances[c.element.data("cke-filter")])&&!m.check(n)?s(l,n,t,c.remaining):((n=new CKEDITOR.dom.range(c.element)).selectNodeContents(c.element),(n=n.createIterator()).enlargeBr=l.enlargeBr,n.enforceRealBlocks=l.enforceRealBlocks,n.activeFilter=n.filter=m,l._.nestedEditable={element:c.element,container:t,remaining:c.remaining,iterator:n},1):0}function a(l,n,t){return!!n&&((l=l.clone()).collapse(!t),l.checkBoundaryOfElement(n,t?CKEDITOR.START:CKEDITOR.END))}var o=/^[\r\n\t ]+$/,u=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.whitespaces(!0),i=function(l){return u(l)&&f(l)},r={dd:1,dt:1,li:1};e.prototype={getNextParagraph:function(l){var n,t,c,m,g;if(l=l||"p",this._.nestedEditable){if(n=this._.nestedEditable.iterator.getNextParagraph(l))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,n;if(this.activeFilter=this.filter,s(this,l,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(l);this._.nestedEditable=null}if(!this.range.root.getDtd()[l])return null;if(!this._.started){var C=this.range.clone();t=C.startPath();var h=C.endPath(),I=!C.collapsed&&a(C,t.block),D=!C.collapsed&&a(C,h.block,1);C.shrink(CKEDITOR.SHRINK_ELEMENT,!0),I&&C.setStartAt(t.block,CKEDITOR.POSITION_BEFORE_END),D&&C.setEndAt(h.block,CKEDITOR.POSITION_AFTER_START),t=C.endContainer.hasAscendant("pre",!0)||C.startContainer.hasAscendant("pre",!0),C.enlarge(this.forceBrBreak&&!t||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),C.collapsed||(t=new CKEDITOR.dom.walker(C.clone()),h=CKEDITOR.dom.walker.bookmark(!0,!0),t.evaluator=h,this._.nextNode=t.next(),(t=new CKEDITOR.dom.walker(C.clone())).evaluator=h,t=t.previous(),this._.lastNode=t.getNextSourceNode(!0,null,C.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&((h=this.range.clone()).moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),h.checkEndOfBlock()&&(h=new CKEDITOR.dom.elementPath(h.endContainer,h.root),this._.lastNode=(h.block||h.blockLimit).getNextSourceNode(!0))),this._.lastNode&&C.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=C.document.createText(""),this._.lastNode.insertAfter(t)),C=null),this._.started=1,t=C}for(h=this._.nextNode,C=this._.lastNode,this._.nextNode=null;h;){I=0,D=h.hasAscendant("pre");var k=h.type!=CKEDITOR.NODE_ELEMENT,b=0;if(k)h.type==CKEDITOR.NODE_TEXT&&o.test(h.getText())&&(k=0);else{var p=h.getName();if(CKEDITOR.dtd.$block[p]&&"false"==h.getAttribute("contenteditable")){s(this,l,n=h);break}if(h.isBlockBoundary(this.forceBrBreak&&!D&&{br:1})){if("br"==p)k=1;else if(!t&&!h.getChildCount()&&"hr"!=p){n=h,c=h.equals(C);break}t&&(t.setEndAt(h,CKEDITOR.POSITION_BEFORE_START),"br"!=p&&(this._.nextNode=h)),I=1}else{if(h.getFirst()){t||(t=this.range.clone()).setStartAt(h,CKEDITOR.POSITION_BEFORE_START),h=h.getFirst();continue}k=1}}if(k&&!t&&(t=this.range.clone()).setStartAt(h,CKEDITOR.POSITION_BEFORE_START),c=(!I||k)&&h.equals(C),t&&!I)for(;!h.getNext(i)&&!c;){if((p=h.getParent()).isBlockBoundary(this.forceBrBreak&&!D&&{br:1})){I=1,k=0,c||p.equals(C),t.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);break}k=1,c=(h=p).equals(C),b=1}if(k&&t.setEndAt(h,CKEDITOR.POSITION_AFTER_END),(c=!(h=this._getNextSourceNode(h,b,C)))||I&&t)break}if(!n){if(!t)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;h=(n=new CKEDITOR.dom.elementPath(t.startContainer,t.root)).blockLimit,I={div:1,th:1,td:1},!(n=n.block)&&h&&!this.enforceRealBlocks&&I[h.getName()]&&t.checkStartOfBlock()&&t.checkEndOfBlock()&&!h.equals(t.root)?n=h:!n||this.enforceRealBlocks&&n.is(r)?(n=this.range.document.createElement(l),t.extractContents().appendTo(n),n.trim(),t.insertNode(n),m=g=!0):"li"!=n.getName()?t.checkStartOfBlock()&&t.checkEndOfBlock()||(n=n.clone(!1),t.extractContents().appendTo(n),n.trim(),m=!(g=t.splitBlock()).wasStartOfBlock,g=!g.wasEndOfBlock,t.insertNode(n)):c||(this._.nextNode=n.equals(C)?null:this._getNextSourceNode(t.getBoundaryNodes().endNode,1,C))}return m&&(m=n.getPrevious())&&m.type==CKEDITOR.NODE_ELEMENT&&("br"==m.getName()?m.remove():m.getLast()&&"br"==m.getLast().$.nodeName.toLowerCase()&&m.getLast().remove()),g&&(m=n.getLast())&&m.type==CKEDITOR.NODE_ELEMENT&&"br"==m.getName()&&(!CKEDITOR.env.needsBrFiller||m.getPrevious(u)||m.getNext(u))&&m.remove(),this._.nextNode||(this._.nextNode=c||n.equals(C)||!C?null:this._getNextSourceNode(n,1,C)),n},_getNextSourceNode:function(l,n,t){function c(g){return!(g.equals(t)||g.equals(m))}var m=this.range.root;for(l=l.getNextSourceNode(n,null,c);!u(l);)l=l.getNextSourceNode(n,null,c);return l}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,d){var s;this.uiItems=[],this.exec=function(a){return!(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())&&(this.editorFocus&&e.focus(),!1===this.fire("exec")||!1!==d.exec.call(this,e,a))},this.refresh=function(a,o){return!(this.readOnly||!a.readOnly)||(this.context&&!o.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[a.mode]&&this.disable(),!1===this.fire("refresh",{editor:a,path:o})||d.refresh&&!1!==d.refresh.apply(this,arguments)))},this.checkAllowed=function(a){return a||"boolean"!=typeof s?s=e.activeFilter.checkFeature(this):s},CKEDITOR.tools.extend(this,d,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!d.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&void 0!==this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return!(this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()||(this.previousState=this.state,this.state=e,this.fire("state"),0))},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(E,L,B,q,j){var G,Y,ee;for(G in E=[],L){Y="boolean"==typeof(Y=L[G])?{}:"function"==typeof Y?{match:Y}:K(Y),"$"!=G.charAt(0)&&(Y.elements=G),B&&(Y.featureName=B.toLowerCase());var Z=Y;Z.elements=f(Z.elements,/\s+/)||null,Z.propertiesOnly=Z.propertiesOnly||!0===Z.elements;var te=/\s*,\s*/,S=void 0;for(S in W){Z[S]=f(Z[S],te)||null;var $=Z,M=x[S],U=f(Z[x[S]],te),z=Z[S],J=[],V=!0,X=void 0;for(X in U?V=!1:U={},z)"!"==X.charAt(0)&&(X=X.slice(1),J.push(X),U[X]=!0,V=!1);for(;X=J.pop();)z[X]=z["!"+X],delete z["!"+X];$[M]=!V&&U||null}Z.match=Z.match||null,q.push(Y),E.push(Y)}for(L=j.elements,j=j.generic,B=0,q=E.length;B<q;++B){for(te in Y=!0===(G=K(E[B])).classes||!0===G.styles||!0===G.attributes,Z=G,S=M=te=void 0,W)Z[te]=I(Z[te]);for(S in $=!0,x){for(z in U=[],z=void 0,M=Z[te=x[S]])-1<z.indexOf("*")?U.push(new RegExp("^"+z.replace(/\*/g,".*")+"$")):U.push(z);(M=U).length&&(Z[te]=M,$=!1)}if(Z.nothingRequired=$,Z.noProperties=!(Z.attributes||Z.classes||Z.styles),!0===G.elements||null===G.elements)j[Y?"unshift":"push"](G);else for(ee in Z=G.elements,delete G.elements,Z)L[ee]?L[ee][Y?"unshift":"push"](G):L[ee]=[G]}}function d(E,L,B,q){if((!E.match||E.match(L))&&(q||function(E,L){if(E.nothingRequired)return!0;var B,q,j,G;if(j=E.requiredClasses)for(G=L.classes,B=0;B<j.length;++B)if("string"==typeof(q=j[B])){if(-1==CKEDITOR.tools.indexOf(G,q))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(G,q))return!1;return r(L.styles,E.requiredStyles)&&r(L.attributes,E.requiredAttributes)}(E,L))&&(E.propertiesOnly||(B.valid=!0),B.allAttributes||(B.allAttributes=s(E.attributes,L.attributes,B.validAttributes)),B.allStyles||(B.allStyles=s(E.styles,L.styles,B.validStyles)),!B.allClasses)){if(L=L.classes,q=B.validClasses,E=E.classes)if(!0===E)E=!0;else{for(var Y,j=0,G=L.length;j<G;++j)q[Y=L[j]]||(q[Y]=E(Y));E=!1}else E=!1;B.allClasses=E}}function s(E,L,B){if(!E)return!1;if(!0===E)return!0;for(var q in L)B[q]||(B[q]=E(q));return!1}function a(E,L,B){if(!E.match||E.match(L)){if(E.noProperties)return!1;if(B.hadInvalidAttribute=o(E.attributes,L.attributes)||B.hadInvalidAttribute,B.hadInvalidStyle=o(E.styles,L.styles)||B.hadInvalidStyle,L=L.classes,E=E.classes){for(var q=!1,j=!0===E,G=L.length;G--;)(j||E(L[G]))&&(L.splice(G,1),q=!0);E=q}else E=!1;B.hadInvalidClass=E||B.hadInvalidClass}}function o(E,L){if(!E)return!1;var j,B=!1,q=!0===E;for(j in L)(q||E(j))&&(delete L[j],B=!0);return B}function u(E,L,B){return!(E.disabled||E.customConfig&&!B||!L||(E._.cachedChecks={},0))}function f(E,L){if(!E)return!1;if(!0===E)return E;if("string"==typeof E)return"*"==(E=y(E))||CKEDITOR.tools.convertArrayToObject(E.split(L));if(CKEDITOR.tools.isArray(E))return!!E.length&&CKEDITOR.tools.convertArrayToObject(E);var j,B={},q=0;for(j in E)B[j]=E[j],q++;return!!q&&B}function r(E,L){if(!L)return!0;for(var q,B=0;B<L.length;++B)if("string"==typeof(q=L[B])){if(!(q in E))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(E,q))return!1;return!0}function l(E){if(!E)return{};E=E.split(/\s*,\s*/).sort();for(var L={};E.length;)L[E.shift()]="cke-test";return L}function n(E){var L,B,q,j,G={},Y=1;for(E=y(E);L=E.match(T);)(B=L[2])?(q=t(B,"styles"),j=t(B,"attrs"),B=t(B,"classes")):q=j=B=null,G["$"+Y++]={elements:L[1],classes:B,styles:q,attributes:j},E=E.slice(L[0].length);return G}function t(E,L){var B=E.match(N[L]);return B?y(B[1]):null}function c(E){var L=E.styleBackup=E.attributes.style,B=E.classBackup=E.attributes.class;E.styles||(E.styles=CKEDITOR.tools.parseCssText(L||"",1)),E.classes||(E.classes=B?B.split(/\s+/):[])}function m(E,L,B,q){var G,j=0;if(q.toHtml&&(L.name=L.name.replace(A,"$1")),q.doCallbacks&&E.elementCallbacks){e:{for(var te,Y=0,Z=(G=E.elementCallbacks).length;Y<Z;++Y)if(te=G[Y](L)){G=te;break e}G=void 0}if(G)return G}if(q.doTransform&&(G=E._.transformations[L.name])){for(c(L),Y=0;Y<G.length;++Y)p(E,L,G[Y]);C(L)}if(q.doFilter){e:{E=(Z=E._).allowedRules.elements[Y=L.name],G=Z.allowedRules.generic,Y=Z.disallowedRules.elements[Y],Z=Z.disallowedRules.generic,te=q.skipRequired;var S,$,ee={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1};if(E||G){if(c(L),Y)for(S=0,$=Y.length;S<$;++S)if(!1===a(Y[S],L,ee)){E=null;break e}if(Z)for(S=0,$=Z.length;S<$;++S)a(Z[S],L,ee);if(E)for(S=0,$=E.length;S<$;++S)d(E[S],L,ee,te);if(G)for(S=0,$=G.length;S<$;++S)d(G[S],L,ee,te);E=ee}else E=null}if(!E||!E.valid)return B.push(L),1;$=E.validAttributes;var M=E.validStyles;G=E.validClasses;var U=L.styles;Z=L.classes,te=L.classBackup;var J,V,z=L.styleBackup,X=[],Q=(ee=[],/^data-cke-/);if(S=!1,delete(Y=L.attributes).style,delete Y.class,delete L.classBackup,delete L.styleBackup,!E.allAttributes)for(J in Y)$[J]||Q.test(J)&&(J==(V=J.replace(/^data-cke-saved-/,""))||$[V])||(delete Y[J],S=!0);if(!E.allStyles||E.hadInvalidStyle){for(J in U)E.allStyles||M[J]?X.push(J+":"+U[J]):S=!0;X.length&&(Y.style=X.sort().join("; "))}else z&&(Y.style=z);if(!E.allClasses||E.hadInvalidClass){for(J=0;J<Z.length;++J)(E.allClasses||G[Z[J]])&&ee.push(Z[J]);ee.length&&(Y.class=ee.sort().join(" ")),te&&ee.length<te.split(/\s+/).length&&(S=!0)}else te&&(Y.class=te);if(S&&(j=1),!q.skipFinalValidation&&!h(L))return B.push(L),1}return q.toHtml&&(L.name=L.name.replace(P,"cke:$1")),j}function C(E){var B,L=E.attributes;delete L.style,delete L.class,(B=CKEDITOR.tools.writeCssText(E.styles,!0))&&(L.style=B),E.classes.length&&(L.class=E.classes.sort().join(" "))}function h(E){switch(E.name){case"a":if(!(E.children.length||E.attributes.name||E.attributes.id))return!1;break;case"img":if(!E.attributes.src)return!1}return!0}function I(E){if(!E)return!1;if(!0===E)return!0;var L=function(E){var B,L=[];for(B in E)-1<B.indexOf("*")&&L.push(B.replace(/\*/g,".*"));return L.length?new RegExp("^(?:"+L.join("|")+")$"):null}(E);return function(B){return B in E||L&&B.match(L)}}function D(){return new CKEDITOR.htmlParser.element("br")}function k(E){return E.type==CKEDITOR.NODE_ELEMENT&&("br"==E.name||v.$block[E.name])}function b(E,L,B){if(v.$empty[q=E.name]||!E.children.length)"hr"==q&&"br"==L?E.replaceWith(D()):(E.parent&&B.push({check:"it",el:E.parent}),E.remove());else if(v.$block[q]||"tr"==q)if("br"==L)E.previous&&!k(E.previous)&&(L=D()).insertBefore(E),E.next&&!k(E.next)&&(L=D()).insertAfter(E),E.replaceWithChildren();else{var q,j;e:{j=v[L];for(var Z,G=0,Y=(q=E.children).length;G<Y;++G)if((Z=q[G]).type==CKEDITOR.NODE_ELEMENT&&!j[Z.name]){j=!1;break e}j=!0}if(j)E.name=L,E.attributes={},B.push({check:"parent-down",el:E});else{var te,S;for(G=(j=E.parent).type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==j.name,Y=q.length;0<Y;)Z=q[--Y],G&&(Z.type==CKEDITOR.NODE_TEXT||Z.type==CKEDITOR.NODE_ELEMENT&&v.$inline[Z.name])?(te||((te=new CKEDITOR.htmlParser.element(L)).insertAfter(E),B.push({check:"parent-down",el:te})),te.add(Z,0)):(te=null,S=v[j.name]||v.span,Z.insertAfter(E),j.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||Z.type!=CKEDITOR.NODE_ELEMENT||S[Z.name]||B.push({check:"el-up",el:Z}));E.remove()}}else q in{style:1,script:1}?E.remove():(E.parent&&B.push({check:"it",el:E.parent}),E.replaceWithChildren())}function p(E,L,B){var q,j;for(q=0;q<B.length;++q)if(!((j=B[q]).check&&!E.check(j.check,!1)||j.left&&!j.left(L))){j.right(L,H);break}}function O(E,L){var G,Y,Z,te,B=L.getDefinition(),q=B.attributes,j=B.styles;if(E.name!=B.element)return!1;for(G in q)if("class"==G){for(B=q[G].split(/\s+/),Z=E.classes.join("|");te=B.pop();)if(-1==Z.indexOf(te))return!1}else if(E.attributes[G]!=q[G])return!1;for(Y in j)if(E.styles[Y]!=j[Y])return!1;return!0}function R(E,L){var B,q;return"string"==typeof E?B=E:E instanceof CKEDITOR.style?q=E:(B=E[0],q=E[1]),[{element:B,left:q,right:function(j,G){G.transform(j,L)}}]}function _(E){return function(L){return O(L,E)}}function w(E){return function(L,B){B[E](L)}}var E,L,v=CKEDITOR.dtd,K=CKEDITOR.tools.copy,y=CKEDITOR.tools.trim,F=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(E,L){this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{},cachedChecks:{}},CKEDITOR.filter.instances[this.id]=this;var B=this.editor=E instanceof CKEDITOR.editor?E:null;if(B&&!L){this.customConfig=!0;var q=B.config.allowedContent;!0===q?this.disabled=!0:(q||(this.customConfig=!1),this.allow(q,"config",1),this.allow(B.config.extraAllowedContent,"extra",1),this.allow(F[B.enterMode]+" "+F[B.shiftEnterMode],"default",1),this.disallow(B.config.disallowedContent))}else this.customConfig=!1,this.allow(L||E,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(E,L,B){if(!u(this,E,B))return!1;var q,j;if("string"==typeof E)E=n(E);else if(E instanceof CKEDITOR.style){if(E.toAllowedContentRules)return this.allow(E.toAllowedContentRules(this.editor),L,B);B=(q=E.getDefinition()).attributes,(E={})[q.element]=q={styles:q.styles,requiredStyles:q.styles&&CKEDITOR.tools.object.keys(q.styles)},B&&(B=K(B),q.classes=B.class?B.class.split(/\s+/):null,q.requiredClasses=q.classes,delete B.class,q.attributes=B,q.requiredAttributes=B&&CKEDITOR.tools.object.keys(B))}else if(CKEDITOR.tools.isArray(E)){for(q=0;q<E.length;++q)j=this.allow(E[q],L,B);return j}return e(this,E,L,this.allowedContent,this._.allowedRules),!0},applyTo:function(E,L,B,q){if(this.disabled)return!1;var Z,$,M,j=this,G=[],Y=this.editor&&this.editor.config.protectedSource,te=!1,S={doFilter:!B,doTransform:!0,doCallbacks:!0,toHtml:L};for(E.forEach(function(U){if(U.type==CKEDITOR.NODE_ELEMENT){if("off"==U.attributes["data-cke-filter"])return!1;if(!L||"span"!=U.name||!~CKEDITOR.tools.object.keys(U.attributes).join("|").indexOf("data-cke-"))if(1&(Z=m(j,U,G,S)))te=!0;else if(2&Z)return!1}else if(U.type==CKEDITOR.NODE_COMMENT&&U.value.match(/^\{cke_protected\}(?!\{C\})/)){var z;e:{var V,X,ee,J=decodeURIComponent(U.value.replace(/^\{cke_protected\}/,""));if(z=[],Y)for(X=0;X<Y.length;++X)if((ee=J.match(Y[X]))&&ee[0].length==J.length){z=!0;break e}1==(J=CKEDITOR.htmlParser.fragment.fromHtml(J)).children.length&&(V=J.children[0]).type==CKEDITOR.NODE_ELEMENT&&m(j,V,z,S),z=!z.length}z||G.push(U)}},null,!0),G.length&&(te=!0),E=[],q=F[q||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];B=G.pop();)B.type==CKEDITOR.NODE_ELEMENT?b(B,q,E):B.remove();for(;$=E.pop();)if((B=$.el).parent)switch(M=v[B.parent.name]||v.span,$.check){case"it":v.$removeEmpty[B.name]&&!B.children.length?b(B,q,E):h(B)||b(B,q,E);break;case"el-up":B.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||M[B.name]||b(B,q,E);break;case"parent-down":B.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||M[B.name]||b(B.parent,q,E)}return te},checkFeature:function(E){return!(!this.disabled&&E)||(E.toFeature&&(E=E.toFeature(this.editor)),!E.requiredContent||this.check(E.requiredContent))},disable:function(){this.disabled=!0},disallow:function(E){return!!u(this,E,!0)&&("string"==typeof E&&(E=n(E)),e(this,E,null,this.disallowedContent,this._.disallowedRules),!0)},addContentForms:function(E){if(!this.disabled&&E){var L,B,j,q=[];for(L=0;L<E.length&&!j;++L)("string"==typeof(B=E[L])||B instanceof CKEDITOR.style)&&this.check(B)&&(j=B);if(j){for(L=0;L<E.length;++L)q.push(R(E[L],j));this.addTransformations(q)}}},addElementCallback:function(E){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(E)},addFeature:function(E){return!(!this.disabled&&E)||(E.toFeature&&(E=E.toFeature(this.editor)),this.allow(E.allowedContent,E.name),this.addTransformations(E.contentTransformations),this.addContentForms(E.contentForms),!E.requiredContent||!this.customConfig&&!this.disallowedContent.length||this.check(E.requiredContent))},addTransformations:function(E){var L,B;if(!this.disabled&&E){var j,q=this._.transformations;for(j=0;j<E.length;++j){L=E[j];var G=void 0,Y=void 0,Z=void 0,te=void 0,S=void 0,$=void 0;for(B=[],Y=0;Y<L.length;++Y)"string"==typeof(Z=L[Y])?(te=(Z=Z.split(/\s*:\s*/))[0],S=null,$=Z[1]):(te=Z.check,S=Z.left,$=Z.right),G||(G=(G=Z).element?G.element:te?te.match(/^([a-z0-9]+)/i)[0]:G.left.getDefinition().element),S instanceof CKEDITOR.style&&(S=_(S)),B.push({check:te==G?null:te,left:S,right:"string"==typeof $?w($):$});q[L=G]||(q[L]=[]),q[L].push(B)}}},check:function(E,L,B){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(E)){for(var q=E.length;q--;)if(this.check(E[q],L,B))return!0;return!1}var j,G;if("string"==typeof E){if((G=E+"<"+(!1===L?"0":"1")+(B?"1":"0")+">")in this._.cachedChecks)return this._.cachedChecks[G];var Y=(j=n(E).$1).styles;q=j.classes,j.name=j.elements,j.classes=q=q?q.split(/\s*,\s*/):[],j.styles=l(Y),j.attributes=l(j.attributes),j.children=[],q.length&&(j.attributes.class=q.join(" ")),Y&&(j.attributes.style=CKEDITOR.tools.writeCssText(j.styles))}else q=(j=E.getDefinition()).attributes||{},(Y=j.styles)&&!CKEDITOR.tools.isEmpty(Y)?(Y=K(Y),q.style=CKEDITOR.tools.writeCssText(Y,!0)):Y={},j={name:j.element,attributes:q,classes:q.class?q.class.split(/\s+/):[],styles:Y,children:[]};Y=CKEDITOR.tools.clone(j);var te,Z=[];if(!1!==L&&(te=this._.transformations[j.name])){for(q=0;q<te.length;++q)p(this,j,te[q]);C(j)}return m(this,Y,Z,{doFilter:!0,doTransform:!1!==L,skipRequired:!B,skipFinalValidation:!B}),0<Z.length?B=!1:((L=j.attributes.class)&&(j.attributes.class=j.attributes.class.split(" ").sort().join(" ")),B=CKEDITOR.tools.objectCompare(j.attributes,Y.attributes,!0),L&&(j.attributes.class=L)),"string"==typeof E&&(this._.cachedChecks[G]=B),B},getAllowedEnterMode:(E=["p","div","br"],L={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR},function(B,q){var G,j=E.slice();if(this.check(F[B]))return B;for(q||(j=j.reverse());G=j.pop();)if(this.check(G))return L[G];return CKEDITOR.ENTER_BR}),clone:function(){var E=new CKEDITOR.filter,L=CKEDITOR.tools.clone;return E.allowedContent=L(this.allowedContent),E._.allowedRules=L(this._.allowedRules),E.disallowedContent=L(this.disallowedContent),E._.disallowedRules=L(this._.disallowedRules),E._.transformations=L(this._.transformations),E.disabled=this.disabled,E.editor=this.editor,E},destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var H,W={styles:1,attributes:1,classes:1},x={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},T=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,N={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},A=/^cke:(object|embed|param)$/,P=/^(object|embed|param)$/;H=CKEDITOR.filter.transformationsTools={sizeToStyle:function(E){this.lengthToStyle(E,"width"),this.lengthToStyle(E,"height")},sizeToAttribute:function(E){this.lengthToAttribute(E,"width"),this.lengthToAttribute(E,"height")},lengthToStyle:function(E,L,B){if(!((B=B||L)in E.styles)){var q=E.attributes[L];q&&(/^\d+$/.test(q)&&(q+="px"),E.styles[B]=q)}delete E.attributes[L]},lengthToAttribute:function(E,L,B){if(!((B=B||L)in E.attributes)){var q=E.styles[L],j=q&&q.match(/^(\d+)(?:\.\d*)?px$/);j?E.attributes[B]=j[1]:"cke-test"==q&&(E.attributes[B]="cke-test")}delete E.styles[L]},alignmentToStyle:function(E){if(!("float"in E.styles)){var L=E.attributes.align;("left"==L||"right"==L)&&(E.styles.float=L)}delete E.attributes.align},alignmentToAttribute:function(E){if(!("align"in E.attributes)){var L=E.styles.float;("left"==L||"right"==L)&&(E.attributes.align=L)}delete E.styles.float},splitBorderShorthand:function(E){if(E.styles.border){var L=CKEDITOR.tools.style.parse.border(E.styles.border);L.color&&(E.styles["border-color"]=L.color),L.style&&(E.styles["border-style"]=L.style),L.width&&(E.styles["border-width"]=L.width),delete E.styles.border}},listTypeToStyle:function(E){if(E.attributes.type)switch(E.attributes.type){case"a":E.styles["list-style-type"]="lower-alpha";break;case"A":E.styles["list-style-type"]="upper-alpha";break;case"i":E.styles["list-style-type"]="lower-roman";break;case"I":E.styles["list-style-type"]="upper-roman";break;case"1":E.styles["list-style-type"]="decimal";break;default:E.styles["list-style-type"]=E.attributes.type}},splitMarginShorthand:function(E){function L(q){E.styles["margin-top"]=B[q[0]],E.styles["margin-right"]=B[q[1]],E.styles["margin-bottom"]=B[q[2]],E.styles["margin-left"]=B[q[3]]}if(E.styles.margin){var B=E.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(B.length){case 1:L([0,0,0,0]);break;case 2:L([0,1,0,1]);break;case 3:L([0,1,2,1]);break;case 4:L([0,1,2,3])}delete E.styles.margin}},matchesStyle:O,transform:function(E,L){if("string"==typeof L)E.name=L;else{var G,Y,Z,te,B=L.getDefinition(),q=B.styles,j=B.attributes;for(G in E.name=B.element,j)if("class"==G)for(B=E.classes.join("|"),Z=j[G].split(/\s+/);te=Z.pop();)-1==B.indexOf(te)&&E.classes.push(te);else E.attributes[G]=j[G];for(Y in q)E.styles[Y]=q[Y]}}}}(),CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function d(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var s=CKEDITOR.focusManager._.blurDelay;e||!s?d.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,d.call(this)},s,this)}},add:function(e,d){if(!(s=e.getCustomData("focusmanager"))||s!=this){s&&s.remove(e);var s="focus",a="blur";d&&(CKEDITOR.env.ie?(s="focusin",a="focusout"):CKEDITOR.event.useCapture=1);var o={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(s,o.focus,this),e.on(a,o.blur,this),d&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",o)}},remove:function(e){e.removeCustomData("focusmanager");var d=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",d.blur),e.removeListener("focus",d.focus)}},CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,d=function(a){var o=(a=a.data).getKeystroke(),u=this.keystrokes[o],f=this._.editor;return(e=!1===f.fire("key",{keyCode:o,domEvent:a}))||(u&&(e=!1!==f.execCommand(u,{from:"keystrokeHandler"})),e||(e=!!this.blockedKeystrokes[o])),e&&a.preventDefault(!0),!e},s=function(a){e&&(e=!1,a.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",d,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&a.on("keypress",s,this)}}}(),CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,d,s){e&&CKEDITOR.lang.languages[e]||(e=this.detect(d,e));var a=this;d=function(){a[e].dir=a.rtl[e]?"rtl":"ltr",s(e,a[e])},this[e]?d():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),d,this)},detect:function(e,d){var a,s=this.languages,o=(a=(d=d||navigator.userLanguage||navigator.language||e).toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/))[1];return s[o+"-"+(a=a[2])]?o=o+"-"+a:s[o]||(o=null),CKEDITOR.lang.detect=o?function(){return o}:function(u){return u},o||e}},CKEDITOR.scriptLoader=function(){var e={},d={};return{load:function(s,a,o,u){var f="string"==typeof s;f&&(s=[s]),o||(o=CKEDITOR);var i=s.length,r=[],l=[],n=function(C){a&&(f?a.call(o,C):a.call(o,r,l))};if(0===i)n(!0);else{var t=function(C,h){(h?r:l).push(C),0>=--i&&(u&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),n(h))},c=function(C,h){e[C]=1;var I=d[C];delete d[C];for(var D=0;D<I.length;D++)I[D](C,h)},m=function(C){if(e[C])t(C,!0);else{var h=d[C]||(d[C]=[]);if(h.push(t),!(1<h.length)){var I=new CKEDITOR.dom.element("script");I.setAttributes({type:"text/javascript",src:C}),a&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?I.$.onreadystatechange=function(){("loaded"==I.$.readyState||"complete"==I.$.readyState)&&(I.$.onreadystatechange=null,c(C,!0))}:(I.$.onload=function(){setTimeout(function(){I.$.onload=null,I.$.onerror=null,c(C,!0)},0)},I.$.onerror=function(){I.$.onload=null,I.$.onerror=null,c(C,!1)})),I.appendTo(CKEDITOR.document.getHead())}}};u&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var g=0;g<i;g++)m(s[g])}},queue:function(){function s(){var o;(o=a[0])&&this.load(o.scriptUrl,o.callback,CKEDITOR,0)}var a=[];return function(o,u){var f=this;a.push({scriptUrl:o,callback:function(){u&&u.apply(this,arguments),a.shift(),s.call(f)}}),1==a.length&&s.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,d){this.basePath=e,this.fileName=d,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,d){if(this.registered[e])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.');var s=this.registered[e]=d||{};return s.name=e,s.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",s),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var d=this.externals[e];return CKEDITOR.getUrl(d&&d.dir||this.basePath+e+"/")},getFilePath:function(e){var d=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(d?d.file:this.fileName+".js"))},addExternal:function(e,d,s){e=e.split(",");for(var a=0;a<e.length;a++){var o=e[a];s||(d=d.replace(/[^\/]+$/,function(u){return s=u,""})),this.externals[o]={dir:d,file:s||this.fileName+".js"}}},load:function(e,d,s){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var a=this.loaded,o=this.registered,u=[],f={},i={},r=0;r<e.length;r++){var l=e[r];if(l)if(a[l]||o[l])i[l]=this.get(l);else{var n=this.getFilePath(l);u.push(n),n in f||(f[n]=[]),f[n].push(l)}}CKEDITOR.scriptLoader.load(u,function(t,c){if(c.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+f[c[0]].join(",")+'" was not found at "'+c[0]+'".');for(var m=0;m<t.length;m++)for(var g=f[t[m]],C=0;C<g.length;C++){var h=g[C];i[h]=this.get(h),a[h]=1}d.call(s,i)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var d={};return function(s,a,o){var u={},f=function(i){e.call(this,i,function(r){CKEDITOR.tools.extend(u,r);var n,l=[];for(n in r){var t=r[n],c=t&&t.requires;if(!d[n]){if(t.icons)for(var m=t.icons.split(","),g=m.length;g--;)CKEDITOR.skin.addIcon(m[g],t.path+"icons/"+(CKEDITOR.env.hidpi&&t.hidpi?"hidpi/":"")+m[g]+".png");t.isSupportedEnvironment=t.isSupportedEnvironment||function(){return!0},d[n]=1}if(c)for(c.split&&(c=c.split(",")),t=0;t<c.length;t++)u[c[t]]||l.push(c[t])}if(l.length)f.call(this,l);else{for(n in u)(t=u[n]).onLoad&&!t.onLoad._called&&(!1===t.onLoad()&&delete u[n],t.onLoad._called=1);a&&a.call(o||window,u)}},this)};f.call(this,s)}}),CKEDITOR.plugins.setLang=function(e,d,s){var a=this.get(e);e=a.langEntries||(a.langEntries={}),(a=a.lang||(a.lang=[])).split&&(a=a.split(",")),-1==CKEDITOR.tools.indexOf(a,d)&&a.push(d),e[d]=s},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,d,s){s.name=e.toLowerCase();var a=this.items[e]={type:d,command:s.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(a,s)},get:function(e){return this.instances[e]},create:function(e){var d=this.items[e],s=d&&this._.handlers[d.type],a=d&&d.command&&this.editor.getCommand(d.command);return s=s&&s.create.apply(this,d.args),this.instances[e]=s,a&&a.uiItems.push(s),s&&!s.type&&(s.type=d.type),s},addHandler:function(e,d){this._.handlers[e]=d},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(h,I,D){if(CKEDITOR.event.call(this),h=h&&CKEDITOR.tools.clone(h),void 0!==I){if(!(I instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!D)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&D==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!function(h,I){return I==CKEDITOR.ELEMENT_MODE_INLINE?h.is(CKEDITOR.dtd.$editable)||h.is("textarea"):I==CKEDITOR.ELEMENT_MODE_REPLACE?!h.is(CKEDITOR.dtd.$nonBodyContent):1}(I,D))throw Error('The specified element mode is not supported on element: "'+I.getName()+'".');this.element=I,this.elementMode=D,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(I.getId()||I.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||function(){do{var h="editor"+ ++g}while(CKEDITOR.instances[h]);return h}(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",a),this.on("selectionChange",function(k){u(this,k.data.path)}),this.on("activeFilterChange",function(){u(this,this.elementPath(),!0)}),this.on("mode",a),this.on("instanceReady",function(){if(this.config.startupFocus){if("end"===this.config.startupFocus){var k=this.createRange();k.selectNodeContents(this.editable()),k.shrink(CKEDITOR.SHRINK_ELEMENT,!0),k.collapse(),this.getSelection().selectRanges([k])}this.focus()}}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?function(h,I){h.on("customConfigLoaded",function(){if(I){if(I.on)for(var D in I.on)h.on(D,I.on[D]);CKEDITOR.tools.extend(h.config,I,!0),delete h.config.on}h.readOnly=!!(D=h.config).readOnly||(h.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?h.element.is("textarea")?h.element.hasAttribute("disabled")||h.element.hasAttribute("readonly"):h.element.isReadOnly():h.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(h.element.hasAttribute("disabled")||h.element.hasAttribute("readonly"))),h.blockless=h.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!(h.element.is("textarea")||CKEDITOR.dtd[h.element.getName()].p),h.tabIndex=D.tabIndex||h.element&&h.element.getAttribute("tabindex")||0,h.activeEnterMode=h.enterMode=h.blockless?CKEDITOR.ENTER_BR:D.enterMode,h.activeShiftEnterMode=h.shiftEnterMode=h.blockless?CKEDITOR.ENTER_BR:D.shiftEnterMode,D.skin&&(CKEDITOR.skinName=D.skin),h.fireOnce("configLoaded"),h.dataProcessor=new CKEDITOR.htmlDataProcessor(h),h.filter=h.activeFilter=new CKEDITOR.filter(h),function(h){CKEDITOR.skin.loadPart("editor",function(){!function(h){CKEDITOR.lang.load(h.config.language,h.config.defaultLanguage,function(I,D){var k=h.config.title;h.langCode=I,h.lang=CKEDITOR.tools.prototypedCopy(D),h.title="string"==typeof k||!1===k?k:[h.lang.editor,h.name].join(", "),h.config.contentsLangDirection||(h.config.contentsLangDirection=h.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?h.element.getDirection(1):h.lang.dir),h.fire("langLoaded"),function(h){h.getStylesSet(function(I){h.once("loaded",function(){h.fire("stylesSet",{styles:I})},null,null,1),function(h){function I(_){return _?(CKEDITOR.tools.isArray(_)&&(_=_.join(",")),_.replace(/\s/g,"")):""}var D=h.config,k=I(D.plugins),b=I(D.extraPlugins),p=I(D.removePlugins);if(b){var O=new RegExp("(?:^|,)(?:"+b.replace(/,/g,"|")+")(?=,|$)","g");k=(k=k.replace(O,""))+","+b}if(p){var R=new RegExp("(?:^|,)(?:"+p.replace(/,/g,"|")+")(?=,|$)","g");k=k.replace(R,"")}CKEDITOR.env.air&&(k+=",adobeair"),CKEDITOR.plugins.load(k.split(","),function(_){var w=[],v=[],K=[];for(var y in h.plugins=CKEDITOR.tools.extend({},h.plugins,_),_){var N,F=_[y],W=F.lang,x=null,T=F.requires;if(CKEDITOR.tools.isArray(T)&&(T=T.join(",")),T&&(N=T.match(R)))for(;T=N.pop();)CKEDITOR.error("editor-plugin-required",{plugin:T.replace(",",""),requiredBy:y});W&&!h.lang[y]&&(W.split&&(W=W.split(",")),x=0<=CKEDITOR.tools.indexOf(W,h.langCode)?h.langCode:(x=h.langCode.replace(/-.*/,""))!=h.langCode&&0<=CKEDITOR.tools.indexOf(W,x)?x:0<=CKEDITOR.tools.indexOf(W,"en")?"en":W[0],F.langEntries&&F.langEntries[x]?(h.lang[y]=F.langEntries[x],x=null):K.push(CKEDITOR.getUrl(F.path+"lang/"+x+".js"))),v.push(x),w.push(F)}CKEDITOR.scriptLoader.load(K,function(){for(var A=["beforeInit","init","afterInit"],P=0;P<A.length;P++)for(var H=0;H<w.length;H++){var E=w[H];0===P&&v[H]&&E.lang&&E.langEntries&&(h.lang[E.name]=E.langEntries[v[H]]),E[A[P]]&&E[A[P]](h)}for(h.fireOnce("pluginsLoaded"),D.keystrokes&&h.setKeystroke(h.config.keystrokes),H=0;H<h.config.blockedKeystrokes.length;H++)h.keystrokeHandler.blockedKeystrokes[h.config.blockedKeystrokes[H]]=1;h.status="loaded",h.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,h)})})}(h)})}(h)})}(h)})}(h)}),I&&null!=I.customConfig&&(h.config.customConfig=I.customConfig),f(h)||h.fireOnce("customConfigLoaded")}(this,h):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function a(){var I,h=this.commands;for(I in h)o(this,h[I])}function o(h,I){I[I.startDisabled||h.readOnly&&!I.readOnly?"disable":I.modes[h.mode]?"enable":"disable"]()}function u(h,I,D){if(I){var k,b,p=h.commands;for(b in p)k=p[b],(D||k.contextSensitive)&&k.refresh(h,I)}}function f(h){if(!(I=h.config.customConfig))return!1;var I=CKEDITOR.getUrl(I),D=C[I]||(C[I]={});return D.fn?(D.fn.call(h,h.config),CKEDITOR.getUrl(h.config.customConfig)!=I&&f(h)||h.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(I,function(){D.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},f(h)}),!0}function c(){var h=this.element;if(h&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var I=this.getData();return this.config.htmlEncodeOutput&&(I=CKEDITOR.tools.htmlEncode(I)),h.is("textarea")?h.setValue(I):h.setHtml(I),!0}return!1}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var g=0,C={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{plugins:{detectConflict:function(h,I){for(var D=0;D<I.length;D++){var k=I[D];if(this[k])return CKEDITOR.warn("editor-plugin-conflict",{plugin:h,replacedWith:k}),!0}return!1}},addCommand:function(h,I){I.name=h.toLowerCase();var D=I instanceof CKEDITOR.command?I:new CKEDITOR.command(this,I);return this.mode&&o(this,D),this.commands[h]=D},_attachToForm:function(){function h(p){D.updateElement(),D._.required&&!k.getValue()&&!1===D.fire("required")&&p.data.preventDefault()}var p,D=this,k=D.element,b=new CKEDITOR.dom.element(k.$.form);k.is("textarea")&&b&&(b.on("submit",h),!!((p=b.$.submit)&&p.call&&p.apply)&&(b.$.submit=CKEDITOR.tools.override(b.$.submit,function(p){return function(){h(),p.apply?p.apply(this):p()}})),D.on("destroy",function(){b.removeListener("submit",h)}))},destroy:function(h){var I=CKEDITOR.filter.instances,D=this;this.fire("beforeDestroy"),!h&&c.call(this),this.editable(null),this.filter&&delete this.filter,CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(I),function(k){D===(k=I[k]).editor&&k.destroy()}),delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(h){if(!h){if(!(h=this.getSelection()))return null;h=h.getStartElement()}return h?new CKEDITOR.dom.elementPath(h,this.editable()):null},createRange:function(){var h=this.editable();return h?new CKEDITOR.dom.range(h):null},execCommand:function(h,I){var D=this.getCommand(h),k={name:h,commandData:I||{},command:D};return!(!D||D.state==CKEDITOR.TRISTATE_DISABLED||!1===this.fire("beforeCommandExec",k)||(k.returnValue=D.exec(k.commandData),D.async||!1===this.fire("afterCommandExec",k)))&&k.returnValue},getCommand:function(h){return this.commands[h]},getData:function(h){!h&&this.fire("beforeGetData");var I=this._.data;return"string"!=typeof I&&(I=(I=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?I.is("textarea")?I.getValue():I.getHtml():""),I={dataValue:I},!h&&this.fire("getData",I),I.dataValue},getSnapshot:function(){var h=this.fire("getSnapshot");return"string"!=typeof h&&(h=(h=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?h.is("textarea")?h.getValue():h.getHtml():""),h},loadSnapshot:function(h){this.fire("loadSnapshot",h)},setData:function(h,I,D){var k=!0,b=I;I&&"object"==typeof I&&(D=I.internal,b=I.callback,k=!I.noSnapshot),!D&&k&&this.fire("saveSnapshot"),(b||!D)&&this.once("dataReady",function(p){!D&&k&&this.fire("saveSnapshot"),b&&b.call(p.editor)}),h={dataValue:h},!D&&this.fire("setData",h),this._.data=h.dataValue,!D&&this.fire("afterSetData",h)},setReadOnly:function(h){this.readOnly!=(h=null==h||h)&&(this.readOnly=h,this.keystrokeHandler.blockedKeystrokes[8]=+h,this.editable().setReadOnly(h),this.fire("readOnly"))},insertHtml:function(h,I,D){this.fire("insertHtml",{dataValue:h,mode:I,range:D})},insertText:function(h){this.fire("insertText",h)},insertElement:function(h){this.fire("insertElement",h)},getSelectedHtml:function(h){var I=this.editable(),D=(D=this.getSelection())&&D.getRanges();return I&&D&&0!==D.length?(I=function(h,I){function k(K){var y=K.startContainer;return y.is("tr")?K.cloneContents():y.clone(!0)}for(var p,O,R,b=new CKEDITOR.dom.documentFragment,_=0;_<h.length;_++){var w=h[_],v=w.startContainer.getAscendant("tr",!0);y=void 0,void 0,F=(K=w).endContainer,(y=K.startContainer).is&&(y.is("tr")||y.is("td")&&y.equals(F)&&K.endOffset===y.getChildCount())?(p||((p=v.getAscendant("table").clone()).append(v.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),b.append(p),p=p.findOne("thead, tbody, tfoot")),O&&O.equals(v)||(O=v,R=v.clone(),p.append(R)),R.append(k(w))):b.append(w.cloneContents())}var K,y,F;return p?b:I.getHtmlFromRange(h[0])}(D,I),h?I.getHtml():I):null},extractSelectedHtml:function(h,I){var p,D=this.editable(),k=this.getSelection().getRanges(),b=new CKEDITOR.dom.documentFragment;if(!D||0===k.length)return null;for(p=0;p<k.length;p++)b.append(D.extractHtmlFromRange(k[p],I));return I||this.getSelection().selectRanges([k[0]]),h?b.getHtml():b},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return c.call(this)},setKeystroke:function(){for(var D,k,h=this.keystrokeHandler.keystrokes,I=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],b=I.length;b--;)D=I[b],k=0,CKEDITOR.tools.isArray(D)&&(k=D[1],D=D[0]),k?h[D]=k:delete h[D]},getCommandKeystroke:function(h,I){var D="string"==typeof h?this.getCommand(h):h,k=[];if(D){var b=CKEDITOR.tools.object.findKey(this.commands,D),p=this.keystrokeHandler.keystrokes;if(D.fakeKeystroke)k.push(D.fakeKeystroke);else for(var O in p)p[O]===b&&k.push(O)}return I?k:k[0]||null},addFeature:function(h){return this.filter.addFeature(h)},setActiveFilter:function(h){h||(h=this.filter),this.activeFilter!==h&&(this.activeFilter=h,this.fire("activeFilterChange"),h===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(h.getAllowedEnterMode(this.enterMode),h.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(h,I){h=h?this.blockless?CKEDITOR.ENTER_BR:h:this.enterMode,I=I?this.blockless?CKEDITOR.ENTER_BR:I:this.shiftEnterMode,(this.activeEnterMode!=h||this.activeShiftEnterMode!=I)&&(this.activeEnterMode=h,this.activeShiftEnterMode=I,this.fire("activeEnterModeChange"))},showNotification:function(h){alert(h)}}),CKEDITOR.editor._getEditorElement=function(h){if(!CKEDITOR.env.isCompatible)return null;var I=CKEDITOR.dom.element.get(h);return I?I.getEditor()?(CKEDITOR.error("editor-element-conflict",{editorName:I.getEditor().name}),null):I:(CKEDITOR.error("editor-incorrect-element",{element:h}),null)}}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,d={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(s){for(var a,o,f,u=0;a=this._.htmlPartsRegex.exec(s);)if((o=a.index)>u&&(u=s.substring(u,o),f?f.push(u):this.onText(u)),u=this._.htmlPartsRegex.lastIndex,!(o=a[1])||(o=o.toLowerCase(),f&&CKEDITOR.dtd.$cdata[o]&&(this.onCDATA(f.join("")),f=null),f))if(f)f.push(a[0]);else if(o=a[3]){if(o=o.toLowerCase(),!/="/.test(o)){var r,i={},l=a[4];if(a=!!a[5],l)for(;r=e.exec(l);){var n=r[1].toLowerCase();i[n]=!(r=r[2]||r[3]||r[4]||"")&&d[n]?n:CKEDITOR.tools.htmlDecodeAttr(r)}this.onTagOpen(o,i,a),!f&&CKEDITOR.dtd.$cdata[o]&&(f=[])}}else(o=a[2])&&this.onComment(o);else this.onTagClose(o);s.length>u&&this.onText(s.substring(u,s.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,d){this._.output.push(d?" />":">")},attribute:function(e,d){"string"==typeof d&&(d=CKEDITOR.tools.htmlEncodeAttr(d)),this._.output.push(" ",e,'="',d,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("\x3c!--",e,"--\x3e")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var d=this._.output.join("");return e&&this.reset(),d}}}),CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,d=CKEDITOR.tools.indexOf(e,this),s=this.previous,a=this.next;s&&(s.next=a),a&&(a.previous=s),e.splice(d,1),this.parent=null},replaceWith:function(e){var d=this.parent.children,s=CKEDITOR.tools.indexOf(d,this),a=e.previous=this.previous,o=e.next=this.next;a&&(a.next=e),o&&(o.previous=e),d[s]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var d=e.parent.children,s=CKEDITOR.tools.indexOf(d,e),a=e.next;d.splice(s+1,0,this),this.next=e.next,this.previous=e,e.next=this,a&&(a.previous=this),this.parent=e.parent},insertBefore:function(e){var d=e.parent.children,s=CKEDITOR.tools.indexOf(d,e);d.splice(s,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){for(var d="function"==typeof e?e:"string"==typeof e?function(a){return a.name==e}:function(a){return a.name in e},s=this.parent;s&&s.type==CKEDITOR.NODE_ELEMENT;){if(d(s))return s;s=s.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}},CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,d){var s=this.value;return(s=e.onComment(d,s,this))?"string"!=typeof s?(this.replaceWith(s),!1):(this.value=s,!0):(this.remove(),!1)},writeHtml:function(e,d){d&&this.filter(d),e.comment(this.value)}}),CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,d){if(!(this.value=e.onText(d,this.value,this)))return this.remove(),!1},writeHtml:function(e,d){d&&this.filter(d),e.text(this.value)}}),CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}}),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(u){return!u.attributes["data-cke-survive"]&&("a"==u.name&&u.attributes.href||CKEDITOR.dtd.$removeEmpty[u.name])}var d=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),s={ol:1,ul:1},a=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),o={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(u,f,i){function r(p){var O;if(0<h.length)for(var R=0;R<h.length;R++){var _=h[R],w=_.name,v=CKEDITOR.dtd[w],K=D.name&&CKEDITOR.dtd[D.name];K&&!K[w]||p&&v&&!v[p]&&CKEDITOR.dtd[p]?w==D.name&&(t(D,D.parent,1),R--):(O||(l(),O=1),(_=_.clone()).parent=D,D=_,h.splice(R,1),R--)}}function l(){for(;I.length;)t(I.shift(),D)}function n(p){if(p._.isBlockLike&&"pre"!=p.name&&"textarea"!=p.name){var _,O=p.children.length,R=p.children[O-1];R&&R.type==CKEDITOR.NODE_TEXT&&((_=CKEDITOR.tools.rtrim(R.value))?R.value=_:p.children.length=O-1)}}function t(p,O,R){O=O||D||C;var _=D;void 0===p.previous&&(c(O,p)&&(D=O,g.onTagOpen(i,{}),p.returnPoint=O=D),n(p),e(p)&&!p.children.length||O.add(p),"pre"==p.name&&(b=!1),"textarea"==p.name&&(k=!1)),p.returnPoint?(D=p.returnPoint,delete p.returnPoint):D=R?O:_}function c(p,O){var R,_;if((p==C||"body"==p.name)&&i&&(!p.name||CKEDITOR.dtd[p.name][i]))return(R=O.attributes&&(_=O.attributes["data-cke-real-element-type"])?_:O.name)&&R in CKEDITOR.dtd.$inline&&!(R in CKEDITOR.dtd.head)&&!O.isOrphan||O.type==CKEDITOR.NODE_TEXT}function m(p,O){return(p in CKEDITOR.dtd.$listItem||p in CKEDITOR.dtd.$tableContent)&&(p==O||"dt"==p&&"dd"==O||"dd"==p&&"dt"==O)}var g=new CKEDITOR.htmlParser,C=f instanceof CKEDITOR.htmlParser.element?f:"string"==typeof f?new CKEDITOR.htmlParser.element(f):new CKEDITOR.htmlParser.fragment,h=[],I=[],D=C,k="textarea"==C.name,b="pre"==C.name;for(g.onTagOpen=function(p,O,R,_){if((O=new CKEDITOR.htmlParser.element(p,O)).isUnknown&&R&&(O.isEmpty=!0),O.isOptionalClose=_,e(O))h.push(O);else{if("pre"==p)b=!0;else{if("br"==p&&b)return void D.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==p&&(k=!0)}if("br"==p)I.push(O);else{for(;_=(R=D.name)?CKEDITOR.dtd[R]||(D._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):a,!(O.isUnknown||D.isUnknown||_[p]);)if(D.isOptionalClose)g.onTagClose(R);else if(p in s&&R in s)(R=(R=D.children)[R.length-1])&&"li"==R.name||t(R=new CKEDITOR.htmlParser.element("li"),D),!O.returnPoint&&(O.returnPoint=D),D=R;else if(p in CKEDITOR.dtd.$listItem&&!m(p,R))g.onTagOpen("li"==p?"ul":"dl",{},0,1);else if(R in d&&!m(p,R))!O.returnPoint&&(O.returnPoint=D),D=D.parent;else{if(R in CKEDITOR.dtd.$inline&&h.unshift(D),!D.parent){O.isOrphan=1;break}t(D,D.parent,1)}r(p),l(),O.parent=D,O.isEmpty?t(O):D=O}}},g.onTagClose=function(p){for(var O=h.length-1;0<=O;O--)if(p==h[O].name)return void h.splice(O,1);for(var R=[],_=[],w=D;w!=C&&w.name!=p;)w._.isBlockLike||_.unshift(w),R.push(w),w=w.returnPoint||w.parent;if(w!=C){for(O=0;O<R.length;O++){var v=R[O];t(v,v.parent)}D=w,w._.isBlockLike&&l(),t(w,w.parent),w==D&&(D=D.parent),h=h.concat(_)}"body"==p&&(i=!1)},g.onText=function(p){if(D._.hasInlineStarted&&!I.length||b||k||0!==(p=CKEDITOR.tools.ltrim(p)).length){var O=D.name,R=O?CKEDITOR.dtd[O]||(D._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):a;k||R["#"]||!(O in d)?(l(),r(),b||k||(p=p.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),p=new CKEDITOR.htmlParser.text(p),c(D,p)&&this.onTagOpen(i,{},0,1),D.add(p)):(g.onTagOpen(o[O]||""),g.onText(p))}},g.onCDATA=function(p){D.add(new CKEDITOR.htmlParser.cdata(p))},g.onComment=function(p){l(),r(),D.add(new CKEDITOR.htmlParser.comment(p))},g.parse(u),l();D!=C;)t(D,D.parent,1);return n(C),C},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(u,f){isNaN(f)&&(f=this.children.length);var i=0<f?this.children[f-1]:null;if(i){if(u._.isBlockLike&&i.type==CKEDITOR.NODE_TEXT&&(i.value=CKEDITOR.tools.rtrim(i.value),0===i.value.length))return this.children.pop(),void this.add(u);i.next=u}u.previous=i,u.parent=this,this.children.splice(f,0,u),this._.hasInlineStarted||(this._.hasInlineStarted=u.type==CKEDITOR.NODE_TEXT||u.type==CKEDITOR.NODE_ELEMENT&&!u._.isBlockLike)},filter:function(u,f){f=this.getFilterContext(f),u.onRoot(f,this),this.filterChildren(u,!1,f)},filterChildren:function(u,f,i){if(this.childrenFilteredBy!=u.id)for(i=this.getFilterContext(i),f&&!this.parent&&u.onRoot(i,this),this.childrenFilteredBy=u.id,f=0;f<this.children.length;f++)!1===this.children[f].filter(u,i)&&f--},writeHtml:function(u,f){f&&this.filter(f),this.writeChildrenHtml(u)},writeChildrenHtml:function(u,f,i){var r=this.getFilterContext();for(i&&!this.parent&&f&&f.onRoot(r,this),f&&this.filterChildren(f,!1,r),f=0,r=(i=this.children).length;f<r;f++)i[f].writeHtml(u)},forEach:function(u,f,i){if(!(i||f&&this.type!=f))var r=u(this);if(!1!==r){i=this.children;for(var l=0;l<i.length;l++)(r=i[l]).type==CKEDITOR.NODE_ELEMENT?r.forEach(u,f):f&&r.type!=f||u(r)}},getFilterContext:function(u){return u||{}}}}(),function(){function e(){this.rules=[]}function d(s,a,o,u){var f,i;for(f in a)(i=s[f])||(i=s[f]=new e),i.add(a[f],o,u)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(s){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,s&&this.addRules(s,10)},proto:{addRules:function(s,a){var o;"number"==typeof a?o=a:a&&"priority"in a&&(o=a.priority),"number"!=typeof o&&(o=10),"object"!=typeof a&&(a={}),s.elementNames&&this.elementNameRules.addMany(s.elementNames,o,a),s.attributeNames&&this.attributeNameRules.addMany(s.attributeNames,o,a),s.elements&&d(this.elementsRules,s.elements,o,a),s.attributes&&d(this.attributesRules,s.attributes,o,a),s.text&&this.textRules.add(s.text,o,a),s.comment&&this.commentRules.add(s.comment,o,a),s.root&&this.rootRules.add(s.root,o,a)},applyTo:function(s){s.filter(this)},onElementName:function(s,a){return this.elementNameRules.execOnName(s,a)},onAttributeName:function(s,a){return this.attributeNameRules.execOnName(s,a)},onText:function(s,a,o){return this.textRules.exec(s,a,o)},onComment:function(s,a,o){return this.commentRules.exec(s,a,o)},onRoot:function(s,a){return this.rootRules.exec(s,a)},onElement:function(s,a){for(var u,o=[this.elementsRules["^"],this.elementsRules[a.name],this.elementsRules.$],f=0;3>f;f++)if(u=o[f]){if(!1===(u=u.exec(s,a,this)))return null;if(u&&u!=a)return this.onNode(s,u);if(a.parent&&!a.name)break}return a},onNode:function(s,a){var o=a.type;return o==CKEDITOR.NODE_ELEMENT?this.onElement(s,a):o==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(s,a.value)):o==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(s,a.value)):null},onAttribute:function(s,a,o,u){return(o=this.attributesRules[o])?o.exec(s,u,a,this):u}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(s,a,o){this.rules.splice(this.findIndex(a),0,{value:s,priority:a,options:o})},addMany:function(s,a,o){for(var u=[this.findIndex(a),0],f=0,i=s.length;f<i;f++)u.push({value:s[f],priority:a,options:o});this.rules.splice.apply(this.rules,u)},findIndex:function(s){for(var a=this.rules,o=a.length-1;0<=o&&s<a[o].priority;)o--;return o+1},exec:function(s,a){var r,l,n,t,o=a instanceof CKEDITOR.htmlParser.node||a instanceof CKEDITOR.htmlParser.fragment,u=Array.prototype.slice.call(arguments,1),f=this.rules,i=f.length;for(t=0;t<i;t++)if(o&&(r=a.type,l=a.name),n=f[t],!(s.nonEditable&&!n.options.applyToAll||s.nestedEditable&&n.options.excludeNestedEditable)){if(!1===(n=n.value.apply(null,u))||o&&n&&(n.name!=l||n.type!=r))return n;null!=n&&(u[0]=a=n)}return a},execOnName:function(s,a){for(var i,o=0,u=this.rules,f=u.length;a&&o<f;o++)i=u[o],s.nonEditable&&!i.options.applyToAll||s.nestedEditable&&i.options.excludeNestedEditable||(a=a.replace(i.value[0],i.value[1]));return a}}}(),function(){function e(E,L){function B(S){return S||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("\xa0"):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function q(S,$){return function(M){if(M.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var J,V,U=[],z=s(M);if(z)for(j(z,1)&&U.push(z);z;)u(z)&&(J=a(z))&&j(J)&&((V=a(J))&&!u(V)?U.push(J):(B(Y).insertAfter(J),J.remove())),z=z.previous;for(z=0;z<U.length;z++)U[z].remove();(U=!S||!1!==("function"==typeof $?$(M):$))&&(U=!(!Y&&!CKEDITOR.env.needsBrFiller&&M.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||!Y&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||M.name in CKEDITOR.dtd.tr||M.name in CKEDITOR.dtd.$listItem)||(U=s(M))&&("form"!=M.name||"input"!=U.name))),U&&M.add(B(S))}}}function j(S,$){return!(Y&&!CKEDITOR.env.needsBrFiller||S.type!=CKEDITOR.NODE_ELEMENT||"br"!=S.name||S.attributes["data-cke-eol"])||!!(S.type==CKEDITOR.NODE_TEXT&&(M=S.value.match(D))&&(M.index&&(new CKEDITOR.htmlParser.text(S.value.substring(0,M.index)).insertBefore(S),S.value=M[0]),!CKEDITOR.env.needsBrFiller&&Y&&(!$||S.parent.name in Z)||!Y&&((M=S.previous)&&"br"==M.name||!M||u(M))));var M}var te,S,G={elements:{}},Y="html"==L,Z=CKEDITOR.tools.extend({},O);for(te in Z)"#"in b[te]||delete Z[te];for(te in Z)G.elements[te]=q(Y,E.config.fillEmptyBlocks);return G.root=q(Y,!1),G.elements.br=(S=Y,function($){if($.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var M=$.attributes;if("data-cke-bogus"in M||"data-cke-eol"in M)delete M["data-cke-bogus"];else{for(M=$.next;M&&o(M);)M=M.next;var U=a($);!M&&u($.parent)?f($.parent,B(S)):u(M)&&U&&!u(U)&&B(S).insertBefore(M)}}}),G}function d(E,L){return E!=CKEDITOR.ENTER_BR&&!1!==L&&(E==CKEDITOR.ENTER_DIV?"div":"p")}function s(E){for(E=E.children[E.children.length-1];E&&o(E);)E=E.previous;return E}function a(E){for(E=E.previous;E&&o(E);)E=E.previous;return E}function o(E){return E.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(E.value)||E.type==CKEDITOR.NODE_ELEMENT&&E.attributes["data-cke-bookmark"]}function u(E){return E&&(E.type==CKEDITOR.NODE_ELEMENT&&E.name in O||E.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function f(E,L){var B=E.children[E.children.length-1];E.children.push(L),L.parent=E,B&&(B.next=L,L.previous=B)}function i(E){"false"!=(E=E.attributes).contenteditable&&(E["data-cke-editable"]=E.contenteditable?"true":1),E.contenteditable="false"}function r(E){switch((E=E.attributes)["data-cke-editable"]){case"true":E.contenteditable="true";break;case"1":delete E.contenteditable}}function n(E,L){return E.replace(L,function(B,q,j){return 0===B.indexOf("<textarea")&&(B=q+C(j).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(B)+"</cke:encoded>"})}function m(E){return CKEDITOR.tools.array.reduce(E.split(""),function(L,B){var q=B.toLowerCase(),j=B.toUpperCase(),G=g(q);return q!==j&&(G+="|"+g(j)),L+"("+G+")"},"")}function g(E){var L,B=(L=E.charCodeAt(0)).toString(16);for(var q in L={htmlCode:"&#"+L+";?",hex:"&#x0*"+B+";?",entity:{"<":"&lt;",">":"&gt;",":":"&colon;"}[E]})L[q]&&(E+="|"+L[q]);return E}function C(E){return E.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(L,B){return decodeURIComponent(B)})}function h(E,L){var B=L._.dataStore;return E.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(q,j){return decodeURIComponent(j)}).replace(/\{cke_protected_(\d+)\}/g,function(q,j){return B&&B[j]||""})}CKEDITOR.htmlDataProcessor=function(E){var L,B,q=this;this.editor=E,this.dataFilter=L=new CKEDITOR.htmlParser.filter,this.htmlFilter=B=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,L.addRules(R),L.addRules(_,{applyToAll:!0}),L.addRules(e(E,"data"),{applyToAll:!0}),B.addRules(w),B.addRules(v,{applyToAll:!0}),B.addRules(e(E,"html"),{applyToAll:!0}),E.on("toHtml",function(j){var Y,Z,G=function(E,L){var B=[],q=L.config.protectedSource,j=L._.dataStore||(L._.dataStore={id:1}),G=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g;q=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(q),E=E.replace(/\x3c!--[\s\S]*?--\x3e/g,function(Z){return"\x3c!--{cke_tempcomment}"+(B.push(Z)-1)+"--\x3e"});for(var Y=0;Y<q.length;Y++)E=E.replace(q[Y],function(Z){return Z=Z.replace(G,function(te,S,$){return B[$]}),/cke_temp(comment)?/.test(Z)?Z:"\x3c!--{cke_temp}"+(B.push(Z)-1)+"--\x3e"});return(E=(E=E.replace(G,function(Z,te,S){return"\x3c!--"+k+(te?"{C}":"")+encodeURIComponent(B[S]).replace(/--/g,"%2D%2D")+"--\x3e"})).replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(Z){return Z.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(te,S){return j[j.id]=decodeURIComponent(S),"{cke_protected_"+j.id+++"}"})})).replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(Z,te,S,$){return"<"+te+S+">"+h(C($),L)+"</"+te+">"})}(G=(G=(j=j.data).dataValue).replace(N,""),E);G=function(E){return E.replace(K,function(L,B,q){return"<"+B+q.replace(y,function(j,G){return F.test(G)&&-1==q.indexOf("data-cke-saved-"+G)?" data-cke-saved-"+j+" data-cke-"+CKEDITOR.rnd+"-"+j:j})+">"})}(G=n(G,x)),G=(G=(G=(G=(G=n(G,W)).replace(A,"$1cke:$2")).replace(H,"<cke:$1$2></cke:$1>")).replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")).replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),Y=j.context||E.editable().getName(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==Y&&(Y="div",G="<pre>"+G+"</pre>",Z=1),(Y=E.document.createElement(Y)).setHtml("a"+G),G=(G=Y.getHtml().substr(1)).replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),Z&&(G=G.replace(/^<pre>|<\/pre>$/gi,"")),G=function(E){return E.replace(T,function(L,B){return decodeURIComponent(B)})}(G=G.replace(P,"$1$2")),G=C(G),Y=!1!==j.fixForBody&&d(j.enterMode,E.config.autoParagraph),G=CKEDITOR.htmlParser.fragment.fromHtml(G,j.context,Y),Y&&!(Z=G).children.length&&CKEDITOR.dtd[Z.name][Y]&&(Y=new CKEDITOR.htmlParser.element(Y),Z.add(Y)),j.dataValue=G},null,null,5),E.on("toHtml",function(j){j.data.filter.applyTo(j.data.dataValue,!0,j.data.dontFilter,j.data.enterMode)&&E.fire("dataFiltered")},null,null,6),E.on("toHtml",function(j){j.data.dataValue.filterChildren(q.dataFilter,!0)},null,null,10),E.on("toHtml",function(j){var G=(j=j.data).dataValue,Y=new CKEDITOR.htmlParser.basicWriter;G.writeChildrenHtml(Y),G=Y.getHtml(!0),j.dataValue=function(E){return E.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(L){return"\x3c!--"+k+"{C}"+encodeURIComponent(L).replace(/--/g,"%2D%2D")+"--\x3e"})}(G)},null,null,15),E.on("toDataFormat",function(j){var G=j.data.dataValue;j.data.enterMode!=CKEDITOR.ENTER_BR&&(G=G.replace(/^<br *\/?>/i,"")),j.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(G,j.data.context,d(j.data.enterMode,E.config.autoParagraph))},null,null,5),E.on("toDataFormat",function(j){j.data.dataValue.filterChildren(q.htmlFilter,!0)},null,null,10),E.on("toDataFormat",function(j){j.data.filter.applyTo(j.data.dataValue,!1,!0)},null,null,11),E.on("toDataFormat",function(j){var G=j.data.dataValue,Y=q.writer;Y.reset(),G.writeChildrenHtml(Y),G=h(G=C(G=Y.getHtml(!0)),E),j.data.dataValue=G},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(E,L,B,q){var G,Y,Z,te,j=this.editor;return L&&"object"==typeof L?(G=L.context,B=L.fixForBody,q=L.dontFilter,Y=L.filter,Z=L.enterMode,te=L.protectedWhitespaces):G=L,G||null===G||(G=j.editable().getName()),j.fire("toHtml",{dataValue:E,context:G,fixForBody:B,dontFilter:q,filter:Y||j.filter,enterMode:Z||j.enterMode,protectedWhitespaces:te}).dataValue},toDataFormat:function(E,L){var B,q,j;return L&&(B=L.context,q=L.filter,j=L.enterMode),B||null===B||(B=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:E,filter:q||this.editor.filter,context:B,enterMode:j||this.editor.enterMode}).dataValue}};var D=/(?:&nbsp;|\xa0)$/,k="{cke_protected}",b=CKEDITOR.dtd,p="caption colgroup col thead tfoot tbody".split(" "),O=CKEDITOR.tools.extend({},b.$blockLimit,b.$block),R={elements:{input:i,textarea:i}},_={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(E){if(E.attributes&&E.attributes.src){var L=E.attributes.src.toLowerCase().replace(/[^a-z]/gi,"");(0===L.indexOf("javascript")||0===L.indexOf("data"))&&(E.attributes["data-cke-pa-src"]=E.attributes.src,delete E.attributes.src)}}}},w={elements:{embed:function(E){if((L=E.parent)&&"object"==L.name){var B=L.attributes.width,L=L.attributes.height;B&&(E.attributes.width=B),L&&(E.attributes.height=L)}},a:function(E){var L=E.attributes;if(!(E.children.length||L.name||L.id||E.attributes["data-cke-saved-name"]))return!1}}},v={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(E){var L=E.attributes;if(L){if(L["data-cke-temp"])return!1;for(var B=["name","href","src"],j=0;j<B.length;j++)"data-cke-saved-"+B[j]in L&&delete L[B[j]]}return E},table:function(E){E.children.slice(0).sort(function(L,B){var q,j;return L.type==CKEDITOR.NODE_ELEMENT&&B.type==L.type&&(q=CKEDITOR.tools.indexOf(p,L.name),j=CKEDITOR.tools.indexOf(p,B.name)),-1<q&&-1<j&&q!=j||(q=L.parent?L.getIndex():-1,j=B.parent?B.getIndex():-1),q>j?1:-1})},param:function(E){return E.children=[],E.isEmpty=!0,E},span:function(E){"Apple-style-span"==E.attributes.class&&delete E.name},html:function(E){delete E.attributes.contenteditable,delete E.attributes.class},body:function(E){delete E.attributes.spellcheck,delete E.attributes.contenteditable},style:function(E){var L=E.children[0];L&&L.value&&(L.value=CKEDITOR.tools.trim(L.value)),E.attributes.type||(E.attributes.type="text/css")},title:function(E){var L=E.children[0];!L&&f(E,L=new CKEDITOR.htmlParser.text),L.value=E.attributes["data-cke-title"]||""},input:r,textarea:r},attributes:{class:function(E){return CKEDITOR.tools.ltrim(E.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(v.attributes.style=function(E){return E.replace(/(^|;)([^\:]+)/g,function(L){return L.toLowerCase()})});var K=/<(a|area|img|input|source)\b([^>]*)>/gi,y=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,F=/^(href|src|name)$/i,W=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,x=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,T=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,N=new RegExp("("+m("<cke:encoded>")+"(.*?)"+m("</cke:encoded>")+")|("+m("<")+m("/")+"?"+m("cke:encoded>")+")","gi"),A=/(<\/?)((?:object|embed|param|html|body|head|title)([\s][^>]*)?>)/gi,P=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,H=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(e,d){this.name=e,this.attributes=d||{},this.children=[];var s=e||"",a=s.match(/^cke:(.*)/);a&&(s=a[1]),s=!!(CKEDITOR.dtd.$nonBodyContent[s]||CKEDITOR.dtd.$block[s]||CKEDITOR.dtd.$listItem[s]||CKEDITOR.dtd.$tableContent[s]||CKEDITOR.dtd.$nonEditable[s]||"br"==s),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:s,hasInlineStarted:this.isEmpty||!s}},CKEDITOR.htmlParser.cssStyle=function(e){var d={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(s,a,o){"font-family"==a&&(o=o.replace(/["']/g,"")),d[a.toLowerCase()]=o}),{rules:d,populate:function(s){var a=this.toString();a&&(s instanceof CKEDITOR.dom.element?s.setAttribute("style",a):s instanceof CKEDITOR.htmlParser.element?s.attributes.style=a:s.style=a)},toString:function(){var a,s=[];for(a in d)d[a]&&s.push(a,":",d[a],";");return s.join("")}}},function(){var d=function(a,o){return(a=a[0])<(o=o[0])?-1:a>o?1:0},s=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:s.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,o){var f,i,r,l,u=this;for(o=u.getFilterContext(o),u.parent||a.onRoot(o,u);;){if(!(i=a.onElementName(o,f=u.name)))return this.remove(),!1;if(u.name=i,!(u=a.onElement(o,u)))return this.remove(),!1;if(u!==this)return this.replaceWith(u),!1;if(u.name==f)break;if(u.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(u),!1;if(!u.name)return this.replaceWithChildren(),!1}for(r in f=u.attributes){for(i=f[r];;){if(!(l=a.onAttributeName(o,r))){delete f[r];break}if(l==r)break;delete f[r],r=l}l&&(!1===(i=a.onAttribute(o,u,l,i))?delete f[l]:f[l]=i)}return u.isEmpty||this.filterChildren(a,!1,o),!0},filterChildren:s.filterChildren,writeHtml:function(a,o){o&&this.filter(o);var r,l,u=this.name,f=[],i=this.attributes;for(r in a.openTag(u,i),i)f.push([r,i[r]]);for(a.sortAttributes&&f.sort(d),r=0,l=f.length;r<l;r++)a.attribute((i=f[r])[0],i[1]);a.openTagClose(u,this.isEmpty),this.writeChildrenHtml(a),this.isEmpty||a.closeTag(u)},writeChildrenHtml:s.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,o=a.length;o;)a[--o].insertAfter(this);this.remove()},forEach:s.forEach,getFirst:function(a){if(!a)return this.children.length?this.children[0]:null;"function"!=typeof a&&(a=function(a){return function(o){return o.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?o.name==a:o.name in a)}}(a));for(var o=0,u=this.children.length;o<u;++o)if(a(this.children[o]))return this.children[o];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(a),a.getHtml()},setHtml:function(a){for(var o=0,u=(a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children).length;o<u;++o)a[o].parent=this},getOuterHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(a),a.getHtml()},split:function(a){for(var o=this.children.splice(a,this.children.length-a),u=this.clone(),f=0;f<o.length;++f)o[f].parent=u;return u.children=o,o[0]&&(o[0].previous=null),0<a&&(this.children[a-1].next=null),this.parent.add(u,this.getIndex()+1),u},find:function(a,o){void 0===o&&(o=!1);var f,u=[];for(f=0;f<this.children.length;f++){var i=this.children[f];("function"==typeof a&&a(i)||"string"==typeof a&&i.name===a)&&u.push(i),o&&i.find&&(u=u.concat(i.find(a,o)))}return u},findOne:function(a,o){var u=null,f=CKEDITOR.tools.array.find(this.children,function(i){var r="function"==typeof a?a(i):i.name===a;return r||!o?r:(i.children&&i.findOne&&(u=i.findOne(a,!0)),!!u)});return u||f||null},addClass:function(a){if(!this.hasClass(a)){var o=this.attributes.class||"";this.attributes.class=o+(o?" ":"")+a}},removeClass:function(a){var o=this.attributes.class;o&&((o=CKEDITOR.tools.trim(o.replace(new RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes.class=o:delete this.attributes.class)},hasClass:function(a){var o=this.attributes.class;return!!o&&new RegExp("(?:^|\\s)"+a+"(?=\\s|$)").test(o)},getFilterContext:function(a){var o=[];if(a||(a={nonEditable:!1,nestedEditable:!1}),a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&"true"==this.attributes.contenteditable&&o.push("nestedEditable",!0):o.push("nonEditable",!0),o.length){a=CKEDITOR.tools.copy(a);for(var u=0;u<o.length;u+=2)a[o[u]]=o[u+1]}return a}},!0)}(),function(){var e=/{([^}]+)}/g;CKEDITOR.template=function(d){this.source="function"==typeof d?d:String(d)},CKEDITOR.template.prototype.output=function(d,s){var a=("function"==typeof this.source?this.source(d):this.source).replace(e,function(o,u){return void 0!==d[u]?d[u]:o});return s?s.push(a):a}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){function d(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}CKEDITOR.instances[e.name]=e,e.on("focus",function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))}),e.on("blur",d),e.on("destroy",d),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(d,s){var a=e[d];return a||(a={name:d,source:s},CKEDITOR.fire("template",a),e[d]=new CKEDITOR.template(a.source))},CKEDITOR.getTemplate=function(d){return e[d]}}(),function(){var e=[];CKEDITOR.addCss=function(d){e.push(d)},CKEDITOR.getCss=function(){return e.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,CKEDITOR.inline=function(e,d){if(!(e=CKEDITOR.editor._getEditorElement(e)))return null;var s=new CKEDITOR.editor(d,e,CKEDITOR.ELEMENT_MODE_INLINE),a=e.is("textarea")?e:null;return a?(s.setData(a.getValue(),null,!0),(e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!s.readOnly+'" class="cke_textarea_inline">'+a.getValue()+"</div>",CKEDITOR.document)).insertAfter(a),a.hide(),a.$.form&&s._attachToForm()):s.setData(e.getHtml(),null,!0),s.on("loaded",function(){s.fire("uiReady"),s.editable(e),s.container=e,s.ui.contentsElement=e,s.setData(s.getData(1)),s.resetDirty(),s.fire("contentDom"),s.mode="wysiwyg",s.fire("mode"),s.status="ready",s.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,s)},null,null,1e4),s.on("destroy",function(){a&&(s.container.clearCustomData(),s.container.remove(),a.show()),s.element.clearCustomData(),delete s.element}),s},CKEDITOR.inlineAll=function(){var e,d,s;for(s in CKEDITOR.dtd.$editable)for(var a=CKEDITOR.document.getElementsByTag(s),o=0,u=a.count();o<u;o++)"true"==(e=a.getItem(o)).getAttribute("contenteditable")&&(d={element:e,config:{}},!1!==CKEDITOR.fire("inline",d)&&CKEDITOR.inline(e,d.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()}),CKEDITOR.replaceClass="ckeditor",function(){function e(a,o,u,f){if(!(a=CKEDITOR.editor._getEditorElement(a)))return null;var i=new CKEDITOR.editor(o,a,f);return f==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),i._.required=a.hasAttribute("required"),a.removeAttribute("required")),u&&i.setData(u,null,!0),i.on("loaded",function(){(function(a){var o=a.name,u=a.element,f=a.elementMode,i=a.fire("uiSpace",{space:"top",html:""}).html,r=a.fire("uiSpace",{space:"bottom",html:""}).html,l=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>');o=CKEDITOR.dom.element.createFromHtml(l.output({id:a.id,name:o,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:i?'<span id="'+a.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+i+"</span>":"",contentId:a.ui.spaceId("contents"),bottomHtml:r?'<span id="'+a.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+r+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),f==CKEDITOR.ELEMENT_MODE_REPLACE?(u.hide(),o.insertAfter(u)):u.append(o),a.container=o,a.ui.contentsElement=a.ui.space("contents"),i&&a.ui.space("top").unselectable(),r&&a.ui.space("bottom").unselectable(),f=a.config.height,(u=a.config.width)&&o.setStyle("width",CKEDITOR.tools.cssLength(u)),f&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(f)),o.disableContextMenu(),CKEDITOR.env.webkit&&o.on("focus",function(){a.focus()}),a.fireOnce("uiReady")})(i),f==CKEDITOR.ELEMENT_MODE_REPLACE&&i.config.autoUpdateElement&&a.$.form&&i._attachToForm(),i.setMode(i.config.startupMode,function(){i.resetDirty(),i.status="ready",i.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,i)})}),i.on("destroy",d),i}function d(){var a=this.container,o=this.element;a&&(a.clearCustomData(),a.remove()),o&&(o.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(o.show(),this._.required&&o.setAttribute("required","required")),delete this.element)}CKEDITOR.replace=function(a,o){return e(a,o,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(a,o,u){return e(a,o,u,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),o=0;o<a.length;o++){var u=null,f=a[o];if(f.name||f.id){if("string"==typeof arguments[0]){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(f.className))continue}else if("function"==typeof arguments[0]&&!1===arguments[0](f,u={}))continue;this.replace(f,u)}}},CKEDITOR.editor.prototype.addMode=function(a,o){(this._.modes||(this._.modes={}))[a]=o},CKEDITOR.editor.prototype.setMode=function(a,o){var u=this,f=this._.modes;if(a!=u.mode&&f&&f[a]){if(u.fire("beforeSetMode",a),u.mode){var r,i=u.checkDirty(),l=(f=u._.previousModeData,0);u.fire("beforeModeUnload"),u.editable(0),u._.previousMode=u.mode,u._.previousModeData=r=u.getData(1),"source"==u.mode&&f==r&&(u.fire("lockSnapshot",{forceUpdate:!0}),l=1),u.ui.space("contents").setHtml(""),u.mode=""}else u._.previousModeData=u.getData(1);this._.modes[a](function(){u.mode=a,void 0!==i&&!i&&u.resetDirty(),l?u.fire("unlockSnapshot"):"wysiwyg"==a&&u.fire("saveSnapshot"),setTimeout(function(){u.fire("mode"),o&&o.call(u)},0)})}},CKEDITOR.editor.prototype.resize=function(a,o,u,f){var i=this.container,r=this.ui.space("contents"),l=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;(f=f?this.container.getFirst(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.hasClass("cke_inner")}):i).setSize("width",a,!0),l&&(l.style.width="1%");var n=(f.$.offsetHeight||0)-(r.$.clientHeight||0);i=Math.max(o-(u?0:n),0),o=u?o+n:o,r.setStyle("height",i+"px"),l&&(l.style.width="100%"),this.fire("resize",{outerHeight:o,contentsHeight:i,outerWidth:a||f.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function s(p){var O=p.data.getTarget();O.is("input")&&("submit"!=(O=O.getAttribute("type"))&&"reset"!=O||p.data.preventDefault())}function a(p){return t(p)&&c(p)}function o(p,O){return function(R){var _=R.data.$.toElement||R.data.$.fromElement||R.data.$.relatedTarget;(_=_&&_.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(_):null)&&(O.equals(_)||O.contains(_))||p.call(this,R)}}function f(p,O,R){return!1!==p.config.autoParagraph&&p.activeEnterMode!=CKEDITOR.ENTER_BR&&(p.editable().equals(R)&&!O||O&&"true"==O.getAttribute("contenteditable"))}function i(p){return p.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==p.config.autoParagraph&&(p.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p")}function r(p){p&&p.isEmptyInlineRemoveable()&&p.remove()}function l(p){var O=p.editor;O.getSelection().scrollIntoView(),setTimeout(function(){O.fire("saveSnapshot")},0)}function n(p,O,R){var _=p.getCommonAncestor(O);for(O=p=R?O:p;(p=p.getParent())&&!_.equals(p)&&1==p.getChildCount();)O=p;O.remove()}var t,c,m,g,C,h,I,D,k,b;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(p,O){this.base(O.$||O),this.editor=p,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var p;if(CKEDITOR.env.webkit&&!this.hasFocus&&(p=this.editor._.previousActive||this.getDocument().getActive(),this.contains(p)))p.focus();else{CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var O=this.$.scrollTop;this.$.focus(),this.$.scrollTop=O}else this.$.focus();else this.$.setActive()}catch(R){if(!CKEDITOR.env.ie)throw R}CKEDITOR.env.safari&&!this.isInline()&&((p=CKEDITOR.document.getActive()).equals(this.getWindow().getFrame())||this.getWindow().focus())}},on:function(p,O){var R=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(p)&&(p="focus"==p?"focusin":"focusout",O=o(O,this),R[0]=p,R[1]=O),CKEDITOR.dom.element.prototype.on.apply(this,R)},attachListener:function(p){!this._.listeners&&(this._.listeners=[]);var O=Array.prototype.slice.call(arguments,1);return O=p.on.apply(p,O),this._.listeners.push(O),O},clearListeners:function(){var p=this._.listeners;try{for(;p.length;)p.pop().removeListener()}catch(O){}},restoreAttrs:function(){var O,R,p=this._.attrChanges;for(R in p)p.hasOwnProperty(R)&&(null!==(O=p[R])?this.setAttribute(R,O):this.removeAttribute(R))},attachClass:function(p){var O=this.getCustomData("classes");this.hasClass(p)||(!O&&(O=[]),O.push(p),this.setCustomData("classes",O),this.addClass(p))},changeAttr:function(p,O){var R=this.getAttribute(p);O!==R&&(!this._.attrChanges&&(this._.attrChanges={}),p in this._.attrChanges||(this._.attrChanges[p]=R),this.setAttribute(p,O))},insertText:function(p){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(p),"text")},transformPlainTextToHtml:function(p){var O=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(p,O)},insertHtml:function(p,O,R){var _=this.editor;_.focus(),_.fire("saveSnapshot"),R||(R=_.getSelection().getRanges()[0]),h(this,O||"html",p,R),R.select(),l(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(p,O,R){h(this,R||"html",p,O),this.editor.fire("afterInsertHtml",{intoRange:O})},insertElement:function(p,O){(R=this.editor).focus(),R.fire("saveSnapshot");var _=R.activeEnterMode,R=R.getSelection(),w=p.getName();w=CKEDITOR.dtd.$block[w],O||(O=R.getRanges()[0]),this.insertElementIntoRange(p,O)&&(O.moveToPosition(p,CKEDITOR.POSITION_AFTER_END),w&&((w=p.getNext(function(v){return a(v)&&!g(v)}))&&w.type==CKEDITOR.NODE_ELEMENT&&w.is(CKEDITOR.dtd.$block)?w.getDtd()["#"]?O.moveToElementEditStart(w):O.moveToElementEditEnd(p):w||_==CKEDITOR.ENTER_BR||(w=O.fixBlock(!0,_==CKEDITOR.ENTER_DIV?"div":"p"),O.moveToElementEditStart(w)))),R.selectRanges([O]),l(this)},insertElementIntoSelection:function(p){this.insertElement(p)},insertElementIntoRange:function(p,O){var K,y,R=this.editor,_=R.config.enterMode,w=p.getName(),v=CKEDITOR.dtd.$block[w];if(O.checkReadOnly())return!1;if(O.deleteContents(1),O.startContainer.type==CKEDITOR.NODE_ELEMENT&&(O.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?I(O):O.startContainer.is(CKEDITOR.dtd.$list)&&D(O)),v)for(;(K=O.getCommonAncestor(0,1))&&(y=CKEDITOR.dtd[K.getName()])&&(!y||!y[w]);)if(K.getName()in CKEDITOR.dtd.span){v=O.splitElement(K);var F=O.createBookmark();r(K),r(v),O.moveToBookmark(F)}else O.checkStartOfBlock()&&O.checkEndOfBlock()?(O.setStartBefore(K),O.collapse(!0),K.remove()):O.splitBlock(_==CKEDITOR.ENTER_DIV?"div":"p",R.editable());return O.insertNode(p),!0},setData:function(p,O){O||(p=this.editor.dataProcessor.toHtml(p)),this.setHtml(p),this.fixInitialSelection(),"unloaded"==this.status&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(p){var O=this.getHtml();return p||(O=this.editor.dataProcessor.toDataFormat(O)),O},setReadOnly:function(p){this.setAttribute("contenteditable",!p)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var p=this.editor;this._.detach(),delete p.document,delete p.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function p(){var v,_=R.getDocument().$,w=_.getSelection();e:if(w.anchorNode&&w.anchorNode==R.$)v=!0;else{if(CKEDITOR.env.webkit&&(v=R.getDocument().getActive())&&v.equals(R)&&!w.anchorNode){v=!0;break e}v=void 0}v&&((v=new CKEDITOR.dom.range(R)).moveToElementEditStart(R),(_=_.createRange()).setStart(v.startContainer.$,v.startOffset),_.collapse(!0),w.removeAllRanges(),w.addRange(_))}var _,w,v,R=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),w=(_=R.getDocument().$).selection,v=R.getDocument().getActive(),"None"==w.type&&v.equals(R)&&(w=new CKEDITOR.dom.range(R),_=_.body.createTextRange(),w.moveToElementEditStart(R),(w=w.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(w=w.getParent()),_.moveToElementText(w.$),_.collapse(!0),_.select())):this.hasFocus?(this.focus(),p()):this.once("focus",function(){p()},null,null,-999)},getHtmlFromRange:function(p){return p.collapsed?new CKEDITOR.dom.documentFragment(p.document):(p={doc:this.getDocument(),range:p.clone()},k.eol.detect(p,this),k.bogus.exclude(p),k.cell.shrink(p),p.fragment=p.range.cloneContents(),k.tree.rebuild(p,this),k.eol.fix(p,this),new CKEDITOR.dom.documentFragment(p.fragment.$))},extractHtmlFromRange:function(p,O){var R=b,_={range:p,doc:p.document},w=this.getHtmlFromRange(p);if(p.collapsed)return p.optimize(),w;if(p.enlarge(CKEDITOR.ENLARGE_INLINE,1),R.table.detectPurge(_),_.bookmark=p.createBookmark(),delete _.range,(v=this.editor.createRange()).moveToPosition(_.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),_.targetBookmark=v.createBookmark(),R.list.detectMerge(_,this),R.table.detectRanges(_,this),R.block.detectMerge(_,this),_.tableContentsRanges?(R.table.deleteRanges(_),p.moveToBookmark(_.bookmark),_.range=p):(p.moveToBookmark(_.bookmark),_.range=p,p.extractContents(R.detectExtractMerge(_))),p.moveToBookmark(_.targetBookmark),p.optimize(),R.fixUneditableRangePosition(p),R.list.merge(_,this),R.table.purge(_,this),R.block.merge(_,this),O){if(R=p.startPath(),_=p.checkStartOfBlock()&&p.checkEndOfBlock()&&R.block&&!p.root.equals(R.block)){e:{var K,v=0;if(_=R.block.getElementsByTag("span"))for(;K=_.getItem(v++);)if(!c(K)){_=!0;break e}_=!1}_=!_}_&&(p.moveToPosition(R.block,CKEDITOR.POSITION_BEFORE_START),R.block.remove())}else R.autoParagraph(this.editor,p),m(p.startContainer)&&p.startContainer.appendBogus();return p.startContainer.mergeSiblings(),w},setup:function(){var p=this.editor;if(this.attachListener(p,"beforeGetData",function(){var y=this.getData();this.is("textarea")||!1!==p.config.ignoreEmptyParagraph&&(y=y.replace(C,function(F,W){return W})),p.setData(y,null,1)},this),this.attachListener(p,"getSnapshot",function(y){y.data=this.getData(1)},this),this.attachListener(p,"afterSetData",function(){this.setData(p.getData(1))},this),this.attachListener(p,"loadSnapshot",function(y){this.setData(y.data,1)},this),this.attachListener(p,"beforeFocus",function(){var y=p.getSelection();(y=y&&y.getNative())&&"Control"==y.type||this.focus()},this),this.attachListener(p,"insertHtml",function(y){this.insertHtml(y.data.dataValue,y.data.mode,y.data.range)},this),this.attachListener(p,"insertElement",function(y){this.insertElement(y.data)},this),this.attachListener(p,"insertText",function(y){this.insertText(y.data)},this),this.setReadOnly(p.readOnly),this.attachClass("cke_editable"),p.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):p.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&p.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+p.config.contentsLangDirection),p.keystrokeHandler.blockedKeystrokes[8]=+p.readOnly,p.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),CKEDITOR.env.webkit&&this.on("scroll",function(){p._.previousScrollTop=p.editable().$.scrollTop},null,null,-1),CKEDITOR.env.edge&&14<CKEDITOR.env.version){var O=function(){var y=p.editable();null!=p._.previousScrollTop&&y.getDocument().equals(CKEDITOR.document)&&(y.$.scrollTop=p._.previousScrollTop,p._.previousScrollTop=null,this.removeListener("scroll",O))};this.on("scroll",O)}if(p.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,p.once("contentDom",function(){p.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",p.tabIndex),!this.is("textarea")){p.document=this.getDocument(),p.window=this.getWindow();var R=p.document;this.changeAttr("spellcheck",!p.config.disableNativeSpellChecker);var _=p.config.contentsLangDirection;this.getDirection(1)!=_&&this.changeAttr("dir",_);var w=CKEDITOR.getCss();if(w){var v=(_=R.getHead()).getCustomData("stylesheet");v?w!=v.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?v.$.styleSheet.cssText=w:v.setText(w)):(w=R.appendStyleText(w),w=new CKEDITOR.dom.element(w.ownerNode||w.owningElement),_.setCustomData("stylesheet",w),w.data("cke-temp",1))}_=R.getCustomData("stylesheet_ref")||0,R.setCustomData("stylesheet_ref",_+1),this.setCustomData("cke_includeReadonly",!p.config.disableReadonlyStyling),this.attachListener(this,"click",function(y){y=y.data;var F=new CKEDITOR.dom.elementPath(y.getTarget(),this).contains("a");F&&2!=y.$.button&&F.isReadOnly()&&y.preventDefault()});var K={8:1,46:1};this.attachListener(p,"key",function(y){if(p.readOnly)return!0;var W,F=y.data.domEvent.getKey();if(0!==(y=p.getSelection()).getRanges().length){if(F in K){var x,A,P,H,T=y.getRanges()[0],N=T.startPath();F=8==F,CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(x=y.getSelectedElement())||(x=function(p){function O(K){return function(y,F){if(F&&y.type==CKEDITOR.NODE_ELEMENT&&y.is(w)&&(R=y),!(F||!a(y)||K&&g(y)))return!1}}var R,_=p.getRanges()[0];p=p.root;var w={table:1,ul:1,ol:1,dl:1};if(_.startPath().contains(w)){var v=_.clone();if(v.collapse(1),v.setStartAt(p,CKEDITOR.POSITION_AFTER_START),(p=new CKEDITOR.dom.walker(v)).guard=O(),p.checkBackward(),R)return(v=_.clone()).collapse(),v.setEndAt(R,CKEDITOR.POSITION_AFTER_END),(p=new CKEDITOR.dom.walker(v)).guard=O(!0),R=!1,p.checkForward(),R}return null}(y))?(p.fire("saveSnapshot"),T.moveToPosition(x,CKEDITOR.POSITION_BEFORE_START),x.remove(),T.select(),p.fire("saveSnapshot"),W=1):T.collapsed&&((A=N.block)&&(H=A[F?"getPrevious":"getNext"](t))&&H.type==CKEDITOR.NODE_ELEMENT&&H.is("table")&&T[F?"checkStartOfBlock":"checkEndOfBlock"]()?(p.fire("saveSnapshot"),T[F?"checkEndOfBlock":"checkStartOfBlock"]()&&A.remove(),T["moveToElementEdit"+(F?"End":"Start")](H),T.select(),p.fire("saveSnapshot"),W=1):N.blockLimit&&N.blockLimit.is("td")&&(P=N.blockLimit.getAscendant("table"))&&T.checkBoundaryOfElement(P,F?CKEDITOR.START:CKEDITOR.END)&&(H=P[F?"getPrevious":"getNext"](t))?(p.fire("saveSnapshot"),T["moveToElementEdit"+(F?"End":"Start")](H),T.checkStartOfBlock()&&T.checkEndOfBlock()?H.remove():T.select(),p.fire("saveSnapshot"),W=1):(P=N.contains(["td","th","caption"]))&&T.checkBoundaryOfElement(P,F?CKEDITOR.START:CKEDITOR.END)&&(W=1))}return!W}}),p.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(y){y.data.getKeystroke()in K&&!this.getFirst(a)&&(this.appendBogus(),(y=p.createRange()).moveToPosition(this,CKEDITOR.POSITION_AFTER_START),y.select())}),this.attachListener(this,"dblclick",function(y){if(p.readOnly)return!1;y={element:y.data.getTarget()},p.fire("doubleclick",y)}),CKEDITOR.env.ie&&this.attachListener(this,"click",s),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(y){var F=y.data.getTarget();F.is("img","hr","input","textarea","select")&&!F.isReadOnly()&&(p.getSelection().selectElement(F),F.is("input","textarea","select")&&y.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(y){(y=y.data.getTarget())&&y.is("img")&&!y.isReadOnly()&&p.getSelection().selectElement(y)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(y){if(2==y.data.$.button&&!(y=y.data.getTarget()).getAscendant("table")&&!y.getOuterHtml().replace(C,"")){var F=p.createRange();F.moveToElementEditStart(y),F.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(y){y.data.getTarget().is("input","select")&&y.data.preventDefault()}),this.attachListener(this,"mouseup",function(y){y.data.getTarget().is("input","textarea")&&y.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(p,"key",function(y){if(p.readOnly)return!0;if((F=y.data.domEvent.getKey())in K&&0!==(y=p.getSelection()).getRanges().length){var F=8==F,W=y.getRanges()[0];if(y=W.startPath(),W.collapsed)e:{var x=y.block;if(x&&W[F?"checkStartOfBlock":"checkEndOfBlock"]()&&W.moveToClosestEditablePosition(x,!F)&&W.collapsed){if(W.startContainer.type==CKEDITOR.NODE_ELEMENT){var T=W.startContainer.getChild(W.startOffset-(F?1:0));if(T&&T.type==CKEDITOR.NODE_ELEMENT&&T.is("hr")){p.fire("saveSnapshot"),T.remove(),y=!0;break e}}var N;!(W=W.startPath().block)||W&&W.contains(x)?y=void 0:(p.fire("saveSnapshot"),(N=(F?W:x).getBogus())&&N.remove(),T=(N=p.getSelection()).createBookmarks(),(F?x:W).moveChildren(F?W:x,!1),y.lastElement.mergeSiblings(),n(x,W,!F),N.selectBookmarks(T),y=!0)}else y=!1}else N=y.block,W=(F=W).endPath().block,N&&W&&!N.equals(W)?(p.fire("saveSnapshot"),(x=N.getBogus())&&x.remove(),F.enlarge(CKEDITOR.ENLARGE_INLINE),F.deleteContents(),W.getParent()&&(W.moveChildren(N,!1),y.lastElement.mergeSiblings(),n(N,W,!0)),(F=p.getSelection().getRanges()[0]).collapse(1),F.optimize(),""===F.startContainer.getHtml()&&F.startContainer.appendBogus(),F.select(),y=!0):y=!1;return y?(p.getSelection().scrollIntoView(),p.fire("saveSnapshot"),!1):void 0}},this,null,100)}}},_:{detach:function(){var p;if(this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs(),p=this.removeCustomData("classes"))for(;p.length;)this.removeClass(p.pop());if(!this.is("textarea")){var O=(p=this.getDocument()).getHead();if(O.getCustomData("stylesheet")){var R=p.getCustomData("stylesheet_ref");--R?p.setCustomData("stylesheet_ref",R):(p.removeCustomData("stylesheet_ref"),O.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(p){var O=this._.editable;return O&&p?0:(arguments.length&&(O=this._.editable=p?p instanceof CKEDITOR.editable?p:new CKEDITOR.editable(this,p):(O&&O.detach(),null)),O)},CKEDITOR.on("instanceLoaded",function(p){var O=p.editor;O.on("insertElement",function(R){(R=R.data).type==CKEDITOR.NODE_ELEMENT&&(R.is("input")||R.is("textarea"))&&("false"!=R.getAttribute("contentEditable")&&R.data("cke-editable",R.hasAttribute("contenteditable")?"true":"1"),R.setAttribute("contentEditable",!1))}),O.on("selectionChange",function(R){if(!O.readOnly){var _=O.getSelection();_&&!_.isLocked&&(_=O.checkDirty(),O.fire("lockSnapshot"),function(p){var K,O=p.editor,R=p.data.path,_=R.blockLimit,w=p.data.selection,v=w.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(w=function(p,O){if(p.isFake)return 0;var R=O.block||O.blockLimit,_=R&&R.getLast(a);return!R||!R.isBlockBoundary()||_&&_.type==CKEDITOR.NODE_ELEMENT&&_.isBlockBoundary()||R.is("pre")||R.getBogus()?void 0:R}(w,R))&&(w.appendBogus(),K=CKEDITOR.env.ie),f(O,R.block,_)&&v.collapsed&&!v.getCommonAncestor().isReadOnly()&&((R=v.clone()).enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),(_=new CKEDITOR.dom.walker(R)).guard=function(y){return!a(y)||y.type==CKEDITOR.NODE_COMMENT||y.isReadOnly()},!_.checkForward()||R.checkStartOfBlock()&&R.checkEndOfBlock())&&(O=v.fixBlock(!0,O.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(O=O.getFirst(a))&&O.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(O.getText()).match(/^(?:&nbsp;|\xa0)$/)&&O.remove(),K=1,p.cancel()),K&&v.select()}(R),O.fire("unlockSnapshot"),!_&&O.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(p){var O=p.editor;O.on("mode",function(){var R=O.editable();if(R&&R.isInline()){var _=O.title;if(R.changeAttr("role","textbox"),R.changeAttr("aria-multiline","true"),R.changeAttr("aria-label",_),_&&R.changeAttr("title",_),(w=O.fire("ariaEditorHelpLabel",{}).label)&&(_=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var v=CKEDITOR.tools.getNextId(),w=CKEDITOR.dom.element.createFromHtml('<span id="'+v+'" class="cke_voice_label">'+w+"</span>");_.append(w),R.changeAttr("aria-describedby",v)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}"),t=CKEDITOR.dom.walker.whitespaces(!0),c=CKEDITOR.dom.walker.bookmark(!1,!0),m=CKEDITOR.dom.walker.empty(),g=CKEDITOR.dom.walker.bogus(),C=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,h=function(){function p(T){return T.type==CKEDITOR.NODE_ELEMENT}function O(T,N){var A,P,H,E,L=[],B=N.range.startContainer;A=N.range.startPath(),B=y[B.getName()];for(var q=0,j=T.getChildren(),G=j.count(),Y=-1,Z=-1,te=0,S=A.contains(y.$list);q<G;++q)p(A=j.getItem(q))?(H=A.getName(),S&&H in CKEDITOR.dtd.$list?L=L.concat(O(A,N)):(E=!!B[H],"br"!=H||!A.data("cke-eol")||q&&q!=G-1||(te=(P=q?L[q-1].node:j.getItem(q+1))&&(!p(P)||!P.is("br")),P=P&&p(P)&&y.$block[P.getName()]),-1!=Y||E||(Y=q),E||(Z=q),L.push({isElement:1,isLineBreak:te,isBlock:A.isBlockBoundary(),hasBlockSibling:P,node:A,name:H,allowed:E}),P=te=0)):L.push({isElement:0,node:A,allowed:1});return-1<Y&&(L[Y].firstNotAllowed=1),-1<Z&&(L[Z].lastNotAllowed=1),L}function R(T,N){var E,A=[],P=T.getChildren(),H=P.count(),L=0,B=y[N],q=!T.is(y.$inline)||T.is("br");for(q&&A.push(" ");L<H;L++)p(E=P.getItem(L))&&!E.is(B)?A=A.concat(R(E,N)):A.push(E);return q&&A.push(" "),A}function _(T){return p(T.startContainer)&&T.startContainer.getChild(T.startOffset-1)}function w(T){return T&&p(T)&&(T.is(y.$removeEmpty)||T.is("a")&&!T.isBlockBoundary())}function v(T,N,A,P){var E,L,H=T.clone();H.setEndAt(N,CKEDITOR.POSITION_BEFORE_END),(E=new CKEDITOR.dom.walker(H).next())&&p(E)&&F[E.getName()]&&(L=E.getPrevious())&&p(L)&&!L.getParent().equals(T.startContainer)&&A.contains(L)&&P.contains(E)&&E.isIdentical(L)&&(E.moveChildren(L),E.remove(),v(T,N,A,P))}var y=CKEDITOR.dtd,F={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},W={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},x=CKEDITOR.tools.extend({},y.$inline);return delete x.br,function(T,N,A,P){var H=T.editor,E=!1;if("unfiltered_html"==N&&(N="html",E=!0),!P.checkReadOnly()){E=(N={type:N,dontFilter:E,editable:T,editor:H,range:P,blockLimit:L=new CKEDITOR.dom.elementPath(P.startContainer,P.root).blockLimit||P.root,mergeCandidates:[],zombies:[]}).range;var q,j,G,Y,Z,te,ie,L=N.mergeCandidates,B="html"===N.type;if("text"==N.type&&E.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(j=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",E.document),E.insertNode(j),E.setStartAfter(j)),G=new CKEDITOR.dom.elementPath(E.startContainer),N.endPath=Y=new CKEDITOR.dom.elementPath(E.endContainer),!E.collapsed){q=Y.block||Y.blockLimit;var S=E.getCommonAncestor();q&&!q.equals(S)&&!q.contains(S)&&E.checkEndOfBlock()&&N.zombies.push(q),E.deleteContents()}for(;(Z=_(E))&&p(Z)&&Z.isBlockBoundary()&&G.contains(Z);)E.moveToPosition(Z,CKEDITOR.POSITION_BEFORE_END);for(v(E,N.blockLimit,G,Y),j&&(E.setEndBefore(j),E.collapse(),j.remove()),(q=(j=E.startPath()).contains(w,!1,1))&&(te=E.splitElement(q),N.inlineStylesRoot=q,N.inlineStylesPeak=j.lastElement),j=E.createBookmark(),B&&(r(q),r(te)),(q=j.startNode.getPrevious(a))&&p(q)&&w(q)&&L.push(q),(q=j.startNode.getNext(a))&&p(q)&&w(q)&&L.push(q),q=j.startNode;(q=q.getParent())&&w(q);)L.push(q);if(E.moveToBookmark(j),""===H.getData()&&H.enterMode===CKEDITOR.ENTER_DIV&&((H=T.getFirst())&&H.remove(),P.setStartAt(T,CKEDITOR.POSITION_AFTER_START),P.collapse(!0)),T=A){if(T=N.range,"text"==N.type&&N.inlineStylesRoot){for(H=(P=N.inlineStylesPeak).getDocument().createText("{cke-peak}"),te=N.inlineStylesRoot.getParent();!P.equals(te);)H=H.appendTo(P.clone()),P=P.getParent();A=H.getOuterHtml().split("{cke-peak}").join(A)}if(P=N.blockLimit.getName(),/^\s+|\s+$/.test(A)&&"span"in CKEDITOR.dtd[P]&&(A=($='<span data-cke-marker="1">&nbsp;</span>')+A+$),A=N.editor.dataProcessor.toHtml(A,{context:null,fixForBody:!1,protectedWhitespaces:!!$,dontFilter:N.dontFilter,filter:N.editor.activeFilter,enterMode:N.editor.activeEnterMode}),(P=T.document.createElement("body")).setHtml(A),$&&(P.getFirst().remove(),P.getLast().remove()),($=T.startPath().block)&&(1!=$.getChildCount()||!$.getBogus()))e:{var M;if(1==P.getChildCount()&&p(M=P.getFirst())&&M.is(W)&&!M.hasAttribute("contenteditable")){for(T=0,te=($=M.getElementsByTag("*")).count();T<te;T++)if(!(H=$.getItem(T)).is(x))break e;M.moveChildren(M.getParent(1)),M.remove()}}N.dataWrapper=P,T=A}if(T){T=(M=N.range).document,P=N.blockLimit,te=0;var U,z,J,V,X,$=[];for(A=j=0,E=(Z=N.endPath.elements[0]).getPosition(H=M.startContainer),L=!(!Z.getCommonAncestor(H)||E==CKEDITOR.POSITION_IDENTICAL||E&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),function(T,N){function A(E,L){if(L.isBlock&&L.isElement&&!L.node.is("br")&&p(E)&&E.is("br"))return E.remove(),1}var P=N.endContainer.getChild(N.endOffset),H=N.endContainer.getChild(N.endOffset-1);P&&A(P,T[T.length-1]),H&&A(H,T[0])&&(N.setEnd(N.endContainer,N.endOffset-1),N.collapse())}(H=O(N.dataWrapper,N),M);te<H.length;te++)if((B=(E=H[te]).isLineBreak)&&(B=M,q=P,Y=G=void 0,E.hasBlockSibling?B=1:(G=B.startContainer.getAscendant(y.$block,1))&&G.is({div:1,p:1})?(Y=G.getPosition(q))==CKEDITOR.POSITION_IDENTICAL||Y==CKEDITOR.POSITION_CONTAINS?B=0:(q=B.splitElement(G),B.moveToPosition(q,CKEDITOR.POSITION_AFTER_START),B=1):B=0),B)A=0<te;else{if(B=M.startPath(),!E.isBlock&&f(N.editor,B.block,B.blockLimit)&&(J=i(N.editor))&&((J=T.createElement(J)).appendBogus(),M.insertNode(J),CKEDITOR.env.needsBrFiller&&(U=J.getBogus())&&U.remove(),M.moveToPosition(J,CKEDITOR.POSITION_BEFORE_END)),(B=M.startPath().block)&&!B.equals(z)&&((U=B.getBogus())&&(U.remove(),$.push(B)),z=B),E.firstNotAllowed&&(j=1),j&&E.isElement){for(B=M.startContainer,q=null;B&&!y[B.getName()][E.name];){if(B.equals(P)){B=null;break}q=B,B=B.getParent()}if(B)q&&(V=M.splitElement(q),N.zombies.push(V),N.zombies.push(q));else{q=P.getName(),X=!te,B=te==H.length-1,G=[],Y=(q=R(E.node,q)).length,S=0;for(var ee=void 0,Q=0,ne=-1;S<Y;S++)" "==(ee=q[S])?(Q||X&&!S||(G.push(new CKEDITOR.dom.text(" ")),ne=G.length),Q=1):(G.push(ee),Q=0);B&&ne==G.length&&G.pop(),X=G}}if(X){for(;B=X.pop();)M.insertNode(B);X=0}else M.insertNode(E.node);E.lastNotAllowed&&te<H.length-1&&((V=L?Z:V)&&M.setEndAt(V,CKEDITOR.POSITION_AFTER_START),j=0),M.collapse()}(U=1==H.length&&(U=H[0]).isElement&&"false"==U.node.getAttribute("contenteditable"))&&(A=!0,M.setStartAt(B=H[0].node,CKEDITOR.POSITION_BEFORE_START),M.setEndAt(B,CKEDITOR.POSITION_AFTER_END)),N.dontMoveCaret=A,N.bogusNeededBlocks=$}for(V=N.bogusNeededBlocks,X=(U=N.range).createBookmark();z=N.zombies.pop();)z.getParent()&&((J=U.clone()).moveToElementEditStart(z),J.removeEmptyBlocksAtEnd());if(V)for(;z=V.pop();)CKEDITOR.env.needsBrFiller?z.appendBogus():z.append(U.document.createText("\xa0"));for(;z=N.mergeCandidates.pop();)z.mergeSiblings();if(U.moveToBookmark(X),!N.dontMoveCaret){for(z=_(U);z&&p(z)&&!z.is(y.$empty);){if(z.isBlockBoundary())U.moveToPosition(z,CKEDITOR.POSITION_BEFORE_END);else{if(w(z)&&z.getHtml().match(/(\s|&nbsp;)$/g)){ie=null;break}(ie=U.clone()).moveToPosition(z,CKEDITOR.POSITION_BEFORE_END)}z=z.getLast(a)}ie&&U.moveToRange(ie)}}}}(),I=function(){function p(_){return(_=new CKEDITOR.dom.walker(_)).guard=function(w,v){return!v&&(w.type==CKEDITOR.NODE_ELEMENT?w.is(CKEDITOR.dtd.$tableContent):void 0)},_.evaluator=function(w){return w.type==CKEDITOR.NODE_ELEMENT},_}function O(_,w,v){return w=_.getDocument().createElement(w),_.append(w,v),w}function R(_){for(var v,w=_.count();0<w--;)v=_.getItem(w),CKEDITOR.tools.trim(v.getHtml())||(v.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&v.getChildCount()&&v.getFirst().remove())}return function(_){var w=_.startContainer,v=w.getAscendant("table",1),K=!1;R(v.getElementsByTag("td")),R(v.getElementsByTag("th")),(v=_.clone()).setStart(w,0),(v=p(v).lastBackward())||((v=_.clone()).setEndAt(w,CKEDITOR.POSITION_BEFORE_END),v=p(v).lastForward(),K=!0),v||(v=w),v.is("table")?(_.setStartAt(v,CKEDITOR.POSITION_BEFORE_START),_.collapse(!0),v.remove()):(v.is({tbody:1,thead:1,tfoot:1})&&(v=O(v,"tr",K)),v.is("tr")&&(v=O(v,v.getParent().is("thead")?"th":"td",K)),(w=v.getBogus())&&w.remove(),_.moveToPosition(v,K?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),D=function(){function p(O){return(O=new CKEDITOR.dom.walker(O)).guard=function(R,_){return!_&&(R.type==CKEDITOR.NODE_ELEMENT?R.is(CKEDITOR.dtd.$list)||R.is(CKEDITOR.dtd.$listItem):void 0)},O.evaluator=function(R){return R.type==CKEDITOR.NODE_ELEMENT&&R.is(CKEDITOR.dtd.$listItem)},O}return function(O){var w,R=O.startContainer,_=!1;(w=O.clone()).setStart(R,0),(w=p(w).lastBackward())||((w=O.clone()).setEndAt(R,CKEDITOR.POSITION_BEFORE_END),w=p(w).lastForward(),_=!0),w||(w=R),w.is(CKEDITOR.dtd.$list)?(O.setStartAt(w,CKEDITOR.POSITION_BEFORE_START),O.collapse(!0),w.remove()):((R=w.getBogus())&&R.remove(),O.moveToPosition(w,_?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),O.select())}}(),k={eol:{detect:function(p,O){var R=p.range,_=R.clone(),w=R.clone(),v=new CKEDITOR.dom.elementPath(R.startContainer,O),K=new CKEDITOR.dom.elementPath(R.endContainer,O);_.collapse(1),w.collapse(),v.block&&_.checkBoundaryOfElement(v.block,CKEDITOR.END)&&(R.setStartAfter(v.block),p.prependEolBr=1),K.block&&w.checkBoundaryOfElement(K.block,CKEDITOR.START)&&(R.setEndBefore(K.block),p.appendEolBr=1)},fix:function(p,O){var _,R=O.getDocument();p.appendEolBr&&(_=this.createEolBr(R),p.fragment.append(_)),!p.prependEolBr||_&&!_.getPrevious()||p.fragment.append(this.createEolBr(R),1)},createEolBr:function(p){return p.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(p){var O,R=(O=p.range.getBoundaryNodes()).startNode;!(O=O.endNode)||!g(O)||R&&R.equals(O)||p.range.setEndBefore(O)}},tree:{rebuild:function(p,O){var K,_=(R=p.range).getCommonAncestor(),w=new CKEDITOR.dom.elementPath(_,O),v=new CKEDITOR.dom.elementPath(R.startContainer,O),R=new CKEDITOR.dom.elementPath(R.endContainer,O);if(_.type==CKEDITOR.NODE_TEXT&&(_=_.getParent()),w.blockLimit.is({tr:1,table:1})){var y=w.contains("table").getParent();K=function(W){return!W.equals(y)}}else if(w.block&&w.block.is(CKEDITOR.dtd.$listItem)&&(v=v.contains(CKEDITOR.dtd.$list),R=R.contains(CKEDITOR.dtd.$list),!v.equals(R))){var F=w.contains(CKEDITOR.dtd.$list).getParent();K=function(W){return!W.equals(F)}}K||(K=function(W){return!W.equals(w.block)&&!W.equals(w.blockLimit)}),this.rebuildFragment(p,O,_,K)},rebuildFragment:function(p,O,R,_){for(var w;R&&!R.equals(O)&&_(R);)w=R.clone(0,1),p.fragment.appendTo(w),p.fragment=w,R=R.getParent()}},cell:{shrink:function(p){var O=(p=p.range).startContainer,_=p.startOffset,w=p.endOffset;O.type==CKEDITOR.NODE_ELEMENT&&O.equals(p.endContainer)&&O.is("tr")&&++_==w&&p.shrink(CKEDITOR.SHRINK_TEXT)}}},b=function(){function p(_,w){var v=_.getParent();v.is(CKEDITOR.dtd.$inline)&&_[w?"insertBefore":"insertAfter"](v)}function O(_,w,v){p(w),p(v,1);for(var K;K=v.getNext();)K.insertAfter(w),w=K;m(_)&&_.remove()}function R(_,w){var v=new CKEDITOR.dom.range(_);return v.setStartAfter(w.startNode),v.setEndBefore(w.endNode),v}return{list:{detectMerge:function(_,w){var v=R(w,_.bookmark),K=v.startPath(),y=v.endPath(),F=K.contains(CKEDITOR.dtd.$list),W=y.contains(CKEDITOR.dtd.$list);_.mergeList=F&&W&&F.getParent().equals(W.getParent())&&!F.equals(W),_.mergeListItems=K.block&&y.block&&K.block.is(CKEDITOR.dtd.$listItem)&&y.block.is(CKEDITOR.dtd.$listItem),(_.mergeList||_.mergeListItems)&&((v=v.clone()).setStartBefore(_.bookmark.startNode),v.setEndAfter(_.bookmark.endNode),_.mergeListBookmark=v.createBookmark())},merge:function(_,w){if(_.mergeListBookmark){var v=_.mergeListBookmark.startNode,K=_.mergeListBookmark.endNode,y=new CKEDITOR.dom.elementPath(v,w),F=new CKEDITOR.dom.elementPath(K,w);if(_.mergeList){var W=y.contains(CKEDITOR.dtd.$list),x=F.contains(CKEDITOR.dtd.$list);W.equals(x)||(x.moveChildren(W),x.remove())}_.mergeListItems&&(y=y.contains(CKEDITOR.dtd.$listItem),F=F.contains(CKEDITOR.dtd.$listItem),y.equals(F)||O(F,v,K)),v.remove(),K.remove()}}},block:{detectMerge:function(_,w){if(!_.tableContentsRanges&&!_.mergeListBookmark){var v=new CKEDITOR.dom.range(w);v.setStartBefore(_.bookmark.startNode),v.setEndAfter(_.bookmark.endNode),_.mergeBlockBookmark=v.createBookmark()}},merge:function(_,w){if(_.mergeBlockBookmark&&!_.purgeTableBookmark){var v=_.mergeBlockBookmark.startNode,K=_.mergeBlockBookmark.endNode,y=new CKEDITOR.dom.elementPath(v,w),F=(F=new CKEDITOR.dom.elementPath(K,w)).block;(y=y.block)&&F&&!y.equals(F)&&O(F,v,K),v.remove(),K.remove()}}},table:function(){function _(K){var F,y=[],W=new CKEDITOR.dom.walker(K),x=K.startPath().contains(v),T=K.endPath().contains(v),N={};return W.guard=function(A,P){if(A.type==CKEDITOR.NODE_ELEMENT){if(A.getCustomData(H="visited_"+(P?"out":"in")))return;CKEDITOR.dom.element.setMarker(N,A,H,1)}if(P&&x&&A.equals(x))(F=K.clone()).setEndAt(x,CKEDITOR.POSITION_BEFORE_END),y.push(F);else if(!P&&T&&A.equals(T))(F=K.clone()).setStartAt(T,CKEDITOR.POSITION_AFTER_START),y.push(F);else{if((H=!P)&&(H=A.type==CKEDITOR.NODE_ELEMENT&&A.is(v)&&(!x||w(A,x))&&(!T||w(A,T))),!H&&(H=P))if(A.is(v)){var H=x&&x.getAscendant("table",!0),E=T&&T.getAscendant("table",!0),L=A.getAscendant("table",!0);H=H&&H.contains(L)||E&&E.contains(L)}else H=void 0;H&&((F=K.clone()).selectNodeContents(A),y.push(F))}},W.lastForward(),CKEDITOR.dom.element.clearAllMarkers(N),y}function w(K,y){var F=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,W=K.getPosition(y);return W!==CKEDITOR.POSITION_IDENTICAL&&0==(W&F)}var v={td:1,th:1,caption:1};return{detectPurge:function(K){var y=K.range;(F=y.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT);var F=new CKEDITOR.dom.walker(F),W=0;if(F.evaluator=function(T){T.type==CKEDITOR.NODE_ELEMENT&&T.is(v)&&++W},F.checkForward(),1<W){F=y.startPath().contains("table");var x=y.endPath().contains("table");F&&x&&y.checkBoundaryOfElement(F,CKEDITOR.START)&&y.checkBoundaryOfElement(x,CKEDITOR.END)&&((y=K.range.clone()).setStartBefore(F),y.setEndAfter(x),K.purgeTableBookmark=y.createBookmark())}},detectRanges:function(K,y){var x,T,F=R(y,K.bookmark),W=F.clone(),N=F.getCommonAncestor();N.is(CKEDITOR.dtd.$tableContent)&&!N.is(v)&&(N=N.getAscendant("table",!0)),T=N,N=new CKEDITOR.dom.elementPath(F.startContainer,T),T=new CKEDITOR.dom.elementPath(F.endContainer,T),N=N.contains("table"),T=T.contains("table"),(N||T)&&(N&&T&&w(N,T)?(K.tableSurroundingRange=W,W.setStartAt(N,CKEDITOR.POSITION_AFTER_END),W.setEndAt(T,CKEDITOR.POSITION_BEFORE_START),(W=F.clone()).setEndAt(N,CKEDITOR.POSITION_AFTER_END),(x=F.clone()).setStartAt(T,CKEDITOR.POSITION_BEFORE_START),x=_(W).concat(_(x))):N?T||(K.tableSurroundingRange=W,W.setStartAt(N,CKEDITOR.POSITION_AFTER_END),F.setEndAt(N,CKEDITOR.POSITION_AFTER_END)):(K.tableSurroundingRange=W,W.setEndAt(T,CKEDITOR.POSITION_BEFORE_START),F.setStartAt(T,CKEDITOR.POSITION_AFTER_START)),K.tableContentsRanges=x||_(F))},deleteRanges:function(K){for(var y;y=K.tableContentsRanges.pop();)y.extractContents(),m(y.startContainer)&&y.startContainer.appendBogus();K.tableSurroundingRange&&K.tableSurroundingRange.extractContents()},purge:function(K){if(K.purgeTableBookmark){var y=K.doc,F=K.range.clone();(y=y.createElement("p")).insertBefore(K.purgeTableBookmark.startNode),F.moveToBookmark(K.purgeTableBookmark),F.deleteContents(),K.range.moveToPosition(y,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(_){return!(_.range.startPath().contains(CKEDITOR.dtd.$listItem)&&_.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(_){_.startContainer.getDtd()["#"]||_.moveToClosestEditablePosition(null,!0)},autoParagraph:function(_,w){var K,v=w.startPath();f(_,v.block,v.blockLimit)&&(K=i(_))&&((K=w.document.createElement(K)).appendBogus(),w.insertNode(K),w.moveToPosition(K,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function e(v){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(v)}function d(v,K){if(0===v.length||e(v[0].getEnclosedNode()))return!1;var y,F;if((y=!K&&1===v.length)&&!(y=v[0].collapsed)){var W=v[0];y=W.startContainer.getAscendant({td:1,th:1},!0);var x=W.endContainer.getAscendant({td:1,th:1},!0);F=CKEDITOR.tools.trim,y=!(!y||!y.equals(x)||y.findOne("td, th, tr, tbody, table")||(W=W.cloneContents()).getFirst()&&F(W.getFirst().getText())===F(y.getText()))}if(y)return!1;for(F=0;F<v.length;F++)if(!(y=v[F]._getTableElement()))return!1;return!0}function o(v){var K=this.root.editor,y=K.getSelection(1);this.reset(),b=!0,y.root.once("selectionchange",function(F){F.cancel()},null,null,0),y.selectRanges([v[0]]),(y=this._.cache).ranges=new CKEDITOR.dom.rangeList(v),y.type=CKEDITOR.SELECTION_TEXT,y.selectedElement=v[0]._getTableElement(),y.selectedText=function(v){v=function(v){function K(x){x=x.find("td, th");var N,T=[];for(N=0;N<x.count();N++)T.push(x.getItem(N));return T}var F,W,y=[];for(W=0;W<v.length;W++)(F=v[W]._getTableElement()).is&&F.is({td:1,th:1})?y.push(F):y=y.concat(K(F));return y}(v);var F,W,K="",y=[];for(W=0;W<v.length;W++)F&&!F.equals(v[W].getAscendant("tr"))?(K+=y.join("\t")+"\n",F=v[W].getAscendant("tr"),y=[]):0===W&&(F=v[W].getAscendant("tr")),y.push(v[W].getText());return K+y.join("\t")}(v),y.nativeSel=null,this.isFake=1,this.rev=I++,K._.fakeSelection=this,b=!1,this.root.fire("selectionchange")}function u(){var K,v=this._.fakeSelection;if(v){var y;if(!(y=!(K=this.getSelection(1)))&&(y=!K.isHidden())){y=v;var F=K.getRanges(),W=y.getRanges(),x=F.length&&F[0]._getTableElement()&&F[0]._getTableElement().getAscendant("table",!0),T=W.length&&W[0]._getTableElement()&&W[0]._getTableElement().getAscendant("table",!0),N=1===F.length&&F[0]._getTableElement()&&F[0]._getTableElement().is("table"),A=1===W.length&&W[0]._getTableElement()&&W[0]._getTableElement().is("table");if(e(y.getSelectedElement()))y=!1;else{var P=1===F.length&&F[0].collapsed;W=d(F,!!CKEDITOR.env.webkit)&&d(W),(x=!(!x||!T)&&(x.equals(T)||T.contains(x)))&&(P||W)?(N&&!A&&y.selectRanges(F),y=!0):y=!1}y=!y}y&&(v.reset(),v=0)}!v&&(!(v=K||this.getSelection(1))||v.getType()==CKEDITOR.SELECTION_NONE)||(this.fire("selectionCheck",v),(K=this.elementPath()).compare(this._.selectionPreviousPath)||(y=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(K.blockLimit),!CKEDITOR.env.webkit&&!CKEDITOR.env.gecko||y||(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=K,this.fire("selectionChange",{selection:v,path:K})))}function f(){O=!0,p||(i.call(this),p=CKEDITOR.tools.setTimeout(i,200,this))}function i(){p=null,O&&(CKEDITOR.tools.setTimeout(u,0,this),O=!1)}function r(v){return!(!R(v)&&(v.type!=CKEDITOR.NODE_ELEMENT||v.is(CKEDITOR.dtd.$empty)))}function l(v){function K(x,T){return!(!x||x.type==CKEDITOR.NODE_TEXT)&&v.clone()["moveToElementEdit"+(T?"End":"Start")](x)}if(!(v.root instanceof CKEDITOR.editable))return!1;var y=v.startContainer,F=v.getPreviousNode(r,null,y),W=v.getNextNode(r,null,y);return!(!K(F)&&!K(W,1)&&(F||W||y.type==CKEDITOR.NODE_ELEMENT&&y.isBlockBoundary()&&y.getBogus()))}function n(v){t(v,!1);var K=v.getDocument().createText(D);return v.setCustomData("cke-fillingChar",K),K}function t(v,K){var y=v&&v.removeCustomData("cke-fillingChar");if(y){if(!1!==K){var F=v.getDocument().getSelection().getNative(),W=F&&"None"!=F.type&&F.getRangeAt(0),x=D.length;if(y.getLength()>x&&W&&W.intersectsNode(y.$)){var T=[{node:F.anchorNode,offset:F.anchorOffset},{node:F.focusNode,offset:F.focusOffset}];F.anchorNode==y.$&&F.anchorOffset>x&&(T[0].offset-=x),F.focusNode==y.$&&F.focusOffset>x&&(T[1].offset-=x)}}y.setText(c(y.getText(),1)),T&&(F=(y=v.getDocument().$).getSelection(),(y=y.createRange()).setStart(T[0].node,T[0].offset),y.collapse(!0),F.removeAllRanges(),F.addRange(y),F.extend(T[1].node,T[1].offset))}}function c(v,K){return K?v.replace(k,function(y,F){return F?"\xa0":""}):v.replace(D,"")}var b,p,O,h="function"!=typeof window.getSelection,I=1,D=CKEDITOR.tools.repeat("\u200b",7),k=new RegExp(D+"( )?","g"),R=CKEDITOR.dom.walker.invisible(1),_=function(){function v(W){return function(x){var T=x.editor.createRange();return T.moveToClosestEditablePosition(x.selected,W)&&x.editor.getSelection().selectRanges([T]),!1}}function K(W){return function(x){var A,T=x.editor,N=T.createRange();if(!T.readOnly)return(A=N.moveToClosestEditablePosition(x.selected,W))||(A=N.moveToClosestEditablePosition(x.selected,!W)),A&&T.getSelection().selectRanges([N]),T.fire("saveSnapshot"),x.selected.remove(),A||(N.moveToElementEditablePosition(T.editable()),T.getSelection().selectRanges([N])),T.fire("saveSnapshot"),!1}}var y=v(),F=v(1);return{37:y,38:y,39:F,40:F,8:K(),46:K(1)}}();CKEDITOR.on("instanceCreated",function(v){function K(){var F=y.getSelection();F&&F.removeAllRanges()}var y=v.editor;y.on("contentDom",function(){function F(){(B=new CKEDITOR.dom.selection(y.getSelection())).lock()}function W(){N.removeListener("mouseup",W),H.removeListener("mouseup",W);var Z=CKEDITOR.document.$.selection,te=Z.createRange();"None"!=Z.type&&te.parentElement()&&te.parentElement().ownerDocument==T.$&&te.select()}var L,B,q,Y,j,G,T=y.document,N=CKEDITOR.document,A=y.editable(),P=T.getBody(),H=T.getDocumentElement(),E=A.isInline();CKEDITOR.env.gecko&&A.attachListener(A,"focus",function(Z){Z.removeListener(),0!==L&&(Z=y.getSelection().getNative())&&Z.isCollapsed&&Z.anchorNode==A.$&&((Z=y.createRange()).moveToElementEditStart(A),Z.select())},null,null,-2),A.attachListener(A,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){L&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(L=y._.previousActive&&y._.previousActive.equals(T.getActive()),CKEDITOR.env.webkit&&L&&null!=y._.previousScrollTop&&y._.previousScrollTop!=A.$.scrollTop&&(A.$.scrollTop=y._.previousScrollTop)),y.unlockSelection(L),L=0},null,null,-1),A.attachListener(A,"mousedown",function(){L=0}),(CKEDITOR.env.ie||E)&&(h?A.attachListener(A,"beforedeactivate",F,null,null,-1):A.attachListener(y,"selectionCheck",F,null,null,-1),A.attachListener(A,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusout":"blur",function(){y.lockSelection(B),L=1},null,null,-1),A.attachListener(A,"mousedown",function(){L=0})),CKEDITOR.env.ie&&!E&&(A.attachListener(A,"mousedown",function(Z){2==Z.data.$.button&&((Z=y.document.getSelection())&&Z.getType()!=CKEDITOR.SELECTION_NONE||(q=y.window.getScrollPosition()))}),A.attachListener(A,"mouseup",function(Z){2==Z.data.$.button&&q&&(y.document.$.documentElement.scrollLeft=q.x,y.document.$.documentElement.scrollTop=q.y),q=null}),"BackCompat"!=T.$.compatMode)&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&H.on("mousedown",function(Z){function te($){if($=$.data.$,j){var M=P.$.createTextRange();try{M.moveToPoint($.clientX,$.clientY)}catch(U){}j.setEndPoint(0>G.compareEndPoints("StartToStart",M)?"EndToEnd":"StartToStart",M),j.select()}}function S(){H.removeListener("mousemove",te),N.removeListener("mouseup",S),H.removeListener("mouseup",S),j.select()}if((Z=Z.data).getTarget().is("html")&&Z.$.y<H.$.clientHeight&&Z.$.x<H.$.clientWidth){j=P.$.createTextRange();try{j.moveToPoint(Z.$.clientX,Z.$.clientY)}catch($){}G=j.duplicate(),H.on("mousemove",te),N.on("mouseup",S),H.on("mouseup",S)}}),7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&H.on("mousedown",function(Z){Z.data.getTarget().is("html")&&(N.on("mouseup",W),H.on("mouseup",W))})),A.attachListener(A,"selectionchange",u,y),A.attachListener(A,"keyup",f,y),A.attachListener(A,"touchstart",f,y),A.attachListener(A,"touchend",f,y),CKEDITOR.env.ie&&A.attachListener(A,"keydown",function(Z){var te=this.getSelection(1),S=function(Z){return(Z=Z.getRanges()[0])&&(Z=Z.startContainer.getAscendant(function(te){return te.type==CKEDITOR.NODE_ELEMENT&&te.hasAttribute("contenteditable")},!0))&&"false"===Z.getAttribute("contenteditable")?Z:null}(te);S&&!S.equals(A)&&(te.selectElement(S),Z.data.preventDefault())},y),A.attachListener(A,CKEDITOR.env.webkit||CKEDITOR.env.gecko?"focusin":"focus",function(){y.forceNextSelectionCheck(),y.selectionChange(1)}),E&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)?(A.attachListener(A,"mousedown",function(){Y=1}),A.attachListener(T.getDocumentElement(),"mouseup",function(){Y&&f.call(y),Y=0})):A.attachListener(CKEDITOR.env.ie?A:T.getDocumentElement(),"mouseup",f,y),CKEDITOR.env.webkit&&A.attachListener(T,"keydown",function(Z){switch(Z.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:A.hasFocus&&t(A)}},null,null,-1),A.attachListener(A,"keydown",function(v){var K={37:1,39:1,8:1,46:1};return function(y){var F=y.data.getKeystroke();if(K[F]){var W=v.getSelection().getRanges(),x=W[0];1==W.length&&x.collapsed&&(F=x[38>F?"getPreviousEditableNode":"getNextEditableNode"]())&&F.type==CKEDITOR.NODE_ELEMENT&&"false"==F.getAttribute("contenteditable")&&(v.getSelection().fake(F),y.data.preventDefault(),y.cancel())}}}(y),null,null,-1)}),y.on("setData",function(){y.unlockSelection(),CKEDITOR.env.webkit&&K()}),y.on("contentDomUnload",function(){y.unlockSelection()}),CKEDITOR.env.ie9Compat&&y.on("beforeDestroy",K,null,null,9),y.on("dataReady",function(){delete y._.fakeSelection,delete y._.hiddenSelectionContainer,y.selectionChange(1)}),y.on("loadSnapshot",function(){var F=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),W=y.editable().getLast(F);W&&W.hasAttribute("data-cke-hidden-sel")&&(W.remove(),CKEDITOR.env.gecko&&(F=y.editable().getFirst(F))&&F.is("br")&&F.getAttribute("_moz_editor_bogus_node")&&F.remove())},null,null,100),y.on("key",function(F){if("wysiwyg"==y.mode){var W=y.getSelection();if(W.isFake){var x=_[F.data.keyCode];if(x)return x({editor:y,selected:W.getSelectedElement(),selection:W,keyEvent:F})}}})}),CKEDITOR.env.webkit&&CKEDITOR.on("instanceReady",function(v){var K=v.editor;K.on("selectionChange",function(){var y=K.editable(),F=y.getCustomData("cke-fillingChar");F&&(F.getCustomData("ready")?(t(y),y.editor.fire("selectionCheck")):F.setCustomData("ready",1))},null,null,-1),K.on("beforeSetMode",function(){t(K.editable())},null,null,-1),K.on("getSnapshot",function(y){y.data&&(y.data=c(y.data))},K,null,20),K.on("toDataFormat",function(y){y.data.dataValue=c(y.data.dataValue)},null,null,0)}),CKEDITOR.editor.prototype.selectionChange=function(v){(v?u:f).call(this)},CKEDITOR.editor.prototype.getSelection=function(v){return!this._.savedSelection&&!this._.fakeSelection||v?(v=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(v):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(v){return(v=v||this.getSelection(1)).getType()!=CKEDITOR.SELECTION_NONE&&(!v.isLocked&&v.lock(),this._.savedSelection=v,!0)},CKEDITOR.editor.prototype.unlockSelection=function(v){var K=this._.savedSelection;return!!K&&(K.unlock(v),delete this._.savedSelection,!0)},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var v=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return v.selectRanges([this]),v},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3,CKEDITOR.dom.selection=function(v){if(v instanceof CKEDITOR.dom.selection){var K=v;v=v.root}var F,W,y=v instanceof CKEDITOR.dom.element;if(this.rev=K?K.rev:I++,this.document=v instanceof CKEDITOR.dom.document?v:v.getDocument(),this.root=y?v:this.document.getBody(),this.isLocked=0,this._={cache:{}},K)return CKEDITOR.tools.extend(this._.cache,K._.cache),this.isFake=K.isFake,this.isLocked=K.isLocked,this;if(v=this.getNative())if(v.getRangeAt)F=(W=v.rangeCount&&v.getRangeAt(0))&&new CKEDITOR.dom.node(W.commonAncestorContainer);else{try{W=v.createRange()}catch(x){}F=W&&CKEDITOR.dom.element.get(W.item&&W.item(0)||W.parentElement())}return(!F||F.type!=CKEDITOR.NODE_ELEMENT&&F.type!=CKEDITOR.NODE_TEXT||!this.root.equals(F)&&!this.root.contains(F))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var v,w={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:c,_createFillingCharSequenceNode:n,FILLING_CHAR_SEQUENCE:D}),CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=h?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:h?function(){var v=this._.cache;if(v.type)return v.type;var K=CKEDITOR.SELECTION_NONE;try{var y=this.getNative(),F=y.type;"Text"==F&&(K=CKEDITOR.SELECTION_TEXT),"Control"==F&&(K=CKEDITOR.SELECTION_ELEMENT),y.createRange().parentElement()&&(K=CKEDITOR.SELECTION_TEXT)}catch(W){}return v.type=K}:function(){var v=this._.cache;if(v.type)return v.type;var K=CKEDITOR.SELECTION_TEXT;if((y=this.getNative())&&y.rangeCount){if(1==y.rangeCount){var y,F=(y=y.getRangeAt(0)).startContainer;F==y.endContainer&&1==F.nodeType&&y.endOffset-y.startOffset==1&&w[F.childNodes[y.startOffset].nodeName.toLowerCase()]&&(K=CKEDITOR.SELECTION_ELEMENT)}}else K=CKEDITOR.SELECTION_NONE;return v.type=K},getRanges:(v=h?function(){function K(F){return new CKEDITOR.dom.node(F).getIndex()}var y=function(F,W){(F=F.duplicate()).collapse(W);var x=F.parentElement();if(!x.hasChildNodes())return{container:x,offset:0};for(var N,A,B,q,T=x.children,P=F.duplicate(),H=0,E=T.length-1,L=-1;H<=E;)if(L=Math.floor((H+E)/2),P.moveToElementText(N=T[L]),0<(B=P.compareEndPoints("StartToStart",F)))E=L-1;else{if(!(0>B))return{container:x,offset:K(N)};H=L+1}if(-1==L||L==T.length-1&&0>B){if(P.moveToElementText(x),P.setEndPoint("StartToStart",F),P=P.text.replace(/(\r\n|\r)/g,"\n").length,T=x.childNodes,!P)return(N=T[T.length-1]).nodeType!=CKEDITOR.NODE_TEXT?{container:x,offset:T.length}:{container:N,offset:N.nodeValue.length};for(x=T.length;0<P&&0<x;)(A=T[--x]).nodeType==CKEDITOR.NODE_TEXT&&(q=A,P-=A.nodeValue.length);return{container:q,offset:-P}}if(P.collapse(0<B),P.setEndPoint(0<B?"StartToStart":"EndToStart",F),!(P=P.text.replace(/(\r\n|\r)/g,"\n").length))return{container:x,offset:K(N)+(0<B?0:1)};for(;0<P;)try{(A=N[0<B?"previousSibling":"nextSibling"]).nodeType==CKEDITOR.NODE_TEXT&&(P-=A.nodeValue.length,q=A),N=A}catch(j){return{container:x,offset:K(N)}}return{container:q,offset:0<B?-P:q.nodeValue.length+P}};return function(){var W=(F=this.getNative())&&F.createRange(),x=this.getType();if(!F)return[];if(x==CKEDITOR.SELECTION_TEXT)return F=new CKEDITOR.dom.range(this.root),x=y(W,!0),F.setStart(new CKEDITOR.dom.node(x.container),x.offset),x=y(W),F.setEnd(new CKEDITOR.dom.node(x.container),x.offset),F.endContainer.getPosition(F.startContainer)&CKEDITOR.POSITION_PRECEDING&&F.endOffset<=F.startContainer.getIndex()&&F.collapse(),[F];if(x==CKEDITOR.SELECTION_ELEMENT){x=[];for(var T=0;T<W.length;T++){for(var N=W.item(T),A=N.parentNode,P=0,F=new CKEDITOR.dom.range(this.root);P<A.childNodes.length&&A.childNodes[P]!=N;P++);F.setStart(new CKEDITOR.dom.node(A),P),F.setEnd(new CKEDITOR.dom.node(A),P+1),x.push(F)}return x}return[]}}():function(){var y,K=[],F=this.getNative();if(!F)return K;for(var W=0;W<F.rangeCount;W++){var x=F.getRangeAt(W);(y=new CKEDITOR.dom.range(this.root)).setStart(new CKEDITOR.dom.node(x.startContainer),x.startOffset),y.setEnd(new CKEDITOR.dom.node(x.endContainer),x.endOffset),K.push(y)}return K},function(K){var y=this._.cache,F=y.ranges;return F||(y.ranges=F=new CKEDITOR.dom.rangeList(v.call(this))),K?function(v){for(var K=0;K<v.length;K++){var y=v[K];if(y.getCommonAncestor().isReadOnly()&&v.splice(K,1),!y.collapsed){if(y.startContainer.isReadOnly())for(var W,F=y.startContainer;F&&!((W=F.type==CKEDITOR.NODE_ELEMENT)&&F.is("body")||!F.isReadOnly());)W&&"false"==F.getAttribute("contentEditable")&&y.setStartAfter(F),F=F.getParent();F=y.startContainer,W=y.endContainer;var x=y.startOffset,T=y.endOffset,N=y.clone();F&&F.type==CKEDITOR.NODE_TEXT&&(x>=F.getLength()?N.setStartAfter(F):N.setStartBefore(F)),W&&W.type==CKEDITOR.NODE_TEXT&&(T?N.setEndAfter(W):N.setEndBefore(W)),(F=new CKEDITOR.dom.walker(N)).evaluator=function(A){if(A.type==CKEDITOR.NODE_ELEMENT&&A.isReadOnly()){var P=y.clone();return y.setEndBefore(A),y.collapsed&&v.splice(K--,1),A.getPosition(N.endContainer)&CKEDITOR.POSITION_CONTAINS||(P.setStartAfter(A),P.collapsed||v.splice(K+1,0,P)),!0}return!1},F.next()}}return v}(new CKEDITOR.dom.rangeList(F.slice())):F}),getStartElement:function(){var K,v=this._.cache;if(void 0!==v.startElement)return v.startElement;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var y=this.getRanges()[0];if(y){if(y.collapsed)(K=y.startContainer).type!=CKEDITOR.NODE_ELEMENT&&(K=K.getParent());else{for(y.optimize();y.startOffset==((K=y.startContainer).getChildCount?K.getChildCount():K.getLength())&&!K.isBlockBoundary();)y.setStartAfter(K);if((K=y.startContainer).type!=CKEDITOR.NODE_ELEMENT)return K.getParent();if((K=K.getChild(y.startOffset))&&K.type==CKEDITOR.NODE_ELEMENT)for(y=K.getFirst();y&&y.type==CKEDITOR.NODE_ELEMENT;)K=y,y=y.getFirst();else K=y.startContainer}K=K.$}}return v.startElement=K?new CKEDITOR.dom.element(K):null},getSelectedElement:function(){var v=this._.cache;if(void 0!==v.selectedElement)return v.selectedElement;var K=this,y=CKEDITOR.tools.tryThese(function(){return K.getNative().createRange().item(0)},function(){for(var W,x,F=K.getRanges()[0].clone(),T=2;T&&!((W=F.getEnclosedNode())&&W.type==CKEDITOR.NODE_ELEMENT&&w[W.getName()]&&(x=W));T--)F.shrink(CKEDITOR.SHRINK_ELEMENT);return x&&x.$});return v.selectedElement=y?new CKEDITOR.dom.element(y):null},getSelectedText:function(){var v=this._.cache;if(void 0!==v.selectedText)return v.selectedText;var K=this.getNative();return K=h?"Control"==K.type?"":K.createRange().text:K.toString(),v.selectedText=K},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(v){if(this.isLocked){if(v)var K=this.getSelectedElement(),y=this.getRanges(),F=this.isFake;this.isLocked=0,this.reset(),v&&(v=K||y[0]&&y[0].getCommonAncestor())&&v.getAscendant("body",1)&&(d(y)?o.call(this,y):F?this.fake(K):K?this.selectElement(K):this.selectRanges(y))}},reset:function(){this._.cache={},this.isFake=0;var v=this.root.editor;if(v&&v._.fakeSelection)if(this.rev==v._.fakeSelection.rev){delete v._.fakeSelection;var K=v._.hiddenSelectionContainer;if(K){var y=v.checkDirty();v.fire("lockSnapshot"),K.remove(),v.fire("unlockSnapshot"),!y&&v.resetDirty()}delete v._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=I++},selectElement:function(v){var K=new CKEDITOR.dom.range(this.root);K.setStartBefore(v),K.setEndAfter(v),this.selectRanges([K])},selectRanges:function(v){var K=this.root.editor,y=K&&K._.hiddenSelectionContainer;if(this.reset(),y){y=this.root;for(var F,W=0;W<v.length;++W)(F=v[W]).endContainer.equals(y)&&(F.endOffset=Math.min(F.endOffset,y.getChildCount()))}if(v.length)if(this.isLocked){var x=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(v),this.lock(),x&&!x.equals(this.root)&&x.focus()}else{var T,N,A;if(1==v.length&&!(A=v[0]).collapsed&&(T=A.getEnclosedNode())&&T.type==CKEDITOR.NODE_ELEMENT&&((A=A.clone()).shrink(CKEDITOR.SHRINK_ELEMENT,!0),(N=A.getEnclosedNode())&&N.type==CKEDITOR.NODE_ELEMENT&&(T=N),"false"==T.getAttribute("contenteditable"))||(T=void 0),T)this.fake(T);else if(K&&K.plugins.tableselection&&K.plugins.tableselection.isSupportedEnvironment()&&d(v)&&!b&&!v[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored"))o.call(this,v);else{if(h){var P,H,E;if(N=CKEDITOR.dom.walker.whitespaces(!0),T=/\ufeff|\u00a0/,A={table:1,tbody:1,tr:1},1<v.length&&v[0].setEnd((K=v[v.length-1]).endContainer,K.endOffset),v=(K=v[0]).collapsed,(y=K.getEnclosedNode())&&y.type==CKEDITOR.NODE_ELEMENT&&y.getName()in w&&(!y.is("a")||!y.getText()))try{return(E=y.$.createControlRange()).addElement(y.$),void E.select()}catch(L){}(K.startContainer.type==CKEDITOR.NODE_ELEMENT&&K.startContainer.getName()in A||K.endContainer.type==CKEDITOR.NODE_ELEMENT&&K.endContainer.getName()in A)&&(K.shrink(CKEDITOR.NODE_ELEMENT,!0),v=K.collapsed),A=(E=K.createBookmark()).startNode,v||(x=E.endNode),(E=K.document.$.body.createTextRange()).moveToElementText(A.$),E.moveStart("character",1),x?((T=K.document.$.body.createTextRange()).moveToElementText(x.$),E.setEndPoint("EndToEnd",T),E.moveEnd("character",-1)):(P=A.getNext(N),H=A.hasAscendant("pre"),P=!(P&&P.getText&&P.getText().match(T))&&(H||!A.hasPrevious()||A.getPrevious().is&&A.getPrevious().is("br")),(H=K.document.createElement("span")).setHtml("&#65279;"),H.insertBefore(A),P&&K.document.createText("\ufeff").insertBefore(A)),K.setStartBefore(A),A.remove(),v?(P?(E.moveStart("character",-1),E.select(),K.document.$.selection.clear()):E.select(),K.moveToPosition(H,CKEDITOR.POSITION_BEFORE_START),H.remove()):(K.setEndBefore(x),x.remove(),E.select())}else{if(!(x=this.getNative()))return;for(this.removeAllRanges(),E=0;E<v.length;E++)if(E<v.length-1&&(H=v[E+1],(T=(P=v[E]).clone()).setStart(P.endContainer,P.endOffset),T.setEnd(H.startContainer,H.startOffset),!T.collapsed&&(T.shrink(CKEDITOR.NODE_ELEMENT,!0),K=T.getCommonAncestor(),T=T.getEnclosedNode(),K.isReadOnly()||T&&T.isReadOnly())))H.setStart(P.startContainer,P.startOffset),v.splice(E--,1);else{K=v[E],H=this.document.$.createRange(),K.collapsed&&CKEDITOR.env.webkit&&l(K)&&(T=n(this.root),K.insertNode(T),(P=T.getNext())&&!T.getPrevious()&&P.type==CKEDITOR.NODE_ELEMENT&&"br"==P.getName()?(t(this.root),K.moveToPosition(P,CKEDITOR.POSITION_BEFORE_START)):K.moveToPosition(T,CKEDITOR.POSITION_AFTER_END)),H.setStart(K.startContainer.$,K.startOffset);try{H.setEnd(K.endContainer.$,K.endOffset)}catch(L){if(!(0<=L.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")))throw L;K.collapse(1),H.setEnd(K.endContainer.$,K.endOffset)}x.addRange(H)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(v,K){var y=this.root.editor;void 0===K&&v.hasAttribute("aria-label")&&(K=v.getAttribute("aria-label")),this.reset(),function(v,K){var y=K&&CKEDITOR.tools.htmlEncode(K)||"&nbsp;";y=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px;width:0;height:0;overflow:hidden;")+'">'+y+"</div>",v.document),v.fire("lockSnapshot"),v.editable().append(y);var F=v.getSelection(1),W=v.createRange(),x=F.root.on("selectionchange",function(T){T.cancel()},null,null,0);W.setStartAt(y,CKEDITOR.POSITION_AFTER_START),W.setEndAt(y,CKEDITOR.POSITION_BEFORE_END),F.selectRanges([W]),x.removeListener(),v.fire("unlockSnapshot"),v._.hiddenSelectionContainer=y}(y,K);var F=this._.cache,W=new CKEDITOR.dom.range(this.root);W.setStartBefore(v),W.setEndAfter(v),F.ranges=new CKEDITOR.dom.rangeList(W),F.selectedElement=F.startElement=v,F.type=CKEDITOR.SELECTION_ELEMENT,F.selectedText=F.nativeSel=null,this.isFake=1,this.rev=I++,y._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var v=this.getCommonAncestor();return v&&v.type==CKEDITOR.NODE_TEXT&&(v=v.getParent()),!(!v||!v.data("cke-hidden-sel"))},isInTable:function(v){return d(this.getRanges(),v)},isCollapsed:function(){var v=this.getRanges();return 1===v.length&&v[0].collapsed},createBookmarks:function(v){return v=this.getRanges().createBookmarks(v),this.isFake&&(v.isFake=1),v},createBookmarks2:function(v){return v=this.getRanges().createBookmarks2(v),this.isFake&&(v.isFake=1),v},selectBookmarks:function(v){for(var y,K=[],F=0;F<v.length;F++){var W=new CKEDITOR.dom.range(this.root);W.moveToBookmark(v[F]),K.push(W)}return v.isFake&&((y=d(K)?K[0]._getTableElement():K[0].getEnclosedNode())&&y.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),v.isFake=0)),v.isFake&&!d(K)?this.fake(y):this.selectRanges(K),this},getCommonAncestor:function(){var v=this.getRanges();return v.length?v[0].startContainer.getCommonAncestor(v[v.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var v=this.getNative();try{v&&v[h?"empty":"removeAllRanges"]()}catch(K){}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(T,N){for(var A,P;(T=T.getParent())&&!T.equals(N);)if(T.getAttribute("data-nostyle"))A=T;else if(!P){var H=T.getAttribute("contentEditable");"false"==H?A=T:"true"==H&&(P=1)}return A}function d(T,N,A,P){return(T.getPosition(N)|P)==P&&(!A.childRule||A.childRule(T))}function s(T){var N=T.document;if(T.collapsed)N=I(this,N),T.insertNode(N),T.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END);else{var H,A=this.element,P=this._.definition,L=(E=P.ignoreReadonly)||P.includeReadonly;null==L&&(L=T.root.getCustomData("cke_includeReadonly"));var B=CKEDITOR.dtd[A];B||(H=!0,B=CKEDITOR.dtd.span),T.enlarge(CKEDITOR.ENLARGE_INLINE,1),T.trim();var Z,q=T.createBookmark(),j=q.startNode,G=q.endNode,Y=j;if(!E){var E=e(j,te=T.getCommonAncestor()),te=e(G,te);E&&(Y=E.getNextSourceNode(!0)),te&&(G=te)}for(Y.getPosition(G)==CKEDITOR.POSITION_FOLLOWING&&(Y=0);Y;){if(E=!1,Y.equals(G))Y=null,E=!0;else{te=(S=Y.type==CKEDITOR.NODE_ELEMENT?Y.getName():null)&&"false"==Y.getAttribute("contentEditable");var $=S&&Y.getAttribute("data-nostyle");if(S&&Y.data("cke-bookmark")||Y.type===CKEDITOR.NODE_COMMENT){Y=Y.getNextSourceNode(!0);continue}if(te&&L&&CKEDITOR.dtd.$block[S])for(var z=void 0,V=0,M=(J=(U=o(M=Y)).length)&&new CKEDITOR.dom.range(M.getDocument());V<J;++V){z=U[V];var X=CKEDITOR.filter.instances[z.data("cke-filter")];(!X||X.check(this))&&(M.selectNodeContents(z),s.call(this,M))}if(U=S?!B[S]||$||te&&!L?0:d(Y,G,P,W):1){if(U=P,J=A,V=H,!(z=Y.getParent())||!(z.getDtd()||CKEDITOR.dtd.span)[J]&&!V||U.parentRule&&!U.parentRule(z))E=!0;else if(Z||S&&CKEDITOR.dtd.$removeEmpty[S]&&(Y.getPosition(G)|W)!=W||(Z=T.clone()).setStartBefore(Y),(S=Y.type)==CKEDITOR.NODE_TEXT||te||S==CKEDITOR.NODE_ELEMENT&&!Y.getChildCount()){for(var ee,S=Y;(E=!S.getNext(y))&&B[(ee=S.getParent()).getName()]&&d(ee,j,P,x);)S=ee;Z.setEndAfter(S)}}else E=!0;Y=Y.getNextSourceNode($||te)}if(E&&Z&&!Z.collapsed){te=(E=I(this,N)).hasAttributes(),$=Z.getCommonAncestor(),S={};for(var Q,ne,ie,U={},J=(z={},{});E&&$;){if($.getName()==A){for(Q in P.attributes)!J[Q]&&(ie=$.getAttribute(ne))&&(E.getAttribute(Q)==ie?U[Q]=1:J[Q]=1);for(ne in P.styles)!z[ne]&&(ie=$.getStyle(ne))&&(E.getStyle(ne)==ie?S[ne]=1:z[ne]=1)}$=$.getParent()}for(Q in U)E.removeAttribute(Q);for(ne in S)E.removeStyle(ne);te&&!E.hasAttributes()&&(E=null),E?(Z.extractContents().appendTo(E),Z.insertNode(E),g.call(this,E),E.mergeSiblings(),CKEDITOR.env.ie||E.$.normalize()):(E=new CKEDITOR.dom.element("span"),Z.extractContents().appendTo(E),Z.insertNode(E),g.call(this,E),E.remove(!0)),Z=null}}T.moveToBookmark(q),T.shrink(CKEDITOR.SHRINK_TEXT),T.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function a(T){function N(){for(var Z=new CKEDITOR.dom.elementPath(P.getParent()),te=new CKEDITOR.dom.elementPath(G.getParent()),S=null,$=null,M=0;M<Z.elements.length;M++){var U=Z.elements[M];if(U==Z.block||U==Z.blockLimit)break;Y.checkElementRemovable(U,!0)&&(S=U)}for(M=0;M<te.elements.length&&(U=te.elements[M])!=te.block&&U!=te.blockLimit;M++)Y.checkElementRemovable(U,!0)&&($=U);$&&G.breakParent($),S&&P.breakParent(S)}T.enlarge(CKEDITOR.ENLARGE_INLINE,1);var A=T.createBookmark(),P=A.startNode,H=this._.definition.alwaysRemoveElement;if(T.collapsed){for(var L,q,E=new CKEDITOR.dom.elementPath(P.getParent(),T.root),B=0;B<E.elements.length&&(q=E.elements[B])&&q!=E.block&&q!=E.blockLimit;B++)if(this.checkElementRemovable(q)){var j;!H&&T.collapsed&&(T.checkBoundaryOfElement(q,CKEDITOR.END)||(j=T.checkBoundaryOfElement(q,CKEDITOR.START)))?(L=q).match=j?"start":"end":(q.mergeSiblings(),q.is(this.element)?m.call(this,q):C(q,b(this)[q.getName()]))}if(L){for(H=P,B=0;!(q=E.elements[B]).equals(L);B++)q.match||((q=q.clone()).append(H),H=q);H["start"==L.match?"insertBefore":"insertAfter"](L)}}else{var G=A.endNode,Y=this;for(N(),E=P;!E.equals(G);)L=E.getNextSourceNode(),E.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(E)&&(E.getName()==this.element?m.call(this,E):C(E,b(this)[E.getName()]),L.type==CKEDITOR.NODE_ELEMENT&&L.contains(P)&&(N(),L=P.getNext())),E=L}T.moveToBookmark(A),T.shrink(CKEDITOR.NODE_ELEMENT,!0)}function o(T){var N=[];return T.forEach(function(A){if("true"==A.getAttribute("contenteditable"))return N.push(A),!1},CKEDITOR.NODE_ELEMENT,!0),N}function u(T){var N=T.getEnclosedNode()||T.getCommonAncestor(!1,!0);(T=new CKEDITOR.dom.elementPath(N,T.root).contains(this.element,1))&&!T.isReadOnly()&&D(T,this)}function f(T){var N=T.getCommonAncestor(!0,!0);if(T=new CKEDITOR.dom.elementPath(N,T.root).contains(this.element,1)){var A=(N=this._.definition).attributes;if(A)for(var P in A)T.removeAttribute(P,A[P]);if(N.styles)for(var H in N.styles)N.styles.hasOwnProperty(H)&&T.removeStyle(H)}}function i(T){var N=T.createBookmark(!0),A=T.createIterator();A.enforceRealBlocks=!0,this._.enterMode&&(A.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var P,H=T.document;P=A.getNextParagraph();)!P.isReadOnly()&&(!A.activeFilter||A.activeFilter.check(this))&&l(P,I(this,H,P));T.moveToBookmark(N)}function r(T){var P,H,N=T.createBookmark(1),A=T.createIterator();for(A.enforceRealBlocks=!0,A.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;P=A.getNextParagraph();)this.checkElementRemovable(P)&&(P.is("pre")?((H=this._.enterMode==CKEDITOR.ENTER_BR?null:T.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&P.copyAttributes(H),l(P,H)):m.call(this,P));T.moveToBookmark(N)}function l(T,N){(A=!N)&&(N=T.getDocument().createElement("div"),T.copyAttributes(N));var A,B,P=N&&N.is("pre"),H=T.is("pre"),E=!P&&H;if(P&&!H){if(H=N,(E=T.getBogus())&&E.remove(),E=(E=(E=(E=t(E=T.getHtml(),/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"")).replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1")).replace(/([ \t\n\r]+|&nbsp;)/g," ")).replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var L=T.getDocument().createElement("div");L.append(H),H.$.outerHTML="<pre>"+E+"</pre>",H.copyAttributes(L.getFirst()),H=L.getFirst().remove()}else H.setHtml(E);N=H}else E?N=function(T,N){var A;1<T.length&&(A=new CKEDITOR.dom.documentFragment(N.getDocument()));for(var P=0;P<T.length;P++){var H=t(H=(H=T[P]).replace(/(\r\n|\r)/g,"\n"),/^[ \t]*\n/,"");if(H=t(H,/\n$/,""),H=t(H,/^[ \t]+|[ \t]+$/g,function(L,B){return 1==L.length?"&nbsp;":B?" "+CKEDITOR.tools.repeat("&nbsp;",L.length-1):CKEDITOR.tools.repeat("&nbsp;",L.length-1)+" "}),H=(H=H.replace(/\n/g,"<br>")).replace(/[ \t]{2,}/g,function(L){return CKEDITOR.tools.repeat("&nbsp;",L.length-1)+" "}),A){var E=N.clone();E.setHtml(H),A.append(E)}else N.setHtml(H)}return A||N}(A?[T.getHtml()]:function(T){var N=[];return t(T.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(A,P,H){return P+"</pre>"+H+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(A,P){N.push(P)}),N}(T),N):T.moveChildren(N);N.replace(T),P?(B=(A=N).getPrevious(F))&&B.type==CKEDITOR.NODE_ELEMENT&&B.is("pre")&&(P=t(B.getHtml(),/\n$/,"")+"\n\n"+t(A.getHtml(),/^\n/,""),CKEDITOR.env.ie?A.$.outerHTML="<pre>"+P+"</pre>":A.setHtml(P),B.remove()):A&&h(N)}function t(T,N,A){var P="",H="";return T=T.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(E,L,B){return L&&(P=L),B&&(H=B),""}),P+T.replace(N,A)+H}function m(T,N){var L,P=(A=this._.definition).attributes,A=A.styles,H=b(this)[T.getName()],E=CKEDITOR.tools.isEmpty(P)&&CKEDITOR.tools.isEmpty(A);for(L in P)("class"!=L&&!this._.definition.fullMatch||T.getAttribute(L)==p(L,P[L]))&&(N&&"data-"==L.slice(0,5)||(E=T.hasAttribute(L),T.removeAttribute(L)));for(var B in A)this._.definition.fullMatch&&T.getStyle(B)!=p(B,A[B],!0)||(E=E||!!T.getStyle(B),T.removeStyle(B));C(T,H,_[T.getName()]),E&&(this._.definition.alwaysRemoveElement?h(T,1):!CKEDITOR.dtd.$block[T.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!T.hasAttributes()?h(T):T.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function g(T){for(var P,N=b(this),A=T.getElementsByTag(this.element),H=A.count();0<=--H;)(P=A.getItem(H)).isReadOnly()||m.call(this,P,!0);for(var E in N)if(E!=this.element)for(H=(A=T.getElementsByTag(E)).count()-1;0<=H;H--)(P=A.getItem(H)).isReadOnly()||C(P,N[E])}function C(T,N,A){if(N=N&&N.attributes)for(var P=0;P<N.length;P++){var E,H=N[P][0];if(E=T.getAttribute(H)){var L=N[P][1];(null===L||L.test&&L.test(E)||"string"==typeof L&&E==L)&&T.removeAttribute(H)}}A||h(T)}function h(T,N){if(!T.hasAttributes()||N)if(CKEDITOR.dtd.$block[T.getName()]){var A=T.getPrevious(F),P=T.getNext(F);!A||A.type!=CKEDITOR.NODE_TEXT&&A.isBlockBoundary({br:1})||T.append("br",1),!P||P.type!=CKEDITOR.NODE_TEXT&&P.isBlockBoundary({br:1})||T.append("br"),T.remove(!0)}else A=T.getFirst(),P=T.getLast(),T.remove(!0),A&&(A.type==CKEDITOR.NODE_ELEMENT&&A.mergeSiblings(),P&&!A.equals(P)&&P.type==CKEDITOR.NODE_ELEMENT&&P.mergeSiblings())}function I(T,N,A){var P;return"*"==(P=T.element)&&(P="span"),P=new CKEDITOR.dom.element(P,N),A&&A.copyAttributes(P),P=D(P,T),N.getCustomData("doc_processing_style")&&P.hasAttribute("id")?P.removeAttribute("id"):N.setCustomData("doc_processing_style",1),P}function D(T,N){var P=(A=N._.definition).attributes,A=CKEDITOR.style.getStyleText(A);if(P)for(var H in P)T.setAttribute(H,P[H]);return A&&T.setAttribute("style",A),T.getDocument().removeCustomData("doc_processing_style"),T}function k(T,N){for(var A in T)T[A]=T[A].replace(K,function(P,H){return N[H]})}function b(T){if(T._.overrides)return T._.overrides;var N=T._.overrides={},A=T._.definition.overrides;if(A){CKEDITOR.tools.isArray(A)||(A=[A]);for(var P=0;P<A.length;P++){var E,L;if("string"==typeof(H=A[P])?E=H.toLowerCase():(E=H.element?H.element.toLowerCase():T.element,L=H.attributes),H=N[E]||(N[E]={}),L){var B,H=H.attributes=H.attributes||[];for(B in L)H.push([B.toLowerCase(),L[B]])}}}return N}function p(T,N,A){var P=new CKEDITOR.dom.element("span");return P[A?"setStyle":"setAttribute"](T,N),P[A?"getStyle":"getAttribute"](T)}function O(T,N){function A(H,E){return"font-family"==E.toLowerCase()?H.replace(/["']/g,""):H}for(var P in"string"==typeof T&&(T=CKEDITOR.tools.parseCssText(T)),"string"==typeof N&&(N=CKEDITOR.tools.parseCssText(N,!0)),T)if(!(P in N)||A(N[P],P)!=A(T[P],P)&&"inherit"!=T[P]&&"inherit"!=N[P])return!1;return!0}function R(T,N,A){var H,E,P=T.getRanges();if(N=N?this.removeFromRange:this.applyToRange,T.isFake&&T.isInTable())for(H=[],E=0;E<P.length;E++)H.push(P[E].clone());for(var L=P.createIterator();E=L.getNextRange();)N.call(this,E,A);T.selectRanges(H||P)}var _={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},w={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},v=/\s*(?:;\s*|$)/,K=/#\((.+?)\)/g,y=CKEDITOR.dom.walker.bookmark(0,1),F=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(T,N){if("string"==typeof T.type)return new CKEDITOR.style.customHandlers[T.type](T);var A=T.attributes;A&&A.style&&(T.styles=CKEDITOR.tools.extend({},T.styles,CKEDITOR.tools.parseCssText(A.style)),delete A.style),N&&(k((T=CKEDITOR.tools.clone(T)).attributes,N),k(T.styles,N)),A=this.element=T.element?"string"==typeof T.element?T.element.toLowerCase():T.element:"*",this.type=T.type||(_[A]?CKEDITOR.STYLE_BLOCK:w[A]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:T}},CKEDITOR.style.prototype={apply:function(T){if(T instanceof CKEDITOR.dom.document)return R.call(this,T.getSelection());if(this.checkApplicable(T.elementPath(),T)){var N=this._.enterMode;N||(this._.enterMode=T.activeEnterMode),R.call(this,T.getSelection(),0,T),this._.enterMode=N}},remove:function(T){if(T instanceof CKEDITOR.dom.document)return R.call(this,T.getSelection(),1);if(this.checkApplicable(T.elementPath(),T)){var N=this._.enterMode;N||(this._.enterMode=T.activeEnterMode),R.call(this,T.getSelection(),1,T),this._.enterMode=N}},applyToRange:function(T){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?s:this.type==CKEDITOR.STYLE_BLOCK?i:this.type==CKEDITOR.STYLE_OBJECT?u:null,this.applyToRange(T)},removeFromRange:function(T){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?a:this.type==CKEDITOR.STYLE_BLOCK?r:this.type==CKEDITOR.STYLE_OBJECT?f:null,this.removeFromRange(T)},applyToObject:function(T){D(T,this)},checkActive:function(T,N){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(T.block||T.blockLimit,!0,N);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var H,A=T.elements,P=0;P<A.length;P++)if(H=A[P],this.type!=CKEDITOR.STYLE_INLINE||H!=T.block&&H!=T.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var E=H.getName();if(!("string"==typeof this.element?E==this.element:E in this.element))continue}if(this.checkElementRemovable(H,!0,N))return!0}}return!1},checkApplicable:function(T,N,A){if(N&&N instanceof CKEDITOR.filter&&(A=N),A&&!A.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!T.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!T.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(T,N){var A=this._.definition;if(!T||!A.ignoreReadonly&&T.isReadOnly())return!1;var P=T.getName();if("string"==typeof this.element?P==this.element:P in this.element){if(!N&&!T.hasAttributes())return!0;if(P=A._AC)A=P;else{P={};var H=0,E=A.attributes;if(E)for(var L in E)H++,P[L]=E[L];(L=CKEDITOR.style.getStyleText(A))&&(P.style||H++,P.style=L),P._length=H,A=A._AC=P}if(!A._length)return!0;for(var B in A)if("_length"!=B)if(P=T.getAttribute(B)||"","style"==B?O(A[B],P):A[B]==P){if(!N)return!0}else if(N)return!1;if(N)return!0}return!1},checkElementRemovable:function(T,N,A){if(this.checkElementMatch(T,N,A))return!0;if(N=b(this)[T.getName()]){var P;if(!(N=N.attributes))return!0;for(A=0;A<N.length;A++)if(P=T.getAttribute(P=N[A][0])){var H=N[A][1];if(null===H)return!0;if("string"==typeof H){if(P==H)return!0}else if(H.test(P))return!0}}return!1},buildPreview:function(T){var N=this._.definition,A=[],P=N.element;"bdo"==P&&(P="span"),A=["<",P];var H=N.attributes;if(H)for(var E in H)A.push(" ",E,'="',H[E],'"');return(H=CKEDITOR.style.getStyleText(N))&&A.push(' style="',H,'"'),A.push(">",T||N.name,"</",P,">"),A.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(T){if(N=T._ST)return N;var N=T.styles,A=T.attributes&&T.attributes.style||"",P="";for(var H in A.length&&(A=A.replace(v,";")),N){var E=N[H],L=(H+":"+E).replace(v,";");"inherit"==E?P+=L:A+=L}return A.length&&(A=CKEDITOR.tools.normalizeCssText(A,!0)),T._ST=A+P},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(T){var N=function(A){this._={definition:A},this.setup&&this.setup(A)};return N.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},T,!0),this.customHandlers[T.type]=N};var W=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,x=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,d){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,d,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,d,s){CKEDITOR.stylesSet.addExternal(e,d,""),CKEDITOR.stylesSet.load(e,s)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,d){var s=this._.styleStateChangeCallbacks;s||(s=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var o=0;o<s.length;o++){var u=s[o],f=u.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;u.fn.call(this,f)}})),s.push({style:e,fn:d})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var d=this;if(!1===(s=d.config.stylesCombo_stylesSet||d.config.stylesSet))e(null);else if(s instanceof Array)d._.stylesDefinitions=s,e(s);else{s||(s="default");var s,a=(s=s.split(":"))[0];CKEDITOR.stylesSet.addExternal(a,s[1]?s.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(a,function(u){d._.stylesDefinitions=u[a],e(d._.stylesDefinitions)})}}}}),function(){if(window.Promise)CKEDITOR.tools.promise=Promise;else{var e=CKEDITOR.getUrl("vendor/promise.js");CKEDITOR.scriptLoader.load(e,function(d){d?CKEDITOR.tools.promise=ES6Promise:CKEDITOR.error("no-vendor-lib",{path:e})})}}(),CKEDITOR.dom.comment=function(e,d){"string"==typeof e&&(e=(d?d.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}}),function(){var s,e={},d={};for(s in CKEDITOR.dtd.$blockLimit)s in CKEDITOR.dtd.$list||(e[s]=1);for(s in CKEDITOR.dtd.$block)s in CKEDITOR.dtd.$blockLimit||s in CKEDITOR.dtd.$empty||(d[s]=1);CKEDITOR.dom.elementPath=function(a,o){var l,u=null,f=null,i=[],r=a;o=o||a.getDocument().getBody(),r||(r=o);do{if(r.type==CKEDITOR.NODE_ELEMENT){if(i.push(r),!this.lastElement&&(this.lastElement=r,r.is(CKEDITOR.dtd.$object)||"false"==r.getAttribute("contenteditable")))continue;if(r.equals(o))break;if(!f&&(l=r.getName(),"true"==r.getAttribute("contenteditable")?f=r:!u&&d[l]&&(u=r),e[l])){if(l=!u&&"div"==l){e:{for(var n=0,t=(l=r.getChildren()).count();n<t;n++){var c=l.getItem(n);if(c.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[c.getName()]){l=!0;break e}}l=!1}l=!l}l?u=r:f=r}}}while(r=r.getParent());f||(f=o),this.block=u,this.blockLimit=f,this.root=o,this.elements=i}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var d=this.elements;if(!(e=e&&e.elements)||d.length!=e.length)return!1;for(var s=0;s<d.length;s++)if(!d[s].equals(e[s]))return!1;return!0},contains:function(e,d,s){var o,a=0;"string"==typeof e&&(o=function(i){return i.getName()==e}),e instanceof CKEDITOR.dom.element?o=function(i){return i.equals(e)}:CKEDITOR.tools.isArray(e)?o=function(i){return-1<CKEDITOR.tools.indexOf(e,i.getName())}:"function"==typeof e?o=e:"object"==typeof e&&(o=function(i){return i.getName()in e});var u=this.elements,f=u.length;for(d&&(s?a+=1:--f),s&&(u=Array.prototype.slice.call(u,0)).reverse();a<f;a++)if(o(u[a]))return u[a];return null},isContextFor:function(e){return!(e in CKEDITOR.dtd.$block)||!!(this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit).getDtd()[e]},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,d){"string"==typeof e&&(e=(d?d.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var d=this.$.parentNode,s=d.childNodes.length,a=this.getLength(),o=this.getDocument(),u=new CKEDITOR.dom.text(this.$.splitText(e),o);return d.childNodes.length==s&&(e>=a?(u=o.createText("")).insertAfter(this):((e=o.createText("")).insertAfter(u),e.remove())),u},substring:function(e,d){return"number"!=typeof d?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,d)}}),function(){function e(s,a,o){var u=s.serializable,f=a[o?"endContainer":"startContainer"],i=o?"endOffset":"startOffset",r=u?a.document.getById(s.startNode):s.startNode;return s=u?a.document.getById(s.endNode):s.endNode,f.equals(r.getPrevious())?(a.startOffset=a.startOffset-f.getLength()-s.getPrevious().getLength(),f=s.getNext()):f.equals(s.getPrevious())&&(a.startOffset-=f.getLength(),f=s.getNext()),f.equals(r.getParent())&&a[i]++,f.equals(s.getParent())&&a[i]++,a[o?"endContainer":"startContainer"]=f,a}CKEDITOR.dom.rangeList=function(s){return s instanceof CKEDITOR.dom.rangeList?s:(s?s instanceof CKEDITOR.dom.range&&(s=[s]):s=[],CKEDITOR.tools.extend(s,d))};var d={createIterator:function(){var u,s=this,a=CKEDITOR.dom.walker.bookmark(),o=[];return{getNextRange:function(f){var i=s[u=void 0===u?0:u+1];if(i&&1<s.length){if(!u)for(var r=s.length-1;0<=r;r--)o.unshift(s[r].createBookmark(!0));if(f)for(var l=0;s[u+l+1];){var n=i.document;for(f=0,r=n.getById(o[l].endNode),n=n.getById(o[l+1].startNode);;){if(r=r.getNextSourceNode(!1),n.equals(r))f=1;else if(a(r)||r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary())continue;break}if(!f)break;l++}for(i.moveToBookmark(o.shift());l--;)(r=s[++u]).moveToBookmark(o.shift()),i.setEnd(r.endContainer,r.endOffset)}return i}}},createBookmarks:function(s){for(var o,a=[],u=0;u<this.length;u++){a.push(o=this[u].createBookmark(s,!0));for(var f=u+1;f<this.length;f++)this[f]=e(o,this[f]),this[f]=e(o,this[f],!0)}return a},createBookmarks2:function(s){for(var a=[],o=0;o<this.length;o++)a.push(this[o].createBookmark2(s));return a},moveToBookmarks:function(s){for(var a=0;a<this.length;a++)this[a].moveToBookmark(s[a])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function d(l){var n=CKEDITOR.skin["ua_"+l],t=CKEDITOR.env;if(n){n=n.split(",").sort(function(C,h){return C>h?-1:1});for(var m,c=0;c<n.length;c++)if(m=n[c],t.ie&&(m.replace(/^ie/,"")==t.version||t.quirks&&"iequirks"==m)&&(m="ie"),t[m]){l+="_"+n[c];break}}return CKEDITOR.getUrl(e()+l+".css")}function s(l,n){u[l]||(CKEDITOR.document.appendStyleSheet(d(l)),u[l]=1),n&&n()}function a(l){var n=l.getById(f);return n||((n=l.getHead().append("style")).setAttribute("id",f),n.setAttribute("type","text/css")),n}function o(l,n,t){var c,m,g;if(CKEDITOR.env.webkit)for(n=n.split("}").slice(0,-1),m=0;m<n.length;m++)n[m]=n[m].split("{");for(var C=0;C<l.length;C++)if(CKEDITOR.env.webkit)for(m=0;m<n.length;m++){for(g=n[m][1],c=0;c<t.length;c++)g=g.replace(t[c][0],t[c][1]);l[C].$.sheet.addRule(n[m][0],g)}else{for(g=n,c=0;c<t.length;c++)g=g.replace(t[c][0],t[c][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?l[C].$.styleSheet.cssText+=g:l[C].$.innerHTML+=g}}var u={};CKEDITOR.skin={path:e,loadPart:function(l,n){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),function(){s(l,n)}):s(l,n)},getPath:function(l){return CKEDITOR.getUrl(d(l))},icons:{},addIcon:function(l,n,t,c){l=l.toLowerCase(),this.icons[l]||(this.icons[l]={path:n,offset:t||0,bgsize:c||"16px"})},getIconStyle:function(l,n,t,c,m){var g;return l&&(l=l.toLowerCase(),n&&(g=this.icons[l+"-rtl"]),g||(g=this.icons[l])),c=c||g&&g.offset,m=m||g&&g.bgsize||"16px",(l=t||g&&g.path||"")&&(l=l.replace(/'/g,"\\'")),l&&"background-image:url('"+CKEDITOR.getUrl(l)+"');background-position:0 "+c+"px;background-size:"+m+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(l){var n=a(CKEDITOR.document);return(this.setUiColor=function(t){this.uiColor=t;var c=CKEDITOR.skin.chameleon,m="",g="";"function"==typeof c&&(m=c(this,"editor"),g=c(this,"panel")),o([n],m,t=[[r,t]]),o(i,g,t)}).call(this,l)}});var f="cke_ui_color",i=[],r=/\$color/g;CKEDITOR.on("instanceLoaded",function(l){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var n=l.editor;l=function(t){if(!(t=(t.data[0]||t.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument()).getById("cke_ui_color")){var c=a(t);i.push(c),n.on("destroy",function(){i=CKEDITOR.tools.array.filter(i,function(m){return c!==m})}),(t=n.getUiColor())&&o([c],CKEDITOR.skin.chameleon(n,"panel"),[[r,t]])}},n.on("panelShow",l),n.on("menuShow",l),n.config.uiColor&&n.setUiColor(n.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var d=e.getComputedStyle("border-top-color"),s=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!d||d!=s)}catch(a){CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,d=0;d<e.length;d++)CKEDITOR.editor.prototype.constructor.apply(e[d][0],e[d][1]),CKEDITOR.add(e[d][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var e=function(s,a){for(var o=s.match(/[^#]./g),u=0;3>u;u++){var i,f=u;i=parseInt(o[u],16),i=("0"+(0>a?0|i*(1+a):0|i+(255-i)*a).toString(16)).slice(-2),o[f]=i}return"#"+o.join("")},d={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(s,a){var o=e(s.uiColor,.4);return o={id:"."+s.id,defaultBorder:e(o,-.2),toolbarElementsBorder:e(o,-.25),defaultBackground:o,lightBackground:e(o,.8),darkBackground:e(o,-.15),ckeButtonOn:e(o,.4),ckeResizer:e(o,-.4),ckeColorauto:e(o,.8),dialogBody:e(o,.7),dialogTab:e(o,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:e(o,-.6),menubuttonHover:e(o,.1),menubuttonIcon:e(o,.5),menubuttonIconHover:e(o,.3)},d[a].output(o).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(r){this._||(this._={}),this._.default=this._.initValue=r.default||"",this._.required=r.required||!1;for(var l=[this._],n=1;n<arguments.length;n++)l.push(arguments[n]);return l.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,l),this._},d={build:function(r,l,n){return new CKEDITOR.ui.dialog.textInput(r,l,n)}},s={build:function(r,l,n){return new CKEDITOR.ui.dialog[l.type](r,l,n)}},a={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(r){this.setValue(this.getInitValue(),r)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},o=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(r,l){this._.domOnChangeRegistered||(r.on("load",function(){this.getInputElement().on("change",function(){r.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",l)}},!0),u=/^on([A-Z]\w+)/,f=function(r){for(var l in r)(u.test(l)||"title"==l||"type"==l)&&delete r[l];return r},i=function(r){(r=r.data.getKeystroke())==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):r==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(r,l,n,t){if(!(4>arguments.length)){var c=e.call(this,l);c.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var m={role:l.role||"presentation"};l.includeLabel&&(m["aria-labelledby"]=c.labelId),CKEDITOR.ui.dialog.uiElement.call(this,r,l,n,"div",null,m,function(){var g=[],C=l.required?" cke_required":"";return"horizontal"!=l.labelLayout?g.push('<label class="cke_dialog_ui_labeled_label'+C+'" ',' id="'+c.labelId+'"',c.inputId?' for="'+c.inputId+'"':"",(l.labelStyle?' style="'+l.labelStyle+'"':"")+">",l.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',l.controlStyle?' style="'+l.controlStyle+'"':"",' role="presentation">',t.call(this,r,l),"</div>"):(C={type:"hbox",widths:l.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+C+'" id="'+c.labelId+'" for="'+c.inputId+'"'+(l.labelStyle?' style="'+l.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(l.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(l.controlStyle?' style="'+l.controlStyle+'"':"")+">"+t.call(this,r,l)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(r,C,g)),g.join("")})}},textInput:function(r,l,n){if(!(3>arguments.length)){e.call(this,l);var t=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",c={class:"cke_dialog_ui_input_"+l.type,id:t,type:l.type};l.validate&&(this.validate=l.validate),l.maxLength&&(c.maxlength=l.maxLength),l.size&&(c.size=l.size),l.inputStyle&&(c.style=l.inputStyle);var m=this,g=!1;r.on("load",function(){m.getInputElement().on("keydown",function(C){13==C.data.getKeystroke()&&(g=!0)}),m.getInputElement().on("keyup",function(C){13==C.data.getKeystroke()&&g&&(r.getButton("ok")&&setTimeout(function(){r.getButton("ok").click()},0),g=!1),m.bidi&&i.call(m,C)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,r,l,n,function(){var C=['<div class="cke_dialog_ui_input_',l.type,'" role="presentation"'];for(var h in l.width&&C.push('style="width:'+l.width+'" '),C.push("><input "),c["aria-labelledby"]=this._.labelId,this._.required&&(c["aria-required"]=this._.required),c)C.push(h+'="'+c[h]+'" ');return C.push(" /></div>"),C.join("")})}},textarea:function(r,l,n){if(!(3>arguments.length)){e.call(this,l);var t=this,c=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",m={};l.validate&&(this.validate=l.validate),m.rows=l.rows||5,m.cols=l.cols||20,m.class="cke_dialog_ui_input_textarea "+(l.class||""),void 0!==l.inputStyle&&(m.style=l.inputStyle),l.dir&&(m.dir=l.dir),t.bidi&&r.on("load",function(){t.getInputElement().on("keyup",i)},t),CKEDITOR.ui.dialog.labeledElement.call(this,r,l,n,function(){m["aria-labelledby"]=this._.labelId,this._.required&&(m["aria-required"]=this._.required);var C,g=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',c,'" '];for(C in m)g.push(C+'="'+CKEDITOR.tools.htmlEncode(m[C])+'" ');return g.push(">",CKEDITOR.tools.htmlEncode(t._.default),"</textarea></div>"),g.join("")})}},checkbox:function(r,l,n){if(!(3>arguments.length)){var t=e.call(this,l,{default:!!l.default});l.validate&&(this.validate=l.validate),CKEDITOR.ui.dialog.uiElement.call(this,r,l,n,"span",null,null,function(){var c=CKEDITOR.tools.extend({},l,{id:l.id?l.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),m=[],g=CKEDITOR.tools.getNextId()+"_label",C={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":g};return f(c),l.default&&(C.checked="checked"),void 0!==c.inputStyle&&(c.style=c.inputStyle),t.checkbox=new CKEDITOR.ui.dialog.uiElement(r,c,m,"input",null,C),m.push(' <label id="',g,'" for="',C.id,'"'+(l.labelStyle?' style="'+l.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(l.label),"</label>"),m.join("")})}},radio:function(r,l,n){if(!(3>arguments.length)){e.call(this,l),this._.default||(this._.default=this._.initValue=l.items[0][1]),l.validate&&(this.validate=l.validate);var t=[],c=this;l.role="radiogroup",l.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,r,l,n,function(){for(var m=[],g=[],C=(l.id?l.id:CKEDITOR.tools.getNextId())+"_radio",h=0;h<l.items.length;h++){var I=l.items[h],D=void 0!==I[2]?I[2]:I[0],k=void 0!==I[1]?I[1]:I[0],p=(b=CKEDITOR.tools.getNextId()+"_radio_input")+"_label",b=CKEDITOR.tools.extend({},l,{id:b,title:null,type:null},!0),O=(D=CKEDITOR.tools.extend({},b,{title:D},!0),{type:"radio",class:"cke_dialog_ui_radio_input",name:C,value:k,"aria-labelledby":p}),R=[];c._.default==k&&(O.checked="checked"),f(b),f(D),void 0!==b.inputStyle&&(b.style=b.inputStyle),b.keyboardFocusable=!0,t.push(new CKEDITOR.ui.dialog.uiElement(r,b,R,"input",null,O)),R.push(" "),new CKEDITOR.ui.dialog.uiElement(r,D,R,"label",null,{id:p,for:O.id},I[0]),m.push(R.join(""))}return new CKEDITOR.ui.dialog.hbox(r,t,m,g),g.join("")}),this._.children=t}},button:function(r,l,n){if(arguments.length){"function"==typeof l&&(l=l(r.getParentEditor())),e.call(this,l,{disabled:l.disabled||!1}),CKEDITOR.event.implementOn(this);var t=this;r.on("load",function(){var g=this.getElement();g.on("click",function(C){t.click(),C.data.preventDefault()}),g.on("keydown",function(C){C.data.getKeystroke()in{32:1}&&(t.click(),C.data.preventDefault())}),g.unselectable()},this);var c=CKEDITOR.tools.extend({},l);delete c.style;var m=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,r,c,n,"a",null,{style:l.style,href:"javascript:void(0)",title:l.label,hidefocus:"true",class:l.class,role:"button","aria-labelledby":m},'<span id="'+m+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(l.label)+"</span>")}},select:function(r,l,n){if(!(3>arguments.length)){var t=e.call(this,l);l.validate&&(this.validate=l.validate),t.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,r,l,n,function(){var c=CKEDITOR.tools.extend({},l,{id:l.id?l.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),m=[],g=[],C={id:t.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};m.push('<div class="cke_dialog_ui_input_',l.type,'" role="presentation"'),l.width&&m.push('style="width:'+l.width+'" '),m.push(">"),void 0!==l.size&&(C.size=l.size),void 0!==l.multiple&&(C.multiple=l.multiple),f(c);for(var I,h=0;h<l.items.length&&(I=l.items[h]);h++)g.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==I[1]?I[1]:I[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(I[0]));return void 0!==c.inputStyle&&(c.style=c.inputStyle),t.select=new CKEDITOR.ui.dialog.uiElement(r,c,m,"select",null,C,g.join("")),m.push("</div>"),m.join("")})}},file:function(r,l,n){if(!(3>arguments.length)){void 0===l.default&&(l.default="");var t=CKEDITOR.tools.extend(e.call(this,l),{definition:l,buttons:[]});l.validate&&(this.validate=l.validate),r.on("load",function(){CKEDITOR.document.getById(t.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,r,l,n,function(){t.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var c=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',t.frameId,'" title="',l.label,'" src="javascript:void('];return c.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),c.push(')"></iframe>'),c.join("")})}},fileButton:function(r,l,n){var t=this;if(!(3>arguments.length)){e.call(this,l),l.validate&&(this.validate=l.validate);var c=CKEDITOR.tools.extend({},l),m=c.onClick;c.className=(c.className?c.className+" ":"")+"cke_dialog_ui_button",c.onClick=function(g){var C=l.for;!1!==(g=!!m&&m.call(this,g))&&("xhr"!==g&&r.getContentElement(C[0],C[1]).submit(),this.disable())},r.on("load",function(){r.getContentElement(l.for[0],l.for[1])._.buttons.push(t)}),CKEDITOR.ui.dialog.button.call(this,r,c,n)}},html:function(){var r=/^\s*<[\w:]+\s+([^>]*)?>/,l=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,n=/\/$/;return function(t,c,m){if(!(3>arguments.length)){var g=[],C=c.html;"<"!=C.charAt(0)&&(C="<span>"+C+"</span>");var h=c.focus;if(h){var I=this.focus;this.focus=function(){("function"==typeof h?h:I).call(this),this.fire("focus")},c.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,t,c,g,"span",null,null,""),g=g.join("").match(r),C=C.match(l)||["","",""],n.test(C[1])&&(C[1]=C[1].slice(0,-1),C[2]="/"+C[2]),m.push([C[1]," ",g[1]||"",C[2]].join(""))}}}(),fieldset:function(r,l,n,t,c){var m=c.label;this._={children:l},CKEDITOR.ui.dialog.uiElement.call(this,r,c,t,"fieldset",null,null,function(){var g=[];m&&g.push("<legend"+(c.labelStyle?' style="'+c.labelStyle+'"':"")+">"+m+"</legend>");for(var C=0;C<n.length;C++)g.push(n[C]);return g.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(r){var l=CKEDITOR.document.getById(this._.labelId);return 1>l.getChildCount()?new CKEDITOR.dom.text(r,CKEDITOR.document).appendTo(l):l.getChild(0).$.nodeValue=r,this},getLabel:function(){var r=CKEDITOR.document.getById(this._.labelId);return!r||1>r.getChildCount()?"":r.getChild(0).getText()},eventProcessors:o},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return!this._.disabled&&this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var r=this.getElement();r&&r.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(r,l){this.on("click",function(){l.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var r=this.selectParentTab();setTimeout(function(){var l=r.getInputElement();l&&l.$.focus()},0)},select:function(){var r=this.selectParentTab();setTimeout(function(){var l=r.getInputElement();l&&(l.$.focus(),l.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(r){if(this.bidi){var l=r&&r.charAt(0);(l="\u202a"==l?"ltr":"\u202b"==l?"rtl":null)&&(r=r.slice(1)),this.setDirectionMarker(l)}return r||(r=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var r=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&r){var l=this.getDirectionMarker();l&&(r=("ltr"==l?"\u202a":"\u202b")+r)}return r},setDirectionMarker:function(r){var l=this.getInputElement();r?l.setAttributes({dir:r,"data-cke-dir-marker":r}):this.getDirectionMarker()&&l.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},a,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(r,l,n){var t=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),c=this.getInputElement().$;return t.$.text=r,t.$.value=null==l?r:l,null==n?CKEDITOR.env.ie?c.add(t.$):c.add(t.$,null):c.add(t.$,n),this},remove:function(r){return this.getInputElement().$.remove(r),this},clear:function(){for(var r=this.getInputElement().$;0<r.length;)r.remove(0);return this},keyboardFocusable:!0},a,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(r,l){this.getInputElement().$.checked=r,!l&&this.fire("change",{value:r})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(r,l){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?o.onChange.apply(this,arguments):(r.on("load",function(){var n=this._.checkbox.getElement();n.on("propertychange",function(t){"checked"==(t=t.data.$).propertyName&&this.fire("change",{value:n.$.checked})},this)},this),this.on("change",l),null)}},keyboardFocusable:!0},a,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(r,l){for(var t,n=this._.children,c=0;c<n.length&&(t=n[c]);c++)t.getElement().$.checked=t.getValue()==r;!l&&this.fire("change",{value:r})},getValue:function(){for(var r=this._.children,l=0;l<r.length;l++)if(r[l].getElement().$.checked)return r[l].getValue();return null},accessKeyUp:function(){var l,r=this._.children;for(l=0;l<r.length;l++)if(r[l].getElement().$.checked)return void r[l].getElement().focus();r[0].getElement().focus()},eventProcessors:{onChange:function(r,l){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?o.onChange.apply(this,arguments):(r.on("load",function(){for(var n=this._.children,t=this,c=0;c<n.length;c++)n[c].getElement().on("propertychange",function(m){"checked"==(m=m.data.$).propertyName&&this.$.checked&&t.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",l),null)}}},a,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,a,{getInputElement:function(){var r=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<r.$.forms.length?new CKEDITOR.dom.element(r.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(r){var n,c,l=/^on([A-Z]\w+)/,t=function(m,g,C,h){m.on("formLoaded",function(){m.getInputElement().on(C,h,m)})};for(c in r)(n=c.match(l))&&(this.eventProcessors[c]?this.eventProcessors[c].call(this,this._.dialog,r[c]):t(this,0,n[1].toLowerCase(),r[c]));return this},reset:function(){function r(){n.$.open();var I="";t.size&&(I=t.size-(CKEDITOR.env.ie?7:0));var D=l.frameId+"_input";for(n.$.write(['<html dir="'+C+'" lang="'+h+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+C+'" lang="'+h+'" action="',CKEDITOR.tools.htmlEncode(t.action),'"><label id="',l.labelId,'" for="',D,'" style="display:none">',CKEDITOR.tools.htmlEncode(t.label),'</label><input style="width:100%" id="',D,'" aria-labelledby="',l.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(t.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<I?I:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+m+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+g+")}","<\/script>"].join("")),n.$.close(),I=0;I<c.length;I++)c[I].enable()}var l=this._,n=CKEDITOR.document.getById(l.frameId).getFrameDocument(),t=l.definition,c=l.buttons,m=this.formLoadedNumber,g=this.formUnloadNumber,C=l.dialog._.editor.lang.dir,h=l.dialog._.editor.langCode;m||(m=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),g=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(m),CKEDITOR.tools.removeFunction(g)})),CKEDITOR.env.gecko?setTimeout(r,500):r()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(r,l){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",l)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",d),CKEDITOR.dialog.addUIElement("password",d),CKEDITOR.dialog.addUIElement("tel",d),CKEDITOR.dialog.addUIElement("textarea",s),CKEDITOR.dialog.addUIElement("checkbox",s),CKEDITOR.dialog.addUIElement("radio",s),CKEDITOR.dialog.addUIElement("button",s),CKEDITOR.dialog.addUIElement("select",s),CKEDITOR.dialog.addUIElement("file",s),CKEDITOR.dialog.addUIElement("fileButton",s),CKEDITOR.dialog.addUIElement("html",s),CKEDITOR.dialog.addUIElement("fieldset",{build:function(r,l,n){for(var c,t=l.children,m=[],g=[],C=0;C<t.length&&(c=t[C]);C++){var h=[];m.push(h),g.push(CKEDITOR.dialog._.uiElementBuilders[c.type].build(r,c,h))}return new CKEDITOR.ui.dialog[l.type](r,g,m,n,l)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function e(){for(var x=this._.tabIdList.length,T=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+x,N=T-1;N>T-x;N--)if(this._.tabs[this._.tabIdList[N%x]][0].$.offsetHeight)return this._.tabIdList[N%x];return null}function d(){for(var x=this._.tabIdList.length,T=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),N=T+1;N<T+x;N++)if(this._.tabs[this._.tabIdList[N%x]][0].$.offsetHeight)return this._.tabIdList[N%x];return null}function s(x,T){for(var N=x.$.getElementsByTagName("input"),A=0,P=N.length;A<P;A++){var H=new CKEDITOR.dom.element(N[A]);"text"==H.getAttribute("type").toLowerCase()&&(T?(H.setAttribute("value",H.getCustomData("fake_value")||""),H.removeCustomData("fake_value")):(H.setCustomData("fake_value",H.getAttribute("value")),H.setAttribute("value","")))}}function a(x,T){var N=this.getInputElement();N&&(x?N.removeAttribute("aria-invalid"):N.setAttribute("aria-invalid",!0)),x||(this.select?this.select():this.focus()),T&&alert(T),this.fire("validated",{valid:x,msg:T})}function o(){var x=this.getInputElement();x&&x.removeAttribute("aria-invalid")}function f(x,T,N){this.element=T,this.focusIndex=N,this.tabIndex=0,this.isFocusable=function(){return!T.getAttribute("disabled")&&T.isVisible()},this.focus=function(){x._.currentFocusIndex=this.focusIndex,this.element.focus()},T.on("keydown",function(A){A.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),T.on("focus",function(){this.fire("mouseover")}),T.on("blur",function(){this.fire("mouseout")})}function r(x,T){this._={dialog:x},CKEDITOR.tools.extend(this,T)}function t(x){x.data.preventDefault(1)}function c(x){var T=CKEDITOR.document.getWindow(),N=x.config,A=CKEDITOR.skinName||x.config.skin,P=N.dialog_backgroundCoverColor||("moono-lisa"==A?"black":"white"),H=(A=N.dialog_backgroundCoverOpacity,N.baseFloatZIndex),E=(N=CKEDITOR.tools.genKey(P,A,H),O[N]);E?E.show():(H=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",H,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+P,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(P="<html><body style=\\'background-color:"+P+";\\'></body></html>",H.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),H.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+P+"' );document.close();")+"})())"),H.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),H.push("</div>"),(E=CKEDITOR.dom.element.createFromHtml(H.join(""))).setOpacity(void 0!==A?A:.5),E.on("keydown",t),E.on("keypress",t),E.on("keyup",t),E.appendTo(CKEDITOR.document.getBody()),O[N]=E),x.focusManager.add(E),R=E;var L=function(){var q=T.getScrollPosition(),j=CKEDITOR.dialog._.currentTop;if(E.setStyles({left:q.x+"px",top:q.y+"px"}),j)do{q=j.getPosition(),j.move(q.x,q.y)}while(j=j._.parentDialog)};if(p=x=function(){var q=T.getViewPaneSize();E.setStyles({width:q.width+"px",height:q.height+"px"})},T.on("resize",x),x(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||E.focus(),CKEDITOR.env.ie6Compat){var B=function(){L(),B.prevScrollHandler.apply(this,arguments)};T.$.setTimeout(function(){B.prevScrollHandler=window.onscroll||function(){},window.onscroll=B},0),L()}}function m(x){R&&(x.focusManager.remove(R),x=CKEDITOR.document.getWindow(),R.hide(),R=null,x.removeListener("resize",p),CKEDITOR.env.ie6Compat&&x.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),p=null)}var x,g=CKEDITOR.tools.cssLength,C='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(x,T){function A(M){var U=te._.focusList;if(M=M||0,!(1>U.length)){var z=te._.currentFocusIndex;te._.tabBarMode&&0>M&&(z=0);try{U[z].getInputElement().$.blur()}catch(X){}var J=z,V=1<te._.pageCount;do{if(J+=M,V&&!te._.tabBarMode&&(J==U.length||-1==J))return te._.tabBarMode=!0,te._.tabs[te._.currentTabId][0].focus(),void(te._.currentFocusIndex=-1);if((J=(J+U.length)%U.length)==z)break}while(M&&!U[J].isFocusable());U[J].focus(),"text"==U[J].type&&U[J].select()}}function P(M){if(te==CKEDITOR.dialog._.currentTop){var U=M.data.getKeystroke(),z="rtl"==x.lang.dir;if(G=Y=0,9==U||U==CKEDITOR.SHIFT+9)A(U==CKEDITOR.SHIFT+9?-1:1),G=1;else if(U==CKEDITOR.ALT+121&&!te._.tabBarMode&&1<te.getPageCount())te._.tabBarMode=!0,te._.tabs[te._.currentTabId][0].focus(),te._.currentFocusIndex=-1,G=1;else if(-1!=CKEDITOR.tools.indexOf([37,38,39,40],U)&&te._.tabBarMode)U=-1!=CKEDITOR.tools.indexOf([z?39:37,38],U)?e.call(te):d.call(te),te.selectPage(U),te._.tabs[U][0].focus(),G=1;else if(13!=U&&32!=U||!te._.tabBarMode)if(13==U)(U=M.data.getTarget()).is("a","button","select","textarea")||U.is("input")&&"button"==U.$.type||((U=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(U.click,0,U),G=1),Y=1;else{if(27!=U)return;(U=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(U.click,0,U):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),Y=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,A(1),G=1;H(M)}}function H(M){G?M.data.preventDefault(1):Y&&M.data.stopPropagation()}var G,Y,E=CKEDITOR.dialog._.dialogDefinitions[T],L=CKEDITOR.tools.clone(h),B=x.config.dialog_buttonsOrder||"OS",q=x.lang.dir,j={};if(("OS"==B&&CKEDITOR.env.mac||"rtl"==B&&"ltr"==q||"ltr"==B&&"rtl"==q)&&L.buttons.reverse(),E=CKEDITOR.tools.extend(E(x),L),E=CKEDITOR.tools.clone(E),E=new b(this,E),L=function(x){var T=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",C).output({id:CKEDITOR.tools.getNextNumber(),editorId:x.id,langDir:x.lang.dir,langCode:x.langCode,editorDialogClass:"cke_editor_"+x.name.replace(/\./g,"\\.")+"_dialog",closeTitle:x.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),N=T.getChild([0,0,0,0,0]),A=N.getChild(0),P=N.getChild(1);return x.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(N),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(x="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+x+'" tabIndex="-1"></iframe>').appendTo(N.getParent())),A.unselectable(),P.unselectable(),{element:T,parts:{dialog:T.getChild(0),title:A,close:P,tabs:N.getChild(2),contents:N.getChild([3,0,0,0]),footer:N.getChild([3,0,1,0])}}}(x),this._={editor:x,element:L.element,name:T,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=L.parts,CKEDITOR.tools.setTimeout(function(){x.fire("ariaWidget",this.parts.contents)},0,this),(L={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"})["rtl"==q?"right":"left"]=0,this.parts.dialog.setStyles(L),CKEDITOR.event.call(this),this.definition=E=CKEDITOR.fire("dialogDefinition",{name:T,definition:E},x).definition,!("removeDialogTabs"in x._)&&x.config.removeDialogTabs){for(L=x.config.removeDialogTabs.split(";"),q=0;q<L.length;q++)if(2==(B=L[q].split(":")).length){var Z=B[0];j[Z]||(j[Z]=[]),j[Z].push(B[1])}x._.removeDialogTabs=j}if(x._.removeDialogTabs&&(j=x._.removeDialogTabs[T]))for(q=0;q<j.length;q++)E.removeContents(j[q]);E.onLoad&&this.on("load",E.onLoad),E.onShow&&this.on("show",E.onShow),E.onHide&&this.on("hide",E.onHide),E.onOk&&this.on("ok",function(M){x.fire("saveSnapshot"),setTimeout(function(){x.fire("saveSnapshot")},0),!1===E.onOk.call(this,M)&&(M.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,E.onCancel&&this.on("cancel",function(M){!1===E.onCancel.call(this,M)&&(M.data.hide=!1)});var te=this,S=function(M){var J,U=te._.contents;for(J in U)for(var V in U[J])if(M.call(this,U[J][V]))return};this.on("ok",function(M){S(function(U){if(U.validate){var z=U.validate(this),J="string"==typeof z||!1===z;return J&&(M.data.hide=!1,M.stop()),a.call(U,!J,"string"==typeof z?z:void 0),J}})},this,null,0),this.on("cancel",function(M){S(function(U){if(U.isChanged())return x.config.dialog_noConfirmCancel||confirm(x.lang.common.confirmCancel)||(M.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(M){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),M.data.preventDefault()},this),this.changeFocus=A;var $=this._.element;for(x.focusManager.add($,1),this.on("show",function(){$.on("keydown",P,this),CKEDITOR.env.gecko&&$.on("keypress",H,this)}),this.on("hide",function(){$.removeListener("keydown",P),CKEDITOR.env.gecko&&$.removeListener("keypress",H),S(function(M){o.apply(M)})}),this.on("iframeAdded",function(M){new CKEDITOR.dom.document(M.data.iframe.$.contentWindow.document).on("keydown",P,this,null,0)}),this.on("show",function(){!function(){var M=te._.focusList;M.sort(function(J,V){return J.tabIndex!=V.tabIndex?V.tabIndex-J.tabIndex:J.focusIndex-V.focusIndex});for(var U=M.length,z=0;z<U;z++)M[z].focusIndex=z}();var M=1<te._.pageCount;x.config.dialog_startupFocusTab&&M?(te._.tabBarMode=!0,te._.tabs[te._.currentTabId][0].focus(),te._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=M?-1:this._.focusList.length-1,E.onFocus?(M=E.onFocus.call(this))&&M.focus():A(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var M=this.getElement(),U=M.getFirst();U.remove(),U.appendTo(M)},this),function(x){function T(B){var q=x.getSize(),j=CKEDITOR.document.getWindow().getViewPaneSize(),G=B.data.$.screenX,Y=B.data.$.screenY,Z=G-A.x,te=Y-A.y;A={x:G,y:Y},P.x+=Z,P.y+=te,x.move(P.x+L[3]<E?-L[3]:P.x-L[1]>j.width-q.width-E?j.width-q.width+("rtl"==H.lang.dir?0:L[1]):P.x,P.y+L[0]<E?-L[0]:P.y-L[2]>j.height-q.height-E?j.height-q.height+L[2]:P.y,1),B.data.preventDefault()}function N(){if(CKEDITOR.document.removeListener("mousemove",T),CKEDITOR.document.removeListener("mouseup",N),CKEDITOR.env.ie6Compat){var B=R.getChild(0).getFrameDocument();B.removeListener("mousemove",T),B.removeListener("mouseup",N)}}var A=null,P=null,H=x.getParentEditor(),E=H.config.dialog_magnetDistance,L=CKEDITOR.skin.margins||[0,0,0,0];void 0===E&&(E=20),x.parts.title.on("mousedown",function(B){if(A={x:B.data.$.screenX,y:B.data.$.screenY},CKEDITOR.document.on("mousemove",T),CKEDITOR.document.on("mouseup",N),P=x.getPosition(),CKEDITOR.env.ie6Compat){var q=R.getChild(0).getFrameDocument();q.on("mousemove",T),q.on("mouseup",N)}B.data.preventDefault()},x)}(this),function(x){function T(Z){var te="rtl"==H.lang.dir,S=j.width,$=j.height,M=S+(Z.data.$.screenX-q.x)*(te?-1:1)*(x._.moved?1:2),U=$+(Z.data.$.screenY-q.y)*(x._.moved?1:2),z=x._.element.getFirst(),J=(z=te&&z.getComputedStyle("right"),x.getPosition());J.y+U>B.height&&(U=B.height-J.y),(te?z:J.x)+M>B.width&&(M=B.width-(te?z:J.x)),(P==CKEDITOR.DIALOG_RESIZE_WIDTH||P==CKEDITOR.DIALOG_RESIZE_BOTH)&&(S=Math.max(A.minWidth||0,M-E)),(P==CKEDITOR.DIALOG_RESIZE_HEIGHT||P==CKEDITOR.DIALOG_RESIZE_BOTH)&&($=Math.max(A.minHeight||0,U-L)),x.resize(S,$),x._.moved||x.layout(),Z.data.preventDefault()}function N(){if(CKEDITOR.document.removeListener("mouseup",N),CKEDITOR.document.removeListener("mousemove",T),G&&(G.remove(),G=null),CKEDITOR.env.ie6Compat){var Z=R.getChild(0).getFrameDocument();Z.removeListener("mouseup",N),Z.removeListener("mousemove",T)}}var A=x.definition,P=A.resizable;if(P!=CKEDITOR.DIALOG_RESIZE_NONE){var E,L,B,q,j,G,H=x.getParentEditor(),Y=CKEDITOR.tools.addFunction(function(Z){j=x.getSize();var te=x.parts.contents;te.$.getElementsByTagName("iframe").length&&(G=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),te.append(G)),L=j.height-x.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),E=j.width-x.parts.contents.getSize("width",1),q={x:Z.screenX,y:Z.screenY},B=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",T),CKEDITOR.document.on("mouseup",N),CKEDITOR.env.ie6Compat&&((te=R.getChild(0).getFrameDocument()).on("mousemove",T),te.on("mouseup",N)),Z.preventDefault&&Z.preventDefault()});x.on("load",function(){var Z="";P==CKEDITOR.DIALOG_RESIZE_WIDTH?Z=" cke_resizer_horizontal":P==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(Z=" cke_resizer_vertical"),Z=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+Z+" cke_resizer_"+H.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(H.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+Y+', event )">'+("ltr"==H.lang.dir?"\u25e2":"\u25e3")+"</div>"),x.parts.footer.append(Z,1)}),H.on("destroy",function(){CKEDITOR.tools.removeFunction(Y)})}}(this),new CKEDITOR.dom.text(E.title,CKEDITOR.document).appendTo(this.parts.title),q=0;q<E.contents.length;q++)(j=E.contents[q])&&this.addPage(j);for(this.parts.tabs.on("click",function(M){var U=M.data.getTarget();U.hasClass("cke_dialog_tab")&&(this.selectPage((U=U.$.id).substring(4,U.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,A(1)),M.data.preventDefault())},this),q=[],j=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:E.buttons},q).getChild(),this.parts.footer.setHtml(q.join("")),q=0;q<j.length;q++)this._.buttons[j[q].id]=j[q]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(x,T){this._.contentSize&&this._.contentSize.width==x&&this._.contentSize.height==T||(CKEDITOR.dialog.fire("resize",{dialog:this,width:x,height:T},this._.editor),this.fire("resize",{width:x,height:T},this._.editor),this.parts.contents.setStyles({width:x+"px",height:T+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:x,height:T})},getSize:function(){var x=this._.element.getFirst();return{width:x.$.offsetWidth||0,height:x.$.offsetHeight||0}},move:function(x,T,N){var A=this._.element.getFirst(),P="rtl"==this._.editor.lang.dir,H="fixed"==A.getComputedStyle("position");CKEDITOR.env.ie&&A.setStyle("zoom","100%"),H&&this._.position&&this._.position.x==x&&this._.position.y==T||(this._.position={x,y:T},H||(x+=(H=CKEDITOR.document.getWindow().getScrollPosition()).x,T+=H.y),P&&(H=this.getSize(),x=CKEDITOR.document.getWindow().getViewPaneSize().width-H.width-x),(T={top:(0<T?T:0)+"px"})[P?"right":"left"]=(0<x?x:0)+"px",A.setStyles(T),N&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var x=this._.element,T=this.definition;for(var N in x.getParent()&&x.getParent().equals(CKEDITOR.document.getBody())?x.setStyle("display","block"):x.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||T.width||T.minWidth,this._.contentSize&&this._.contentSize.height||T.height||T.minHeight),this.reset(),null===this._.currentTabId&&this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,c(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),x.on("keydown",w),x.on("keyup",v),this._.hasFocus=!1,T.contents)if(T.contents[N]){var A=this._.tabs[(x=T.contents[N]).id],P=x.requiredContent,H=0;if(A){for(var E in this._.contents[x.id]){var L=this._.contents[x.id][E];"hbox"!=L.type&&"vbox"!=L.type&&L.getInputElement()&&(L.requiredContent&&!this._.editor.activeFilter.check(L.requiredContent)?L.disable():(L.enable(),H++))}!H||P&&!this._.editor.activeFilter.check(P)?A[0].addClass("cke_dialog_tab_disabled"):A[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),function(x){function T(){x.layout()}var N=CKEDITOR.document.getWindow();N.on("resize",T),x.on("hide",function(){N.removeListener("resize",T)})}(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(B){B.setInitValue&&B.setInitValue()})},100,this)},layout:function(){var x=this.parts.dialog,T=this.getSize(),N=CKEDITOR.document.getWindow().getViewPaneSize(),A=(N.width-T.width)/2,P=(N.height-T.height)/2;CKEDITOR.env.ie6Compat||x.setStyle("position",T.height+(0<P?P:0)>N.height||T.width+(0<A?A:0)>N.width?"absolute":"fixed"),this.move(this._.moved?this._.position.x:A,this._.moved?this._.position.y:P)},foreach:function(x){for(var T in this._.contents)for(var N in this._.contents[T])x.call(this,this._.contents[T][N]);return this},reset:(x=function(T){T.reset&&T.reset(1)},function(){return this.foreach(x),this}),setupContent:function(){var x=arguments;this.foreach(function(T){T.setup&&T.setup.apply(T,x)})},commitContent:function(){var x=arguments;this.foreach(function(T){CKEDITOR.env.ie&&this._.currentFocusIndex==T.focusIndex&&T.getInputElement().$.blur(),T.commit&&T.commit.apply(T,x)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var x=this._.element;for(x.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),y(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var T=this._.parentDialog.getElement().getFirst();T.setStyle("z-index",parseInt(T.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else m(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,x.removeListener("keydown",w),x.removeListener("keyup",v);var N=this._.editor;N.focus(),setTimeout(function(){N.focusManager.unlock(),CKEDITOR.env.iOS&&N.window.focus()},0)}delete this._.parentDialog,this.foreach(function(A){A.resetInitValue&&A.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(x){if(!x.requiredContent||this._.editor.filter.check(x.requiredContent)){for(var T=[],N=x.label?' title="'+CKEDITOR.tools.htmlEncode(x.label)+'"':"",A=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:x.elements,expand:!!x.expand,padding:x.padding,style:x.style||"width: 100%;"},T),P=this._.contents[x.id]={},H=A.getChild(),E=0;A=H.shift();)A.notAllowed||"hbox"==A.type||"vbox"==A.type||E++,P[A.id]=A,"function"==typeof A.getChild&&H.push.apply(H,A.getChild());E||(x.hidden=!0),(T=CKEDITOR.dom.element.createFromHtml(T.join(""))).setAttribute("role","tabpanel"),A=CKEDITOR.env,P="cke_"+x.id+"_"+CKEDITOR.tools.getNextNumber(),N=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",N,x.hidden?' style="display:none"':"",' id="',P,'"',A.gecko&&!A.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',x.label,"</a>"].join("")),T.setAttribute("aria-labelledby",P),this._.tabs[x.id]=[N,T],this._.tabIdList.push(x.id),!x.hidden&&this._.pageCount++,this._.lastTab=N,this.updateStyle(),T.setAttribute("name",x.id),T.appendTo(this.parts.contents),N.unselectable(),this.parts.tabs.append(N),x.accessKey&&(K(this,this,"CTRL+"+x.accessKey,W,F),this._.accessKeyMap["CTRL+"+x.accessKey]=x.id)}},selectPage:function(x){if(this._.currentTabId!=x&&!this._.tabs[x][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:x,currentPage:this._.currentTabId})){for(var T in this._.tabs){var A=this._.tabs[T][1];T!=x&&(this._.tabs[T][0].removeClass("cke_dialog_tab_selected"),A.hide()),A.setAttribute("aria-hidden",T!=x)}var P=this._.tabs[x];P[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(s(P[1]),P[1].show(),setTimeout(function(){s(P[1],1)},0)):P[1].show(),this._.currentTabId=x,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,x)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(x){var T=this._.tabs[x]&&this._.tabs[x][0];T&&1!=this._.pageCount&&T.isVisible()&&(x==this._.currentTabId&&this.selectPage(e.call(this)),T.hide(),this._.pageCount--,this.updateStyle())},showPage:function(x){(x=this._.tabs[x]&&this._.tabs[x][0])&&(x.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(x,T){var N=this._.contents[x];return N&&N[T]},getValueOf:function(x,T){return this.getContentElement(x,T).getValue()},setValueOf:function(x,T,N){return this.getContentElement(x,T).setValue(N)},getButton:function(x){return this._.buttons[x]},click:function(x){return this._.buttons[x].click()},disableButton:function(x){return this._.buttons[x].disable()},enableButton:function(x){return this._.buttons[x].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(x,T){if(void 0===T)this._.focusList.push(new f(this,x,T=this._.focusList.length));else{this._.focusList.splice(T,0,new f(this,x,T));for(var N=T+1;N<this._.focusList.length;N++)this._.focusList[N].focusIndex++}},setState:function(x){if(this.state!=x){if(this.state=x,x==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var T=this.getParentEditor().lang.dir,N={attributes:{class:"cke_dialog_spinner"},styles:{float:"rtl"==T?"right":"left"}};N.styles["margin-"+("rtl"==T?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",N),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else x==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",x)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(x,T){this._.dialogDefinitions[x]&&"function"!=typeof T||(this._.dialogDefinitions[x]=T)},exists:function(x){return!!this._.dialogDefinitions[x]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(x,T,N){return!((x=x.config.removeDialogTabs)&&x.match(new RegExp("(?:^|;)"+T+":"+N+"(?:$|;)","i")))},okButton:function(){var x=function(T,N){return N=N||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:T.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(A){!1!==(A=A.data.dialog).fire("ok",{hide:!0}).hide&&A.hide()}},N,!0)};return x.type="button",x.override=function(T){return CKEDITOR.tools.extend(function(N){return x(N,T)},{type:"button"},!0)},x}(),cancelButton:function(){var x=function(T,N){return N=N||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:T.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(A){!1!==(A=A.data.dialog).fire("cancel",{hide:!0}).hide&&A.hide()}},N,!0)};return x.type="button",x.override=function(T){return CKEDITOR.tools.extend(function(N){return x(N,T)},{type:"button"},!0)},x}(),addUIElement:function(x,T){this._.uiElementBuilders[x]=T}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var h={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},I=function(x,T,N){for(var P,A=0;P=x[A];A++)if(P.id==T||N&&P[N]&&(P=I(P[N],T,N)))return P;return null},D=function(x,T,N,A,P){if(N){for(var E,H=0;E=x[H];H++){if(E.id==N)return x.splice(H,0,T),T;if(A&&E[A]&&(E=D(E[A],T,N,A,!0)))return E}if(P)return null}return x.push(T),T},k=function(x,T,N){for(var P,A=0;P=x[A];A++){if(P.id==T)return x.splice(A,1);if(N&&P[N]&&(P=k(P[N],T,N)))return P}return null},b=function(x,T){this.dialog=x;for(var P,N=T.contents,A=0;P=N[A];A++)N[A]=P&&new r(x,P);CKEDITOR.tools.extend(this,T)};b.prototype={getContents:function(x){return I(this.contents,x)},getButton:function(x){return I(this.buttons,x)},addContents:function(x,T){return D(this.contents,x,T)},addButton:function(x,T){return D(this.buttons,x,T)},removeContents:function(x){k(this.contents,x)},removeButton:function(x){k(this.buttons,x)}},r.prototype={get:function(x){return I(this.elements,x,"children")},add:function(x,T){return D(this.elements,x,T,"children")},remove:function(x){k(this.elements,x,"children")}};var p,R,O={},_={},w=function(x){var T=x.data.$.ctrlKey||x.data.$.metaKey,N=x.data.$.altKey,A=x.data.$.shiftKey,P=String.fromCharCode(x.data.$.keyCode);(T=_[(T?"CTRL+":"")+(N?"ALT+":"")+(A?"SHIFT+":"")+P])&&T.length&&((T=T[T.length-1]).keydown&&T.keydown.call(T.uiElement,T.dialog,T.key),x.data.preventDefault())},v=function(x){var T=x.data.$.ctrlKey||x.data.$.metaKey,N=x.data.$.altKey,A=x.data.$.shiftKey,P=String.fromCharCode(x.data.$.keyCode);(T=_[(T?"CTRL+":"")+(N?"ALT+":"")+(A?"SHIFT+":"")+P])&&T.length&&(T=T[T.length-1]).keyup&&(T.keyup.call(T.uiElement,T.dialog,T.key),x.data.preventDefault())},K=function(x,T,N,A,P){(_[N]||(_[N]=[])).push({uiElement:x,dialog:T,key:N,keyup:P||x.accessKeyUp,keydown:A||x.accessKeyDown})},y=function(x){for(var T in _){for(var N=_[T],A=N.length-1;0<=A;A--)N[A].dialog!=x&&N[A].uiElement!=x||N.splice(A,1);0===N.length&&delete _[T]}},F=function(x,T){x._.accessKeyMap[T]&&x.selectPage(x._.accessKeyMap[T])},W=function(){};CKEDITOR.ui.dialog={uiElement:function(x,T,N,A,P,H,E){if(!(4>arguments.length)){var L=(A.call?A(T):A)||"div",B=["<",L," "],q=(P&&P.call?P(T):P)||{},j=(H&&H.call?H(T):H)||{},G=(E&&E.call?E.call(this,x,T):E)||"",Y=this.domId=j.id||CKEDITOR.tools.getNextId()+"_uiElement";T.requiredContent&&!x.getParentEditor().filter.check(T.requiredContent)&&(q.display="none",this.notAllowed=!0),j.id=Y;var Z={};T.type&&(Z["cke_dialog_ui_"+T.type]=1),T.className&&(Z[T.className]=1),T.disabled&&(Z.cke_disabled=1);var te=j.class&&j.class.split?j.class.split(" "):[];for(Y=0;Y<te.length;Y++)te[Y]&&(Z[te[Y]]=1);for(Y in te=[],Z)te.push(Y);for(Y in j.class=te.join(" "),T.title&&(j.title=T.title),Z=(T.style||"").split(";"),T.align&&(q["margin-left"]="left"==(te=T.align)?0:"auto",q["margin-right"]="right"==te?0:"auto"),q)Z.push(Y+":"+q[Y]);for(T.hidden&&Z.push("display:none"),Y=Z.length-1;0<=Y;Y--)""===Z[Y]&&Z.splice(Y,1);for(Y in 0<Z.length&&(j.style=(j.style?j.style+"; ":"")+Z.join("; ")),j)B.push(Y+'="'+CKEDITOR.tools.htmlEncode(j[Y])+'" ');B.push(">",G,"</",L,">"),N.push(B.join("")),(this._||(this._={})).dialog=x,"boolean"==typeof T.isChanged&&(this.isChanged=function(){return T.isChanged}),"function"==typeof T.isChanged&&(this.isChanged=T.isChanged),"function"==typeof T.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function($){return function(M){$.call(this,T.setValue.call(this,M))}})),"function"==typeof T.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function($){return function(){return T.getValue.call(this,$.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(T),this.accessKeyUp&&this.accessKeyDown&&T.accessKey&&K(this,x,"CTRL+"+T.accessKey);var S=this;x.on("load",function(){var $=S.getInputElement();if($){var M=S.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";$.on("focus",function(){x._.tabBarMode=!1,x._.hasFocus=!0,S.fire("focus"),M&&this.addClass(M)}),$.on("blur",function(){S.fire("blur"),M&&this.removeClass(M)})}}),CKEDITOR.tools.extend(this,T),this.keyboardFocusable&&(this.tabIndex=T.tabIndex||0,this.focusIndex=x._.focusList.push(this)-1,this.on("focus",function(){x._.currentFocusIndex=S.focusIndex}))}},hbox:function(x,T,N,A,P){if(!(4>arguments.length)){this._||(this._={});var B,H=this._.children=T,E=P&&P.widths||null,L=P&&P.height||null,q={role:"presentation"};P&&P.align&&(q.align=P.align),CKEDITOR.ui.dialog.uiElement.call(this,x,P||{type:"hbox"},A,"table",{},q,function(){var j=['<tbody><tr class="cke_dialog_ui_hbox">'];for(B=0;B<N.length;B++){var G="cke_dialog_ui_hbox_child",Y=[];0===B&&(G="cke_dialog_ui_hbox_first"),B==N.length-1&&(G="cke_dialog_ui_hbox_last"),j.push('<td class="',G,'" role="presentation" '),E?E[B]&&Y.push("width:"+g(E[B])):Y.push("width:"+Math.floor(100/N.length)+"%"),L&&Y.push("height:"+g(L)),P&&void 0!==P.padding&&Y.push("padding:"+g(P.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&H[B].align&&Y.push("text-align:"+H[B].align),0<Y.length&&j.push('style="'+Y.join("; ")+'" '),j.push(">",N[B],"</td>")}return j.push("</tr></tbody>"),j.join("")})}},vbox:function(x,T,N,A,P){if(!(3>arguments.length)){this._||(this._={});var H=this._.children=T,E=P&&P.width||null,L=P&&P.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,x,P||{type:"vbox"},A,"div",null,{role:"presentation"},function(){var B=['<table role="presentation" cellspacing="0" border="0" '];B.push('style="'),P&&P.expand&&B.push("height:100%;"),B.push("width:"+g(E||"100%"),";"),CKEDITOR.env.webkit&&B.push("float:none;"),B.push('"'),B.push('align="',CKEDITOR.tools.htmlEncode(P&&P.align||("ltr"==x.getParentEditor().lang.dir?"left":"right")),'" '),B.push("><tbody>");for(var q=0;q<N.length;q++){var j=[];B.push('<tr><td role="presentation" '),E&&j.push("width:"+g(E||"100%")),L?j.push("height:"+g(L[q])):P&&P.expand&&j.push("height:"+Math.floor(100/N.length)+"%"),P&&void 0!==P.padding&&j.push("padding:"+g(P.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&H[q].align&&j.push("text-align:"+H[q].align),0<j.length&&B.push('style="',j.join("; "),'" '),B.push(' class="cke_dialog_ui_vbox_child">',N[q],"</td></tr>")}return B.push("</tbody></table>"),B.join("")})}}},CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(x,T){return this.getInputElement().setValue(x),!T&&this.fire("change",{value:x}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var x=this.getInputElement();(x=x.getParent())&&-1==x.$.className.search("cke_dialog_page_contents"););return x?(x=x.getAttribute("name"),this._.dialog._.currentTabId!=x&&this._.dialog.selectPage(x),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(x){var N,P,T=/^on([A-Z]\w+)/,A=function(H,E,L,B){E.on("load",function(){H.getInputElement().on(L,B,H)})};for(P in x)(N=P.match(T))&&(this.eventProcessors[P]?this.eventProcessors[P].call(this,this._.dialog,x[P]):A(this,this._.dialog,N[1].toLowerCase(),x[P]));return this},eventProcessors:{onLoad:function(x,T){x.on("load",T,this)},onShow:function(x,T){x.on("show",T,this)},onHide:function(x,T){x.on("hide",T,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var x=this.getElement();this.getInputElement().setAttribute("disabled","true"),x.addClass("cke_disabled")},enable:function(){var x=this.getElement();this.getInputElement().removeAttribute("disabled"),x.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!(!this.isEnabled()||!this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(x){return 1>arguments.length?this._.children.concat():(x.splice||(x=[x]),2>x.length?this._.children[x[0]]:this._.children[x[0]]&&this._.children[x[0]].getChild?this._.children[x[0]].getChild(x.slice(1,x.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var x={build:function(T,N,A){for(var H,P=N.children,E=[],L=[],B=0;B<P.length&&(H=P[B]);B++){var q=[];E.push(q),L.push(CKEDITOR.dialog._.uiElementBuilders[H.type].build(T,H,q))}return new CKEDITOR.ui.dialog[N.type](T,L,E,A,N)}};CKEDITOR.dialog.addUIElement("hbox",x),CKEDITOR.dialog.addUIElement("vbox",x)}(),CKEDITOR.dialogCommand=function(x,T){this.dialogName=x,CKEDITOR.tools.extend(this,T,!0)},CKEDITOR.dialogCommand.prototype={exec:function(x){var T=this.tabId;x.openDialog(this.dialogName,function(N){T&&N.selectPage(T)})},canUndo:!1,editorFocus:1},function(){var x=/^([a]|[^a])+$/,T=/^\d*$/,N=/^\d*(?:\.\d+)?$/,A=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,P=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,H=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var E=arguments;return function(){var B,G,L=this&&this.getValue?this.getValue():E[0],q=CKEDITOR.VALIDATE_AND,j=[];for(G=0;G<E.length&&"function"==typeof E[G];G++)j.push(E[G]);G<E.length&&"string"==typeof E[G]&&(B=E[G],G++),G<E.length&&"number"==typeof E[G]&&(q=E[G]);var Y=q==CKEDITOR.VALIDATE_AND;for(G=0;G<j.length;G++)Y=q==CKEDITOR.VALIDATE_AND?Y&&j[G](L):Y||j[G](L);return!!Y||B}},regex:function(E,L){return function(B){return B=this&&this.getValue?this.getValue():B,!!E.test(B)||L}},notEmpty:function(E){return this.regex(x,E)},integer:function(E){return this.regex(T,E)},number:function(E){return this.regex(N,E)},cssLength:function(E){return this.functions(function(L){return P.test(CKEDITOR.tools.trim(L))},E)},htmlLength:function(E){return this.functions(function(L){return A.test(CKEDITOR.tools.trim(L))},E)},inlineStyle:function(E){return this.functions(function(L){return H.test(CKEDITOR.tools.trim(L))},E)},equals:function(E,L){return this.functions(function(B){return B==E},L)},notEqual:function(E,L){return this.functions(function(B){return B!=E},L)}},CKEDITOR.on("instanceDestroyed",function(E){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var L;L=CKEDITOR.dialog._.currentTop;)L.hide();for(var B in O)O[B].remove();O={}}for(var q in E=E.editor._.storedDialogs)E[q].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(x,T){var N=null,A=CKEDITOR.dialog._.dialogDefinitions[x];if(null===CKEDITOR.dialog._.currentTop&&c(this),"function"==typeof A)N=(N=this._.storedDialogs||(this._.storedDialogs={}))[x]||(N[x]=new CKEDITOR.dialog(this,x)),T&&T.call(N,N),N.show();else{if("failed"==A)throw m(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+x+'" failed when loading definition.');"string"==typeof A&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(A),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[x]&&(CKEDITOR.dialog._.dialogDefinitions[x]="failed"),this.openDialog(x,T)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),N}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",function(d){d.data.dialog&&e.openDialog(d.data.dialog)},null,null,999)}}),CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var d=this;e.addCommand("a11yHelp",{exec:function(){var s=d.availableLangs[s=e.langCode]?s:d.availableLangs[s.replace(/-.*/,"")]?s.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d.path+"dialogs/lang/"+s+".js"),function(){e.lang.a11yhelp=d.langEntries[s],e.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),e.on("ariaEditorHelpLabel",function(s){s.data.label=e.lang.common.editorHelp})}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var d=e.addCommand("about",new CKEDITOR.dialogCommand("about"));d.modes={wysiwyg:1,source:1},d.canUndo=!1,d.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.dlgTitle,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(e){var d=0,s=function(f,i,r,l){if(l){l=new CKEDITOR.style(l);var n=a[r];n.unshift(l),e.attachStyleStateChange(l,function(t){!e.readOnly&&e.getCommand(r).setState(t)}),e.addCommand(r,new CKEDITOR.styleCommand(l,{contentForms:n})),e.ui.addButton&&e.ui.addButton(f,{label:i,command:r,toolbar:"basicstyles,"+(d+=10)})}},a={bold:["strong","b",["span",function(f){return"bold"==(f=f.styles["font-weight"])||700<=+f}]],italic:["em","i",["span",function(f){return"italic"==f.styles["font-style"]}]],underline:["u",["span",function(f){return"underline"==f.styles["text-decoration"]}]],strike:["s","strike",["span",function(f){return"line-through"==f.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},o=e.config,u=e.lang.basicstyles;s("Bold",u.bold,"bold",o.coreStyles_bold),s("Italic",u.italic,"italic",o.coreStyles_italic),s("Underline",u.underline,"underline",o.coreStyles_underline),s("Strike",u.strike,"strike",o.coreStyles_strike),s("Subscript",u.subscript,"subscript",o.coreStyles_subscript),s("Superscript",u.superscript,"superscript",o.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var e={exec:function(d){var s=d.getCommand("blockquote").state,a=d.getSelection(),o=a&&a.getRanges()[0];if(o){var u=a.createBookmarks();if(CKEDITOR.env.ie){var r,f=u[0].startNode,i=u[0].endNode;if(f&&"blockquote"==f.getParent().getName())for(r=f;r=r.getNext();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){f.move(r,!0);break}if(i&&"blockquote"==i.getParent().getName())for(r=i;r=r.getPrevious();)if(r.type==CKEDITOR.NODE_ELEMENT&&r.isBlockBoundary()){i.move(r);break}}if((l=o.createIterator()).enlargeBr=d.config.enterMode!=CKEDITOR.ENTER_BR,s==CKEDITOR.TRISTATE_OFF){for(f=[];s=l.getNextParagraph();)f.push(s);for(1>f.length&&(s=d.document.createElement(d.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),i=u.shift(),o.insertNode(s),s.append(new CKEDITOR.dom.text("\ufeff",d.document)),o.moveToBookmark(i),o.selectNodeContents(s),o.collapse(!0),i=o.createBookmark(),f.push(s),u.unshift(i)),r=f[0].getParent(),o=[],i=0;i<f.length;i++)r=r.getCommonAncestor((s=f[i]).getParent());for(s={table:1,tbody:1,tr:1,ol:1,ul:1};s[r.getName()];)r=r.getParent();for(i=null;0<f.length;){for(s=f.shift();!s.getParent().equals(r);)s=s.getParent();s.equals(i)||o.push(s),i=s}for(;0<o.length;)if("blockquote"==(s=o.shift()).getName()){for(i=new CKEDITOR.dom.documentFragment(d.document);s.getFirst();)i.append(s.getFirst().remove()),f.push(i.getLast());i.replace(s)}else f.push(s);for((o=d.document.createElement("blockquote")).insertBefore(f[0]);0<f.length;)s=f.shift(),o.append(s)}else if(s==CKEDITOR.TRISTATE_ON){for(i=[],r={};s=l.getNextParagraph();){for(f=o=null;s.getParent();){if("blockquote"==s.getParent().getName()){o=s.getParent(),f=s;break}s=s.getParent()}o&&f&&!f.getCustomData("blockquote_moveout")&&(i.push(f),CKEDITOR.dom.element.setMarker(r,f,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(r),s=[],f=[],r={};0<i.length;)o=(l=i.shift()).getParent(),l.getPrevious()?l.getNext()?(l.breakParent(l.getParent()),f.push(l.getNext())):l.remove().insertAfter(o):l.remove().insertBefore(o),o.getCustomData("blockquote_processed")||(f.push(o),CKEDITOR.dom.element.setMarker(r,o,"blockquote_processed",!0)),s.push(l);for(CKEDITOR.dom.element.clearAllMarkers(r),i=f.length-1;0<=i;i--){e:{for(var l=0,n=(r=o=f[i]).getChildCount(),t=void 0;l<n&&(t=r.getChild(l));l++)if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()){r=!1;break e}r=!0}r&&o.remove()}if(d.config.enterMode==CKEDITOR.ENTER_BR)for(o=!0;s.length;)if("div"==(l=s.shift()).getName()){for(i=new CKEDITOR.dom.documentFragment(d.document),!o||!l.getPrevious()||l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary()||i.append(d.document.createElement("br")),o=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(i);o&&i.append(d.document.createElement("br")),i.replace(l),o=!1}}a.selectBookmarks(u),d.focus()}},refresh:function(d,s){this.setState(d.elementPath(s.block||s.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(d){d.blockless||(d.addCommand("blockquote",e),d.ui.addButton&&d.ui.addButton("Blockquote",{label:d.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function e(s,a){CKEDITOR.tools.extend(this,a,{editor:s,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:s._.notificationArea}),a.type||(this.type="info"),this.element=this._createElement(),s.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function d(s){var a=this;this.editor=s,this.notifications=[],this.element=this._createElement(),this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this),this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this),s.on("destroy",function(){a._removeListeners(),a.element.remove()})}CKEDITOR.plugins.add("notification",{init:function(s){s._.notificationArea=new d(s),s.showNotification=function(o,u,f){var i,r;return"progress"==u?i=f:r=f,(o=new CKEDITOR.plugins.notification(s,{message:o,type:u,progress:i,duration:r})).show(),o},s.on("key",function(o){if(27==o.data.keyCode){var u=s._.notificationArea.notifications;u.length&&(function(o){var u=new CKEDITOR.dom.element("div");u.setStyles({position:"fixed","margin-left":"-9999px"}),u.setAttributes({"aria-live":"assertive","aria-atomic":"true"}),u.setText(o),CKEDITOR.document.getBody().append(u),setTimeout(function(){u.remove()},100)}(s.lang.notification.closed),u[u.length-1].hide(),o.cancel())}})}}),e.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(s){var a=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:s})&&(a=!1);var o=this.element,u=o.findOne(".cke_notification_message"),f=o.findOne(".cke_notification_progress"),i=s.type;o.removeAttribute("role"),s.progress&&"progress"!=this.type&&(i="progress"),i&&(o.removeClass(this._getClass()),o.removeAttribute("aria-label"),this.type=i,o.addClass(this._getClass()),o.setAttribute("aria-label",this.type),"progress"!=this.type||f?"progress"!=this.type&&f&&f.remove():(f=this._createProgressElement()).insertBefore(u)),void 0!==s.message&&(this.message=s.message,u.setHtml(this.message)),void 0!==s.progress&&(this.progress=s.progress,f&&f.setStyle("width",this._getPercentageProgress())),a&&s.important&&(o.setAttribute("role","alert"),this.isVisible()||this.area.add(this)),this.duration=s.duration,this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var a,o,s=this,u=this.editor.lang.common.close;return(a=new CKEDITOR.dom.element("div")).addClass("cke_notification"),a.addClass(this._getClass()),a.setAttributes({id:this.id,role:"alert","aria-label":this.type}),"progress"==this.type&&a.append(this._createProgressElement()),(o=new CKEDITOR.dom.element("p")).addClass("cke_notification_message"),o.setHtml(this.message),a.append(o),o=CKEDITOR.dom.element.createFromHtml('<a class="cke_notification_close" href="javascript:void(0)" title="'+u+'" role="button" tabindex="-1"><span class="cke_label">X</span></a>'),a.append(o),o.on("click",function(){s.editor.focus(),s.hide()}),a},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var s=new CKEDITOR.dom.element("span");return s.addClass("cke_notification_progress"),s.setStyle("width",this._getPercentageProgress()),s},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var a,s=this;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId),"number"==typeof this.duration?a=this.duration:("info"==this.type||"success"==this.type)&&(a="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5e3),a&&(s._hideTimeoutId=setTimeout(function(){s.hide()},a))}},d.prototype={add:function(s){this.notifications.push(s),this.element.append(s.element),1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners()),this._layout()},remove:function(s){var a=CKEDITOR.tools.indexOf(this.notifications,s);0>a||(this.notifications.splice(a,1),s.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var s=this.editor,a=s.config,o=new CKEDITOR.dom.element("div");return o.addClass("cke_notifications_area"),o.setAttribute("id","cke_notifications_area_"+s.name),o.setStyle("z-index",a.baseFloatZIndex-2),o},_attachListeners:function(){var s=CKEDITOR.document.getWindow(),a=this.editor;s.on("scroll",this._uiBuffer.input),s.on("resize",this._uiBuffer.input),a.on("change",this._changeBuffer.input),a.on("floatingSpaceLayout",this._layout,this,null,20),a.on("blur",this._layout,this,null,20)},_removeListeners:function(){var s=CKEDITOR.document.getWindow(),a=this.editor;s.removeListener("scroll",this._uiBuffer.input),s.removeListener("resize",this._uiBuffer.input),a.removeListener("change",this._changeBuffer.input),a.removeListener("floatingSpaceLayout",this._layout),a.removeListener("blur",this._layout)},_layout:function(){function s(){a.setStyle("left",I(D+u.width-t-c))}var i,r,n,a=this.element,o=this.editor,u=o.ui.contentsElement.getClientRect(),f=o.ui.contentsElement.getDocumentPosition(),l=a.getClientRect(),t=this._notificationWidth,c=this._notificationMargin,m=(n=CKEDITOR.document.getWindow()).getScrollPosition(),g=n.getViewPaneSize(),C=CKEDITOR.document.getBody(),h=C.getDocumentPosition(),I=CKEDITOR.tools.cssLength;t&&c||(n=this.element.getChild(0),t=this._notificationWidth=n.getClientRect().width,c=this._notificationMargin=parseInt(n.getComputedStyle("margin-left"),10)+parseInt(n.getComputedStyle("margin-right"),10)),o.toolbar&&(r=(i=o.ui.space("top")).getClientRect()),i&&i.isVisible()&&r.bottom>u.top&&r.bottom<u.bottom-l.height?a.setStyles({position:"fixed",top:I(r.bottom)}):a.setStyles(0<u.top?{position:"absolute",top:I(f.y)}:f.y+u.height-l.height>m.y?{position:"fixed",top:0}:{position:"absolute",top:I(f.y+u.height-l.height)});var D="fixed"==a.getStyle("position")?u.left:"static"!=C.getComputedStyle("position")?f.x-h.x:f.x;u.width<t+c?f.x+t+c>m.x+g.width?s():a.setStyle("left",I(D)):f.x+t+c>m.x+g.width?a.setStyle("left",I(D)):f.x+u.width/2+t/2+c>m.x+g.width?a.setStyle("left",I(D-f.x+m.x+g.width-t-c)):0>u.left+u.width-t-c?s():a.setStyle("left",I(0>u.left+u.width/2-t/2?D-f.x+m.x:D+u.width/2-t/2-c/2))}},CKEDITOR.plugins.notification=e}(),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-describedby="{id}_description" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var d="";CKEDITOR.env.ie&&(d='return false;" onmouseup="CKEDITOR.tools.getMouseButton(event)==CKEDITOR.MOUSE_BUTTON_LEFT&&'),e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" onclick="'+d+'CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}">&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span><span id="{id}_description" class="cke_button_label" aria-hidden="false">{ariaShortcut}</span>{arrowHtml}</a>';var s=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),a=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(o){o.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(o){CKEDITOR.tools.extend(this,o,{title:o.label,click:o.click||function(u){u.execCommand(o.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(o){return new CKEDITOR.ui.button(o)}},CKEDITOR.ui.button.prototype={render:function(o,u){function f(){var O=o.mode;O&&(O=this.modes[O]?void 0!==i[O]?i[O]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,O=o.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:O,this.setState(O),this.refresh&&this.refresh())}var c,m,g,i=null,r=CKEDITOR.env,l=this._.id=CKEDITOR.tools.getNextId(),n="",t=this.command;this._.editor=o;var k,C={id:l,button:this,editor:o,focus:function(){CKEDITOR.document.getById(l).focus()},execute:function(){this.button.click(o)},attach:function(O){this.button.attach(O)}},h=CKEDITOR.tools.addFunction(function(O){if(C.onkey)return O=new CKEDITOR.dom.event(O),!1!==C.onkey(C,O.getKeystroke())}),I=CKEDITOR.tools.addFunction(function(O){var R;return C.onfocus&&(R=!1!==C.onfocus(C,new CKEDITOR.dom.event(O))),R}),D=0;C.clickFn=c=CKEDITOR.tools.addFunction(function(){D&&(o.unlockSelection(1),D=0),C.execute(),r.iOS&&o.focus()}),this.modes?(i={},o.on("beforeModeUnload",function(){o.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(i[o.mode]=this._.state)},this),o.on("activeFilterChange",f,this),o.on("mode",f,this),!this.readOnly&&o.on("readOnly",f,this)):t&&(t=o.getCommand(t))&&(t.on("state",function(){this.setState(t.state)},this),n+=t.state==CKEDITOR.TRISTATE_ON?"on":t.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),this.directional&&o.on("contentDirChanged",function(O){var R=CKEDITOR.document.getById(this._.id),_=R.getFirst();(O=O.data)!=o.lang.dir?R.addClass("cke_"+O):R.removeClass("cke_ltr").removeClass("cke_rtl"),_.setAttribute("style",CKEDITOR.skin.getIconStyle(k,"rtl"==O,this.icon,this.iconOffset))},this),t?(m=o.getCommandKeystroke(t))&&(g=CKEDITOR.tools.keystrokeToString(o.lang.common.keyboard,m)):n+="off";var b=null,p=this.icon;return k=m=this.name||this.command,this.icon&&!/\./.test(this.icon)?(k=this.icon,p=null):(this.icon&&(b=this.icon),CKEDITOR.env.hidpi&&this.iconHiDpi&&(b=this.iconHiDpi)),b?(CKEDITOR.skin.addIcon(b,b),p=null):b=k,n={id:l,name:m,iconName:k,label:this.label,cls:(this.hasArrow?"cke_button_expandable ":"")+(this.className||""),state:n,ariaDisabled:"disabled"==n?"true":"false",title:this.title+(g?" ("+g.display+")":""),ariaShortcut:g?o.lang.common.keyboardShortcut+" "+g.aria:"",titleJs:r.gecko&&!r.hc?"":(this.title||"").replace("'",""),hasArrow:"string"==typeof this.hasArrow&&this.hasArrow||(this.hasArrow?"true":"false"),keydownFn:h,focusFn:I,clickFn:c,style:CKEDITOR.skin.getIconStyle(b,"rtl"==o.lang.dir,p,this.iconOffset),arrowHtml:this.hasArrow?s.output():""},a.output(n,u),this.onRender&&this.onRender(),C},setState:function(o){if(this._.state==o)return!1;this._.state=o;var u=CKEDITOR.document.getById(this._.id);return!!u&&(u.setState(o,"cke_button"),u.setAttribute("aria-disabled",o==CKEDITOR.TRISTATE_DISABLED),this.hasArrow?u.setAttribute("aria-expanded",o==CKEDITOR.TRISTATE_ON):o===CKEDITOR.TRISTATE_ON?u.setAttribute("aria-pressed",!0):u.removeAttribute("aria-pressed"),!0)},getState:function(){return this._.state},toFeature:function(o){if(this._.feature)return this._.feature;var u=this;return this.allowedContent||this.requiredContent||!this.command||(u=o.getCommand(this.command)||u),this._.feature=u}},CKEDITOR.ui.prototype.addButton=function(o,u){this.add(o,CKEDITOR.UI_BUTTON,u)}}(),function(){function d(o){return o._.toolbarGroups||(o._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var s=function(){this.toolbars=[],this.focusCommandExecuted=!1};s.prototype.focus=function(){for(var u,o=0;u=this.toolbars[o++];)for(var i,f=0;i=u.items[f++];)if(i.focus)return void i.focus()};var a={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(o){o.toolbox&&(o.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){o.toolbox.focus()},100):o.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(o){var u,f=function(i,r){var l,c=(n="rtl"==o.lang.dir)?37:39,n=n?39:37,t=void 0===(t=o.config.toolbarGroupCycling)||t;switch(r){case 9:case CKEDITOR.SHIFT+9:for(;!l||!l.items.length;)if((l=9==r?(l?l.next:i.toolbar.next)||o.toolbox.toolbars[0]:(l?l.previous:i.toolbar.previous)||o.toolbox.toolbars[o.toolbox.toolbars.length-1]).items.length)for(i=l.items[u?l.items.length-1:0];i&&!i.focus;)(i=u?i.previous:i.next)||(l=0);return i&&i.focus(),!1;case c:l=i;do{!(l=l.next)&&t&&(l=i.toolbar.items[0])}while(l&&!l.focus);return l?l.focus():f(i,9),!1;case 40:return i.button&&i.button.hasArrow?i.execute():f(i,40==r?c:n),!1;case n:case 38:l=i;do{!(l=l.previous)&&t&&(l=i.toolbar.items[i.toolbar.items.length-1])}while(l&&!l.focus);return l?l.focus():(u=1,f(i,CKEDITOR.SHIFT+9),u=0),!1;case 27:return o.focus(),!1;case 13:case 32:return i.execute(),!1}return!0};o.on("uiSpace",function(i){if(i.data.space==o.config.toolbarLocation){i.removeListener(),o.toolbox=new s;var n,t,l=['<span id="',r=CKEDITOR.tools.getNextId(),'" class="cke_voice_label">',o.lang.toolbar.toolbars,"</span>",'<span id="'+o.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',r,'" onmousedown="return false;">'],r=!1!==o.config.toolbarStartupExpanded;o.config.toolbarCanCollapse&&o.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&l.push('<span class="cke_toolbox_main"'+(r?">":' style="display:none">'));for(var c=o.toolbox.toolbars,m=function(o){function i(t,c){if(c.length){t.items?t.items.push(o.ui.create("-")):t.items=[];for(var m;m=c.shift();)m="string"==typeof m?m:m.name,l&&-1!=CKEDITOR.tools.indexOf(l,m)||(m=o.ui.create(m))&&o.addFeature(m)&&t.items.push(m)}}var l=(l=o.config.removeButtons)&&l.split(","),n=o.config.toolbar;return"string"==typeof n&&(n=o.config["toolbar_"+n]),o.toolbar=n?function(t){var m,g,C,c=[];for(m=0;m<t.length;++m)C={},"/"==(g=t[m])?c.push(g):CKEDITOR.tools.isArray(g)?(i(C,CKEDITOR.tools.clone(g)),c.push(C)):g.items&&(i(C,CKEDITOR.tools.clone(g.items)),C.name=g.name,c.push(C));return c}(n):function(){for(var t=function(){var c,m,g,t={};for(c in o.ui.items)g=(g=(m=o.ui.items[c]).toolbar||"others").split(","),m=g[0],g=parseInt(g[1]||-1,10),t[m]||(t[m]=[]),t[m].push({name:c,order:g});for(m in t)t[m]=t[m].sort(function(C,h){return C.order==h.order?0:0>h.order?-1:0>C.order?1:C.order<h.order?-1:1});return t}(),c=CKEDITOR.tools.clone(o.config.toolbarGroups)||d(o),m=0;m<c.length;m++){var g=c[m];if("/"!=g){"string"==typeof g&&(g=c[m]={name:g});var C,h=g.groups;if(h)for(var I=0;I<h.length;I++)(C=t[C=h[I]])&&i(g,C);(C=t[g.name])&&i(g,C)}}return c}()}(o),g=m.length,C=0;C<g;C++){var h,D,p,I=0,k=m[C],b="/"!==k&&("/"===m[C+1]||C==g-1);if(k)if(n&&(l.push("</span>"),t=n=0),"/"===k)l.push('<span class="cke_toolbar_break"></span>');else{p=k.items||k;for(var O=0;O<p.length;O++){var _,R=p[O];if(R){var w=function(y){y=y.render(o,l),0<(v=I.items.push(y)-1)&&(y.previous=I.items[v-1],y.previous.next=y),y.toolbar=I,y.onkey=f,y.onfocus=function(){o.toolbox.focusCommandExecuted||o.focus()}};if(R.type==CKEDITOR.UI_SEPARATOR)t=n&&R;else{if(_=!1!==R.canGroup,!I){h=CKEDITOR.tools.getNextId(),I={id:h,items:[]},l.push('<span id="',h,'" class="cke_toolbar'+(b?' cke_toolbar_last"':'"'),(D=k.name&&(o.lang.toolbar.toolbarGroups[k.name]||k.name))?' aria-labelledby="'+h+'_label"':"",' role="toolbar">'),D&&l.push('<span id="',h,'_label" class="cke_voice_label">',D,"</span>"),l.push('<span class="cke_toolbar_start"></span>');var v=c.push(I)-1;0<v&&(I.previous=c[v-1],I.previous.next=I)}_?n||(l.push('<span class="cke_toolgroup" role="presentation">'),n=1):n&&(l.push("</span>"),n=0),t&&(w(t),t=0),w(R)}}}n&&(l.push("</span>"),t=n=0),I&&l.push('<span class="cke_toolbar_end"></span></span>')}}if(o.config.toolbarCanCollapse&&l.push("</span>"),o.config.toolbarCanCollapse&&o.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var K=CKEDITOR.tools.addFunction(function(){o.execCommand("toolbarCollapse")});o.on("destroy",function(){CKEDITOR.tools.removeFunction(K)}),o.addCommand("toolbarCollapse",{readOnly:1,exec:function(y){var F=y.ui.space("toolbar_collapser"),W=F.getPrevious(),x=y.ui.space("contents"),T=W.getParent(),N=parseInt(x.$.style.height,10),A=T.$.offsetHeight,P=F.hasClass("cke_toolbox_collapser_min");P?(W.show(),F.removeClass("cke_toolbox_collapser_min"),F.setAttribute("title",y.lang.toolbar.toolbarCollapse)):(W.hide(),F.addClass("cke_toolbox_collapser_min"),F.setAttribute("title",y.lang.toolbar.toolbarExpand)),F.getFirst().setText(P?"\u25b2":"\u25c0"),x.setStyle("height",N-(T.$.offsetHeight-A)+"px"),y.fire("resize",{outerHeight:y.container.$.offsetHeight,contentsHeight:x.$.offsetHeight,outerWidth:y.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),o.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),l.push('<a title="'+(r?o.lang.toolbar.toolbarCollapse:o.lang.toolbar.toolbarExpand)+'" id="'+o.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),r||l.push(" cke_toolbox_collapser_min"),l.push('" onclick="CKEDITOR.tools.callFunction('+K+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}l.push("</span>"),i.data.html+=l.join("")}}),o.on("destroy",function(){if(this.toolbox){var i,l,n,t,r=0;for(i=this.toolbox.toolbars;r<i.length;r++)for(n=i[r].items,l=0;l<n.length;l++)(t=n[l]).clickFn&&CKEDITOR.tools.removeFunction(t.clickFn),t.keyDownFn&&CKEDITOR.tools.removeFunction(t.keyDownFn)}}),o.on("uiReady",function(){var i=o.ui.space("toolbox");i&&o.focusManager.add(i,1)}),o.addCommand("toolbarFocus",a),o.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),o.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),o.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(i,r){return r.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(o,u,f){var i=d(this.editor),r=0===u,l={name:o};if(f){if(f=CKEDITOR.tools.search(i,function(n){return n.name==f}))return!f.groups&&(f.groups=[]),u&&0<=(u=CKEDITOR.tools.indexOf(f.groups,u))?void f.groups.splice(u+1,0,o):void(r?f.groups.splice(0,0,o):f.groups.push(o));u=null}u&&(u=CKEDITOR.tools.indexOf(i,function(n){return n.name==u})),r?i.splice(0,0,o):"number"==typeof u?i.splice(u+1,0,l):i.push(o)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function e(n,t,c){return t.type||(t.type="auto"),!(c&&!1===n.fire("beforePaste",t)||!t.dataValue&&t.dataTransfer.isEmpty())&&(t.dataValue||(t.dataValue=""),CKEDITOR.env.gecko&&"drop"==t.method&&n.toolbox&&n.once("afterPaste",function(){n.toolbox.focus()}),n.fire("paste",t))}function u(n,t,c){t=CKEDITOR.htmlParser.fragment.fromHtml(t);var m=new CKEDITOR.htmlParser.basicWriter;return c.applyTo(t,!0,!1,n.activeEnterMode),t.writeHtml(m),m.getHtml()}function i(n){n.data.preventDefault(),n.data.$.dataTransfer.dropEffect="none"}var l;CKEDITOR.plugins.add("clipboard",{requires:"dialog,notification,toolbar",init:function(n){var t,c=function(n){function t(){var g,m={};for(g in CKEDITOR.dtd)"$"!=g.charAt(0)&&"div"!=g&&"span"!=g&&(m[g]=1);return m}var c={};return{get:function(m){return"plain-text"==m?c.plainText||(c.plainText=new CKEDITOR.filter(n,"br")):"semantic-content"==m?((m=c.semanticContent)||((m=new CKEDITOR.filter(n,{})).allow({$1:{elements:t(),attributes:!0,styles:!1,classes:!1}}),m=c.semanticContent=m),m):m?new CKEDITOR.filter(n,m):null}}}(n);if(n.config.forcePasteAsPlainText?t="plain-text":n.config.pasteFilter?t=n.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in n.config||(t="semantic-content"),n.pasteFilter=c.get(t),function(n){function t(){var F,K=n.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var y=function(W){n.getSelection().isCollapsed()||(n.readOnly&&"cut"==W.name||_.initPasteDataTransfer(W,n),W.data.preventDefault())};K.on("copy",y),K.on("cut",y),K.on("cut",function(){n.readOnly||n.extractSelectedHtml()},null,null,999)}K.on(_.mainPasteEvent,function(W){"beforepaste"==_.mainPasteEvent&&w||p(W)}),"beforepaste"==_.mainPasteEvent&&(K.on("paste",function(W){v||(g(),W.data.preventDefault(),p(W),h("paste"))}),K.on("contextmenu",C,null,null,0),K.on("beforepaste",function(W){!W.data||W.data.$.ctrlKey||W.data.$.shiftKey||C()},null,null,0)),K.on("beforecut",function(){!w&&I()}),K.attachListener(CKEDITOR.env.ie?K:n.document.getDocumentElement(),"mouseup",function(){F=setTimeout(O,0)}),n.on("destroy",function(){clearTimeout(F)}),K.on("keyup",O)}function c(K){return{type:K,canUndo:"cut"==K,startDisabled:!0,fakeKeystroke:"cut"==K?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&I();var y,F=this.type;if(CKEDITOR.env.ie)y=h(F);else try{y=n.document.$.execCommand(F,!1,null)}catch(W){y=!1}return y||n.showNotification(n.lang.clipboard[this.type+"Error"]),y}}}function g(){v=1,setTimeout(function(){v=0},100)}function C(){w=1,setTimeout(function(){w=0},10)}function h(K){var y=n.document,F=y.getBody(),W=!1,x=function(){W=!0};return F.on(K,x),7<CKEDITOR.env.version?y.$.execCommand(K):y.$.selection.createRange().execCommand(K),F.removeListener(K,x),W}function I(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var y,F,W,K=n.getSelection();K.getType()==CKEDITOR.SELECTION_ELEMENT&&(y=K.getSelectedElement())&&(F=K.getRanges()[0],(W=n.document.createText("")).insertBefore(y),F.setStartBefore(W),F.setEndAfter(y),K.selectRanges([F]),setTimeout(function(){y.getParent()&&(W.remove(),K.selectElement(y))},0))}}function b(K){if("wysiwyg"==n.mode)switch(K.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:K=n.editable(),g(),"paste"==_.mainPasteEvent&&K.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:n.fire("saveSnapshot"),setTimeout(function(){n.fire("saveSnapshot")},50)}}function p(K){var y={type:"auto",method:"paste",dataTransfer:_.initPasteDataTransfer(K)};y.dataTransfer.cacheData();var F=!1!==n.fire("beforePaste",y);F&&_.canClipboardApiBeTrusted(y.dataTransfer,n)?(K.data.preventDefault(),setTimeout(function(){e(n,y)},0)):function(K,y){var T,F=n.document,W=n.editable(),x=function(B){B.cancel()};if(!F.getById("cke_pastebin")){var N=n.getSelection(),A=N.createBookmarks();CKEDITOR.env.ie&&N.root.fire("selectionchange");var P=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!W.is("body")||CKEDITOR.env.ie?"div":"body",F);P.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var H=0;F=F.getWindow(),CKEDITOR.env.webkit?(W.append(P),P.addClass("cke_editable"),W.is("body")||(H=(H="static"!=W.getComputedStyle("position")?W:CKEDITOR.dom.element.get(W.$.offsetParent)).getDocumentPosition().y)):W.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(P),P.setStyles({position:"absolute",top:F.getScrollPosition().y-H+10+"px",width:"1px",height:Math.max(1,F.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&P.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(H=P.getParent().isReadOnly())?(P.setOpacity(0),P.setAttribute("contenteditable",!0)):P.setStyle("ltr"==n.config.contentsLangDirection?"left":"right","-10000px"),n.on("selectionChange",x,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(T=W.once("blur",x,null,null,-100)),H&&P.focus(),(H=new CKEDITOR.dom.range(P)).selectNodeContents(P);var E=H.select();CKEDITOR.env.ie&&(T=W.once("blur",function(){n.lockSelection(E)}));var L=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){var q;CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=L),T&&T.removeListener(),CKEDITOR.env.ie&&W.focus(),N.selectBookmarks(A),P.remove(),CKEDITOR.env.webkit&&(q=P.getFirst())&&q.is&&q.hasClass("Apple-style-span")&&(P=q),n.removeListener("selectionChange",x),y(P.getHtml())},0)}}(0,function(W){y.dataValue=W.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),F&&e(n,y)})}function O(){if("wysiwyg"==n.mode){var K=R("paste");n.getCommand("cut").setState(R("cut")),n.getCommand("copy").setState(R("copy")),n.getCommand("paste").setState(K),n.fire("pasteState",K)}}function R(K){var y=(y=n.getSelection())&&y.getRanges()[0];return(n.readOnly||y&&y.checkReadOnly())&&K in{paste:1,cut:1}?CKEDITOR.TRISTATE_DISABLED:"paste"==K?CKEDITOR.TRISTATE_OFF:(y=(K=n.getSelection()).getRanges(),K.getType()==CKEDITOR.SELECTION_NONE||1==y.length&&y[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)}var _=CKEDITOR.plugins.clipboard,w=0,v=0;(function(){if(n.on("key",b),n.on("contentDom",t),n.on("selectionChange",O),n.contextMenu){n.contextMenu.addListener(function(){return{cut:R("cut"),copy:R("copy"),paste:R("paste")}});var K=null;n.on("menuShow",function(){K&&(K.removeListener(),K=null);var y=n.contextMenu.findItemByCommandName("paste");y&&y.element&&(K=y.element.on("touchend",function(){n._.forcePasteDialog=!0}))})}n.ui.addButton&&n.once("instanceReady",function(){n._.pasteButtons&&CKEDITOR.tools.array.forEach(n._.pasteButtons,function(y){(y=n.ui.get(y))&&(y=CKEDITOR.document.getById(y._.id))&&y.on("touchend",function(){n._.forcePasteDialog=!0})})})})(),function(){function K(y,F,W,x,T){var N=n.lang.clipboard[F];n.addCommand(F,W),n.ui.addButton&&n.ui.addButton(y,{label:N,command:F,toolbar:"clipboard,"+x}),n.addMenuItems&&n.addMenuItem(F,{label:N,command:F,group:"clipboard",order:T})}K("Cut","cut",c("cut"),10,1),K("Copy","copy",c("copy"),20,4),K("Paste","paste",{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(K,y){function F(P,H){H=void 0===H||H,P?(P.method="paste",P.dataTransfer||(P.dataTransfer=_.initPasteDataTransfer()),e(K,P,H)):x&&!K._.forcePasteDialog&&K.showNotification(A,"info",K.config.clipboard_notificationDuration),K._.forcePasteDialog=!1,K.fire("afterCommandExec",{name:"paste",command:W,returnValue:!!P})}var W=this,x=void 0===(y=null!=y?y:{}).notification||y.notification,T=y.type,N=CKEDITOR.tools.keystrokeToString(K.lang.common.keyboard,K.getCommandKeystroke(this)),A="string"==typeof x?x:K.lang.clipboard.pasteNotification.replace(/%1/,'<kbd aria-label="'+N.aria+'">'+N.display+"</kbd>");N="string"==typeof y?y:y.dataValue,T&&!0!==K.config.forcePasteAsPlainText&&"allow-word"!==K.config.forcePasteAsPlainText?K._.nextPasteType=T:delete K._.nextPasteType,"string"==typeof N?F({dataValue:N}):K.getClipboardData(F)}},30,8),n._.pasteButtons||(n._.pasteButtons=[]),n._.pasteButtons.push("Paste")}(),n.getClipboardData=function(K,y){function F(N){N.removeListener(),N.cancel(),y(N.data)}function W(N){N.removeListener(),N.cancel(),y({type:T,dataValue:N.data.dataValue,dataTransfer:N.data.dataTransfer,method:"paste"})}var x=!1,T="auto";y||(y=K,K=null),n.on("beforePaste",function(N){N.removeListener(),x=!0,T=N.data.type},null,null,1e3),n.on("paste",F,null,null,0),!1===function(){if("paste"==_.mainPasteEvent)return n.fire("beforePaste",{type:"auto",method:"paste"}),!1;n.focus(),g();var K=n.focusManager;return K.lock(),n.editable().fire(_.mainPasteEvent)&&!h("paste")?(K.unlock(),!1):(K.unlock(),!0)}()&&(n.removeListener("paste",F),n._.forcePasteDialog&&x&&n.fire("pasteDialog")?(n.on("pasteDialogCommit",W),n.on("dialogHide",function(N){N.removeListener(),N.data.removeListener("pasteDialogCommit",W),N.data._.committed||y(null)})):y(null))}}(n),function(n){var t=CKEDITOR.plugins.clipboard;n.on("contentDom",function(){function g(b,p,O){var R={$:b.data.$,target:b.data.getTarget()};p&&(R.dragRange=p),O&&(R.dropRange=O),!1===n.fire(b.name,R)&&b.data.preventDefault()}function C(b){return b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent()),b.getChildCount()}var h=n.editable(),I=CKEDITOR.plugins.clipboard.getDropTarget(n),D=n.ui.space("top"),k=n.ui.space("bottom");t.preventDefaultDropOnElement(D),t.preventDefaultDropOnElement(k),h.attachListener(I,"dragstart",g),h.attachListener(n,"dragstart",t.resetDragDataTransfer,t,null,1),h.attachListener(n,"dragstart",function(b){t.initDragDataTransfer(b,n)},null,null,2),h.attachListener(n,"dragstart",function(){var b=t.dragRange=n.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(t.dragStartContainerChildCount=b?C(b.startContainer):null,t.dragEndContainerChildCount=b?C(b.endContainer):null)},null,null,100),h.attachListener(I,"dragend",g),h.attachListener(n,"dragend",t.initDragDataTransfer,t,null,1),h.attachListener(n,"dragend",t.resetDragDataTransfer,t,null,100),h.attachListener(I,"dragover",function(b){if(CKEDITOR.env.edge)b.data.preventDefault();else{var p=b.data.getTarget();(p&&p.is&&p.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&b.data.$.dataTransfer.types.contains("Files"))&&b.data.preventDefault()}}),h.attachListener(I,"drop",function(b){var p;b.data.$.defaultPrevented||(b.data.preventDefault(),(!(p=b.data.getTarget()).isReadOnly()||p.type==CKEDITOR.NODE_ELEMENT&&p.is("html"))&&(p=t.getRangeAtDropPosition(b,n))&&g(b,t.dragRange,p))},null,null,9999),h.attachListener(n,"drop",t.initDragDataTransfer,t,null,1),h.attachListener(n,"drop",function(b){if(b=b.data){var p=b.dropRange,O=b.dragRange,R=b.dataTransfer;R.getTransferType(n)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){t.internalDrop(O,p,R,n)},0):R.getTransferType(n)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?function(b,p,O){p.select(),e(n,{dataTransfer:O,method:"drop"},1),O.sourceEditor.fire("saveSnapshot"),O.sourceEditor.editable().extractHtmlFromRange(b),O.sourceEditor.getSelection().selectRanges([b]),O.sourceEditor.fire("saveSnapshot")}(O,p,R):function(b,p){b.select(),e(n,{dataTransfer:p,method:"drop"},1),t.resetDragDataTransfer()}(p,R)}},null,null,9999)})}(n),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),CKEDITOR.env.gecko){var g,m=["image/png","image/jpeg","image/gif"];n.on("paste",function(C){var h=C.data,I=h.dataTransfer;if(!h.dataValue&&"paste"==h.method&&I&&1==I.getFilesCount()&&g!=I.id&&(I=I.getFile(0),-1!=CKEDITOR.tools.indexOf(m,I.type))){var D=new FileReader;D.addEventListener("load",function(){C.data.dataValue='<img src="'+D.result+'" />',n.fire("paste",C.data)},!1),D.addEventListener("abort",function(){n.fire("paste",C.data)},!1),D.addEventListener("error",function(){n.fire("paste",C.data)},!1),D.readAsDataURL(I),g=h.dataTransfer.id,C.stop()}},null,null,1)}n.on("paste",function(C){if(C.data.dataTransfer||(C.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!C.data.dataValue){var h=C.data.dataTransfer,I=h.getData("text/html");I?(C.data.dataValue=I,C.data.type="html"):(I=h.getData("text/plain"))&&(C.data.dataValue=n.editable().transformPlainTextToHtml(I),C.data.type="text")}},null,null,1),n.on("paste",function(C){var h=C.data.dataValue,I=CKEDITOR.dtd.$block;if(-1<h.indexOf("Apple-")&&(h=h.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=C.data.type&&(h=h.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(p,O){return O.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<h.indexOf('<br class="Apple-interchange-newline">')&&(C.data.startsWithEOL=1,C.data.preSniffing="html",h=h.replace(/<br class="Apple-interchange-newline">/,"")),h=h.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),h.match(/^<[^<]+cke_(editable|contents)/i)){var D,k,b=new CKEDITOR.dom.element("div");for(b.setHtml(h);1==b.getChildCount()&&(D=b.getFirst())&&D.type==CKEDITOR.NODE_ELEMENT&&(D.hasClass("cke_editable")||D.hasClass("cke_contents"));)b=k=D;k&&(h=k.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?h=h.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(p,O){return O.toLowerCase()in I?(C.data.preSniffing="html","<"+O):p}):CKEDITOR.env.webkit?h=h.replace(/<\/(\w+)><div><br><\/div>$/,function(p,O){return O in I?(C.data.endsWithEOL=1,"</"+O+">"):p}):CKEDITOR.env.gecko&&(h=h.replace(/(\s)<br>$/,"$1")),C.data.dataValue=h},null,null,3),n.on("paste",function(C){C=C.data;var D,h=n._.nextPasteType||C.type,I=C.dataValue,k=n.config.clipboard_defaultContentType||"html",b=C.dataTransfer.getTransferType(n)==CKEDITOR.DATA_TRANSFER_EXTERNAL,p=!0===n.config.forcePasteAsPlainText;D="html"==h||"html"==C.preSniffing?"html":function(n){if(CKEDITOR.env.webkit){if(!n.match(/^[^<]*$/g)&&!n.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!n.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!n.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko)return"html";if(!n.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}(I),delete n._.nextPasteType,"htmlifiedtext"==D&&(I=function(n,t){function c(m){return CKEDITOR.tools.repeat("</p><p>",~~(m/2))+(m%2==1?"<br>":"")}return(t=(t=t.replace(/(?!\u3000)\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>")).replace(/<\/?[A-Z]+>/g,function(m){return m.toLowerCase()})).match(/^[^<]$/)?t:(CKEDITOR.env.webkit&&-1<t.indexOf("<div>")&&((t=t.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>")).match(/<div>(<br>|)<\/div>/)&&(t="<p>"+t.replace(/(<div>(<br>|)<\/div>)+/g,function(m){return c(m.split("</div><div>").length+1)})+"</p>"),t=(t=t.replace(/<\/div><div>/g,"<br>")).replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&n.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(t=t.replace(/^<br><br>$/,"<br>")),-1<t.indexOf("<br><br>")&&(t="<p>"+t.replace(/(<br>){2,}/g,function(m){return c(m.length/4)})+"</p>")),function(n,t){return n.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(c){return CKEDITOR.tools.repeat("<br>",c.length/7*2)}).replace(/<\/?p>/g,""):n.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>")),t}(n,t))}(n.config,I)),"text"==h&&"html"==D?I=u(n,I,c.get("plain-text")):(b&&n.pasteFilter&&!C.dontFilter||p)&&(I=u(n,I,n.pasteFilter)),C.startsWithEOL&&(I='<br data-cke-eol="1">'+I),C.endsWithEOL&&(I+='<br data-cke-eol="1">'),"auto"==h&&(h="html"==D||"html"==k?"html":"text"),C.type=h,C.dataValue=I,delete C.preSniffing,delete C.startsWithEOL,delete C.endsWithEOL},null,null,6),n.on("paste",function(C){(C=C.data).dataValue&&(n.insertHtml(C.dataValue,C.type,C.range),setTimeout(function(){n.fire("afterPaste")},0))},null,null,1e3),n.on("pasteDialog",function(C){setTimeout(function(){n.openDialog("paste",C.data)},0)})}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:(!CKEDITOR.env.ie||16<=CKEDITOR.env.version)&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie||16<=CKEDITOR.env.version,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",addPasteButton:function(n,t,c){n.ui.addButton&&(n.ui.addButton(t,c),n._.pasteButtons||(n._.pasteButtons=[]),n._.pasteButtons.push(t))},canClipboardApiBeTrusted:function(n,t){return!!(n.getTransferType(t)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!n.isEmpty()||CKEDITOR.env.gecko&&(n.getData("text/html")||n.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS||CKEDITOR.env.edge&&16<=CKEDITOR.env.version)},getDropTarget:function(n){var t=n.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||t.isInline()?t:n.document},fixSplitNodesAfterDrop:function(n,t,c,m){function g(h,I,D){var k=h;if(k.type==CKEDITOR.NODE_TEXT&&(k=h.getParent()),k.equals(I)&&D!=I.getChildCount())return h=t.startContainer.getChild(t.startOffset-1),I=t.startContainer.getChild(t.startOffset),h&&h.type==CKEDITOR.NODE_TEXT&&I&&I.type==CKEDITOR.NODE_TEXT&&(D=h.getLength(),h.setText(h.getText()+I.getText()),I.remove(),t.setStart(h,D),t.collapse(!0)),!0}var C=t.startContainer;"number"==typeof m&&"number"==typeof c&&C.type==CKEDITOR.NODE_ELEMENT&&(g(n.startContainer,C,c)||g(n.endContainer,C,m))},isDropRangeAffectedByDragRange:function(n,t){var c=t.startContainer,m=t.endOffset;return!!(n.endContainer.equals(c)&&n.endOffset<=m||n.startContainer.getParent().equals(c)&&n.startContainer.getIndex()<m||n.endContainer.getParent().equals(c)&&n.endContainer.getIndex()<m)},internalDrop:function(n,t,c,m){var h,I,g=CKEDITOR.plugins.clipboard,C=m.editable();m.fire("saveSnapshot"),m.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(n,t,g.dragStartContainerChildCount,g.dragEndContainerChildCount),(I=this.isDropRangeAffectedByDragRange(n,t))||(h=n.createBookmark(!1)),g=t.clone().createBookmark(!1),I&&(h=n.createBookmark(!1)),n=h.startNode,I=g.startNode,(t=h.endNode)&&n.getPosition(I)&CKEDITOR.POSITION_PRECEDING&&t.getPosition(I)&CKEDITOR.POSITION_FOLLOWING&&I.insertBefore(n),(n=m.createRange()).moveToBookmark(h),C.extractHtmlFromRange(n,1),t=m.createRange(),g.startNode.getCommonAncestor(C)||(g=m.getSelection().createBookmarks()[0]),t.moveToBookmark(g),e(m,{dataTransfer:c,method:"drop",range:t},1),m.fire("unlockSnapshot")},getRangeAtDropPosition:function(n,t){var c=n.data.$,m=c.clientX,g=c.clientY,C=t.getSelection(!0).getRanges()[0],h=t.createRange();if(n.data.testRange)return n.data.testRange;if(document.caretRangeFromPoint&&t.document.$.caretRangeFromPoint(m,g))c=t.document.$.caretRangeFromPoint(m,g),h.setStart(CKEDITOR.dom.node(c.startContainer),c.startOffset),h.collapse(!0);else if(c.rangeParent)h.setStart(CKEDITOR.dom.node(c.rangeParent),c.rangeOffset),h.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&C&&t.editable().hasFocus)return C;if(!document.body.createTextRange)return null;t.focus(),c=t.document.getBody().$.createTextRange();try{for(var I=!1,D=0;20>D&&!I;D++){if(!I)try{c.moveToPoint(m,g-D),I=!0}catch(_){}if(!I)try{c.moveToPoint(m,g+D),I=!0}catch(_){}}if(I){var k="cke-temp-"+(new Date).getTime();c.pasteHTML('<span id="'+k+'">\u200b</span>');var b=t.document.getById(k);h.moveToPosition(b,CKEDITOR.POSITION_BEFORE_START),b.remove()}else{var R,p=t.document.$.elementFromPoint(m,g),O=new CKEDITOR.dom.element(p);if(O.equals(t.editable())||"html"==O.getName())return C&&C.startContainer&&!C.startContainer.equals(t.editable())?C:null;R=O.getClientRect(),h.setStartAt(O,m<R.left?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),h.collapse(!0)}}catch(_){return null}}return h},initDragDataTransfer:function(n,t){var c=n.data.$?n.data.$.dataTransfer:null,m=new this.dataTransfer(c,t);"dragstart"===n.name&&m.storeId(),c?this.dragData&&m.id==this.dragData.id?m=this.dragData:this.dragData=m:this.dragData?m=this.dragData:this.dragData=m,n.data.dataTransfer=m},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(n,t){if(this.isCustomCopyCutSupported){if(n&&n.data&&n.data.$){var c=n.data.$.clipboardData,m=new this.dataTransfer(c,t);return"copy"!==n.name&&"cut"!==n.name||m.storeId(),this.copyCutData&&m.id==this.copyCutData.id?(m=this.copyCutData).$=c:this.copyCutData=m,m}return new this.dataTransfer(null,t)}return new this.dataTransfer(CKEDITOR.env.edge&&n&&n.data.$&&n.data.$.clipboardData||null,t)},preventDefaultDropOnElement:function(n){n&&n.on("dragover",i)}},l=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text",CKEDITOR.plugins.clipboard.dataTransfer=function(n,t){n&&(this.$=n),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],nativeHtmlCache:"",normalizeType:function(c){return"text"==(c=c.toLowerCase())||"text/plain"==c?"Text":"url"==c?"URL":c}},this._.fallbackDataTransfer=new CKEDITOR.plugins.clipboard.fallbackDataTransfer(this),this.id=this.getData(l),this.id||(this.id="Text"==l?"":"cke-"+CKEDITOR.tools.getUniqueId()),t&&(this.sourceEditor=t,this.setData("text/html",t.getSelectedHtml(1)),"Text"==l||this.getData("text/plain")||this.setData("text/plain",t.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(n,t){if(null==(c="text/html"==(n=this._.normalizeType(n))&&t?this._.nativeHtmlCache:this._.data[n])||""===c){if(this._.fallbackDataTransfer.isRequired())c=this._.fallbackDataTransfer.getData(n,t);else try{c=this.$.getData(n)||""}catch(g){c=""}"text/html"!=n||t||(c=this._stripHtml(c))}if("Text"==n&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==c.substring(0,7)&&(c=""),"string"==typeof c)var m=c.indexOf("</html>"),c=-1!==m?c.substring(0,m+7):c;return c},setData:function(n,t){if("text/html"==(n=this._.normalizeType(n))?(this._.data[n]=this._stripHtml(t),this._.nativeHtmlCache=t):this._.data[n]=t,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==n||"Text"==n)if("Text"==l&&"Text"==n&&(this.id=t),this._.fallbackDataTransfer.isRequired())this._.fallbackDataTransfer.setData(n,t);else try{this.$.setData(n,t)}catch(c){}},storeId:function(){"Text"!==l&&this.setData(l,this.id)},getTransferType:function(n){return this.sourceEditor?this.sourceEditor==n?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function n(g){g=t._.normalizeType(g);var C=t.getData(g);"text/html"==g&&(t._.nativeHtmlCache=t.getData(g,!0),C=t._stripHtml(C)),C&&(t._.data[g]=C)}if(this.$){var c,m,t=this;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(c=0;c<this.$.types.length;c++)n(this.$.types[c])}else n("Text"),n("URL");if(m=this._getImageFromClipboard(),this.$&&this.$.files||m){if(this._.files=[],this.$.files&&this.$.files.length)for(c=0;c<this.$.files.length;c++)this._.files.push(this.$.files[c]);0===this._.files.length&&m&&this._.files.push(m)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(n){return this._.files.length?this._.files[n]:this.$&&this.$.files&&this.$.files.length?this.$.files[n]:0===n?this._getImageFromClipboard():void 0},isEmpty:function(){var t,n={};if(this.getFilesCount())return!1;if(CKEDITOR.tools.array.forEach(CKEDITOR.tools.object.keys(this._.data),function(m){n[m]=1}),this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var c=0;c<this.$.types.length;c++)n[this.$.types[c]]=1}else n.Text=1,n.URL=1;for(t in"Text"!=l&&(n[l]=0),n)if(n[t]&&""!==this.getData(t))return!1;return!0},_getImageFromClipboard:function(){var n;try{if(this.$&&this.$.items&&this.$.items[0]&&(n=this.$.items[0].getAsFile())&&n.type)return n}catch(t){}},_stripHtml:function(n){if(n&&n.length){n=n.replace(this._.metaRegExp,"");var t=this._.bodyRegExp.exec(n);t&&t.length&&(n=(n=t[1]).replace(this._.fragmentRegExp,""))}return n}},CKEDITOR.plugins.clipboard.fallbackDataTransfer=function(n){this._dataTransfer=n,this._customDataFallbackType="text/html"},CKEDITOR.plugins.clipboard.fallbackDataTransfer._isCustomMimeTypeSupported=null,CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes=[],CKEDITOR.plugins.clipboard.fallbackDataTransfer.prototype={isRequired:function(){var n=CKEDITOR.plugins.clipboard.fallbackDataTransfer,t=this._dataTransfer.$;if(null===n._isCustomMimeTypeSupported){if(!t)return!1;if(n._isCustomMimeTypeSupported=!1,CKEDITOR.env.edge&&17<=CKEDITOR.env.version)return!0;try{t.setData("cke/mimetypetest","cke test value"),n._isCustomMimeTypeSupported="cke test value"===t.getData("cke/mimetypetest"),t.clearData("cke/mimetypetest")}catch(c){}}return!n._isCustomMimeTypeSupported},getData:function(n,t){var c=this._getData(this._customDataFallbackType,!0);if(t)return c;c=this._extractDataComment(c);var m;return null!==(m=n===this._customDataFallbackType?c.content:c.data&&c.data[n]?c.data[n]:this._getData(n,!0))?m:""},setData:function(n,t){(c=n===this._customDataFallbackType)&&(t=this._applyDataComment(t,this._getFallbackTypeData()));var m=t,g=this._dataTransfer.$;try{g.setData(n,m),c&&(this._dataTransfer._.nativeHtmlCache=m)}catch(h){if(this._isUnsupportedMimeTypeError(h)){c=CKEDITOR.plugins.clipboard.fallbackDataTransfer,-1===CKEDITOR.tools.indexOf(c._customTypes,n)&&c._customTypes.push(n);var c=this._getFallbackTypeContent(),C=this._getFallbackTypeData();C[n]=m;try{m=this._applyDataComment(c,C),g.setData(this._customDataFallbackType,m),this._dataTransfer._.nativeHtmlCache=m}catch(D){m=""}}}return m},_getData:function(n,t){var c=this._dataTransfer._.data;if(!t&&c[n])return c[n];try{return this._dataTransfer.$.getData(n)}catch(m){return null}},_getFallbackTypeContent:function(){var n=this._dataTransfer._.data[this._customDataFallbackType];return n||(n=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).content),n},_getFallbackTypeData:function(){var n=CKEDITOR.plugins.clipboard.fallbackDataTransfer._customTypes,t=this._extractDataComment(this._getData(this._customDataFallbackType,!0)).data||{},c=this._dataTransfer._.data;return CKEDITOR.tools.array.forEach(n,function(m){void 0!==c[m]?t[m]=c[m]:void 0!==t[m]&&(t[m]=t[m])},this),t},_isUnsupportedMimeTypeError:function(n){return n.message&&-1!==n.message.search(/element not found/gi)},_extractDataComment:function(n){var c,t={data:null,content:n||""};return n&&16<n.length&&(c=/\x3c!--cke-data:(.*?)--\x3e/g.exec(n))&&c[1]&&(t.data=JSON.parse(decodeURIComponent(c[1])),t.content=n.replace(c[0],"")),t},_applyDataComment:function(n,t){var c="";return t&&CKEDITOR.tools.object.keys(t).length&&(c="\x3c!--cke-data:"+encodeURIComponent(JSON.stringify(t))+"--\x3e"),c+(n&&n.length?n:"")}}}(),CKEDITOR.config.clipboard_notificationDuration=1e4,function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(a,o){o&&CKEDITOR.tools.extend(this,o),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=a,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),d=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),s=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(a,o){var u={editorId:a.id,id:this.id,langCode:a.langCode,dir:a.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":a.config.baseFloatZIndex+1};if(this.getHolderElement=function(){if(!(i=this._.holder)){if(this.isFramed){var r=(i=this.document.getById(this.id+"_frame")).getParent(),i=i.getFrameDocument();CKEDITOR.env.iOS&&r.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),r=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),i.write(s.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+r+");"},u))),i.getWindow().$.CKEDITOR=CKEDITOR,i.on("keydown",function(n){var t=n.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");("input"!==n.data.getTarget().getName()||37!==t&&39!==t)&&(this._.onKeyDown&&!1===this._.onKeyDown(t)?"input"===n.data.getTarget().getName()&&32===t||n.data.preventDefault():(27==t||t==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(t)&&n.data.preventDefault())},this),(i=i.getBody()).unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(r)}else i=this.document.getById(this.id);this._.holder=i}return i},this.isFramed){var f=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";u.frame=d.output({id:this.id+"_frame",src:f})}return f=e.output(u),o&&o.push(f),f},addBlock:function(a,o){return o=this._.blocks[a]=o instanceof CKEDITOR.ui.panel.block?o:new CKEDITOR.ui.panel.block(this.getHolderElement(),o),this._.currentBlock||this.showBlock(a),o},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var o=this._.currentBlock,u=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return o&&o.hide(),this._.currentBlock=a,CKEDITOR.fire("ariaWidget",u),a._.focusIndex=-1,this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a),a.show(),a},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,o){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),o&&CKEDITOR.tools.extend(this,o),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this._.getItems().getItem(this._.focusIndex=a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))},markFirstDisplayed:function(a){for(var f,i,o=function(l){return l.type==CKEDITOR.NODE_ELEMENT&&"none"==l.getStyle("display")},u=this._.getItems(),r=u.count()-1;0<=r;r--)if((f=u.getItem(r)).getAscendant(o)||(i=f,this._.focusIndex=r),"true"==f.getAttribute("aria-selected")){i=f,this._.focusIndex=r;break}i&&(a&&a(),CKEDITOR.env.webkit&&i.getDocument().getWindow().focus(),i.focus(),this.onMark&&this.onMark(i))},getItems:function(){return this.element.find("a,input")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a,o){switch(u=this.keys[a]){case"next":for(var i,f=this._.focusIndex,u=this._.getItems();i=u.getItem(++f);)if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=f,i.focus(!0);break}return!i&&!o&&(this._.focusIndex=-1,this.onKeyDown(a,1));case"prev":for(f=this._.focusIndex,u=this._.getItems();0<f&&(i=u.getItem(--f));){if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=f,i.focus(!0);break}i=null}return!i&&!o&&(this._.focusIndex=u.count(),this.onKeyDown(a,1));case"click":case"mouseup":return(i=0<=(f=this._.focusIndex)&&this._.getItems().getItem(f))&&(i.$[u]?i.$[u]():i.$["on"+u]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){var d={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(s,a,o,u){function f(){n.hide()}o.forceIFrame=1,o.toolbarRelated&&s.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(a=CKEDITOR.document.getById("cke_"+s.name));var i=a.getDocument();u=function(s,a,o,u,f){f=CKEDITOR.tools.genKey(a.getUniqueId(),o.getUniqueId(),s.lang.dir,s.uiColor||"",u.css||"",f||"");var i=d[f];return i||((i=d[f]=new CKEDITOR.ui.panel(a,u)).element=o.append(CKEDITOR.dom.element.createFromHtml(i.render(s),a)),i.element.setStyles({display:"none",position:"absolute"})),i}(s,i,a,o,u||0);var r=u.element,l=r.getFirst(),n=this;r.disableContextMenu(),this.element=r,this._={editor:s,panel:u,parentElement:a,definition:o,document:i,iframe:l,children:[],dir:s.lang.dir,showBlockParams:null,markFirst:void 0===o.markFirst||o.markFirst},s.on("mode",f),s.on("resize",f),i.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(s,a){return this._.panel.addBlock(s,a)},addListBlock:function(s,a){return this._.panel.addListBlock(s,a)},getBlock:function(s){return this._.panel.getBlock(s)},showBlock:function(s,a,o,u,f,i){var r=this._.panel,l=r.showBlock(s);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var n=this._.editor.editable();this._.returnFocus=n.hasFocus?n:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var t=this.element,c=(n=this._.iframe,n=CKEDITOR.env.ie&&!CKEDITOR.env.edge?n:new CKEDITOR.dom.window(n.$.contentWindow),t.getDocument()),m=this._.parentElement.getPositionedAncestor(),g=a.getDocumentPosition(c),C=(c=m?m.getDocumentPosition(c):{x:0,y:0},"rtl"==this._.dir),h=g.x+(u||0)-c.x,I=g.y+(f||0)-c.y;!C||1!=o&&4!=o?C||2!=o&&3!=o||(h+=a.$.offsetWidth-1):h+=a.$.offsetWidth,(3==o||4==o)&&(I+=a.$.offsetHeight-1),this._.panel._.offsetParentId=a.getId(),t.setStyles({top:I+"px",left:0,display:""}),t.setOpacity(0),t.getFirst().removeStyle("width"),this._.editor.focusManager.add(n),this._.blurSet||(CKEDITOR.event.useCapture=!0,n.on("blur",function(D){function k(){delete this._.returnFocus,this.hide()}this.allowBlur()&&D.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(k,0,this)):k.call(this))},this),n.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(n.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),n.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),r.onEscape=CKEDITOR.tools.bind(function(D){if(this.onEscape&&!1===this.onEscape(D))return!1},this),CKEDITOR.tools.setTimeout(function(){var D=CKEDITOR.tools.bind(function(){if((k=t).removeStyle("width"),l.autoSize){var b=l.element.getDocument();b=(CKEDITOR.env.webkit||CKEDITOR.env.edge?l.element:b.getBody()).$.scrollWidth,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(k.$.offsetWidth||0)-(k.$.clientWidth||0)+3),k.setStyle("width",b+10+"px"),b=l.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<b&&(b+=(k.$.offsetHeight||0)-(k.$.clientHeight||0)+3),k.setStyle("height",b+"px"),r._.currentBlock.element.setStyle("display","none").removeStyle("display")}else k.removeStyle("height");C&&(h-=t.$.offsetWidth),t.setStyle("left",h+"px"),b=r.element.getWindow();var w,k=t.$.getBoundingClientRect(),p=(b=b.getViewPaneSize(),k.width||k.right-k.left),O=k.height||k.bottom-k.top,R=C?k.right:b.width-k.left,_=C?b.width-k.right:k.left;C?R<p&&(h=_>p?h+p:b.width>p?h-k.left:h-k.right+b.width):R<p&&(h=_>p?h-p:b.width>p?h-k.right+b.width:h-k.left),p=k.top,b.height-k.top<O&&(I=p>O?I-O:b.height>O?I-k.bottom+b.height:I-k.top),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&("html"==(b=k=new CKEDITOR.dom.element(t.$.offsetParent)).getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(h=CKEDITOR.env.ie8Compat?h-2*t.getDocument().getDocumentElement().$.scrollLeft:h-(k.$.scrollWidth-k.$.clientWidth))),(w=(k=t.getFirst()).getCustomData("activePanel"))&&w.onHide&&w.onHide.call(this,1),k.setCustomData("activePanel",this),t.setStyles({top:I+"px",left:h+"px"}),t.setOpacity(1),i&&i()},this);r.isLoaded?D():r.onLoad=D,CKEDITOR.tools.setTimeout(function(){var k=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),l.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=k),this.allowBlur(!0),this._.markFirst&&(CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(function(){l.markFirstDisplayed?l.markFirstDisplayed():l._.markFirstDisplayed()},0):l.markFirstDisplayed?l.markFirstDisplayed():l._.markFirstDisplayed()),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var s=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,s))},focus:function(){if(CKEDITOR.env.webkit){var s=CKEDITOR.document.getActive();s&&!s.equals(this._.iframe)&&s.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var s=this._.iframe.getFrameDocument().getActive();s&&s.is("a")&&(this._.lastFocused=s)},hide:function(s){this.visible&&(!this.onHide||!0!==this.onHide.call(this))&&(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(s=s&&this._.returnFocus)&&(CKEDITOR.env.webkit&&s.type&&s.getWindow().$.focus(),s.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(s){var a=this._.panel;return void 0!==s&&(a.allowBlur=s),a.allowBlur},showAsChild:function(s,a,o,u,f,i){(this._.activeChild!=s||s._.panel._.offsetParentId!=o.getId())&&(this.hideChild(),s.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=s,this._.focused=!1,s.showBlock(a,o,u,f,i),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){s.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(s){var a=this._.activeChild;a&&(delete a.onHide,delete this._.activeChild,a.hide(),s&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var a,s=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(a in d){var o=d[a];s?o.destroy():o.element.hide()}s&&(d={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var d=e.config.menu_groups.split(","),s=e._.menuGroups={},a=e._.menuItems={},o=0;o<d.length;o++)s[d[o]]=o+1;e.addMenuGroup=function(u,f){s[u]=f||100},e.addMenuItem=function(u,f){s[f.group]&&(a[u]=new CKEDITOR.menuItem(this,u,f))},e.addMenuItems=function(u){for(var f in u)this.addMenuItem(f,u[f])},e.getMenuItem=function(u){return a[u]},e.removeMenuItem=function(u){delete a[u]}}}),function(){var d='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1" _cke_focus=1 hidefocus="true" role="{role}" aria-label="{label}" aria-describedby="{id}_description" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked} draggable="false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(d+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(d+=' onblur="this.style.cssText = this.style.cssText;" ondragstart="return false;"'),d=d+' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">';var s=CKEDITOR.addTemplate("menuItem",d+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{shortcutHtml}{arrowHtml}</span></a><span id="{id}_description" class="cke_voice_label" aria-hidden="false">{ariaShortcut}</span></span>'),a=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>'),o=CKEDITOR.addTemplate("menuShortcut",'<span class="cke_menubutton_label cke_menubutton_shortcut">{shortcut}</span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(u,f){f=this._.definition=f||{},this.id=CKEDITOR.tools.getNextId(),this.editor=u,this.items=[],this._.listeners=[],this._.level=f.level||1;var i=CKEDITOR.tools.extend({},f.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),r=i.block.attributes=i.attributes||{};!r.role&&(r.role="menu"),this._.panelDefinition=i},_:{onShow:function(){var u=this.editor.getSelection(),f=u&&u.getStartElement(),i=this.editor.elementPath(),r=this._.listeners;this.removeAll();for(var l=0;l<r.length;l++){var n=r[l](f,u,i);if(n)for(var t in n){var c=this.editor.getMenuItem(t);!c||c.command&&!this.editor.getCommand(c.command).state||(c.state=n[t],this.add(c))}}},onClick:function(u){this.hide(),u.onClick?u.onClick():u.command&&this.editor.execCommand(u.command)},onEscape:function(u){var f=this.parent;return f?f._.panel.hideChild(1):27==u&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(u){var f=this._.subMenu,i=this.items[u];if(i=i.getItems&&i.getItems()){for(var r in f?f.removeAll():((f=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0))).parent=this,f._.onClick=CKEDITOR.tools.bind(this._.onClick,this)),i){var l=this.editor.getMenuItem(r);l&&(l.state=i[r],f.add(l))}var n=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(u));setTimeout(function(){f.show(n,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(u){u.order||(u.order=this.items.length),this.items.push(u)},removeAll:function(){this.items=[]},show:function(u,f,i,r){if(this.parent||(this._.onShow(),this.items.length)){f=f||("rtl"==this.editor.lang.dir?2:1);var l=this.items,n=this.editor,t=this._.panel,c=this._.element;t||((t=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level)).onEscape=CKEDITOR.tools.bind(function(D){if(!1===this._.onEscape(D))return!1},this),t.onShow=function(){t._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},t.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),(c=t.addBlock(this.id,this._.panelDefinition.block)).autoSize=!0,(m=c.keys)[40]="next",m[9]="next",m[38]="prev",m[CKEDITOR.SHIFT+9]="prev",m["rtl"==n.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",m[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(m[13]="mouseup"),(m=(c=this._.element=c.element).getDocument()).getBody().setStyle("overflow","hidden"),m.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(D){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,n.config.menu_subMenuDelay||400,this,[D])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(D){var k=this.items[D];k.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):k.getItems?this._.showSubMenu(D):this._.onClick(k)},this)),function(u){u.sort(function(f,i){return f.group<i.group?-1:f.group>i.group?1:f.order<i.order?-1:f.order>i.order?1:0})}(l);for(var m=['<div class="cke_menu'+((m=n.elementPath())&&m.direction()!=n.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],g=l.length,C=g&&l[0].group,h=0;h<g;h++){var I=l[h];C!=I.group&&(m.push('<div class="cke_menuseparator" role="separator"></div>'),C=I.group),I.render(this,h,m)}m.push("</div>"),c.setHtml(m.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(t,this.id,u,f,i,r):t.showBlock(this.id,u,f,i,r),n.fire("menuShow",[t])}},addListener:function(u){this._.listeners.push(u)},hide:function(u){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(u)},findItemByCommandName:function(u){var f=CKEDITOR.tools.array.filter(this.items,function(i){return u===i.command});return f.length?{item:f=f[0],element:this._.element.findOne("."+f.className)}:null}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(u,f,i){CKEDITOR.tools.extend(this,i,{order:0,className:"cke_menubutton__"+f}),this.group=u._.menuGroups[this.group],this.editor=u,this.name=f},proto:{render:function(u,f,i){var c,m,r=u.id+String(f),l=void 0===this.state?CKEDITOR.TRISTATE_OFF:this.state,n="",t=this.editor,g=l==CKEDITOR.TRISTATE_ON?"on":l==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(n=' aria-checked="'+(l==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var C=this.getItems,h="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",I=this.name;this.icon&&!/\./.test(this.icon)&&(I=this.icon),this.command&&(c=t.getCommand(this.command),(c=t.getCommandKeystroke(c))&&(m=CKEDITOR.tools.keystrokeToString(t.lang.common.keyboard,c))),u={id:r,name:this.name,iconName:I,label:this.label,cls:this.className||"",state:g,hasPopup:C?"true":"false",disabled:l==CKEDITOR.TRISTATE_DISABLED,title:this.label+(m?" ("+m.display+")":""),ariaShortcut:m?t.lang.common.keyboardShortcut+" "+m.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:u._.itemOverFn,moveOutFn:u._.itemOutFn,clickFn:u._.itemClickFn,index:f,iconStyle:CKEDITOR.skin.getIconStyle(I,"rtl"==this.editor.lang.dir,I==this.icon?null:this.icon,this.iconOffset),shortcutHtml:m?o.output({shortcut:m.display}):"",arrowHtml:C?a.output({label:h}):"",role:this.role?this.role:"menuitem",ariaChecked:n},s.output(u,i)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{css:e.config.contextmenu_contentsCss,className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,d){function s(){o=!1}var a,o;if(e.on("contextmenu",function(f){f=f.data;var i=CKEDITOR.env.webkit?a:CKEDITOR.env.mac?f.$.metaKey:f.$.ctrlKey;if(!(d&&i||(f.preventDefault(),o))){CKEDITOR.env.mac&&CKEDITOR.env.webkit&&(i=this.editor,(r=new CKEDITOR.dom.elementPath(f.getTarget(),i.editable()).contains(function(C){return C.hasAttribute("contenteditable")},!0))&&"false"==r.getAttribute("contenteditable")&&i.getSelection().fake(r));var r=f.getTarget().getDocument(),l=f.getTarget().getDocument().getDocumentElement(),n=(i=!r.equals(CKEDITOR.document),r=r.getWindow().getScrollPosition(),i?f.$.clientX:f.$.pageX||r.x+f.$.clientX),t=i?f.$.clientY:f.$.pageY||r.y+f.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(l,null,n,t)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var u=function(){a=0};e.on("keydown",function(f){a=CKEDITOR.env.mac?f.data.$.metaKey:f.data.$.ctrlKey}),e.on("keyup",u),e.on("contextmenu",u)}CKEDITOR.env.gecko&&!CKEDITOR.env.mac&&(e.on("keydown",function(f){f.data.$.shiftKey&&121===f.data.$.keyCode&&(o=!0)},null,null,0),e.on("keyup",s),e.on("contextmenu",s))},open:function(e,d,s,a){!1!==this.editor.config.enableContextMenu&&this.editor.getSelection().getType()!==CKEDITOR.SELECTION_NONE&&(this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,d,s,a))}}})},beforeInit:function(e){var d=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",function(){d.addTarget(e.editable(),!1!==e.config.browserContextMenuOnCtrl)}),e.addCommand("contextMenu",{exec:function(s){var u,a=0,o=0;(u=(u=(u=s.getSelection().getRanges())[u.length-1].getClientRects(s.editable().isInline()))[u.length-1])&&(a=u["rtl"===s.lang.dir?"left":"right"],o=u.bottom),s.contextMenu.open(s.document.getBody().getParent(),null,a,o)}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){var d={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(o){(o=CKEDITOR.document.getById(o._.elementsPath.idBase+"0"))&&o.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},s="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(s+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(s+=' onblur="this.style.cssText = this.style.cssText;"');var a=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+s+' hidefocus="true"  draggable="false"  ondragstart="return false;" onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(o){o._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},o.on("uiSpace",function(u){"bottom"==u.data.space&&function(o,u){function f(g){var C;(g=n.list[g]).equals(o.editable())||"true"==g.getAttribute("contenteditable")?((C=o.createRange()).selectNodeContents(g),C=C.select()):(C=o.getSelection()).selectElement(g),CKEDITOR.env.ie&&o.fire("selectionChange",{selection:C,path:new CKEDITOR.dom.elementPath(g)}),o.focus()}function i(){l&&l.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete n.list}var l,r=o.ui.spaceId("path"),n=o._.elementsPath,t=n.idBase;u.html+='<span id="'+r+'_label" class="cke_voice_label">'+o.lang.elementspath.eleLabel+'</span><span id="'+r+'" class="cke_path" role="group" aria-labelledby="'+r+'_label"><span class="cke_path_empty">&nbsp;</span></span>',o.on("uiReady",function(){var g=o.ui.space("path");g&&o.focusManager.add(g,1)}),n.onClick=f;var c=CKEDITOR.tools.addFunction(f),m=CKEDITOR.tools.addFunction(function(g,C){var I,h=n.idBase;switch(C=new CKEDITOR.dom.event(C),I="rtl"==o.lang.dir,C.getKeystroke()){case I?39:37:case 9:return(I=CKEDITOR.document.getById(h+(g+1)))||(I=CKEDITOR.document.getById(h+"0")),I.focus(),!1;case I?37:39:case CKEDITOR.SHIFT+9:return(I=CKEDITOR.document.getById(h+(g-1)))||(I=CKEDITOR.document.getById(h+(n.list.length-1))),I.focus(),!1;case 27:return o.focus(),!1;case 13:case 32:return f(g),!1}return!0});o.on("selectionChange",function(g){for(var C=[],h=n.list=[],I=[],D=n.filters,k=!0,b=g.data.path.elements,p=b.length;p--;){var O=b[p],R=0;g=O.data("cke-display-name")?O.data("cke-display-name"):O.data("cke-real-element-type")?O.data("cke-real-element-type"):O.getName(),(k=O.hasAttribute("contenteditable")?"true"==O.getAttribute("contenteditable"):k)||O.hasAttribute("contenteditable")||(R=1);for(var _=0;_<D.length;_++){var w=D[_](O,g);if(!1===w){R=1;break}g=w||g}R||(h.unshift(O),I.unshift(g))}for(h=h.length,D=0;D<h;D++)k=o.lang.elementspath.eleTitle.replace(/%1/,g=I[D]),g=a.output({id:t+D,label:k,text:g,jsTitle:"javascript:void('"+g+"')",index:D,keyDownFn:m,clickFn:c}),C.unshift(g);l||(l=CKEDITOR.document.getById(r)),(I=l).setHtml(C.join("")+'<span class="cke_path_empty">&nbsp;</span>'),o.fire("elementsPathUpdate",{space:I})}),o.on("readOnly",i),o.on("contentDomUnload",i),o.addCommand("elementsPathFocus",d.toolbarFocus),o.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}(o,u.data)})}})}(),function(){function e(a,o){var u,f;o.on("refresh",function(i){var l,r=[d];for(l in i.data.states)r.push(i.data.states[l]);this.setState(CKEDITOR.tools.search(r,s)?s:d)},o,null,100),o.on("exec",function(i){u=a.getSelection(),f=u.createBookmarks(1),i.data||(i.data={}),i.data.done=!1},o,null,0),o.on("exec",function(){a.forceNextSelectionCheck(),u.selectBookmarks(f)},o,null,100)}var d=CKEDITOR.TRISTATE_DISABLED,s=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(a){var o=CKEDITOR.plugins.indent.genericDefinition;e(a,a.addCommand("indent",new o(!0))),e(a,a.addCommand("outdent",new o)),a.ui.addButton&&(a.ui.addButton("Indent",{label:a.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),a.ui.addButton("Outdent",{label:a.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),a.on("dirChanged",function(u){var f=a.createRange(),i=u.data.node;f.setStartBefore(i),f.setEndAfter(i);for(var l,r=new CKEDITOR.dom.walker(f);l=r.next();)if(l.type==CKEDITOR.NODE_ELEMENT)if(!l.equals(i)&&l.getDirection())f.setStartAfter(l),r=new CKEDITOR.dom.walker(f);else{var n=a.config.indentClasses;if(n)for(var t="ltr"==u.data.dir?["_rtl",""]:["","_rtl"],c=0;c<n.length;c++)l.hasClass(n[c]+t[0])&&(l.removeClass(n[c]+t[0]),l.addClass(n[c]+t[1]));n=l.getStyle("margin-right"),t=l.getStyle("margin-left"),n?l.setStyle("margin-left",n):l.removeStyle("margin-left"),t?l.setStyle("margin-right",t):l.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a,this.startDisabled=!this.isIndent},specificDefinition:function(a,o,u){this.name=o,this.editor=a,this.jobs={},this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!u,this.relatedGlobal=u?"indent":"outdent",this.indentKey=u?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(a,o){a.on("pluginsLoaded",function(){for(var u in o)!function(f,i){var l,r=f.getCommand(i.relatedGlobal);for(l in i.jobs)r.on("exec",function(n){n.data.done||(f.fire("lockSnapshot"),i.execJob(f,l)&&(n.data.done=!0),f.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(i.database))},this,null,l),r.on("refresh",function(n){n.data.states||(n.data.states={}),n.data.states[i.name+"@"+l]=i.refreshJob(f,l,n.data.path)},this,null,l);f.addFeature(i)}(this,o[u])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,o){var u=this.jobs[o];if(u.state!=d)return u.exec.call(this,a)},refreshJob:function(a,o,u){return(o=this.jobs[o]).state=a.activeFilter.checkFeature(this)?o.refresh.call(this,a,u):d,o.state},getContext:function(a){return a.contains(this.context)}}}(),function(){function e(i){function r(h){for(var I=c.startContainer,D=c.endContainer;I&&!I.getParent().equals(h);)I=I.getParent();for(;D&&!D.getParent().equals(h);)D=D.getParent();if(!I||!D)return!1;for(var k=[],b=!1;!b;)I.equals(D)&&(b=!0),k.push(I),I=I.getNext();if(1>k.length)return!1;for(I=h.getParents(!0),D=0;D<I.length;D++)if(I[D].getName&&t[I[D].getName()]){h=I[D];break}I=l.isIndent?1:-1,D=k[0],k=k[k.length-1];var _,p=(b=CKEDITOR.plugins.list.listToArray(h,n))[k.getCustomData("listarray_index")].indent;for(D=D.getCustomData("listarray_index");D<=k.getCustomData("listarray_index");D++)if(b[D].indent+=I,0<I){for(var O=b[D].parent,R=D-1;0<=R;R--)if(b[R].indent===I){O=b[R].parent;break}b[D].parent=new CKEDITOR.dom.element(O.getName(),O.getDocument())}for(D=k.getCustomData("listarray_index")+1;D<b.length&&b[D].indent>p;D++)b[D].indent+=I;if(I=CKEDITOR.plugins.list.arrayToList(b,n,null,i.config.enterMode,h.getDirection()),!l.isIndent&&(_=h.getParent())&&_.is("li")){var v,w=[];for(D=(k=I.listNode.getChildren()).count()-1;0<=D;D--)(v=k.getItem(D))&&v.is&&v.is("li")&&w.push(v)}if(I&&I.listNode.replace(h),w&&w.length)for(D=0;D<w.length;D++){for(v=h=w[D];(v=v.getNext())&&v.is&&v.getName()in t;)CKEDITOR.env.needsNbspFiller&&!h.getFirst(s)&&h.append(c.document.createText("\xa0")),h.append(v);h.insertAfter(_)}return I&&i.fire("contentDomInvalidated"),!0}for(var c,l=this,n=this.database,t=this.context,m=((m=i.getSelection())&&m.getRanges()).createIterator();c=m.getNextRange();){for(var g=c.getCommonAncestor();g&&(g.type!=CKEDITOR.NODE_ELEMENT||!t[g.getName()]);){if(i.editable().equals(g)){g=!1;break}g=g.getParent()}if(g||(g=c.startPath().contains(t))&&c.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),!g){var C=c.getEnclosedNode();C&&C.type==CKEDITOR.NODE_ELEMENT&&C.getName()in t&&(c.setStartAt(C,CKEDITOR.POSITION_AFTER_START),c.setEndAt(C,CKEDITOR.POSITION_BEFORE_END),g=C)}if(g&&c.startContainer.type==CKEDITOR.NODE_ELEMENT&&c.startContainer.getName()in t&&((C=new CKEDITOR.dom.walker(c)).evaluator=d,c.startContainer=C.next()),g&&c.endContainer.type==CKEDITOR.NODE_ELEMENT&&c.endContainer.getName()in t&&((C=new CKEDITOR.dom.walker(c)).evaluator=d,c.endContainer=C.previous()),g)return r(g)}return 0}function d(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.is("li")}function s(i){return a(i)&&o(i)}var a=CKEDITOR.dom.walker.whitespaces(!0),o=CKEDITOR.dom.walker.bookmark(!1,!0),u=CKEDITOR.TRISTATE_DISABLED,f=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(i){function r(n){l.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],n.on("key",function(t){var c=n.elementPath();if("wysiwyg"==n.mode&&t.data.keyCode==this.indentKey&&c){var m=this.getContext(c);!m||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,c,m)||(n.execCommand(this.relatedGlobal),t.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(t,c){var m=this.getContext(c),g=CKEDITOR.plugins.indentList.firstItemInPath(this.context,c,m);return m&&this.isIndent&&!g?f:u}:function(t,c){return!this.getContext(c)||this.isIndent?u:f},exec:CKEDITOR.tools.bind(e,this)}}var l=CKEDITOR.plugins.indent;l.registerCommands(i,{indentlist:new r(i,"indentlist",!0),outdentlist:new r(i,"outdentlist")}),CKEDITOR.tools.extend(r.prototype,l.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(i,r,l){var n=r.contains(d);return l||(l=r.contains(i)),l&&n&&n.equals(l.getFirst(d))}}(),function(){function e(h,I,D,k){for(var b=CKEDITOR.plugins.list.listToArray(I.root,D),p=[],O=0;O<I.contents.length;O++)(R=(R=I.contents[O]).getAscendant("li",!0))&&!R.getCustomData("list_item_processed")&&(p.push(R),CKEDITOR.dom.element.setMarker(D,R,"list_item_processed",!0));var _,w,K,R=I.root.getDocument();for(O=0;O<p.length;O++){var v=p[O].getCustomData("listarray_index");(_=b[v].parent).is(this.type)||(w=R.createElement(this.type),_.copyAttributes(w,{start:1,type:1}),w.removeStyle("list-style-type"),b[v].parent=w)}for(b=(D=CKEDITOR.plugins.list.arrayToList(b,D,null,h.config.enterMode)).listNode.getChildCount(),O=0;O<b&&(K=D.listNode.getChild(O));O++)K.getName()==this.type&&k.push(K);D.listNode.replace(I.root),h.fire("contentDomInvalidated")}function d(h,I,D){var R,_,k=I.contents,b=I.root.getDocument(),p=[];if(1==k.length&&k[0].equals(I.root)){var O=b.createElement("div");k[0].moveChildren&&k[0].moveChildren(O),k[0].append(O),k[0]=O}for(I=I.contents[0].getParent(),O=0;O<k.length;O++)I=I.getCommonAncestor(k[O].getParent());for(h=void 0===(h=h.config.useComputedState)||h,O=0;O<k.length;O++)for(var v,w=k[O];v=w.getParent();){if(v.equals(I)){p.push(w),!_&&w.getDirection()&&(_=1),w=w.getDirection(h),null!==R&&(R=R&&R!=w?null:w);break}w=v}if(!(1>p.length)){for(k=p[p.length-1].getNext(),O=b.createElement(this.type),D.push(O);p.length;)D=p.shift(),h=b.createElement("li"),(w=D).is("pre")||g.test(w.getName())||"false"==w.getAttribute("contenteditable")?D.appendTo(h):(D.copyAttributes(h),R&&D.getDirection()&&(h.removeStyle("direction"),h.removeAttribute("dir")),D.moveChildren(h),D.remove()),h.appendTo(O);R&&_&&O.setAttribute("dir",R),k?O.insertBefore(k):O.appendTo(I)}}function s(h,I,D){function k(K){!(w=_[K?"getFirst":"getLast"]())||w.is&&w.isBlockBoundary()||!(v=I.root[K?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||v.is&&v.isBlockBoundary({br:1})||h.document.createElement("br")[K?"insertBefore":"insertAfter"](w)}for(var b=CKEDITOR.plugins.list.listToArray(I.root,D),p=[],O=0;O<I.contents.length;O++){var R=I.contents[O];(R=R.getAscendant("li",!0))&&!R.getCustomData("list_item_processed")&&(p.push(R),CKEDITOR.dom.element.setMarker(D,R,"list_item_processed",!0))}for(R=null,O=0;O<p.length;O++)b[R=p[O].getCustomData("listarray_index")].indent=-1;for(O=R+1;O<b.length;O++)if(b[O].indent>b[O-1].indent+1){for(p=b[O-1].indent+1-b[O].indent,R=b[O].indent;b[O]&&b[O].indent>=R;)b[O].indent+=p,O++;O--}var w,v,_=CKEDITOR.plugins.list.arrayToList(b,D,null,h.config.enterMode,I.root.getAttribute("dir")).listNode;k(!0),k(),_.replace(I.root),h.fire("contentDomInvalidated")}function a(h,I){this.name=h,this.context=this.type=I,this.allowedContent=I+" li",this.requiredContent=I}function o(h,I,D,k){for(var b,p;b=h[k?"getLast":"getFirst"](C);)(p=b.getDirection(1))!==I.getDirection(1)&&b.setAttribute("dir",p),b.remove(),D?b[k?"insertBefore":"insertAfter"](D):I.append(b,k),D=b}function u(h){function I(D){var k=h[D?"getPrevious":"getNext"](c);k&&k.type==CKEDITOR.NODE_ELEMENT&&k.is(h.getName())&&(o(h,k,null,!D),h.remove(),h=k)}I(),I(1)}function f(h){return h.type==CKEDITOR.NODE_ELEMENT&&(h.getName()in CKEDITOR.dtd.$block||h.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[h.getName()]["#"]}function i(h,I,D){h.fire("saveSnapshot"),D.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var k=D.extractContents();I.trim(!1,!0);var b=I.createBookmark(),O=(p=new CKEDITOR.dom.elementPath(I.startContainer)).block,p=p.lastElement.getAscendant("li",1)||O,_=(R=new CKEDITOR.dom.elementPath(D.startContainer)).contains(CKEDITOR.dtd.$listItem),R=R.contains(CKEDITOR.dtd.$list);for(O?(O=O.getBogus())&&O.remove():R&&(O=R.getPrevious(c))&&m(O)&&O.remove(),(O=k.getLast())&&O.type==CKEDITOR.NODE_ELEMENT&&O.is("br")&&O.remove(),(O=I.startContainer.getChild(I.startOffset))?k.insertBefore(O):I.startContainer.append(k),_&&(k=r(_))&&(p.contains(_)?(o(k,_.getParent(),_),k.remove()):p.append(k));D.checkStartOfBlock()&&D.checkEndOfBlock()&&(k=(R=D.startPath()).block);)k.is("li")&&(p=k.getParent(),k.equals(p.getLast(c))&&k.equals(p.getFirst(c))&&(k=p)),D.moveToPosition(k,CKEDITOR.POSITION_BEFORE_START),k.remove();D=D.clone(),k=h.editable(),D.setEndAt(k,CKEDITOR.POSITION_BEFORE_END),(D=new CKEDITOR.dom.walker(D)).evaluator=function(w){return c(w)&&!m(w)},(D=D.next())&&D.type==CKEDITOR.NODE_ELEMENT&&D.getName()in CKEDITOR.dtd.$list&&u(D),I.moveToBookmark(b),I.select(),h.fire("saveSnapshot")}function r(h){return(h=h.getLast(c))&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in l?h:null}var l={ol:1,ul:1},n=CKEDITOR.dom.walker.whitespaces(),t=CKEDITOR.dom.walker.bookmark(),c=function(h){return!(n(h)||t(h))},m=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(h,I,D,k,b){if(!l[h.getName()])return[];k||(k=0),D||(D=[]);for(var p=0,O=h.getChildCount();p<O;p++){var R=h.getChild(p);if(R.type==CKEDITOR.NODE_ELEMENT&&R.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(R,I,D,k+1),"li"==R.$.nodeName.toLowerCase()){var _={parent:h,indent:k,element:R,contents:[]};b?_.grandparent=b:(_.grandparent=h.getParent(),_.grandparent&&"li"==_.grandparent.$.nodeName.toLowerCase()&&(_.grandparent=_.grandparent.getParent())),I&&CKEDITOR.dom.element.setMarker(I,R,"listarray_index",D.length),D.push(_);for(var K,w=0,v=R.getChildCount();w<v;w++)(K=R.getChild(w)).type==CKEDITOR.NODE_ELEMENT&&l[K.getName()]?CKEDITOR.plugins.list.listToArray(K,I,D,k+1,_.grandparent):_.contents.push(K)}}return D},arrayToList:function(h,I,D,k,b){if(D||(D=0),!h||h.length<D+1)return null;for(var p,y,F,O=h[D].parent.getDocument(),R=new CKEDITOR.dom.documentFragment(O),_=null,w=D,v=Math.max(h[D].indent,0),K=null,W=k==CKEDITOR.ENTER_P?"p":"div";;){var x=h[w];if(p=x.grandparent,y=x.element.getDirection(1),x.indent==v){for(_&&h[w].parent.getName()==_.getName()||(_=h[w].parent.clone(!1,1),b&&_.setAttribute("dir",b),R.append(_)),K=_.append(x.element.clone(0,1)),y!=_.getDirection(1)&&K.setAttribute("dir",y),p=0;p<x.contents.length;p++)K.append(x.contents[p].clone(1,1));w++}else if(x.indent==Math.max(v,0)+1)x=h[w-1].element.getDirection(1),w=CKEDITOR.plugins.list.arrayToList(h,null,w,k,x!=y?y:null),!K.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=O.$.documentMode&&K.append(O.createText("\xa0")),K.append(w.listNode),w=w.nextIndex;else{if(-1!=x.indent||D||!p)return null;l[p.getName()]?(K=x.element.clone(!1,!0),y!=p.getDirection(1)&&K.setAttribute("dir",y)):K=new CKEDITOR.dom.documentFragment(O),_=p.getDirection(1)!=y;var H,L,T=x.element,N=T.getAttribute("class"),A=T.getAttribute("style"),P=K.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(k!=CKEDITOR.ENTER_BR||_||A||N),E=x.contents.length;for(p=0;p<E;p++)if(t(H=x.contents[p])&&1<E)P?L=H.clone(1,1):K.append(H.clone(1,1));else if(H.type==CKEDITOR.NODE_ELEMENT&&H.isBlockBoundary()){_&&!H.getDirection()&&H.setAttribute("dir",y),F=H;var B=T.getAttribute("style");B&&F.setAttribute("style",B.replace(/([^;])$/,"$1;")+(F.getAttribute("style")||"")),N&&H.addClass(N),F=null,L&&(K.append(L),L=null),K.append(H.clone(1,1))}else P?(F||(F=O.createElement(W),K.append(F),_&&F.setAttribute("dir",y)),A&&F.setAttribute("style",A),N&&F.setAttribute("class",N),L&&(F.append(L),L=null),F.append(H.clone(1,1))):K.append(H.clone(1,1));L&&((F||K).append(L),L=null),K.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&w!=h.length-1&&(CKEDITOR.env.needsBrFiller&&(y=K.getLast())&&y.type==CKEDITOR.NODE_ELEMENT&&y.is("br")&&y.remove(),(y=K.getLast(c))&&y.type==CKEDITOR.NODE_ELEMENT&&y.is(CKEDITOR.dtd.$block)||K.append(O.createElement("br"))),"div"!=(y=K.$.nodeName.toLowerCase())&&"p"!=y||K.appendBogus(),R.append(K),_=null,w++}if(F=null,h.length<=w||Math.max(h[w].indent,0)<v)break}if(I)for(h=R.getFirst();h;){if(h.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(I,h),h.getName()in CKEDITOR.dtd.$listItem&&(O=b=k=void 0,k=(D=h).getDirection()))){for(b=D.getParent();b&&!(O=b.getDirection());)b=b.getParent();k==O&&D.removeAttribute("dir")}h=h.getNextSourceNode()}return{listNode:R,nextIndex:w}}};var g=/^h[1-6]$/,C=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);a.prototype={exec:function(h){function I(N){return l[N.root.getName()]&&!function(N,A){return CKEDITOR.tools.array.filter(N.getChildren().toArray(),function(P){return-1===CKEDITOR.tools.array.indexOf(A,P.type)}).length}(N.root,[CKEDITOR.NODE_COMMENT])}function k(N){var A=!0;return 0!==N.getChildCount()&&(N.forEach(function(P){if(P.type!==CKEDITOR.NODE_COMMENT)return A=!1},null,!0),A)}this.refresh(h,h.elementPath());var b=h.config,p=h.getSelection(),O=p&&p.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF)if((R=h.editable()).getFirst(c)){var _=1==O.length&&O[0];(b=_&&_.getEnclosedNode())&&b.is&&this.type==b.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else b.enterMode==CKEDITOR.ENTER_BR?R.appendBogus():O[0].fixBlock(1,b.enterMode==CKEDITOR.ENTER_P?"p":"div"),p.selectRanges(O);b=p.createBookmarks(!0);for(var R=[],w={},v=(O=O.createIterator(),0);(_=O.getNextRange())&&++v;){var K=_.getBoundaryNodes(),F=K.endNode;for((y=K.startNode).type==CKEDITOR.NODE_ELEMENT&&"td"==y.getName()&&_.setStartAt(K.startNode,CKEDITOR.POSITION_AFTER_START),F.type==CKEDITOR.NODE_ELEMENT&&"td"==F.getName()&&_.setEndAt(K.endNode,CKEDITOR.POSITION_BEFORE_END),(_=_.createIterator()).forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;K=_.getNextParagraph();)if(!K.getCustomData("list_block")&&!k(K)){CKEDITOR.dom.element.setMarker(w,K,"list_block",1);for(var x,y=(W=h.elementPath(K)).elements,W=(F=0,W.blockLimit),T=y.length-1;0<=T&&(x=y[T]);T--)if(l[x.getName()]&&W.contains(x)){W.removeCustomData("list_group_object_"+v),(y=x.getCustomData("list_group_object"))?y.contents.push(K):(R.push(y={root:x,contents:[K]}),CKEDITOR.dom.element.setMarker(w,x,"list_group_object",y)),F=1;break}F||((F=W).getCustomData("list_group_object_"+v)?F.getCustomData("list_group_object_"+v).contents.push(K):(y={root:F,contents:[K]},CKEDITOR.dom.element.setMarker(w,F,"list_group_object_"+v,y),R.push(y)))}}for(x=[];0<R.length;)y=R.shift(),this.state==CKEDITOR.TRISTATE_OFF?I(y)||(l[y.root.getName()]?e.call(this,h,y,w,x):d.call(this,h,y,x)):this.state==CKEDITOR.TRISTATE_ON&&l[y.root.getName()]&&!I(y)&&s.call(this,h,y,w);for(T=0;T<x.length;T++)u(x[T]);CKEDITOR.dom.element.clearAllMarkers(w),p.selectBookmarks(b),h.focus()},refresh:function(h,I){var D=I.contains(l,1);D&&(I.blockLimit||I.root).contains(D)?this.setState(D.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(h){h.blockless||(h.addCommand("numberedlist",new a("numberedlist","ol")),h.addCommand("bulletedlist",new a("bulletedlist","ul")),h.ui.addButton&&(h.ui.addButton("NumberedList",{label:h.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),h.ui.addButton("BulletedList",{label:h.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),h.on("key",function(I){var k,D=I.data.domEvent.getKey();if("wysiwyg"==h.mode&&D in{8:1,46:1}){var b=h.getSelection().getRanges()[0],p=b&&b.startPath();if(b&&b.collapsed){var w,O=8==D,R=h.editable(),_=new CKEDITOR.dom.walker(b.clone());if(_.evaluator=function(K){return c(K)&&!m(K)},_.guard=function(K,y){return!(y&&K.type==CKEDITOR.NODE_ELEMENT&&K.is("table"))},D=b.clone(),O)if((w=p.contains(l))&&b.checkBoundaryOfElement(w,CKEDITOR.START)&&(w=w.getParent())&&w.is("li")&&(w=r(w))?(k=w,w=w.getPrevious(c),D.moveToPosition(w&&m(w)?w:k,CKEDITOR.POSITION_BEFORE_START)):(_.range.setStartAt(R,CKEDITOR.POSITION_AFTER_START),_.range.setEnd(b.startContainer,b.startOffset),(w=_.previous())&&w.type==CKEDITOR.NODE_ELEMENT&&(w.getName()in l||w.is("li"))&&(w.is("li")||(_.range.selectNodeContents(w),_.reset(),_.evaluator=f,w=_.previous()),D.moveToElementEditEnd(k=w),D.moveToPosition(D.endPath().block,CKEDITOR.POSITION_BEFORE_END))),k)i(h,D,b),I.cancel();else{var v=p.contains(l);v&&b.checkBoundaryOfElement(v,CKEDITOR.START)&&(k=v.getFirst(c),b.checkBoundaryOfElement(k,CKEDITOR.START)&&(w=v.getPrevious(c),r(k)?w&&(b.moveToElementEditEnd(w),b.select()):h.execCommand("outdent"),I.cancel()))}else if(k=p.contains("li")){if(_.range.setEndAt(R,CKEDITOR.POSITION_BEFORE_END),O=(R=k.getLast(c))&&f(R)?R:k,p=0,(w=_.next())&&w.type==CKEDITOR.NODE_ELEMENT&&w.getName()in l&&w.equals(R)?(p=1,w=_.next()):b.checkBoundaryOfElement(O,CKEDITOR.END)&&(p=2),p&&w){if((b=b.clone()).moveToElementEditStart(w),1==p&&(D.optimize(),!D.startContainer.equals(k))){for(k=D.startContainer;k.is(CKEDITOR.dtd.$inline);)v=k,k=k.getParent();v&&D.moveToPosition(v,CKEDITOR.POSITION_AFTER_END)}2==p&&(D.moveToPosition(D.endPath().block,CKEDITOR.POSITION_BEFORE_END),b.endPath().block&&b.moveToPosition(b.endPath().block,CKEDITOR.POSITION_AFTER_START)),i(h,D,b),I.cancel()}}else _.range.setEndAt(R,CKEDITOR.POSITION_BEFORE_END),(w=_.next())&&w.type==CKEDITOR.NODE_ELEMENT&&w.is(l)&&(w=w.getFirst(c),p.block&&b.checkStartOfBlock()&&b.checkEndOfBlock()?(p.block.remove(),b.moveToElementEditStart(w),b.select()):r(w)?(b.moveToElementEditStart(w),b.select()):((b=b.clone()).moveToElementEditStart(w),i(h,D,b)),I.cancel());setTimeout(function(){h.selectionChange(1)})}}}))}})}(),function(){function e(l,n,t){if(t=l.config.forceEnterMode||t,"wysiwyg"==l.mode){n||(n=l.activeEnterMode);var c=l.elementPath();c&&!c.isContextFor("p")&&(n=CKEDITOR.ENTER_BR,t=1),l.fire("saveSnapshot"),n==CKEDITOR.ENTER_BR?f(l,n,null,t):i(l,n,null,t),l.fire("saveSnapshot")}}function d(l){for(var n=(l=l.getSelection().getRanges(!0)).length-1;0<n;n--)l[n].deleteContents();return l[0]}CKEDITOR.plugins.add("enterkey",{init:function(l){l.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(n){e(n)}}),l.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(n){e(n,n.activeShiftEnterMode,1)}}),l.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var u,f,i,r,a=CKEDITOR.dom.walker.whitespaces(),o=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(l,n,t,c){if(t=t||d(l)){t=function(l){var n=l.startContainer.getAscendant(function(t){return t.type==CKEDITOR.NODE_ELEMENT&&"true"==t.getAttribute("contenteditable")},!0);return l.root.equals(n)?l:((n=new CKEDITOR.dom.range(n)).moveToRange(l),n)}(t);var b,g=t.document,C=t.checkStartOfBlock(),h=t.checkEndOfBlock(),I=l.elementPath(t.startContainer),D=I.block,k=n==CKEDITOR.ENTER_DIV?"div":"p";if(D&&C&&h){if((C=D.getParent()).is("li")&&1<C.getChildCount())return g=new CKEDITOR.dom.element("li"),b=l.createRange(),g.insertAfter(C),D.remove(),b.setStart(g,0),void l.getSelection().selectRanges([b]);if(D.is("li")||D.getParent().is("li")){D.is("li")||(C=(D=D.getParent()).getParent()),b=C.getParent(),t=!D.hasPrevious();var p=!D.hasNext(),O=(k=(c=l.getSelection()).createBookmarks(),D.getDirection(1)),R=(h=D.getAttribute("class"),D.getAttribute("style")),_=b.getDirection(1)!=O;if(l=l.enterMode!=CKEDITOR.ENTER_BR||_||R||h,b.is("li"))t||p?(t&&p&&C.remove(),D[p?"insertAfter":"insertBefore"](b)):D.breakParent(b);else{if(l)I.block.is("li")?(b=g.createElement(n==CKEDITOR.ENTER_P?"p":"div"),_&&b.setAttribute("dir",O),R&&b.setAttribute("style",R),h&&b.setAttribute("class",h),D.moveChildren(b)):b=I.block,t||p?b[t?"insertBefore":"insertAfter"](C):(D.breakParent(C),b.insertAfter(C));else if(D.appendBogus(!0),t||p)for(;g=D[t?"getFirst":"getLast"]();)g[t?"insertBefore":"insertAfter"](C);else for(D.breakParent(C);g=D.getLast();)g.insertAfter(C);D.remove()}return void c.selectBookmarks(k)}if(D&&D.getParent().is("blockquote"))return D.breakParent(D.getParent()),D.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||D.getPrevious().remove(),D.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||D.getNext().remove(),t.moveToElementEditStart(D),void t.select()}else if(D&&D.is("pre")&&!h)return void f(l,n,t,c);if(R=t.splitBlock(k)){if(l=R.previousBlock,C=R.wasStartOfBlock,h=R.wasEndOfBlock,(D=R.nextBlock)?(p=D.getParent()).is("li")&&(D.breakParent(p),D.move(D.getNext(),1)):l&&(p=l.getParent())&&p.is("li")&&(l.breakParent(p),p=l.getNext(),t.moveToElementEditStart(p),l.move(l.getPrevious())),C||h)if((w=n)===CKEDITOR.ENTER_BR||-1===CKEDITOR.tools.indexOf(["td","th"],I.lastElement.getName())||1!==I.lastElement.getChildCount()||((v=(w=I.lastElement.getChild(0).clone(!0)).getBogus())&&v.remove(),w.getText().length)){if(l?(l.is("li")||!r.test(l.getName())&&!l.is("pre"))&&(b=l.clone()):D&&(b=D.clone()),b?c&&!b.is("li")&&b.renameNode(k):p&&p.is("li")?b=p:(b=g.createElement(k),l&&(O=l.getDirection())&&b.setAttribute("dir",O)),g=R.elementPath)for(n=0,c=g.elements.length;n<c&&!(k=g.elements[n]).equals(g.block)&&!k.equals(g.blockLimit);n++)CKEDITOR.dtd.$removeEmpty[k.getName()]&&(k=k.clone(),b.moveChildren(k),b.append(k));b.appendBogus(),b.getParent()||t.insertNode(b),b.is("li")&&b.removeAttribute("value"),!CKEDITOR.env.ie||!C||h&&l.getChildCount()||(t.moveToElementEditStart(h?l:b),t.select()),t.moveToElementEditStart(C&&!h?D:b)}else t.moveToElementEditStart(t.getTouchedStartNode());else D.is("li")&&((b=t.clone()).selectNodeContents(D),(b=new CKEDITOR.dom.walker(b)).evaluator=function(w){return!(o(w)||a(w)||w.type==CKEDITOR.NODE_ELEMENT&&w.getName()in CKEDITOR.dtd.$inline&&!(w.getName()in CKEDITOR.dtd.$empty))},(p=b.next())&&p.type==CKEDITOR.NODE_ELEMENT&&p.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?g.createElement("br"):g.createText("\xa0")).insertBefore(p)),D&&t.moveToElementEditStart(D);t.select(),t.scrollIntoView()}}var w,v},enterBr:function(l,n,t,c){if(t=t||d(l)){var m=t.document,g=t.checkEndOfBlock(),C=new CKEDITOR.dom.elementPath(l.getSelection().getStartElement()),h=C.block,I=h&&C.block.getName();c||"li"!=I?(!c&&g&&r.test(I)?(g=h.getDirection())?((m=m.createElement("div")).setAttribute("dir",g),m.insertAfter(h),t.setStart(m,0)):(m.createElement("br").insertAfter(h),CKEDITOR.env.gecko&&m.createText("").insertAfter(h),t.setStartAt(h.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(l="pre"==I&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?m.createText("\r"):m.createElement("br"),t.deleteContents(),t.insertNode(l),CKEDITOR.env.needsBrFiller?(m.createText("\ufeff").insertAfter(l),g&&(h||C.blockLimit).appendBogus(),l.getNext().$.nodeValue="",t.setStartAt(l.getNext(),CKEDITOR.POSITION_AFTER_START)):t.setStartAt(l,CKEDITOR.POSITION_AFTER_END)),t.collapse(!0),t.select(),t.scrollIntoView()):i(l,n,t,c)}}},u=CKEDITOR.plugins.enterkey,f=u.enterBr,i=u.enterBlock,r=/^h[1-6]$/}(),function(){function e(d,s){var a={},o=[],u={nbsp:"\xa0",shy:"\xad",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(d=(d=d.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(l,n){var t=s?"&"+n+";":u[n];return a[t]=s?u[n]:"&"+n+";",o.push(t),""})).replace(/,$/,""),!s&&d){d=d.split(",");var i,f=document.createElement("div");for(f.innerHTML="&"+d.join(";&")+";",i=f.innerHTML,f=null,f=0;f<i.length;f++){var r=i.charAt(f);a[r]="&"+d[f]+";",o.push(r)}}return a.regex=o.join(s?"|":""),a}CKEDITOR.plugins.add("entities",{afterInit:function(d){function s(n){return r[n]}function a(n){return"force"!=o.entities_processNumerical&&f[n]?f[n]:"&#"+n.charCodeAt(0)+";"}var o=d.config;if(d=(d=d.dataProcessor)&&d.htmlFilter){var u=[];!1!==o.basicEntities&&u.push("nbsp,gt,lt,amp"),o.entities&&(u.length&&u.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),o.entities_latin&&u.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),o.entities_greek&&u.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),o.entities_additional&&u.push(o.entities_additional));var f=e(u.join(",")),i=f.regex?"["+f.regex+"]":"a^";delete f.regex,o.entities&&o.entities_processNumerical&&(i="[^ -~]|"+i),i=new RegExp(i,"g");var r=e("nbsp,gt,lt,amp,shy",!0),l=new RegExp(r.regex,"g");d.addRules({text:function(n){return n.replace(l,s).replace(i,a)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,d,s,a){s=s||"70%","string"==typeof(d=d||"80%")&&1<d.length&&"%"==d.substr(d.length-1,1)&&(d=parseInt(window.screen.width*parseInt(d,10)/100,10)),"string"==typeof s&&1<s.length&&"%"==s.substr(s.length-1,1)&&(s=parseInt(window.screen.height*parseInt(s,10)/100,10)),640>d&&(d=640),420>s&&(s=420);var o=parseInt((window.screen.height-s)/2,10),u=parseInt((window.screen.width-d)/2,10);a=(a||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+d+",height="+s+",top="+o+",left="+u;var f=window.open("",null,a,!0);if(!f)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(f.moveTo(u,o),f.resizeTo(d,s)),f.focus(),f.location.href=e}catch(i){window.open(e,null,a,!0)}return!0}}),function(){function e(o){this.editor=o,this.loaders=[]}function d(o,u,f){var i=o.config.fileTools_defaultFileName;this.editor=o,this.lang=o.lang,"string"==typeof u?(this.data=u,this.file=function(o){var u=o.match(a)[1];o=o.replace(a,""),o=atob(o);var i,r,l,n,f=[];for(i=0;i<o.length;i+=512){for(r=o.slice(i,i+512),l=Array(r.length),n=0;n<r.length;n++)l[n]=r.charCodeAt(n);r=new Uint8Array(l),f.push(r)}return new Blob(f,{type:u})}(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=u,this.total=this.file.size,this.loaded=0),f?this.fileName=f:this.file.name?this.fileName=this.file.name:(o=this.file.type.split("/"),i&&(o[0]=i),this.fileName=o.join(".")),this.uploaded=0,this.responseData=this.uploadTotal=null,this.status="created",this.abort=function(){this.changeStatus("abort")}}CKEDITOR.plugins.add("filetools",{beforeInit:function(o){o.uploadRepository=new e(o),o.on("fileUploadRequest",function(u){var f=u.data.fileLoader;f.xhr.open("POST",f.uploadUrl,!0),u.data.requestData.upload={file:f.file,name:f.fileName}},null,null,5),o.on("fileUploadRequest",function(u){var f=u.data.fileLoader,i=new FormData;u=u.data.requestData;var l,n,r=o.config.fileTools_requestHeaders;for(n in u){var t=u[n];"object"==typeof t&&t.file?i.append(n,t.file,t.name):i.append(n,t)}if(i.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken()),r)for(l in r)f.xhr.setRequestHeader(l,r[l]);f.xhr.send(i)},null,null,999),o.on("fileUploadResponse",function(u){var f=u.data.fileLoader,i=f.xhr,r=u.data;try{var l=JSON.parse(i.responseText);if(l.error&&l.error.message&&(r.message=l.error.message),l.uploaded)for(var n in l)r[n]=l[n];else u.cancel()}catch(t){r.message=f.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:i.responseText}),u.cancel()}},null,null,999)}}),e.prototype={create:function(o,u,f){var i=this.loaders.length;return(o=new(f=f||d)(this.editor,o,u)).id=i,this.loaders[i]=o,this.fire("instanceCreated",o),o},isFinished:function(){for(var o=0;o<this.loaders.length;++o)if(!this.loaders[o].isFinished())return!1;return!0}},d.prototype={loadAndUpload:function(o,u){var f=this;this.once("loaded",function(i){i.cancel(),f.once("update",function(r){r.cancel()},null,null,0),f.upload(o,u)},null,null,0),this.load()},load:function(){var o=this,u=this.reader=new FileReader;o.changeStatus("loading"),this.abort=function(){o.reader.abort()},u.onabort=function(){o.changeStatus("abort")},u.onerror=function(){o.message=o.lang.filetools.loadError,o.changeStatus("error")},u.onprogress=function(f){o.loaded=f.loaded,o.update()},u.onload=function(){o.loaded=o.total,o.data=u.result,o.changeStatus("loaded")},u.readAsDataURL(this.file)},upload:function(o,u){var f=u||{};o?(this.uploadUrl=o,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:f})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function o(){"error"!=f.status&&(f.message=f.lang.filetools.networkError,f.changeStatus("error"))}function u(){"abort"!=f.status&&f.changeStatus("abort")}var f=this,i=this.xhr;f.abort=function(){i.abort(),u()},i.onerror=o,i.onabort=u,i.upload?(i.upload.onprogress=function(r){r.lengthComputable&&(f.uploadTotal||(f.uploadTotal=r.total),f.uploaded=r.loaded,f.update())},i.upload.onerror=o,i.upload.onabort=u):(f.uploadTotal=f.total,f.update()),i.onload=function(){if(f.update(),"abort"!=f.status)if(f.uploaded=f.uploadTotal,200>i.status||299<i.status)f.message=f.lang.filetools["httpError"+i.status],f.message||(f.message=f.lang.filetools.httpError.replace("%1",i.status)),f.changeStatus("error");else{for(var r={fileLoader:f},l=["message","fileName","url"],n=f.editor.fire("fileUploadResponse",r),t=0;t<l.length;t++){var c=l[t];"string"==typeof r[c]&&(f[c]=r[c])}f.responseData=r,delete f.responseData.fileLoader,f.changeStatus(!1===n?"error":"uploaded")}}},changeStatus:function(o){this.status=o,("error"==o||"abort"==o||"loaded"==o||"uploaded"==o)&&(this.abort=function(){}),this.fire(o),this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}},CKEDITOR.event.implementOn(e.prototype),CKEDITOR.event.implementOn(d.prototype);var a=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:e,fileLoader:d,getUploadUrl:function(o,u){var f=CKEDITOR.tools.capitalize;return u&&o[u+"UploadUrl"]?o[u+"UploadUrl"]:o.uploadUrl?o.uploadUrl:u&&o["filebrowser"+f(u,1)+"UploadUrl"]?o["filebrowser"+f(u,1)+"UploadUrl"]+"&responseType=json":o.filebrowserUploadUrl?o.filebrowserUploadUrl+"&responseType=json":null},isTypeSupported:function(o,u){return!!o.type.match(u)},isFileUploadSupported:"function"==typeof FileReader&&"function"==typeof(new FileReader).readAsDataURL&&"function"==typeof FormData&&"function"==typeof(new FormData).append&&"function"==typeof XMLHttpRequest&&"function"==typeof Blob})}(),function(){function e(t,c){var m=[];if(!c)return t;for(var g in c)m.push(g+"="+encodeURIComponent(c[g]));return t+(-1!=t.indexOf("?")?"&":"?")+m.join("&")}function d(t){return!t.match(/command=QuickUpload/)||t.match(/(\?|&)responseType=json/)?t:e(t,{responseType:"json"})}function s(t){return(t+="").charAt(0).toUpperCase()+t.substr(1)}function a(){var c=(t=this.getDialog()).getParentEditor();c._.filebrowserSe=this;var m=c.config["filebrowser"+s(t.getName())+"WindowWidth"]||c.config.filebrowserWindowWidth||"80%",t=c.config["filebrowser"+s(t.getName())+"WindowHeight"]||c.config.filebrowserWindowHeight||"70%",g=this.filebrowser.params||{};g.CKEditor=c.name,g.CKEditorFuncNum=c._.filebrowserFn,g.langCode||(g.langCode=c.langCode),g=e(this.filebrowser.url,g),c.popup(g,m,t,c.config.filebrowserWindowFeatures||c.config.fileBrowserWindowFeatures)}function o(t){var c=new CKEDITOR.dom.element(t.$.form);c&&((t=c.$.elements.ckCsrfToken)?t=new CKEDITOR.dom.element(t):((t=new CKEDITOR.dom.element("input")).setAttributes({name:"ckCsrfToken",type:"hidden"}),c.append(t)),t.setAttribute("value",CKEDITOR.tools.getCsrfToken()))}function u(){var t=this.getDialog();return t.getParentEditor()._.filebrowserSe=this,!(!t.getContentElement(this.for[0],this.for[1]).getInputElement().$.value||!t.getContentElement(this.for[0],this.for[1]).getAction())}function f(t,c,m){var g=m.params||{};g.CKEditor=t.name,g.CKEditorFuncNum=t._.filebrowserFn,g.langCode||(g.langCode=t.langCode),c.action=e(m.url,g),c.filebrowser=m}function i(t,c,m,g){if(g&&g.length)for(var C,h=g.length;h--;)if("hbox"!=(C=g[h]).type&&"vbox"!=C.type&&"fieldset"!=C.type||i(t,c,m,C.children),C.filebrowser)if("string"==typeof C.filebrowser&&(C.filebrowser={action:"fileButton"==C.type?"QuickUpload":"Browse",target:C.filebrowser}),"Browse"==C.filebrowser.action){var I=C.filebrowser.url;void 0===I&&void 0===(I=t.config["filebrowser"+s(c)+"BrowseUrl"])&&(I=t.config.filebrowserBrowseUrl),I&&(C.onClick=a,C.filebrowser.url=I,C.hidden=!1)}else if("QuickUpload"==C.filebrowser.action&&C.for&&(void 0===(I=C.filebrowser.url)&&void 0===(I=t.config["filebrowser"+s(c)+"UploadUrl"])&&(I=t.config.filebrowserUploadUrl),I)){var D=C.onClick;C.onClick=function(k){var b=k.sender,p=b.getDialog().getContentElement(this.for[0],this.for[1]).getInputElement(),O=CKEDITOR.fileTools&&CKEDITOR.fileTools.isFileUploadSupported;return(!D||!1!==D.call(b,k))&&!!u.call(b,k)&&("form"!==t.config.filebrowserUploadMethod&&O?((k=t.uploadRepository.create(p.$.files[0])).on("uploaded",function(R){var _=R.sender.responseData;n.call(R.sender.editor,_.url,_.message)}),k.on("error",r.bind(this)),k.on("abort",r.bind(this)),k.loadAndUpload(d(I)),"xhr"):(o(p),!0))},C.filebrowser.url=I,C.hidden=!1,f(t,m.getContents(C.for[0]).get(C.for[1]),C.filebrowser)}}function r(t){var c={};try{c=JSON.parse(t.sender.xhr.response)||{}}catch(m){}this.enable(),alert(c.error?c.error.message:t.sender.message)}function l(t,c,m){if(-1!==m.indexOf(";")){m=m.split(";");for(var g=0;g<m.length;g++)if(l(t,c,m[g]))return!0;return!1}return(t=t.getContents(c).get(m).filebrowser)&&t.url}function n(t,c){var m=this._.filebrowserSe.getDialog(),g=this._.filebrowserSe.for,C=this._.filebrowserSe.filebrowser.onSelect;g&&m.getContentElement(g[0],g[1]).reset(),("function"!=typeof c||!1!==c.call(this._.filebrowserSe))&&(!C||!1!==C.call(this._.filebrowserSe,t,c))&&("string"==typeof c&&c&&alert(c),t&&(m=(g=this._.filebrowserSe).getDialog(),g=g.filebrowser.target||null)&&(g=g.split(":"),(C=m.getContentElement(g[0],g[1]))&&(C.setValue(t),m.selectPage(g[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup,filetools",init:function(t){t._.filebrowserFn=CKEDITOR.tools.addFunction(n,t),t.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(t){if(t.editor.plugins.filebrowser)for(var m,c=t.data.definition,g=0;g<c.contents.length;++g)(m=c.contents[g])&&(i(t.editor,t.data.name,c,m.elements),m.hidden&&m.filebrowser&&(m.hidden=!l(c,m.id,m.filebrowser)))})}(),function(){var d=CKEDITOR.document.getWindow(),s=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(a){a.on("loaded",function(){!function(a){var o=a.config,u=a.fire("uiSpace",{space:"top",html:""}).html,f=function(){function t(_,w,v){r.setStyle(w,s(v)),r.setStyle("position",_)}function c(_){var w=g.getDocumentPosition();switch(_){case"top":t("absolute","top",w.y-D-p);break;case"pin":t("fixed","top",R);break;case"bottom":t("absolute","top",w.y+(h.height||h.bottom-h.top)+p)}m=_}var m,g,C,h,I,D,k,b=o.floatSpaceDockedOffsetX||0,p=o.floatSpaceDockedOffsetY||0,O=o.floatSpacePinnedOffsetX||0,R=o.floatSpacePinnedOffsetY||0;return function(_){if(g=a.editable()){var w=_&&"focus"==_.name;w&&r.show(),a.fire("floatingSpaceLayout",{show:w}),r.removeStyle("left"),r.removeStyle("right"),C=r.getClientRect(),h=g.getClientRect(),I=d.getViewPaneSize(),D=C.height,k="pageXOffset"in d.$?d.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,m?(c(D+p<=h.top?"top":D+p>I.height-h.bottom?"pin":"bottom"),_=I.width/2,_=o.floatSpacePreferRight?"right":0<h.left&&h.right<I.width&&h.width>C.width?"rtl"==o.contentsLangDirection?"right":"left":_-h.left>h.right-_?"left":"right",C.width>I.width?(_="left",w=0):(w="left"==_?0<h.left?h.left:0:h.right<I.width?I.width-h.right:0)+C.width>I.width&&(_="left"==_?"right":"left",w=0),r.setStyle(_,s(("pin"==m?O:b)+w+("pin"==m?0:"left"==_?k:-k)))):(m="pin",c("pin"),f(_))}}}();if(u){var i=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(a.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(a.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),r=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(i.output({content:u,id:a.id,langDir:a.lang.dir,langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(o.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),l=CKEDITOR.tools.eventsBuffer(500,f),n=CKEDITOR.tools.eventsBuffer(100,f);r.unselectable(),r.on("mousedown",function(t){(t=t.data).getTarget().hasAscendant("a",1)||t.preventDefault()}),a.on("focus",function(t){f(t),a.on("change",l.input),d.on("scroll",n.input),d.on("resize",n.input)}),a.on("blur",function(){r.hide(),a.removeListener("change",l.input),d.removeListener("scroll",n.input),d.removeListener("resize",n.input)}),a.on("destroy",function(){d.removeListener("scroll",n.input),d.removeListener("resize",n.input),r.clearCustomData(),r.remove()}),a.focusManager.hasFocus&&r.show(),a.focusManager.add(r,1)}}(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),d=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" draggable="false" ondragstart="return false;" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),s=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" draggable="false" ondragstart="return false;" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),a=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(o,u){return this.addBlock(o,new CKEDITOR.ui.listBlock(this.getHolderElement(),u))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(o,u){var f=(u=u||{}).attributes||(u.attributes={});(this.multiSelect=!!u.multiSelect)&&(f["aria-multiselectable"]=!0),!f.role&&(f.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",f.role),(f=this.keys)[40]="next",f[9]="next",f[38]="prev",f[CKEDITOR.SHIFT+9]="prev",f[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(f[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var o=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(o),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(o){var u=this.toggle(o);this.onClick&&this.onClick(o,u)},this)),this._.click}},proto:{add:function(o,u,f){var i=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[o]=i,o={id:i,val:CKEDITOR.tools.htmlEncodeAttr(o).replace(a,"\\'"),onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(f||o),text:u||o},this._.pendingList.push(d.output(o))},startGroup:function(o){this._.close();var u=CKEDITOR.tools.getNextId();this._.groups[o]=u,this._.pendingHtml.push(s.output({id:u,label:o}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(o){var u=this.isMarked(o);return u?this.unmark(o):this.mark(o),!u},hideGroup:function(o){var u=(o=this.element.getDocument().getById(this._.groups[o]))&&o.getNext();o&&(o.setStyle("display","none"),u&&"ul"==u.getName()&&u.setStyle("display","none"))},hideItem:function(o){this.element.getDocument().getById(this._.items[o]).setStyle("display","none")},showAll:function(){var i,o=this._.items,u=this._.groups,f=this.element.getDocument();for(i in o)f.getById(o[i]).setStyle("display","");for(var r in u)i=(o=f.getById(u[r])).getNext(),o.setStyle("display",""),i&&"ul"==i.getName()&&i.setStyle("display","")},mark:function(o){this.multiSelect||this.unmarkAll(),o=this._.items[o];var u=this.element.getDocument().getById(o);u.addClass("cke_selected"),this.element.getDocument().getById(o+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(u)},markFirstDisplayed:function(){var o=this;this._.markFirstDisplayed(function(){o.multiSelect||o.unmarkAll()})},unmark:function(o){var u=this.element.getDocument(),f=u.getById(o=this._.items[o]);f.removeClass("cke_selected"),u.getById(o+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(f)},unmarkAll:function(){var f,o=this._.items,u=this.element.getDocument();for(f in o){var i=o[f];u.getById(i).removeClass("cke_selected"),u.getById(i+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(o){return this.element.getDocument().getById(this._.items[o]).hasClass("cke_selected")},focus:function(o){this._.focusIndex=-1;var f,u=this.element.getElementsByTag("a"),i=-1;if(o){for(f=this.element.getDocument().getById(this._.items[o]).getFirst();o=u.getItem(++i);)if(o.equals(f)){this._.focusIndex=i;break}}else this.element.focus();f&&setTimeout(function(){f.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="listbox"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"'),e=e+' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>";var d=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(s){CKEDITOR.tools.extend(this,s,{canGroup:!1,title:s.label,modes:{wysiwyg:1},editorFocus:1}),s=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=s.parent&&s.parent.getDocument()||CKEDITOR.document,s.className="cke_combopanel",s.block={multiSelect:s.multiSelect,attributes:s.attributes},s.toolbarRelated=!0,this._={panelDefinition:s,items:{},listeners:[]}},proto:{renderHtml:function(s){var a=[];return this.render(s,a),a.join("")},render:function(s,a){function o(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var m=this.modes[s.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;s.readOnly&&!this.readOnly&&(m=CKEDITOR.TRISTATE_DISABLED),this.setState(m),this.setValue(""),m!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var u=CKEDITOR.env,f="cke_"+this.id,i=CKEDITOR.tools.addFunction(function(m){c&&(s.unlockSelection(1),c=0),l.execute(m)},this),r=this,l={id:f,combo:this,focus:function(){CKEDITOR.document.getById(f).getChild(1).focus()},execute:function(m){var g=r._;if(g.state!=CKEDITOR.TRISTATE_DISABLED)if(r.createPanel(s),g.on)g.panel.hide();else{r.commit();var C=r.getValue();C?g.list.mark(C):g.list.unmarkAll(),g.panel.showBlock(r.id,new CKEDITOR.dom.element(m),4)}},clickFn:i};this._.listeners.push(s.on("activeFilterChange",o,this)),this._.listeners.push(s.on("mode",o,this)),this._.listeners.push(s.on("selectionChange",o,this)),!this.readOnly&&this._.listeners.push(s.on("readOnly",o,this));var n=CKEDITOR.tools.addFunction(function(m,g){var C=(m=new CKEDITOR.dom.event(m)).getKeystroke();switch(C){case 13:case 32:case 40:CKEDITOR.tools.callFunction(i,g);break;default:l.onkey(l,C)}m.preventDefault()}),t=CKEDITOR.tools.addFunction(function(){l.onfocus&&l.onfocus()}),c=0;return l.keyDownFn=n,u={id:f,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:u.gecko&&!u.hc?"":(this.title||"").replace("'",""),keydownFn:n,focusFn:t,clickFn:i},d.output(u,a),this.onRender&&this.onRender(),l},createPanel:function(s){if(!this._.panel){var o=this._.panelDefinition.block,u=(a=this._.panelDefinition).parent||CKEDITOR.document.getBody(),f="cke_combopanel__"+this.name,i=new CKEDITOR.ui.floatPanel(s,u,a),a=i.addListBlock(this.id,o),r=this;i.onShow=function(){this.element.addClass(f),r.setState(CKEDITOR.TRISTATE_ON),r._.on=1,r.editorFocus&&!s.focusManager.hasFocus&&s.focus(),r.onOpen&&r.onOpen()},i.onHide=function(l){this.element.removeClass(f),r.setState(r.modes&&r.modes[s.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),r._.on=0,!l&&r.onClose&&r.onClose()},i.onEscape=function(){i.hide(1)},a.onClick=function(l,n){r.onClick&&r.onClick.call(r,l,n),i.hide()},this._.panel=i,this._.list=a,i.getBlock(this.id).onHide=function(){r._.on=0,r.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(s,a){this._.value=s;var o=this.document.getById("cke_"+this.id+"_text");o&&(s||a?o.removeClass("cke_combo_inlinelabel"):(a=this.label,o.addClass("cke_combo_inlinelabel")),o.setText(void 0!==a?a:s))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(s){this._.list.mark(s)},hideItem:function(s){this._.list.hideItem(s)},hideGroup:function(s){this._.list.hideGroup(s)},showAll:function(){this._.list.showAll()},add:function(s,a,o){this._.items[s]=o||s,this._.list.add(s,a,o)},startGroup:function(s){this._.list.startGroup(s)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(s){if(this._.state!=s){var a=this.document.getById("cke_"+this.id);a.setState(s,"cke_combo"),s==CKEDITOR.TRISTATE_DISABLED?a.setAttribute("aria-disabled",!0):a.removeAttribute("aria-disabled"),this._.state=s}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))},destroy:function(){CKEDITOR.tools.array.forEach(this._.listeners,function(s){s.removeListener()}),this._.listeners=[]}},statics:{handler:{create:function(s){return new CKEDITOR.ui.richCombo(s)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(s,a){this.add(s,CKEDITOR.UI_RICHCOMBO,a)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var d=e.config,s=e.lang.format,a=d.format_tags.split(";"),o={},u=0,f=[],i=0;i<a.length;i++){var r=a[i],l=new CKEDITOR.style(d["format_"+r]);(!e.filter.customConfig||e.filter.check(l))&&(u++,o[r]=l,o[r]._.enterMode=e.config.enterMode,f.push(l))}0!==u&&e.ui.addRichCombo("Format",{label:s.label,title:s.panelTitle,toolbar:"styles,20",allowedContent:f,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(d.contentsCss),multiSelect:!1,attributes:{"aria-label":s.panelTitle}},init:function(){for(var n in this.startGroup(s.panelTitle),o){var t=s["tag_"+n];this.add(n,o[n].buildPreview(t),t)}},onClick:function(n){e.focus(),e.fire("saveSnapshot"),n=o[n];var t=e.elementPath();n.checkActive(t,e)||e.applyStyle(n),setTimeout(function(){e.fire("saveSnapshot")},0)},onRender:function(){e.on("selectionChange",function(n){var t=this.getValue();for(var c in n=n.data.path,this.refresh(),o)if(o[c].checkActive(n,e))return void(c!=t&&this.setValue(c,e.lang.format["tag_"+c]));this.setValue("")},this)},onOpen:function(){for(var n in this.showAll(),o)e.activeFilter.check(o[n])||this.hideItem(n)},refresh:function(){var n=e.elementPath();if(n){if(n.isContextFor("p"))for(var t in o)if(e.activeFilter.check(o[t]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(d){var s=d.document.createElement("hr");d.insertElement(s)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(d){d.blockless||(d.addCommand("horizontalrule",e),d.ui.addButton&&d.ui.addButton("HorizontalRule",{label:d.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var d=new CKEDITOR.htmlWriter;d.forceSimpleAmpersand=e.config.forceSimpleAmpersand,d.indentationChars=e.config.dataIndentationChars||"\t",e.dataProcessor.writer=d}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="\t",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var d,e=CKEDITOR.dtd;for(d in CKEDITOR.tools.extend({},e.$nonBodyContent,e.$block,e.$listItem,e.$tableContent))this.setRules(d,{indent:!e[d]["#"],breakBeforeOpen:1,breakBeforeClose:!e[d]["#"],breakAfterClose:1,needsSpace:d in e.$block&&!(d in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var d=this._.rules[e];this._.afterCloser&&d&&d.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():d&&d.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,d){var s=this._.rules[e];d?(this._.output.push(this.selfClosingEnd),s&&s.breakAfterClose&&(this._.needsSpace=s.needsSpace)):(this._.output.push(">"),s&&s.indent&&(this._.indentation+=this.indentationChars)),s&&s.breakAfterOpen&&this.lineBreak(),"pre"==e&&(this._.inPre=1)},attribute:function(e,d){"string"==typeof d&&(d=CKEDITOR.tools.htmlEncodeAttr(d),this.forceSimpleAmpersand&&(d=d.replace(/&amp;/g,"&"))),this._.output.push(" ",e,'="',d,'"')},closeTag:function(e){var d=this._.rules[e];d&&d.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():d&&d.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),"pre"==e&&(this._.inPre=0),d&&d.breakAfterClose&&(this.lineBreak(),this._.needsSpace=d.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("\x3c!--",e,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0,this._.needsSpace=0},setRules:function(e,d){var s=this._.rules[e];s?CKEDITOR.tools.extend(s,d,!0):this._.rules[e]=d}}}),function(){function e(s,a){if(a||(a=s.getSelection().getSelectedElement()),a&&a.is("img")&&!a.data("cke-realelement")&&!a.isReadOnly())return a}function d(s){var a=s.getStyle("float");return("inherit"==a||"none"==a)&&(a=0),a||(a=s.getAttribute("align")),a}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(s){if(!s.plugins.detectConflict("image",["easyimage","image2"])){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var a="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(s,"image","advanced")&&(a="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),s.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:a,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),s.ui.addButton&&s.ui.addButton("Image",{label:s.lang.common.image,command:"image",toolbar:"insert,10"}),s.on("doubleclick",function(o){var u=o.data.element;!u.is("img")||u.data("cke-realelement")||u.isReadOnly()||(o.data.dialog="image")}),s.addMenuItems&&s.addMenuItems({image:{label:s.lang.image.menu,command:"image",group:"image"}}),s.contextMenu&&s.contextMenu.addListener(function(o){if(e(s,o))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(s){function a(o){var u=s.getCommand("justify"+o);u&&(("left"==o||"right"==o)&&u.on("exec",function(f){var i=e(s);i&&(d(i)==o?(i.removeStyle("float"),o==d(i)&&i.removeAttribute("align")):i.setStyle("float",o),f.cancel())}),u.on("refresh",function(f){var i=e(s);i&&(i=d(i),this.setState(i==o?CKEDITOR.TRISTATE_ON:"right"==o||"left"==o?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),f.cancel())}))}s.plugins.image2||(a("left"),a("right"),a("center"),a("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function e(u,f){var i=a.exec(u),r=a.exec(f);if(i){if(!i[2]&&"px"==r[2])return r[1];if("px"==i[2]&&!r[2])return r[1]+"px"}return f}var d=CKEDITOR.htmlParser.cssStyle,s=CKEDITOR.tools.cssLength,a=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,o={elements:{$:function(u){var f=u.attributes;if((f=(f=(f=f&&f["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(f)))&&f.children[0])&&u.attributes["data-cke-resizable"]){var i=new d(u).rules;u=f.attributes;var r=i.width;i=i.height,r&&(u.width=e(u.width,r)),i&&(u.height=e(u.height,i))}return f}}};CKEDITOR.plugins.add("fakeobjects",{init:function(u){u.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(u){(u=(u=u.dataProcessor)&&u.htmlFilter)&&u.addRules(o,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(u,f,i,r){var l=(l=this.lang.fakeobjects)[i]||l.unknown;return f={class:f,"data-cke-realelement":encodeURIComponent(u.getOuterHtml()),"data-cke-real-node-type":u.type,alt:l,title:l,align:u.getAttribute("align")||""},CKEDITOR.env.hc||(f.src=CKEDITOR.tools.transparentImageData),i&&(f["data-cke-real-element-type"]=i),r&&(f["data-cke-resizable"]=r,i=new d,r=u.getAttribute("width"),u=u.getAttribute("height"),r&&(i.rules.width=s(r)),u&&(i.rules.height=s(u)),i.populate(f)),this.document.createElement("img",{attributes:f})},CKEDITOR.editor.prototype.createFakeParserElement=function(u,f,i,r){var n,l=(l=this.lang.fakeobjects)[i]||l.unknown;return n=new CKEDITOR.htmlParser.basicWriter,u.writeHtml(n),n=n.getHtml(),f={class:f,"data-cke-realelement":encodeURIComponent(n),"data-cke-real-node-type":u.type,alt:l,title:l,align:u.attributes.align||""},CKEDITOR.env.hc||(f.src=CKEDITOR.tools.transparentImageData),i&&(f["data-cke-real-element-type"]=i),r&&(f["data-cke-resizable"]=r,r=u.attributes,u=new d,i=r.width,r=r.height,void 0!==i&&(u.rules.width=s(i)),void 0!==r&&(u.rules.height=s(r)),u.populate(f)),new CKEDITOR.htmlParser.element("img",f)},CKEDITOR.editor.prototype.restoreRealElement=function(u){if(u.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var f=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(u.data("cke-realelement")),this.document);if(u.data("cke-resizable")){var i=u.getStyle("width");u=u.getStyle("height"),i&&f.setAttribute("width",e(f.getAttribute("width"),i)),u&&f.setAttribute("height",e(f.getAttribute("height"),u))}return f}}(),function(){function e(I){return I.replace(/'/g,"\\$&")}function d(I){for(var D,k=I.length,b=[],p=0;p<k;p++)D=I.charCodeAt(p),b.push(D);return"String.fromCharCode("+b.join(",")+")"}function s(I,D){var p,O,k=I.plugins.link,b=k.compiledProtectionFunction.params;O=[k.compiledProtectionFunction.name,"("];for(var R=0;R<b.length;R++)p=D[k=b[R].toLowerCase()],0<R&&O.push(","),O.push("'",p?e(encodeURIComponent(D[k])):"","'");return O.push(")"),O.join("")}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function I(b){return k.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var D="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",k=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+D+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+D+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(I("ltr")+I("rtl"))},init:function(I){var D="a[!href]";CKEDITOR.dialog.isTabEnabled(I,"link","advanced")&&(D=D.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)")),CKEDITOR.dialog.isTabEnabled(I,"link","target")&&(D=D.replace("]",",target,onclick]")),I.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:D,requiredContent:"a[href]"})),I.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),I.addCommand("unlink",new CKEDITOR.unlinkCommand),I.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),I.setKeystroke(CKEDITOR.CTRL+76,"link"),I.setKeystroke(CKEDITOR.CTRL+75,"link"),I.ui.addButton&&(I.ui.addButton("Link",{label:I.lang.link.toolbar,command:"link",toolbar:"links,10"}),I.ui.addButton("Unlink",{label:I.lang.link.unlink,command:"unlink",toolbar:"links,20"}),I.ui.addButton("Anchor",{label:I.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),I.on("doubleclick",function(k){var b=k.data.element.getAscendant({a:1,img:1},!0);b&&!b.isReadOnly()&&(b.is("a")?(k.data.dialog=!b.getAttribute("name")||b.getAttribute("href")&&b.getChildCount()?"link":"anchor",k.data.link=b):CKEDITOR.plugins.link.tryRestoreFakeAnchor(I,b)&&(k.data.dialog="anchor"))},null,null,0),I.on("doubleclick",function(k){k.data.dialog in{link:1,anchor:1}&&k.data.link&&I.getSelection().selectElement(k.data.link)},null,null,20),I.addMenuItems&&I.addMenuItems({anchor:{label:I.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:I.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:I.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:I.lang.link.unlink,command:"unlink",group:"link",order:5}}),I.contextMenu&&I.contextMenu.addListener(function(k){if(!k||k.isReadOnly()||!(k=CKEDITOR.plugins.link.tryRestoreFakeAnchor(I,k))&&!(k=CKEDITOR.plugins.link.getSelectedLink(I)))return null;var b={};return k.getAttribute("href")&&k.getChildCount()&&(b={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),k&&k.hasAttribute("name")&&(b.anchor=b.removeAnchor=CKEDITOR.TRISTATE_OFF),b}),this.compiledProtectionFunction=function(I){var D;return(I=I.config.emailProtection||"")&&"encode"!=I&&(D={},I.replace(/^([^(]+)\(([^)]+)\)$/,function(k,b,p){D.name=b,D.params=[],p.replace(/[^,\s]+/g,function(O){D.params.push(O)})})),D}(I)},afterInit:function(I){I.dataProcessor.dataFilter.addRules({elements:{a:function(k){return k.attributes.name?k.children.length?null:I.createFakeParserElement(k,"cke_anchor","anchor"):null}}});var D=I._.elementsPath&&I._.elementsPath.filters;D&&D.push(function(k,b){if("a"==b&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(I,k)||k.getAttribute("name")&&(!k.getAttribute("href")||!k.getChildCount())))return"anchor"})}});var o=/^javascript:/,u=/^mailto:([^?]+)(?:\?(.+))?$/,f=/subject=([^;?:@&=$,\/]*)/i,i=/body=([^;?:@&=$,\/]*)/i,r=/^#(.*)$/,l=/^((?:http|https|ftp|news):\/\/)?(.*)$/,n=/^(_(?:self|top|parent|blank))$/,t=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,c=/^javascript:([^(]+)\(([^)]+)\)$/,m=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,g=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,C=/^tel:(.*)$/,h={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(I,D){var R,k=I.getSelection(),b=k.getSelectedElement(),p=k.getRanges(),O=[];if(!D&&b&&b.is("a"))return b;for(b=0;b<p.length;b++)if((R=k.getRanges()[b]).shrink(CKEDITOR.SHRINK_ELEMENT,!0,{skipBogus:!0}),(R=I.elementPath(R.getCommonAncestor()).contains("a",1))&&D)O.push(R);else if(R)return R;return D?O:null},getEditorAnchors:function(I){for(var O,D=(k=(D=I.editable()).isInline()&&!I.plugins.divarea?I.document:D).getElementsByTag("a"),k=k.getElementsByTag("img"),b=[],p=0;O=D.getItem(p++);)(O.data("cke-saved-name")||O.hasAttribute("name"))&&b.push({name:O.data("cke-saved-name")||O.getAttribute("name"),id:O.getAttribute("id")});for(p=0;O=k.getItem(p++);)(O=this.tryRestoreFakeAnchor(I,O))&&b.push({name:O.getAttribute("name"),id:O.getAttribute("id")});return b},fakeAnchor:!0,tryRestoreFakeAnchor:function(I,D){if(D&&D.data("cke-real-element-type")&&"anchor"==D.data("cke-real-element-type")){var k=I.restoreRealElement(D);if(k.data("cke-saved-name"))return k}},parseLinkAttributes:function(I,D){var O,k=D&&(D.data("cke-saved-href")||D.getAttribute("href"))||"",b=I.plugins.link.compiledProtectionFunction,p=I.config.emailProtection,R={};if(k.match(o)&&("encode"==p?k=k.replace(t,function(v,K,y){return y=y||"","mailto:"+String.fromCharCode.apply(String,K.split(","))+y.replace(/\\'/g,"'")}):p&&k.replace(c,function(v,K,y){if(K==b.name){R.type="email",v=R.email={},K=/(^')|('$)/g;for(var x,F=(y=y.match(/[^,\s]+/g)).length,T=0;T<F;T++)x=decodeURIComponent(x=y[T].replace(K,"").replace(/\\'/g,"'")),v[b.params[T].toLowerCase()]=x;v.address=[v.name,v.domain].join("@")}})),!R.type)if(p=k.match(r))R.type="anchor",R.anchor={},R.anchor.name=R.anchor.id=p[1];else if(p=k.match(C))R.type="tel",R.tel=p[1];else if(p=k.match(u)){O=k.match(f),k=k.match(i),R.type="email";var _=R.email={};_.address=p[1],O&&(_.subject=decodeURIComponent(O[1])),k&&(_.body=decodeURIComponent(k[1]))}else k&&(O=k.match(l))&&(R.type="url",R.url={},R.url.protocol=O[1],R.url.url=O[2]);if(D){if(k=D.getAttribute("target"))R.target={type:k.match(n)?k:"frame",name:k};else if(k=(k=D.data("cke-pa-onclick")||D.getAttribute("onclick"))&&k.match(m))for(R.target={type:"popup",name:k[1]};p=g.exec(k[2]);)"yes"!=p[2]&&"1"!=p[2]||p[1]in{height:1,width:1,top:1,left:1}?isFinite(p[2])&&(R.target[p[1]]=p[2]):R.target[p[1]]=!0;var w;for(w in null!==D.getAttribute("download")&&(R.download=!0),k={},h)(p=D.getAttribute(w))&&(k[h[w]]=p);(w=D.data("cke-saved-name")||k.advName)&&(k.advName=w),CKEDITOR.tools.isEmpty(k)||(R.advanced=k)}return R},getLinkAttributes:function(I,D){var k=I.config.emailProtection||"",b={};switch(D.type){case"url":k=D.url&&void 0!==D.url.protocol?D.url.protocol:"http://";var p=D.url&&CKEDITOR.tools.trim(D.url.url)||"";b["data-cke-saved-href"]=0===p.indexOf("/")?p:k+p;break;case"anchor":k=D.anchor&&D.anchor.id,b["data-cke-saved-href"]="#"+(D.anchor&&D.anchor.name||k||"");break;case"email":switch(p=(O=D.email).address,k){case"":case"encode":var R=encodeURIComponent(O.subject||""),_=encodeURIComponent(O.body||""),O=[];R&&O.push("subject="+R),_&&O.push("body="+_),O=O.length?"?"+O.join("&"):"","encode"==k?(k=["javascript:void(location.href='mailto:'+",d(p)],O&&k.push("+'",e(O),"'"),k.push(")")):k=["mailto:",p,O];break;default:k=p.split("@",2),O.name=k[0],O.domain=k[1],k=["javascript:",s(I,O)]}b["data-cke-saved-href"]=k.join("");break;case"tel":b["data-cke-saved-href"]="tel:"+D.tel}if(D.target)if("popup"==D.target.type){k=["window.open(this.href, '",D.target.name||"","', '"];var w="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" ");for(p=w.length,R=function(T){D.target[T]&&w.push(T+"="+D.target[T])},O=0;O<p;O++)w[O]+=D.target[w[O]]?"=yes":"=no";R("width"),R("left"),R("height"),R("top"),k.push(w.join(","),"'); return false;"),b["data-cke-pa-onclick"]=k.join("")}else"notSet"!=D.target.type&&D.target.name&&(b.target=D.target.name);if(D.download&&(b.download=""),D.advanced){for(var v in h)(k=D.advanced[h[v]])&&(b[v]=k);b.name&&(b["data-cke-saved-name"]=b.name)}for(var K in b["data-cke-saved-href"]&&(b.href=b["data-cke-saved-href"]),v={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1},D.advanced&&CKEDITOR.tools.extend(v,h),b)delete v[K];return{set:b,removed:CKEDITOR.tools.object.keys(v)}},showDisplayTextForElement:function(I,D){var b=D.getSelection();return!(D.widgets&&D.widgets.focused||b&&1<b.getRanges().length||I&&I.getName&&I.is({img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1}))}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(I){if(CKEDITOR.env.ie){var b,D=I.getSelection().getRanges()[0],k=D.getPreviousEditableNode()&&D.getPreviousEditableNode().getAscendant("a",!0)||D.getNextEditableNode()&&D.getNextEditableNode().getAscendant("a",!0);D.collapsed&&k&&(b=D.createBookmark(),D.selectNodeContents(k),D.select())}k=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1}),I.removeStyle(k),b&&(D.moveToBookmark(b),D.select())},refresh:function(I,D){var k=D.lastElement&&D.lastElement.getAscendant("a",!0);k&&"a"==k.getName()&&k.getAttribute("href")&&k.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(I){var b,D=I.getSelection(),k=D.createBookmarks();D&&(b=D.getSelectedElement())&&(b.getChildCount()?b.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(I,b))?b.remove(1):(b=CKEDITOR.plugins.link.getSelectedLink(I))&&(b.hasAttribute("href")?(b.removeAttributes({name:1,"data-cke-saved-name":1}),b.removeClass("cke_anchor")):b.remove(1)),D.selectBookmarks(k)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function e(V,X,ee){return t(X)&&t(ee)&&ee.equals(X.getNext(function(Q){return!(M(Q)||U(Q)||c(Q))}))}function d(V){this.upper=V[0],this.lower=V[1],this.set.apply(this,V.slice(2))}function s(V){var X=V.element;if(X&&t(X)&&(X=X.getAscendant(V.triggers,!0))&&V.editable.contains(X)){var ee=f(X);if("true"==ee.getAttribute("contenteditable"))return X;if(ee.is(V.triggers))return ee}return null}function a(V,X,ee){return b(V,X),b(V,ee),ee=ee.size.top,(V=X.size.bottom)&&ee?0|(V+ee)/2:V||ee}function o(V,X,ee){return X[ee?"getPrevious":"getNext"](function(Q){return Q&&Q.type==CKEDITOR.NODE_TEXT&&!M(Q)||t(Q)&&!c(Q)&&!n(V,Q)})}function u(V,X,ee){return V>X&&V<ee}function f(V,X){if(V.data("cke-editable"))return null;for(X||(V=V.getParent());V&&!V.data("cke-editable");){if(V.hasAttribute("contenteditable"))return V;V=V.getParent()}return null}function i(V){var X=V.doc,ee=v('<span contenteditable="false" data-cke-magic-line="1" style="'+Z+"position:absolute;border-top:1px dashed "+V.boxColor+'"></span>',X),Q=CKEDITOR.getUrl(this.path+"images/"+(K.hidpi?"hidpi/":"")+"icon"+(V.rtl?"-rtl":"")+".png");for(_(ee,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(V.editable,!0),this},lineChildren:[_(v('<span title="'+V.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',X),{base:Z+"height:17px;width:17px;"+(V.rtl?"left":"right")+":17px;background:url("+Q+") center no-repeat "+V.boxColor+";cursor:pointer;"+(K.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(K.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),_(v(S,X),{base:te+"left:0px;border-left-color:"+V.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),_(v(S,X),{base:te+"right:0px;border-right-color:"+V.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){b(V,this);var ne=V.holdDistance,ie=this.size;return!!(ie&&u(V.mouse.y,ie.top-ne,ie.bottom+ne)&&u(V.mouse.x,ie.left-ne,ie.right+ne))},place:function(){var ne=V.view,ie=V.editable,re=V.trigger,oe=re.upper,se=re.lower,le=oe||se,ce=le.getParent(),ae={};for(var de in this.trigger=re,oe&&b(V,oe,!0),se&&b(V,se,!0),b(V,ce,!0),V.inInlineMode&&p(V,!0),ce.equals(ie)?(ae.left=ne.scroll.x,ae.right=-ne.scroll.x,ae.width=""):(ae.left=le.size.left-le.size.margin.left+ne.scroll.x-(V.inInlineMode?ne.editable.left+ne.editable.border.left:0),ae.width=le.size.outerWidth+le.size.margin.left+le.size.margin.right+ne.scroll.x,ae.right=""),oe&&se?ae.top=oe.size.margin.bottom===se.size.margin.top?0|oe.size.bottom+oe.size.margin.bottom/2:oe.size.margin.bottom<se.size.margin.top?oe.size.bottom+oe.size.margin.bottom:oe.size.bottom+oe.size.margin.bottom-se.size.margin.top:oe?se||(ae.top=oe.size.bottom+oe.size.margin.bottom):ae.top=se.size.top-se.size.margin.top,re.is(P)||u(ae.top,ne.scroll.y-15,ne.scroll.y+5)?(ae.top=V.inInlineMode?0:ne.scroll.y,this.look(P)):re.is(H)||u(ae.top,ne.pane.bottom-5,ne.pane.bottom+15)?(ae.top=V.inInlineMode?ne.editable.height+ne.editable.padding.top+ne.editable.padding.bottom:ne.pane.bottom-1,this.look(H)):(V.inInlineMode&&(ae.top-=ne.editable.top+ne.editable.border.top),this.look(E)),V.inInlineMode&&(ae.top--,ae.top+=ne.editable.scroll.top,ae.left+=ne.editable.scroll.left),ae)ae[de]=CKEDITOR.tools.cssLength(ae[de]);this.setStyles(ae)},look:function(ne){if(this.oldLook!=ne){for(var re,ie=this.lineChildren.length;ie--;)(re=this.lineChildren[ie]).setAttribute("style",re.base+re.looks[0|ne/2]);this.oldLook=ne}},wrap:new w("span",V.doc)}),X=ee.lineChildren.length;X--;)ee.lineChildren[X].appendTo(ee);ee.look(E),ee.appendTo(ee.wrap),ee.unselectable(),ee.lineChildren[0].on("mouseup",function(ne){ee.detach(),r(V,function(ie){var re=V.line.trigger;ie[re.is(x)?"insertBefore":"insertAfter"](re.is(x)?re.lower:re.upper)},!0),V.editor.focus(),K.ie||V.enterMode==CKEDITOR.ENTER_BR||V.hotNode.scrollIntoView(),ne.data.preventDefault(!0)}),ee.on("mousedown",function(ne){ne.data.preventDefault(!0)}),V.line=ee}function r(V,X,ee){var ie,Q=new CKEDITOR.dom.range(V.doc),ne=V.editor;K.ie&&V.enterMode==CKEDITOR.ENTER_BR?ie=V.doc.createText(L):(ie=(ie=f(V.element,!0))&&ie.data("cke-enter-mode")||V.enterMode,(ie=new w(W[ie],V.doc)).is("br")||V.doc.createText(L).appendTo(ie)),ee&&ne.fire("saveSnapshot"),X(ie),Q.moveToPosition(ie,CKEDITOR.POSITION_AFTER_START),ne.getSelection().selectRanges([Q]),V.hotNode=ie,ee&&ne.fire("saveSnapshot")}function l(V,X){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function ee(Q){var ne=K.ie&&9>K.version?" ":L,ie=V.hotNode&&V.hotNode.getText()==ne&&V.element.equals(V.hotNode)&&V.lastCmdDirection===!!X;r(V,function(re){ie&&V.hotNode&&V.hotNode.remove(),re[X?"insertAfter":"insertBefore"](Q),re.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!X}),V.lastCmdDirection=!!X}),K.ie||V.enterMode==CKEDITOR.ENTER_BR||V.hotNode.scrollIntoView(),V.line.detach()}return function(Q){var ne,ie;Q=(Q=Q.getSelection().getStartElement()).getAscendant(G,1),C(V,Q)||!Q||Q.equals(V.editable)||Q.contains(V.editable)||((ne=f(Q))&&"false"==ne.getAttribute("contenteditable")&&(Q=ne),V.element=Q,t(ne=o(V,Q,!X))&&ne.is(V.triggers)&&ne.is(j)&&(!o(V,ne,!X)||(ie=o(V,ne,!X))&&t(ie)&&ie.is(V.triggers))?ee(ne):t(ie=s(V))&&(o(V,ie,!X)?(Q=o(V,ie,!X))&&t(Q)&&Q.is(V.triggers)&&ee(ie):ee(ie)))}}()}}function n(V,X){if(!X||X.type!=CKEDITOR.NODE_ELEMENT||!X.$)return!1;var ee=V.line;return ee.wrap.equals(X)||ee.wrap.contains(X)}function t(V){return V&&V.type==CKEDITOR.NODE_ELEMENT&&V.$}function c(V){return!!t(V)&&((X=m(V))||(X=!(!t(V)||!(X={left:1,right:1,center:1})[V.getComputedStyle("float")]&&!X[V.getAttribute("align")])),X);var X}function m(V){return!!{absolute:1,fixed:1}[V.getComputedStyle("position")]}function g(V,X){return t(X)?X.is(V.triggers):null}function C(V,X){if(!X)return!1;for(var ee=X.getParents(1),Q=ee.length;Q--;)for(var ne=V.tabuList.length;ne--;)if(ee[Q].hasAttribute(V.tabuList[ne]))return!0;return!1}function I(V){var X=V.editable,ee=V.mouse,Q=V.view,ne=V.triggerOffset;p(V);var ie=ee.y>(V.inInlineMode?Q.editable.top+Q.editable.height/2:Math.min(Q.editable.height,Q.pane.height)/2);return(X=X[ie?"getLast":"getFirst"](function(re){return!(M(re)||U(re))}))&&(n(V,X)&&(X=V.line.wrap[ie?"getPrevious":"getNext"](function(re){return!(M(re)||U(re))})),t(X)&&!c(X)&&g(V,X))?(b(V,X),!ie&&0<=X.size.top&&u(ee.y,0,X.size.top+ne)?new d([null,X,x,A,V=V.inInlineMode||0===Q.scroll.y?P:E]):ie&&X.size.bottom<=Q.pane.height&&u(ee.y,X.size.bottom-ne,Q.pane.height)?(V=V.inInlineMode||u(X.size.bottom,Q.pane.height-ne,Q.pane.height)?H:E,new d([X,null,T,A,V])):null):null}function D(V){var X=V.mouse,ee=V.view,Q=V.triggerOffset,ne=s(V);if(!ne)return null;b(V,ne),Q=Math.min(Q,0|ne.size.outerHeight/2);var re,oe,ie=[];if(u(X.y,ne.size.top-1,ne.size.top+Q))oe=!1;else{if(!u(X.y,ne.size.bottom-Q,ne.size.bottom+1))return null;oe=!0}if(c(ne)||function(V,X,ee){return!!(X=X[ee?"getLast":"getFirst"](function(Q){return V.isRelevant(Q)&&!Q.is(q)}))&&(b(V,X),ee?X.size.top>V.mouse.y:X.size.bottom<V.mouse.y)}(V,ne,oe)||ne.getParent().is(B))return null;var se=o(V,ne,!oe);if(se){if(se&&se.type==CKEDITOR.NODE_TEXT)return null;if(t(se)){if(c(se)||!g(V,se)||se.getParent().is(B))return null;ie=[se,ne][oe?"reverse":"concat"]().concat([N,A])}}else ne.equals(V.editable[oe?"getLast":"getFirst"](V.isRelevant))?(p(V),oe&&u(X.y,ne.size.bottom-Q,ee.pane.height)&&u(ne.size.bottom,ee.pane.height-Q,ee.pane.height)?re=H:u(X.y,0,ne.size.top+Q)&&(re=P)):re=E,ie=[null,ne][oe?"reverse":"concat"]().concat([oe?T:x,A,re,ne.equals(V.editable[oe?"getLast":"getFirst"](V.isRelevant))?oe?H:P:E]);return 0 in ie?new d(ie):null}function k(V,X,ee,Q){for(var ne=X.getDocumentPosition(),ie={},re={},oe={},se={},le=J.length;le--;)ie[J[le]]=parseInt(X.getComputedStyle.call(X,"border-"+J[le]+"-width"),10)||0,oe[J[le]]=parseInt(X.getComputedStyle.call(X,"padding-"+J[le]),10)||0,re[J[le]]=parseInt(X.getComputedStyle.call(X,"margin-"+J[le]),10)||0;return ee&&!Q||O(V,Q),se.top=ne.y-(ee?0:V.view.scroll.y),se.left=ne.x-(ee?0:V.view.scroll.x),se.outerWidth=X.$.offsetWidth,se.outerHeight=X.$.offsetHeight,se.height=se.outerHeight-(oe.top+oe.bottom+ie.top+ie.bottom),se.width=se.outerWidth-(oe.left+oe.right+ie.left+ie.right),se.bottom=se.top+se.outerHeight,se.right=se.left+se.outerWidth,V.inInlineMode&&(se.scroll={top:X.$.scrollTop,left:X.$.scrollLeft}),_({border:ie,padding:oe,margin:re,ignoreScroll:ee},se,!0)}function b(V,X,ee){if(!t(X))return X.size=null;if(X.size){if(X.size.ignoreScroll==ee&&X.size.date>new Date-Y)return null}else X.size={};return _(X.size,k(V,X,ee),{date:+new Date},!0)}function p(V,X){V.view.editable=k(V,V.editable,X,!0)}function O(V,X){V.view||(V.view={});var ee=V.view;if(!(!X&&ee&&ee.date>new Date-Y)){ee=(Q=V.win).getScrollPosition();var Q=Q.getViewPaneSize();_(V.view,{scroll:{x:ee.x,y:ee.y,width:V.doc.$.documentElement.scrollWidth-Q.width,height:V.doc.$.documentElement.scrollHeight-Q.height},pane:{width:Q.width,height:Q.height,bottom:Q.height+ee.y},date:+new Date},!0)}}CKEDITOR.plugins.add("magicline",{init:function(V){var ne,ie,re,X=V.config,ee=X.magicline_triggerOffset||30,Q={editor:V,enterMode:X.enterMode,triggerOffset:ee,holdDistance:0|ee*(X.magicline_holdDistance||.5),boxColor:X.magicline_color||"#ff0000",rtl:"rtl"==X.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(X.magicline_tabuList||[]),triggers:X.magicline_everywhere?G:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1},isRelevant:function(oe){return t(oe)&&!n(Q,oe)&&!c(oe)}};V.on("contentDom",function(){var oe=V.editable(),se=V.document,le=V.window;_(Q,{editable:oe,inInlineMode:oe.isInline(),doc:se,win:le,hotNode:null},!0),Q.boundary=Q.inInlineMode?Q.editable:Q.doc.getDocumentElement(),oe.is(F.$inline)||(Q.inInlineMode&&!m(oe)&&oe.setStyles({position:"relative",top:null,left:null}),i.call(this,Q),O(Q),oe.attachListener(V,"beforeUndoImage",function(){Q.line.detach()}),oe.attachListener(V,"beforeGetData",function(){Q.line.wrap.getParent()&&(Q.line.detach(),V.once("getData",function(){Q.line.attach()},null,null,1e3))},null,null,0),oe.attachListener(Q.inInlineMode?se:se.getWindow().getFrame(),"mouseout",function(ce){if("wysiwyg"==V.mode)if(Q.inInlineMode){var ae=ce.data.$.clientX;ce=ce.data.$.clientY,O(Q),p(Q,!0);var de=Q.view.editable,ue=Q.view.scroll;ae>de.left-ue.x&&ae<de.right-ue.x&&ce>de.top-ue.y&&ce<de.bottom-ue.y||(clearTimeout(re),re=null,Q.line.detach())}else clearTimeout(re),re=null,Q.line.detach()}),oe.attachListener(oe,"keyup",function(){Q.hiddenMode=0}),oe.attachListener(oe,"keydown",function(ce){if("wysiwyg"==V.mode)switch(ce.data.getKeystroke()){case 2228240:case 16:Q.hiddenMode=1,Q.line.detach()}}),oe.attachListener(Q.inInlineMode?oe:se,"mousemove",function(ce){if(ie=!0,"wysiwyg"==V.mode&&!V.readOnly&&!re){var ae={x:ce.data.$.clientX,y:ce.data.$.clientY};re=setTimeout(function(){Q.mouse=ae,re=Q.trigger=null,O(Q),ie&&!Q.hiddenMode&&V.focusManager.hasFocus&&!Q.line.mouseNear()&&(Q.element=$(Q,!0))&&((Q.trigger=I(Q)||D(Q)||z(Q))&&!C(Q,Q.trigger.upper||Q.trigger.lower)?Q.line.attach().place():(Q.trigger=null,Q.line.detach()),ie=!1)},30)}}),oe.attachListener(le,"scroll",function(){"wysiwyg"==V.mode&&(Q.line.detach(),K.webkit&&(Q.hiddenMode=1,clearTimeout(ne),ne=setTimeout(function(){Q.mouseDown||(Q.hiddenMode=0)},50)))}),oe.attachListener(y?se:le,"mousedown",function(){"wysiwyg"==V.mode&&(Q.line.detach(),Q.hiddenMode=1,Q.mouseDown=1)}),oe.attachListener(y?se:le,"mouseup",function(){Q.hiddenMode=0,Q.mouseDown=0}),V.addCommand("accessPreviousSpace",l(Q)),V.addCommand("accessNextSpace",l(Q,!0)),V.setKeystroke([[X.magicline_keystrokePrevious,"accessPreviousSpace"],[X.magicline_keystrokeNext,"accessNextSpace"]]),V.on("loadSnapshot",function(){var ce,ae,de,ue;for(ue in{p:1,br:1,div:1})for(de=(ce=V.document.getElementsByTag(ue)).count();de--;)if((ae=ce.getItem(de)).data("cke-magicline-hot"))return Q.hotNode=ae,void(Q.lastCmdDirection="true"===ae.data("cke-magicline-dir"))}),V._.magiclineBackdoor={accessFocusSpace:r,boxTrigger:d,isLine:n,getAscendantTrigger:s,getNonEmptyNeighbour:o,getSize:k,that:Q,triggerEdge:D,triggerEditable:I,triggerExpand:z})},this)}});var _=CKEDITOR.tools.extend,w=CKEDITOR.dom.element,v=w.createFromHtml,K=CKEDITOR.env,y=CKEDITOR.env.ie&&9>CKEDITOR.env.version,F=CKEDITOR.dtd,W={},x=128,T=64,N=32,A=16,P=4,H=2,E=1,L="\xa0",B=F.$listItem,q=F.$tableContent,j=_({},F.$nonEditable,F.$empty),G=F.$block,Y=100,Z="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",te=Z+"border-color:transparent;display:block;border-style:solid;",S="<span>"+L+"</span>";W[CKEDITOR.ENTER_BR]="br",W[CKEDITOR.ENTER_P]="p",W[CKEDITOR.ENTER_DIV]="div",d.prototype={set:function(V,X,ee){return this.properties=V+X+(ee||E),this},is:function(V){return(this.properties&V)==V}};var $=function(){function V(X,ee){var Q=X.$.elementFromPoint(ee.x,ee.y);return Q&&Q.nodeType?new CKEDITOR.dom.element(Q):null}return function(X,ee,Q){if(!X.mouse)return null;var ne=X.doc,ie=X.line.wrap,re=V(ne,Q=Q||X.mouse);return ee&&n(X,re)&&(ie.hide(),re=V(ne,Q),ie.show()),!re||re.type!=CKEDITOR.NODE_ELEMENT||!re.$||K.ie&&9>K.version&&!X.boundary.equals(re)&&!X.boundary.contains(re)?null:re}}(),M=CKEDITOR.dom.walker.whitespaces(),U=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),z=function(){function X(ee,Q){return!(Q&&Q.type==CKEDITOR.NODE_TEXT||U(Q)||c(Q)||n(ee,Q)||Q.type==CKEDITOR.NODE_ELEMENT&&Q.$&&Q.is("br"))}return function(ee){var ne,Q=function(ee){var ne,ie,re;if(!t(Q=ee.element)||Q.contains(ee.editable)||Q.isReadOnly())return null;if(re=function(V,X,ee,Q){for(var ne=Q,ie=Q,re=0,oe=!1,se=!1,le=V.view.pane.height,ce=V.mouse;ce.y+re<le&&0<ce.y-re&&(oe||(oe=X(ne,Q)),se||(se=X(ie,Q)),!oe&&0<ce.y-re&&(ne=ee(V,{x:ce.x,y:ce.y-re})),!se&&ce.y+re<le&&(ie=ee(V,{x:ce.x,y:ce.y+re})),!oe||!se);)re+=2;return new d([ne,ie,null,null])}(ee,function(ae,de){return!de.equals(ae)},function(ae,de){return $(ae,!0,de)},Q),e(0,ne=re.upper,ie=re.lower))return re.set(N,8);if(ne&&Q.contains(ne))for(;!ne.getParent().equals(Q);)ne=ne.getParent();else ne=Q.getFirst(function(ae){return X(ee,ae)});if(ie&&Q.contains(ie))for(;!ie.getParent().equals(Q);)ie=ie.getParent();else ie=Q.getLast(function(ae){return X(ee,ae)});if(!ne||!ie||(b(ee,ne),b(ee,ie),!u(ee.mouse.y,ne.size.top,ie.size.bottom)))return null;for(var oe,se,le,ce,Q=Number.MAX_VALUE;ie&&!ie.equals(ne)&&(se=ne.getNext(ee.isRelevant));)(oe=Math.abs(a(ee,ne,se)-ee.mouse.y))<Q&&(Q=oe,le=ne,ce=se),b(ee,ne=se);return le&&ce&&u(ee.mouse.y,le.size.top,ce.size.bottom)?(re.upper=le,re.lower=ce,re.set(N,8)):null}(ee);if(ne=Q){var ie=Q.lower;ne=!(!(ne=Q.upper)||!ie||c(ie)||c(ne)||ie.equals(ne)||ne.equals(ie)||ie.contains(ne)||ne.contains(ie)||!(g(ee,ne)&&g(ee,ie)&&e(0,ne,ie)))}return ne?Q:null}}(),J=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function e(u){if(!u||u.type!=CKEDITOR.NODE_ELEMENT||"form"!=u.getName())return[];for(var f=[],i=["style","className"],r=0;r<i.length;r++){var l=u.$.elements.namedItem(i[r]);l&&(l=new CKEDITOR.dom.element(l),f.push([l,l.nextSibling]),l.remove())}return f}function d(u,f){if(u&&u.type==CKEDITOR.NODE_ELEMENT&&"form"==u.getName()&&0<f.length)for(var i=f.length-1;0<=i;i--){var r=f[i][0],l=f[i][1];l?r.insertBefore(l):r.appendTo(u)}}function s(u,f){var i=e(u),r={},l=u.$;return f||(r.class=l.className||"",l.className=""),r.inline=l.style.cssText||"",f||(l.style.cssText="position: static; overflow: visible"),d(i),r}function a(u,f){var i=e(u),r=u.$;"class"in f&&(r.className=f.class),"inline"in f&&(r.style.cssText=f.inline),d(i)}function o(u){if(!u.editable().isInline()){var i,f=CKEDITOR.instances;for(i in f){var r=f[i];"wysiwyg"!=r.mode||r.readOnly||((r=r.document.getBody()).setAttribute("contentEditable",!1),r.setAttribute("contentEditable",!0))}u.editable().hasFocus&&(u.toolbox.focus(),u.focus())}}CKEDITOR.plugins.add("maximize",{init:function(u){function f(){var g=l.getViewPaneSize();u.resize(g.width,g.height,null,!0)}if(u.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var n,t,c,i=u.lang,r=CKEDITOR.document,l=r.getWindow(),m=CKEDITOR.TRISTATE_OFF;u.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var g=u.container.getFirst(function(k){return k.type==CKEDITOR.NODE_ELEMENT&&k.hasClass("cke_inner")}),C=u.ui.space("contents");if("wysiwyg"==u.mode){var h=u.getSelection();n=h&&h.getRanges(),t=l.getScrollPosition()}else{var I=u.editable().$;n=!CKEDITOR.env.ie&&[I.selectionStart,I.selectionEnd],t=[I.scrollLeft,I.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(l.on("resize",f),c=l.getScrollPosition(),h=u.container;h=h.getParent();)h.setCustomData("maximize_saved_styles",s(h)),h.setStyle("z-index",u.config.baseFloatZIndex-5);C.setCustomData("maximize_saved_styles",s(C,!0)),g.setCustomData("maximize_saved_styles",s(g,!0)),C={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},r.getDocumentElement().setStyles(C),!CKEDITOR.env.gecko&&r.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||r.getBody().setStyles(C),CKEDITOR.env.ie?setTimeout(function(){l.$.scrollTo(0,0)},0):l.$.scrollTo(0,0),g.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),g.setStyles({"z-index":u.config.baseFloatZIndex-5,left:"0px",top:"0px"}),g.addClass("cke_maximized"),f(),C=g.getDocumentPosition(),g.setStyles({left:-1*C.x+"px",top:-1*C.y+"px"}),CKEDITOR.env.gecko&&o(u)}else if(this.state==CKEDITOR.TRISTATE_ON){l.removeListener("resize",f),h=[C,g];for(var D=0;D<h.length;D++)a(h[D],h[D].getCustomData("maximize_saved_styles")),h[D].removeCustomData("maximize_saved_styles");for(h=u.container;h=h.getParent();)a(h,h.getCustomData("maximize_saved_styles")),h.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){l.$.scrollTo(c.x,c.y)},0):l.$.scrollTo(c.x,c.y),g.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(g.setStyle("display","inline"),setTimeout(function(){g.setStyle("display","block")},0)),u.fire("resize",{outerHeight:u.container.$.offsetHeight,contentsHeight:C.$.offsetHeight,outerWidth:u.container.$.offsetWidth})}this.toggleState(),(h=this.uiItems[0])&&(C=this.state==CKEDITOR.TRISTATE_OFF?i.maximize.maximize:i.maximize.minimize,(h=CKEDITOR.document.getById(h._.id)).getChild(1).setHtml(C),h.setAttribute("title",C),h.setAttribute("href",'javascript:void("'+C+'");')),"wysiwyg"==u.mode?n?(CKEDITOR.env.gecko&&o(u),u.getSelection().selectRanges(n),(I=u.getSelection().getStartElement())&&I.scrollIntoView(!0)):l.$.scrollTo(t.x,t.y):(n&&(I.selectionStart=n[0],I.selectionEnd=n[1]),I.scrollLeft=t[0],I.scrollTop=t[1]),n=t=null,m=this.state,u.fire("maximize",this.state)},canUndo:!1}),u.ui.addButton&&u.ui.addButton("Maximize",{label:i.maximize.maximize,command:"maximize",toolbar:"tools,10"}),u.on("mode",function(){var g=u.getCommand("maximize");g.setState(g.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:m)},null,null,100)}}})}(),CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(d){var a=0,o=this.path,u=void 0===d.config.pasteFromWord_inlineImages||d.config.pasteFromWord_inlineImages;d.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(f,i){a=1,f.execCommand("paste",{type:"html",notification:!i||void 0===i.notification||i.notification})}}),CKEDITOR.plugins.clipboard.addPasteButton(d,"PasteFromWord",{label:d.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),d.on("paste",function(f){var i=f.data,r=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?i.dataTransfer.getData("text/html",!0):null,l=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?i.dataTransfer.getData("text/rtf"):null,n={dataValue:r=r||i.dataValue,dataTransfer:{"text/rtf":l}};if(l=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,l=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(r)||l.test(r),r&&(a||l)&&(!1!==d.fire("pasteFromWord",n)||a)){i.dontFilter=!0;var t=function(d,s,a){var o=CKEDITOR.cleanWord;return o?a():(d=CKEDITOR.getUrl(d.config.pasteFromWordCleanupFile||s+"filter/default.js"),CKEDITOR.scriptLoader.load(d,a,null,!0)),!o}(d,o,function(){t?d.fire("paste",i):(!d.config.pasteFromWordPromptCleanup||a||confirm(d.lang.pastefromword.confirmCleanup))&&(n.dataValue=CKEDITOR.cleanWord(n.dataValue,d),d.fire("afterPasteFromWord",n),i.dataValue=n.dataValue,!0===d.config.forcePasteAsPlainText?i.type="text":CKEDITOR.plugins.clipboard.isCustomCopyCutSupported||"allow-word"!==d.config.forcePasteAsPlainText||(i.type="html")),a=0});t&&f.cancel()}},null,null,3),CKEDITOR.plugins.clipboard.isCustomDataTypesSupported&&u&&d.on("afterPasteFromWord",function(f){var r,i=CKEDITOR.plugins.pastefromword&&CKEDITOR.plugins.pastefromword.images,l=[];if(i&&f.editor.filter.check("img[src]")&&0!==(r=i.extractTagsFromHtml(f.data.dataValue)).length&&0!==(i=i.extractFromRtf(f.data.dataTransfer["text/rtf"])).length&&(CKEDITOR.tools.array.forEach(i,function(n){l.push(n.type?"data:"+n.type+";base64,"+CKEDITOR.tools.convertBytesToBase64(CKEDITOR.tools.convertHexStringToBytes(n.hex)):null)},this),r.length===l.length))for(i=0;i<r.length;i++)0===r[i].indexOf("file://")&&l[i]&&(f.data.dataValue=f.data.dataValue.replace(r[i],l[i]))})}}),function(){var e={canUndo:!1,async:!0,exec:function(d,s){var a=d.lang,o=CKEDITOR.tools.keystrokeToString(a.common.keyboard,d.getCommandKeystroke(CKEDITOR.env.ie?d.commands.paste:this)),u=s&&void 0!==s.notification?s.notification:!s||!s.from||"keystrokeHandler"===s.from&&CKEDITOR.env.ie;a=u&&"string"==typeof u?u:a.pastetext.pasteNotification.replace(/%1/,'<kbd aria-label="'+o.aria+'">'+o.display+"</kbd>"),d.execCommand("paste",{type:"text",notification:!!u&&a})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(d){var s=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;d.addCommand("pastetext",e),d.setKeystroke(s,"pastetext"),CKEDITOR.plugins.clipboard.addPasteButton(d,"PasteText",{label:d.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),d.config.forcePasteAsPlainText&&d.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")}),d.on("pasteState",function(a){d.getCommand("pastetext").setState(a.data)})}})}(),CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var i,d=e._.removeFormatRegex||(e._.removeFormatRegex=new RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),s=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),a=CKEDITOR.plugins.removeformat.filter,o=e.getSelection().getRanges().createIterator(),u=function(m){return m.type==CKEDITOR.NODE_ELEMENT},f=[];i=o.getNextRange();){var r=i.createBookmark();(i=e.createRange()).setStartBefore(r.startNode),r.endNode&&i.setEndAfter(r.endNode),i.collapsed||i.enlarge(CKEDITOR.ENLARGE_ELEMENT);var l=i.createBookmark(),n=l.startNode,t=l.endNode,c=function(m){for(var I,g=e.elementPath(m),C=g.elements,h=1;(I=C[h])&&!I.equals(g.block)&&!I.equals(g.blockLimit);h++)d.test(I.getName())&&a(e,I)&&m.breakParent(I)};if(c(n),t)for(c(t),n=n.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);n&&!n.equals(t);)if(n.isReadOnly()){if(n.getPosition(t)&CKEDITOR.POSITION_CONTAINS)break;n=n.getNext(u)}else c=n.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==n.getName()&&n.data("cke-realelement")||n.hasAttribute("data-cke-bookmark")||!a(e,n)||(d.test(n.getName())?n.remove(1):(n.removeAttributes(s),e.fire("removeFormatCleanup",n))),n=c;l.startNode.remove(),l.endNode&&l.endNode.remove(),i.moveToBookmark(r),f.push(i)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(f)}}},filter:function(e,d){for(var s=e._.removeFormatFilters||[],a=0;a<s.length;a++)if(!1===s[a](d))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(e){function d(c){var m=r.width,g=r.height,C=m+(c.data.$.screenX-i.x)*("rtl"==u?-1:1);c=g+(c.data.$.screenY-i.y),l&&(m=Math.max(a.resize_minWidth,Math.min(C,a.resize_maxWidth))),n&&(g=Math.max(a.resize_minHeight,Math.min(c,a.resize_maxHeight))),e.resize(l?m:null,g)}function s(){CKEDITOR.document.removeListener("mousemove",d),CKEDITOR.document.removeListener("mouseup",s),e.document&&(e.document.removeListener("mousemove",d),e.document.removeListener("mouseup",s))}var a=e.config,o=e.ui.spaceId("resizer"),u=e.element?e.element.getDirection(1):"ltr";if(!a.resize_dir&&(a.resize_dir="vertical"),void 0===a.resize_maxWidth&&(a.resize_maxWidth=3e3),void 0===a.resize_maxHeight&&(a.resize_maxHeight=3e3),void 0===a.resize_minWidth&&(a.resize_minWidth=750),void 0===a.resize_minHeight&&(a.resize_minHeight=250),!1!==a.resize_enabled){var i,r,f=null,l=("both"==a.resize_dir||"horizontal"==a.resize_dir)&&a.resize_minWidth!=a.resize_maxWidth,n=("both"==a.resize_dir||"vertical"==a.resize_dir)&&a.resize_minHeight!=a.resize_maxHeight,t=CKEDITOR.tools.addFunction(function(c){f||(f=e.getResizable()),i={x:c.screenX,y:c.screenY},a.resize_minWidth>(r={width:f.$.offsetWidth||0,height:f.$.offsetHeight||0}).width&&(a.resize_minWidth=r.width),a.resize_minHeight>r.height&&(a.resize_minHeight=r.height),CKEDITOR.document.on("mousemove",d),CKEDITOR.document.on("mouseup",s),e.document&&(e.document.on("mousemove",d),e.document.on("mouseup",s)),c.preventDefault&&c.preventDefault()});e.on("destroy",function(){CKEDITOR.tools.removeFunction(t)}),e.on("uiSpace",function(c){if("bottom"==c.data.space){var m="";l&&!n&&(m=" cke_resizer_horizontal"),!l&&n&&(m=" cke_resizer_vertical");var g='<span id="'+o+'" class="cke_resizer'+m+" cke_resizer_"+u+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+t+', event)">'+("ltr"==u?"\u25e2":"\u25e3")+"</span>";"ltr"==u&&"ltr"==m?c.data.html+=g:c.data.html=g+c.data.html}},e,null,100),e.on("maximize",function(c){e.ui.space("resizer")[c.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(d){var s=this._,a=s.menu;s.state!==CKEDITOR.TRISTATE_DISABLED&&(s.on&&a?a.hide():(s.previousState=s.state,a||((a=s.menu=new CKEDITOR.menu(d,{panel:{className:"cke_menu_panel",attributes:{"aria-label":d.lang.common.options}}})).onHide=CKEDITOR.tools.bind(function(){var o=this.command?d.getCommand(this.command).modes:this.modes;this.setState(!o||o[d.mode]?s.previousState:CKEDITOR.TRISTATE_DISABLED),s.on=0},this),this.onMenu&&a.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),s.on=1,setTimeout(function(){a.show(CKEDITOR.document.getById(s.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(d){delete d.panel,this.base(d),this.hasArrow="menu",this.click=e},statics:{handler:{create:function(d){return new CKEDITOR.ui.menuButton(d)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",onLoad:function(e){"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/scayt.css")),CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"dialogs/dialog.css"))},init:function(e){var d=this,s=CKEDITOR.plugins.scayt;this.bindEvents(e),this.parseConfig(e),this.addRule(e),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(e);var a=e.lang.scayt,o=CKEDITOR.env;e.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:a.text_title,title:e.plugins.wsc?e.lang.wsc.title:a.text_title,modes:{wysiwyg:!(o.ie&&(8>o.version||o.quirks))},toolbar:"spellchecker,20",refresh:function(){var u=e.ui.instances.Scayt.getState();e.scayt&&(u=s.state.scayt[e.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.fire("scaytButtonState",u)},onRender:function(){var u=this;e.on("scaytButtonState",function(f){void 0!==typeof f.data&&u.setState(f.data)})},onMenu:function(){var u=e.scayt;e.getMenuItem("scaytToggle").label=e.lang.scayt[u&&s.state.scayt[e.name]?"btn_disable":"btn_enable"];var f={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:u?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:u?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:u?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:u?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:e.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return e.config.scayt_uiTabs[0]||delete f.scaytOptions,e.config.scayt_uiTabs[1]||delete f.scaytLangs,e.config.scayt_uiTabs[2]||delete f.scaytDict,u&&!CKEDITOR.plugins.scayt.isNewUdSupported(u)&&(delete f.scaytDict,e.config.scayt_uiTabs[2]=0,CKEDITOR.plugins.scayt.alarmCompatibilityMessage()),f}}),e.contextMenu&&e.addMenuItems&&(e.contextMenu.addListener(function(u,f){var r,l,i=e.scayt;return i&&(l=i.getSelectionNode())&&(r=d.menuGenerator(e,l),i.showBanner("."+e.contextMenu._.definition.panel.className.split(" ").join(" ."))),r}),e.contextMenu._.onHide=CKEDITOR.tools.override(e.contextMenu._.onHide,function(u){return function(){var f=e.scayt;return f&&f.hideBanner(),u.apply(this)}}))},addMenuItems:function(e){var d=this,s=CKEDITOR.plugins.scayt;e.addMenuGroup("scaytButton");for(var a=e.config.scayt_contextMenuItemsOrder.split("|"),o=0;o<a.length;o++)a[o]="scayt_"+a[o];if((a=["grayt_description","grayt_suggest","grayt_control"].concat(a))&&a.length)for(o=0;o<a.length;o++)e.addMenuGroup(a[o],o-10);e.addCommand("scaytToggle",{exec:function(u){var f=u.scayt;s.state.scayt[u.name]=!s.state.scayt[u.name],!0===s.state.scayt[u.name]?f||s.createScayt(u):f&&s.destroy(u)}}),e.addCommand("scaytAbout",{exec:function(u){u.scayt.tabToOpen="about",s.openDialog(d.dialogName,u)}}),e.addCommand("scaytOptions",{exec:function(u){u.scayt.tabToOpen="options",s.openDialog(d.dialogName,u)}}),e.addCommand("scaytLangs",{exec:function(u){u.scayt.tabToOpen="langs",s.openDialog(d.dialogName,u)}}),e.addCommand("scaytDict",{exec:function(u){u.scayt.tabToOpen="dictionaries",s.openDialog(d.dialogName,u)}}),a={scaytToggle:{label:e.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:e.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:e.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:e.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},e.plugins.wsc&&(a.WSC={label:e.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var u=CKEDITOR.plugins.scayt,f=e.scayt,i=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(i=i.replace(/\s/g,""))?(f&&u.state.scayt[e.name]&&f.setMarkupPaused&&f.setMarkupPaused(!0),e.lockSelection(),e.execCommand("checkspell")):alert("Nothing to check!")}}),e.addMenuItems(a)},bindEvents:function(e){var d=CKEDITOR.plugins.scayt,s=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,a=function(){d.destroy(e)},o=function(){!d.state.scayt[e.name]||e.readOnly||e.scayt||d.createScayt(e)},f=function(){s?e.config.scayt_inlineModeImmediateMarkup?o():(e.on("blur",function(){setTimeout(a,0)}),e.on("focus",o),e.focusManager.hasFocus&&o()):o(),function(){var i=e.editable();i.attachListener(i,"focus",function(r){var l,n;if(CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(o,0),r=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[e.name]&&e.scayt,(s||r)&&e._.savedSelection){r=!(r=e._.savedSelection.getSelectedElement())&&e._.savedSelection.getRanges();for(var t=0;t<r.length;t++)"string"==typeof(n=r[t]).startContainer.$.nodeValue&&((l=n.startContainer.getText().length)<n.startOffset||l<n.endOffset)&&e.unlockSelection(!1)}},this,null,-10)}();var i=e.editable();i.attachListener(i,"mousedown",function(r){r=r.data.getTarget();var l=e.widgets&&e.widgets.getByElement(r);l&&(l.wrapper=r.getAscendant(function(n){return n.hasAttribute("data-cke-widget-wrapper")},!0))},this,null,-10)};e.on("contentDom",f),e.on("beforeCommandExec",function(i){var r=e.scayt,l=!1,n=!1,t=!0;i.data.name in d.options.disablingCommandExec&&"wysiwyg"==e.mode?r&&(d.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):"bold"!==i.data.name&&"italic"!==i.data.name&&"underline"!==i.data.name&&"strike"!==i.data.name&&"subscript"!==i.data.name&&"superscript"!==i.data.name&&"enter"!==i.data.name&&"cut"!==i.data.name&&"language"!==i.data.name||!r||("cut"===i.data.name&&(t=!1,n=!0),"language"===i.data.name&&(n=l=!0),e.fire("reloadMarkupScayt",{removeOptions:{removeInside:t,forceBookmark:n,language:l},timeout:0}))}),e.on("beforeSetMode",function(i){"source"==i.data&&((i=e.scayt)&&(d.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),e.document&&e.document.getBody().removeAttribute("_jquid"))}),e.on("afterCommandExec",function(i){"wysiwyg"!=e.mode||"undo"!=i.data.name&&"redo"!=i.data.name||setTimeout(function(){d.reloadMarkup(e.scayt)},250)}),e.on("readOnly",function(i){var r;i&&(r=e.scayt,!0===i.editor.readOnly?r&&r.fire("removeMarkupInDocument",{}):r?d.reloadMarkup(r):"wysiwyg"==i.editor.mode&&!0===d.state.scayt[i.editor.name]&&(d.createScayt(e),i.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),e.on("beforeDestroy",a),e.on("setData",function(){a(),(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&f()},this,null,50),e.on("reloadMarkupScayt",function(i){var r=i.data&&i.data.removeOptions,n=i.data&&i.data.language,t=e.scayt;t&&setTimeout(function(){n&&(r.selectionNode=e.plugins.language.getCurrentLangElement(e),r.selectionNode=r.selectionNode&&r.selectionNode.$||null),t.removeMarkupInSelectionNode(r),d.reloadMarkup(t)},i.data&&i.data.timeout||0)}),e.on("insertElement",function(){e.fire("reloadMarkupScayt",{removeOptions:{forceBookmark:!0}})},this,null,50),e.on("insertHtml",function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")},this,null,50),e.on("insertText",function(){e.scayt&&e.scayt.setFocused&&e.scayt.setFocused(!0),e.fire("reloadMarkupScayt")},this,null,50),e.on("scaytDialogShown",function(i){i.data.selectPage(e.scayt.tabToOpen)})},parseConfig:function(e){if((d=CKEDITOR.plugins.scayt).replaceOldOptionsNames(e.config),"boolean"!=typeof e.config.scayt_autoStartup&&(e.config.scayt_autoStartup=!1),d.state.scayt[e.name]=e.config.scayt_autoStartup,"boolean"!=typeof e.config.grayt_autoStartup&&(e.config.grayt_autoStartup=!1),"boolean"!=typeof e.config.scayt_inlineModeImmediateMarkup&&(e.config.scayt_inlineModeImmediateMarkup=!1),d.state.grayt[e.name]=e.config.grayt_autoStartup,e.config.scayt_contextCommands||(e.config.scayt_contextCommands="ignoreall|add"),e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),e.config.scayt_sLang||(e.config.scayt_sLang="en_US"),(void 0===e.config.scayt_maxSuggestions||"number"!=typeof e.config.scayt_maxSuggestions||0>e.config.scayt_maxSuggestions)&&(e.config.scayt_maxSuggestions=3),(void 0===e.config.scayt_minWordLength||"number"!=typeof e.config.scayt_minWordLength||1>e.config.scayt_minWordLength)&&(e.config.scayt_minWordLength=3),(void 0===e.config.scayt_customDictionaryIds||"string"!=typeof e.config.scayt_customDictionaryIds)&&(e.config.scayt_customDictionaryIds=""),(void 0===e.config.scayt_userDictionaryName||"string"!=typeof e.config.scayt_userDictionaryName)&&(e.config.scayt_userDictionaryName=null),"string"==typeof e.config.scayt_uiTabs&&3===e.config.scayt_uiTabs.split(",").length){var s=[],a=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(e.config.scayt_uiTabs,function(r){1===Number(r)||0===Number(r)?(a.push(!0),s.push(Number(r))):a.push(!1)}),e.config.scayt_uiTabs=null===CKEDITOR.tools.search(a,!1)?s:[1,1,1]}else e.config.scayt_uiTabs=[1,1,1];if("string"!=typeof e.config.scayt_serviceProtocol&&(e.config.scayt_serviceProtocol=null),"string"!=typeof e.config.scayt_serviceHost&&(e.config.scayt_serviceHost=null),"string"!=typeof e.config.scayt_servicePort&&(e.config.scayt_servicePort=null),"string"!=typeof e.config.scayt_servicePath&&(e.config.scayt_servicePath=null),e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions="on"),"string"!=typeof e.config.scayt_customerId&&(e.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),"string"!=typeof e.config.scayt_customPunctuation&&(e.config.scayt_customPunctuation="-"),"string"!=typeof e.config.scayt_srcUrl&&(d=-1!=(d=document.location.protocol).search(/https?:/)?d:"http:",e.config.scayt_srcUrl=d+"//svc.webspellchecker.net/spellcheck31/wscbundle/wscbundle.js"),"boolean"!=typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0),"boolean"!=typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0),CKEDITOR.config.scayt_handleUndoRedo=!!CKEDITOR.plugins.undo&&CKEDITOR.config.scayt_handleUndoRedo,"boolean"!=typeof e.config.scayt_multiLanguageMode&&(e.config.scayt_multiLanguageMode=!1),"object"!=typeof e.config.scayt_multiLanguageStyles&&(e.config.scayt_multiLanguageStyles={}),e.config.scayt_ignoreAllCapsWords&&"boolean"!=typeof e.config.scayt_ignoreAllCapsWords&&(e.config.scayt_ignoreAllCapsWords=!1),e.config.scayt_ignoreDomainNames&&"boolean"!=typeof e.config.scayt_ignoreDomainNames&&(e.config.scayt_ignoreDomainNames=!1),e.config.scayt_ignoreWordsWithMixedCases&&"boolean"!=typeof e.config.scayt_ignoreWordsWithMixedCases&&(e.config.scayt_ignoreWordsWithMixedCases=!1),e.config.scayt_ignoreWordsWithNumbers&&"boolean"!=typeof e.config.scayt_ignoreWordsWithNumbers&&(e.config.scayt_ignoreWordsWithNumbers=!1),e.config.scayt_disableOptionsStorage){var d=CKEDITOR.tools.isArray(e.config.scayt_disableOptionsStorage)?e.config.scayt_disableOptionsStorage:"string"==typeof e.config.scayt_disableOptionsStorage?[e.config.scayt_disableOptionsStorage]:void 0,o="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),u=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],f=CKEDITOR.tools.search,i=CKEDITOR.tools.indexOf;e.config.scayt_disableOptionsStorage=function(l){for(var t=0;t<l.length;t++){var c=l[t],m=!!f(l,"options");if(!f(o,c)||m&&f(u,function(g){if("lang"===g)return!1}))return;if(f(u,c)&&u.splice(i(u,c),1),"all"===c||m&&f(l,"lang"))return[];"options"===c&&(u=["lang"])}return[].concat(u)}(d)}e.config.scayt_disableCache&&"boolean"!=typeof e.config.scayt_disableCache&&(e.config.scayt_disableCache=!1),(void 0===e.config.scayt_cacheSize||"number"!=typeof e.config.scayt_cacheSize||1>e.config.scayt_cacheSize)&&(e.config.scayt_cacheSize=4e3)},addRule:function(e){var d=CKEDITOR.plugins.scayt,a=(s=e.dataProcessor)&&s.htmlFilter,o=e._.elementsPath&&e._.elementsPath.filters,s=s&&s.dataFilter,u=e.addRemoveFormatFilter;o&&o.push(function(r){if(e.scayt&&(r.hasAttribute(d.options.data_attribute_name)||r.hasAttribute(d.options.problem_grammar_data_attribute)))return!1}),s&&s.addRules({elements:{span:function(r){var l=r.hasClass(d.options.misspelled_word_class)&&r.attributes[d.options.data_attribute_name],n=r.hasClass(d.options.problem_grammar_class)&&r.attributes[d.options.problem_grammar_data_attribute];return d&&(l||n)&&delete r.name,r}}}),a&&a.addRules({elements:{span:function(r){var l=r.hasClass(d.options.misspelled_word_class)&&r.attributes[d.options.data_attribute_name],n=r.hasClass(d.options.problem_grammar_class)&&r.attributes[d.options.problem_grammar_data_attribute];return d&&(l||n)&&delete r.name,r}}}),u&&u.call(e,function(r){var l=!0;return e.scayt&&(r.hasAttribute(d.options.data_attribute_name)||r.hasAttribute(d.options.problem_grammar_data_attribute))&&(l=!1),l})},scaytMenuDefinition:function(e){var d=this,s=CKEDITOR.plugins.scayt;return{scayt:{scayt_ignore:{label:(e=e.scayt).getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(a){a.scayt.ignoreWord()}},scayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(a){a.scayt.ignoreAllWords()}},scayt_add:{label:e.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(a){var o=a.scayt;setTimeout(function(){o.addWordToUserDictionary()},10)}},scayt_option:{label:e.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(a){a.scayt.tabToOpen="options",s.openDialog(d.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[0]}},scayt_language:{label:e.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(a){a.scayt.tabToOpen="langs",s.openDialog(d.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[1]}},scayt_dictionary:{label:e.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(a){a.scayt.tabToOpen="dictionaries",s.openDialog(d.dialogName,a)},verification:function(a){return 1==a.config.scayt_uiTabs[2]}},scayt_about:{label:e.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(a){a.scayt.tabToOpen="about",s.openDialog(d.dialogName,a)}}},grayt:{grayt_problemdescription:{label:"Grammar problem description",group:"grayt_description",order:1,state:CKEDITOR.TRISTATE_DISABLED,exec:function(a){}},grayt_ignore:{label:e.getLocal("btn_ignore"),group:"grayt_control",order:2,exec:function(a){a.scayt.ignorePhrase()}},grayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"grayt_control",order:3,exec:function(a){a.scayt.ignoreAllPhrases()}}}}},buildSuggestionMenuItems:function(e,d,s){var a={},o={},u=s?"word":"phrase",f=s?"startGrammarCheck":"startSpellCheck",i=e.scayt;if(0<d.length&&"no_any_suggestions"!==d[0])if(s)for(s=0;s<d.length;s++){var r="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[s].replace(" ","_");e.addCommand(r,this.createCommand(CKEDITOR.plugins.scayt.suggestions[s],u,f)),s<e.config.scayt_maxSuggestions?(e.addMenuItem(r,{label:d[s],command:r,group:"scayt_suggest",order:s+1}),a[r]=CKEDITOR.TRISTATE_OFF):(e.addMenuItem(r,{label:d[s],command:r,group:"scayt_moresuggest",order:s+1}),o[r]=CKEDITOR.TRISTATE_OFF,"on"===e.config.scayt_moreSuggestions&&(e.addMenuItem("scayt_moresuggest",{label:i.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return o}}),a.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else for(s=0;s<d.length;s++)r="grayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[s].replace(" ","_"),e.addCommand(r,this.createCommand(CKEDITOR.plugins.scayt.suggestions[s],u,f)),e.addMenuItem(r,{label:d[s],command:r,group:"grayt_suggest",order:s+1}),a[r]=CKEDITOR.TRISTATE_OFF;else a.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,e.addCommand("no_scayt_suggest",{exec:function(){}}),e.addMenuItem("no_scayt_suggest",{label:i.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return a},menuGenerator:function(e,d){var i,r,l,n,s=e.scayt,a=this.scaytMenuDefinition(e),o={},u=e.config.scayt_contextCommands.split("|"),f=d.getAttribute(s.getLangAttribute())||s.getLang();if(r=s.isScaytNode(d),l=s.isGraytNode(d),r?(a=a.scayt,i=d.getAttribute(s.getScaytNodeAttributeName()),s.fire("getSuggestionsList",{lang:f,word:i}),o=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,r)):l&&(a=a.grayt,o=d.getAttribute(s.getGraytNodeAttributeName()),s.getGraytNodeRuleAttributeName?(i=d.getAttribute(s.getGraytNodeRuleAttributeName()),s.getProblemDescriptionText(o,i,f)):s.getProblemDescriptionText(o,f),n=s.getProblemDescriptionText(o,i,f),a.grayt_problemdescription&&n&&(n=n.replace(/([.!?])\s/g,"$1<br>"),a.grayt_problemdescription.label=n),s.fire("getGrammarSuggestionsList",{lang:f,phrase:o,rule:i}),o=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions,r)),r&&"off"==e.config.scayt_contextCommands)return o;for(var t in a)r&&-1==CKEDITOR.tools.indexOf(u,t.replace("scayt_",""))&&"all"!=e.config.scayt_contextCommands||l&&"grayt_problemdescription"!==t&&-1==CKEDITOR.tools.indexOf(u,t.replace("grayt_",""))&&"all"!=e.config.scayt_contextCommands||(o[t]=void 0!==a[t].state?a[t].state:CKEDITOR.TRISTATE_OFF,"function"!=typeof a[t].verification||a[t].verification(e)||delete o[t],e.addCommand(t,{exec:a[t].exec}),e.addMenuItem(t,{label:e.lang.scayt[a[t].label]||a[t].label,command:t,group:a[t].group,order:a[t].order}));return o},createCommand:function(e,d,s){return{exec:function(a){a=a.scayt;var o={};o[d]=e,a.replaceSelectionNode(o),"startGrammarCheck"===s&&a.removeMarkupInSelectionNode({grammarOnly:!0}),a.fire(s)}}}}),CKEDITOR.plugins.scayt={charsToObserve:[{charName:"cke-fillingChar",charCode:function(){var d;if(e=(e=CKEDITOR.version.match(/^\d(\.\d*)*/))&&e[0]){d="4.5.7";var s,e=e.replace(/\./g,"");d=d.replace(/\./g,""),s=0<=(s=e.length-d.length)?s:0,d=parseInt(e)>=parseInt(d)*Math.pow(10,s)}return d?Array(7).join(String.fromCharCode(8203)):String.fromCharCode(8203)}()}],state:{scayt:{},grayt:{}},warningCounter:0,suggestions:[],options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word",problem_grammar_data_attribute:"data-grayt-phrase",problem_grammar_class:"gramm-problem"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},openDialog:function(e,d){var s=d.scayt;s.isAllModulesReady&&!1===s.isAllModulesReady()||(d.lockSelection(),d.openDialog(e))},alarmCompatibilityMessage:function(){5>this.warningCounter&&(console.warn("You are using the latest version of SCAYT plugin for CKEditor with the old application version. In order to have access to the newest features, it is recommended to upgrade the application version to latest one as well. Contact us for more details at support@webspellchecker.net."),this.warningCounter+=1)},isNewUdSupported:function(e){return!!e.getUserDictionary},reloadMarkup:function(e){var d;e&&(d=e.getScaytLangList(),e.reloadMarkup?e.reloadMarkup():(this.alarmCompatibilityMessage(),d&&d.ltr&&d.rtl&&e.fire("startSpellCheck, startGrammarCheck")))},replaceOldOptionsNames:function(e){for(var d in e)d in this.backCompatibilityMap&&(e[this.backCompatibilityMap[d]]=e[d],delete e[d])},createScayt:function(e){var d=this,s=CKEDITOR.plugins.scayt;this.loadScaytLibrary(e,function(a){function o(i){return new SCAYT.CKSCAYT(i,function(){},function(){})}var u;if(a.window&&(u="BODY"==a.editable().$.nodeName?a.window.getFrame():a.editable()),u){var f;u={lang:a.config.scayt_sLang,container:u.$,customDictionary:a.config.scayt_customDictionaryIds,userDictionaryName:a.config.scayt_userDictionaryName,localization:a.langCode,customer_id:a.config.scayt_customerId,customPunctuation:a.config.scayt_customPunctuation,debug:a.config.scayt_debug,data_attribute_name:d.options.data_attribute_name,misspelled_word_class:d.options.misspelled_word_class,problem_grammar_data_attribute:d.options.problem_grammar_data_attribute,problem_grammar_class:d.options.problem_grammar_class,"options-to-restore":a.config.scayt_disableOptionsStorage,focused:a.editable().hasFocus,ignoreElementsRegex:a.config.scayt_elementsToIgnore,ignoreGraytElementsRegex:a.config.grayt_elementsToIgnore,minWordLength:a.config.scayt_minWordLength,multiLanguageMode:a.config.scayt_multiLanguageMode,multiLanguageStyles:a.config.scayt_multiLanguageStyles,graytAutoStartup:a.config.grayt_autoStartup,disableCache:a.config.scayt_disableCache,cacheSize:a.config.scayt_cacheSize,charsToObserve:s.charsToObserve},a.config.scayt_serviceProtocol&&(u.service_protocol=a.config.scayt_serviceProtocol),a.config.scayt_serviceHost&&(u.service_host=a.config.scayt_serviceHost),a.config.scayt_servicePort&&(u.service_port=a.config.scayt_servicePort),a.config.scayt_servicePath&&(u.service_path=a.config.scayt_servicePath),"boolean"==typeof a.config.scayt_ignoreAllCapsWords&&(u["ignore-all-caps-words"]=a.config.scayt_ignoreAllCapsWords),"boolean"==typeof a.config.scayt_ignoreDomainNames&&(u["ignore-domain-names"]=a.config.scayt_ignoreDomainNames),"boolean"==typeof a.config.scayt_ignoreWordsWithMixedCases&&(u["ignore-words-with-mixed-cases"]=a.config.scayt_ignoreWordsWithMixedCases),"boolean"==typeof a.config.scayt_ignoreWordsWithNumbers&&(u["ignore-words-with-numbers"]=a.config.scayt_ignoreWordsWithNumbers);try{f=o(u)}catch(i){d.alarmCompatibilityMessage(),delete u.charsToObserve,f=o(u)}f.subscribe("suggestionListSend",function(i){for(var r={},l=[],n=0;n<i.suggestionList.length;n++)r["word_"+i.suggestionList[n]]||(r["word_"+i.suggestionList[n]]=i.suggestionList[n],l.push(i.suggestionList[n]));CKEDITOR.plugins.scayt.suggestions=l}),f.subscribe("selectionIsChanged",function(i){a.getSelection().isLocked&&"restoreSelection"!==i.action&&a.lockSelection(),"restoreSelection"===i.action&&a.selectionChange(!0)}),f.subscribe("graytStateChanged",function(i){s.state.grayt[a.name]=i.state}),f.addMarkupHandler&&f.addMarkupHandler(function(i){var r=a.editable(),l=r.getCustomData(i.charName);l&&(l.$=i.node,r.setCustomData(i.charName,l))}),a.scayt=f,a.fire("scaytButtonState",a.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)}else s.state.scayt[a.name]=!1})},destroy:function(e){e.scayt&&e.scayt.destroy(),delete e.scayt,e.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(e,d){var a=function(){CKEDITOR.fireOnce("scaytReady"),e.scayt||"function"==typeof d&&d(e)};void 0===window.SCAYT||"function"!=typeof window.SCAYT.CKSCAYT?CKEDITOR.scriptLoader.load(e.config.scayt_srcUrl,function(o){o&&a()}):window.SCAYT&&"function"==typeof window.SCAYT.CKSCAYT&&a()}},CKEDITOR.on("dialogDefinition",function(e){var d=e.data.name;e=e.data.definition.dialog,"scaytDialog"!==d&&"checkspell"!==d&&(e.on("show",function(s){s=s.sender&&s.sender.getParentEditor();var a=CKEDITOR.plugins.scayt,o=s.scayt;o&&a.state.scayt[s.name]&&o.setMarkupPaused&&o.setMarkupPaused(!0)}),e.on("hide",function(s){s=s.sender&&s.sender.getParentEditor();var a=CKEDITOR.plugins.scayt,o=s.scayt;o&&a.state.scayt[s.name]&&o.setMarkupPaused&&o.setMarkupPaused(!1)})),"scaytDialog"===d&&e.on("cancel",function(s){return!1},this,null,-1),"checkspell"===d&&e.on("cancel",function(s){s=s.sender&&s.sender.getParentEditor();var a=CKEDITOR.plugins.scayt,o=s.scayt;o&&a.state.scayt[s.name]&&o.setMarkupPaused&&o.setMarkupPaused(!1),s.unlockSelection()},this,null,-2),"link"===d&&e.on("ok",function(s){var a=s.sender&&s.sender.getParentEditor();a&&setTimeout(function(){a.fire("reloadMarkupScayt",{removeOptions:{removeInside:!0,forceBookmark:!0},timeout:0})},0)}),"replace"===d&&e.on("hide",function(s){s=s.sender&&s.sender.getParentEditor();var a=CKEDITOR.plugins.scayt,o=s.scayt;s&&setTimeout(function(){o&&(o.fire("removeMarkupInDocument",{}),a.reloadMarkup(o))},0)})}),CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty&&((e=CKEDITOR.editor.prototype).checkDirty=CKEDITOR.tools.override(e.checkDirty,function(s){return function(){var a=null,o=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt){if(a="ready"==this.status){var u=o.removeMarkupFromString(this.getSnapshot());o=o.removeMarkupFromString(this._.previousValue),a=a&&o!==u}}else a=s.call(this);return a}}),e.resetDirty=CKEDITOR.tools.override(e.resetDirty,function(s){return function(){CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[this.name]&&this.scayt?this._.previousValue=this.scayt.removeMarkupFromString(this.getSnapshot()):s.call(this)}})),!0===CKEDITOR.config.scayt_handleUndoRedo){var e,d="function"==typeof(e=CKEDITOR.plugins.undo.Image.prototype).equalsContent?"equalsContent":"equals";e[d]=CKEDITOR.tools.override(e[d],function(a){return function(o){var u=o.editor.scayt,f=this.contents,i=o.contents,r=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state.scayt[o.editor.name]&&o.editor.scayt&&(this.contents=u.removeMarkupFromString(f)||"",o.contents=u.removeMarkupFromString(i)||""),r=a.apply(this,arguments),this.contents=f,o.contents=i,r}})}}),function(){var e={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(d){this.toggleState(),this.refresh(d)},refresh:function(d){if(d.document){var s=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";d.editable()[s]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var d;d=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(d)},init:function(d){var s=d.addCommand("showborders",e);s.canUndo=!1,!1!==d.config.startupShowBorders&&s.setState(CKEDITOR.TRISTATE_ON),d.on("mode",function(){s.state!=CKEDITOR.TRISTATE_DISABLED&&s.refresh(d)},null,null,100),d.on("contentDom",function(){s.state!=CKEDITOR.TRISTATE_DISABLED&&s.refresh(d)}),d.on("removeFormatCleanup",function(a){a=a.data,d.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&a.is("table")&&(!a.hasAttribute("border")||0>=parseInt(a.getAttribute("border"),10))&&a.addClass("cke_show_border")})},afterInit:function(d){var s=d.dataProcessor;d=s&&s.dataFilter,s=s&&s.htmlFilter,d&&d.addRules({elements:{table:function(a){var o=(a=a.attributes).class,u=parseInt(a.border,10);u&&!(0>=u)||o&&-1!=o.indexOf("cke_show_border")||(a.class=(o||"")+" cke_show_border")}}}),s&&s.addRules({elements:{table:function(a){var o=(a=a.attributes).class;o&&(a.class=o.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(d){var s=d.data.name;("table"==s||"tableProperties"==s)&&((s=(d=d.data.definition).getContents("info").get("txtBorder")).commit=CKEDITOR.tools.override(s.commit,function(a){return function(o,u){a.apply(this,arguments);var f=parseInt(this.getValue(),10);u[!f||0>=f?"addClass":"removeClass"]("cke_show_border")}}),(d=(d=d.getContents("advanced"))&&d.get("advCSSClasses"))&&(d.setup=CKEDITOR.tools.override(d.setup,function(a){return function(){a.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),d.commit=CKEDITOR.tools.override(d.commit,function(a){return function(o,u){a.apply(this,arguments),parseInt(u.getAttribute("border"),10)||u.addClass("cke_show_border")}})))})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(d){function s(){var u=o&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),u&&this.focus()}if(d.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var a=CKEDITOR.plugins.sourcearea;d.addMode("source",function(u){var f=d.ui.space("contents").getDocument().createElement("textarea");f.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",d.config.sourceAreaTabSize||4))),f.setAttribute("dir","ltr"),f.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),d.ui.space("contents").append(f),(f=d.editable(new e(d,f))).setData(d.getData(1)),CKEDITOR.env.ie&&(f.attachListener(d,"resize",s,f),f.attachListener(CKEDITOR.document.getWindow(),"resize",s,f),CKEDITOR.tools.setTimeout(s,0,f)),d.fire("ariaWidget",this),u()}),d.addCommand("source",a.commands.source),d.ui.addButton&&d.ui.addButton("Source",{label:d.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),d.on("mode",function(){d.getCommand("source").setState("source"==d.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var o=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(d){this.setValue(d),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(d){this[(d?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){"wysiwyg"==e.mode&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode("source"==e.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,"es-mx":1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var d=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var s=d.availableLangs[s=e.langCode]?s:d.availableLangs[s.replace(/-.*/,"")]?s.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d.path+"dialogs/lang/"+s+".js"),function(){CKEDITOR.tools.extend(e.lang.specialchar,d.langEntries[s]),e.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var d=e.config,s=e.lang.stylescombo,a={},o=[],u=[];e.on("stylesSet",function(f){if(f=f.data.styles){for(var i,r,l,n=0,t=f.length;n<t;n++)i=f[n],e.blockless&&i.element in CKEDITOR.dtd.$block||"string"==typeof i.type&&!CKEDITOR.style.customHandlers[i.type]||(r=i.name,i=new CKEDITOR.style(i),e.filter.customConfig&&!e.filter.check(i))||(i._name=r,i._.enterMode=d.enterMode,i._.type=l=i.assignedTo||i.type,i._.weight=n+1e3*(l==CKEDITOR.STYLE_OBJECT?1:l==CKEDITOR.STYLE_BLOCK?2:3),a[r]=i,o.push(i),u.push(i));o.sort(function(c,m){return c._.weight-m._.weight})}}),e.ui.addRichCombo("Styles",{label:s.label,title:s.panelTitle,toolbar:"styles,10",allowedContent:u,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(d.contentsCss),multiSelect:!0,attributes:{"aria-label":s.panelTitle}},init:function(){var f,i,r,l,n,t;for(n=0,t=o.length;n<t;n++)i=(f=o[n])._name,(l=f._.type)!=r&&(this.startGroup(s["panelTitle"+String(l)]),r=l),this.add(i,f.type==CKEDITOR.STYLE_OBJECT?i:f.buildPreview(),i);this.commit()},onClick:function(f){e.focus(),e.fire("saveSnapshot"),f=a[f];var i=e.elementPath();f.group&&f.removeStylesFromSameGroup(e)?e.applyStyle(f):e[f.checkActive(i,e)?"removeStyle":"applyStyle"](f),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(f){for(var n,i=this.getValue(),r=0,l=(f=f.data.path.elements).length;r<l;r++)for(var t in n=f[r],a)if(a[t].checkElementRemovable(n,!0,e))return void(t!=i&&this.setValue(t));this.setValue("")},this)},onOpen:function(){var f=(f=e.getSelection()).getSelectedElement()||f.getStartElement()||e.editable(),i=(f=e.elementPath(f),[0,0,0,0]);for(var r in this.showAll(),this.unmarkAll(),a){var l=a[r],n=l._.type;l.checkApplicable(f,e,e.activeFilter)?i[n]++:this.hideItem(r),l.checkActive(f,e)&&this.mark(r)}i[CKEDITOR.STYLE_BLOCK]||this.hideGroup(s["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),i[CKEDITOR.STYLE_INLINE]||this.hideGroup(s["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),i[CKEDITOR.STYLE_OBJECT]||this.hideGroup(s["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var f=e.elementPath();if(f){for(var i in a)if(a[i].checkApplicable(f,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){a={},o=[]}})}}),function(){function e(o){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(u){if(u.editable().hasFocus){var i,f=u.getSelection();if(i=new CKEDITOR.dom.elementPath(f.getCommonAncestor(),f.root).contains({td:1,th:1},1)){if(f=u.createRange(),(r=CKEDITOR.tools.tryThese(function(){return i.getParent().$.cells[i.$.cellIndex+(o?-1:1)]},function(){var m;return(m=(m=i.getParent()).getAscendant("table").$.rows[m.$.rowIndex+(o?-1:1)]).cells[o?m.cells.length-1:0]}))||o){if(!r)return!0;r=new CKEDITOR.dom.element(r),f.moveToElementEditStart(r),f.checkStartOfBlock()&&f.checkEndOfBlock()||f.selectNodeContents(r)}else{for(var l=i.getAscendant("table").$,r=i.getParent().$.cells,n=(l=new CKEDITOR.dom.element(l.insertRow(-1),u.document),0),t=r.length;n<t;n++)l.append(new CKEDITOR.dom.element(r[n],u.document).clone(!1,!1)).appendBogus();f.moveToElementEditStart(l)}return f.select(!0),!0}}return!1}}}var d={editorFocus:!1,modes:{wysiwyg:1,source:1}},s={exec:function(o){o.container.focusNext(!0,o.tabIndex)}},a={exec:function(o){o.container.focusPrevious(!0,o.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(o){for(var u=!1!==o.config.enableTabKeyTools,f=o.config.tabSpaces||0,i="";f--;)i+="\xa0";i&&o.on("key",function(r){9==r.data.keyCode&&(o.insertText(i),r.cancel())}),u&&o.on("key",function(r){(9==r.data.keyCode&&o.execCommand("selectNextCell")||r.data.keyCode==CKEDITOR.SHIFT+9&&o.execCommand("selectPreviousCell"))&&r.cancel()}),o.addCommand("blur",CKEDITOR.tools.extend(s,d)),o.addCommand("blurBack",CKEDITOR.tools.extend(a,d)),o.addCommand("selectNextCell",e()),o.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,d){var a,o,u,f,i,r,s=void 0===d?this.getTabIndex():d;if(0>=s)for(i=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);i;){if(i.isVisible()&&0===i.getTabIndex()){u=i;break}i=i.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(i=this.getDocument().getBody().getFirst();i=i.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!a)if(!o&&i.equals(this)){if(o=!0,e){if(!(i=i.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;a=1}}else o&&!this.contains(i)&&(a=1);if(i.isVisible()&&!(0>(r=i.getTabIndex()))){if(a&&r==s){u=i;break}r>s&&(!u||!f||r<f)?(u=i,f=r):u||0!==r||(u=i,f=r)}}u&&u.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,d){for(var a,o,u,i,s=void 0===d?this.getTabIndex():d,f=0,r=this.getDocument().getBody().getLast();r=r.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!a)if(!o&&r.equals(this)){if(o=!0,e){if(!(r=r.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;a=1}}else o&&!this.contains(r)&&(a=1);if(r.isVisible()&&!(0>(i=r.getTabIndex())))if(0>=s){if(a&&0===i){u=r;break}i>f&&(u=r,f=i)}else{if(a&&i==s){u=r;break}i<s&&(!u||i>f)&&(u=r,f=i)}}u&&u.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function d(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(o,u){this.setState(u.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var s=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height,border-collapse}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];td{border*,background-color,vertical-align,width,height}[colspan,rowspan];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(a){if(a.styles){var o;if(a.styles.border)o=CKEDITOR.tools.style.parse.border(a.styles.border);else if(CKEDITOR.env.ie&&8===CKEDITOR.env.version){var u=a.styles;u["border-left"]&&u["border-left"]===u["border-right"]&&u["border-right"]===u["border-top"]&&u["border-top"]===u["border-bottom"]&&(o=CKEDITOR.tools.style.parse.border(u["border-top"]))}o&&o.style&&"solid"===o.style&&o.width&&0!==parseFloat(o.width)&&(a.attributes.border=1),"collapse"==a.styles["border-collapse"]&&(a.attributes.cellspacing=0)}}}]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",d())),e.addCommand("tableDelete",d({exec:function(a){var o=a.elementPath().contains("table",1);if(o){var u=o.getParent(),f=a.editable();1!=u.getChildCount()||u.is("td","th")||u.equals(f)||(o=u),(a=a.createRange()).moveToPosition(o,CKEDITOR.POSITION_BEFORE_START),o.remove(),a.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:s.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:s.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:s.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog="tableProperties")}),e.contextMenu&&e.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function e(h,I){function D(v){return!I||I.contains(v)&&v.getAscendant("table",!0).equals(I)}function k(v){0<b.length||v.type!=CKEDITOR.NODE_ELEMENT||!g.test(v.getName())||v.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(p,v,"selected_cell",!0),b.push(v))}var b=[],p={};if(!h)return b;for(var O=h.getRanges(),R=0;R<O.length;R++){var _,w;if((_=O[R]).collapsed)(_=_.getCommonAncestor().getAscendant({td:1,th:1},!0))&&D(_)&&b.push(_);else for((_=new CKEDITOR.dom.walker(_)).guard=k;w=_.next();)w.type==CKEDITOR.NODE_ELEMENT&&w.is(CKEDITOR.dtd.table)||(w=w.getAscendant({td:1,th:1},!0))&&!w.getCustomData("selected_cell")&&D(w)&&(CKEDITOR.dom.element.setMarker(p,w,"selected_cell",!0),b.push(w))}return CKEDITOR.dom.element.clearAllMarkers(p),b}function d(h,I){var b=(k=(D=C(h)?h:e(h))[0]).getAscendant("table"),k=k.getDocument(),O=(p=D[0].getParent()).$.rowIndex,R=(D=D[D.length-1]).getParent().$.rowIndex+D.$.rowSpan-1,D=new CKEDITOR.dom.element(b.$.rows[R]),p=(O=I?O:R,I?p:D);for(b=(D=CKEDITOR.tools.buildTableMap(b))[O],O=I?D[O-1]:D[O+1],D=D[0].length,k=k.createElement("tr"),R=0;b[R]&&R<D;R++){var _;1<b[R].rowSpan&&O&&b[R]==O[R]?(_=b[R]).rowSpan+=1:((_=new CKEDITOR.dom.element(b[R]).clone()).removeAttribute("rowSpan"),_.appendBogus(),k.append(_),_=_.$),R+=_.colSpan-1}return I?k.insertBefore(p):k.insertAfter(p),k}function s(h){if(h instanceof CKEDITOR.dom.selection){var I=h.getRanges(),k=(D=e(h))[0].getAscendant("table"),b=CKEDITOR.tools.buildTableMap(k),p=D[0].getParent().$.rowIndex,O=(D=D[D.length-1]).getParent().$.rowIndex+D.$.rowSpan-1,D=[];for(h.reset(),h=p;h<=O;h++){for(var R=b[h],_=new CKEDITOR.dom.element(k.$.rows[h]),w=0;w<R.length;w++){var v=new CKEDITOR.dom.element(R[w]),K=v.getParent().$.rowIndex;1==v.$.rowSpan?v.remove():(--v.$.rowSpan,K==h&&((K=b[h+1])[w-1]?v.insertAfter(new CKEDITOR.dom.element(K[w-1])):new CKEDITOR.dom.element(k.$.rows[h+1]).append(v,1))),w+=v.$.colSpan-1}D.push(_)}for(b=k.$.rows,I[0].moveToPosition(k,CKEDITOR.POSITION_BEFORE_START),p=new CKEDITOR.dom.element(b[O+1]||(0<p?b[p-1]:null)||k.$.parentNode),h=D.length;0<=h;h--)s(D[h]);return k.$.parentNode?p:(I[0].select(),null)}return h instanceof CKEDITOR.dom.element&&(1==(k=h.getAscendant("table")).$.rows.length?k.remove():h.remove()),null}function a(h){for(var I=h.getParent().$.cells,D=0,k=0;k<I.length;k++){var b=I[k];if(D+=b.colSpan,b==h.$)break}return D-1}function o(h,I){for(var D=I?1/0:0,k=0;k<h.length;k++){var b=a(h[k]);(I?b<D:b>D)&&(D=b)}return D}function u(h,I){for(var k=(D=C(h)?h:e(h))[0].getAscendant("table"),b=o(D,1),D=o(D),p=I?b:D,O=CKEDITOR.tools.buildTableMap(k),R=(k=[],b=[],D=[],O.length),_=0;_<R;_++)k.push(O[_][p]),b.push(I?O[_][p-1]:O[_][p+1]);for(_=0;_<R;_++)k[_]&&(1<k[_].colSpan&&b[_]==k[_]?(O=k[_]).colSpan+=1:((O=(p=new CKEDITOR.dom.element(k[_])).clone()).removeAttribute("colSpan"),O.appendBogus(),O[I?"insertBefore":"insertAfter"].call(O,p),D.push(O),O=O.$),_+=O.rowSpan-1);return D}function i(h,I){var D=h.getStartElement().getAscendant({td:1,th:1},!0);if(D){var k=D.clone();k.appendBogus(),I?k.insertBefore(D):k.insertAfter(D)}}function r(h){if(h instanceof CKEDITOR.dom.selection){var b,I=h.getRanges(),D=e(h),k=D[0]&&D[0].getAscendant("table");e:{var p=0;b=D.length-1;for(var R,_,O={};R=D[p++];)CKEDITOR.dom.element.setMarker(O,R,"delete_cell",!0);for(p=0;R=D[p++];)if((_=R.getPrevious())&&!_.getCustomData("delete_cell")||(_=R.getNext())&&!_.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(O),b=_;break e}CKEDITOR.dom.element.clearAllMarkers(O),b=(p=(p=D[0].getParent()).getPrevious())?p.getLast():(p=(p=D[b].getParent()).getNext())?p.getChild(0):null}for(h.reset(),h=D.length-1;0<=h;h--)r(D[h]);b?l(b,!0):k&&(I[0].moveToPosition(k,CKEDITOR.POSITION_BEFORE_START),I[0].select(),k.remove())}else h instanceof CKEDITOR.dom.element&&(1==(I=h.getParent()).getChildCount()?I.remove():h.remove())}function l(h,I){var D=h.getDocument(),k=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(k.focus(),D.focus()),(D=new CKEDITOR.dom.range(D))["moveToElementEdit"+(I?"End":"Start")](h)||(D.selectNodeContents(h),D.collapse(!I)),D.select(!0)}function n(h,I,D){if(h=h[I],void 0===D)return h;for(I=0;h&&I<h.length;I++){if(D.is&&h[I]==D.$)return I;if(I==D)return new CKEDITOR.dom.element(h[I])}return D.is?-1:null}function t(h,I,D){var b,p,k=e(h);if((I?1!=k.length:2>k.length)||(b=h.getCommonAncestor())&&b.type==CKEDITOR.NODE_ELEMENT&&b.is("table"))return!1;b=(h=k[0]).getAscendant("table");var O=CKEDITOR.tools.buildTableMap(b),R=O.length,_=O[0].length,w=h.getParent().$.rowIndex,v=n(O,w,h);if(I){var K;try{var F=parseInt(h.getAttribute("rowspan"),10)||1;p=parseInt(h.getAttribute("colspan"),10)||1,K=O["up"==I?w-F:"down"==I?w+F:w]["left"==I?v-p:"right"==I?v+p:v]}catch(E){return!1}if(!K||h.$==K)return!1;k["up"==I||"left"==I?"unshift":"push"](new CKEDITOR.dom.element(K))}I=h.getDocument();var y=w,W=(F=K=0,!D&&new CKEDITOR.dom.documentFragment(I)),x=0;for(I=0;I<k.length;I++){var T=(p=k[I]).getParent(),N=p.getFirst(),A=p.$.colSpan,P=p.$.rowSpan,H=n(O,T=T.$.rowIndex,p);x+=A*P,F=Math.max(F,H-v+A),K=Math.max(K,T-w+P),D||((P=(A=p).getBogus())&&P.remove(),A.trim(),p.getChildren().count()&&(T==y||!N||N.isBlockBoundary&&N.isBlockBoundary({br:1})||!(y=W.getLast(CKEDITOR.dom.walker.whitespaces(!0)))||y.is&&y.is("br")||W.append("br"),p.moveChildren(W)),I?p.remove():p.setHtml("")),y=T}if(D)return K*F==x;for(W.moveChildren(h),h.appendBogus(),F>=_?h.removeAttribute("rowSpan"):h.$.rowSpan=K,K>=R?h.removeAttribute("colSpan"):h.$.colSpan=F,I=(k=(D=new CKEDITOR.dom.nodeList(b.$.rows)).count())-1;0<=I;I--)(b=D.getItem(I)).$.cells.length||(b.remove(),k++);return h}function c(h,I){if(1<(D=e(h)).length)return!1;if(I)return!0;var D,w,b=(k=(D=D[0]).getParent()).getAscendant("table"),R=n(p=CKEDITOR.tools.buildTableMap(b),O=k.$.rowIndex,D);if(1<(_=D.$.rowSpan)){w=Math.ceil(_/2);for(var v,_=Math.floor(_/2),k=O+w,p=(b=new CKEDITOR.dom.element(b.$.rows[k]),n(p,k)),O=(k=D.clone(),0);O<p.length;O++){if((v=p[O]).parentNode==b.$&&O>R){k.insertBefore(new CKEDITOR.dom.element(v));break}v=null}v||b.append(k)}else for(_=w=1,(b=k.clone()).insertAfter(k),b.append(k=D.clone()),v=n(p,O),R=0;R<v.length;R++)v[R].rowSpan++;return k.appendBogus(),D.$.rowSpan=w,k.$.rowSpan=_,1==w&&D.removeAttribute("rowSpan"),1==_&&k.removeAttribute("rowSpan"),k}function m(h,I){if(1<(D=e(h)).length)return!1;if(I)return!0;var D,k=(D=D[0]).getParent(),b=k.getAscendant("table"),p=n(b=CKEDITOR.tools.buildTableMap(b),k.$.rowIndex,D);if(1<(O=D.$.colSpan))k=Math.ceil(O/2),O=Math.floor(O/2);else{for(var O=k=1,R=[],_=0;_<b.length;_++){var w=b[_];R.push(w[p]),1<w[p].rowSpan&&(_+=w[p].rowSpan-1)}for(b=0;b<R.length;b++)R[b].colSpan++}return(b=D.clone()).insertAfter(D),b.appendBogus(),D.$.colSpan=k,b.$.colSpan=O,1==k&&D.removeAttribute("colSpan"),1==O&&b.removeAttribute("colSpan"),b}var g=/^(?:td|th)$/,C=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(h){function I(O){return CKEDITOR.tools.extend(O||{},{contextSensitive:1,refresh:function(R,_){this.setState(_.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function D(O,R){var _=h.addCommand(O,R);h.addFeature(_)}var k=h.lang.table,b=CKEDITOR.tools.style.parse,p="td{width} td{height} td{border-color} td{background-color} td{white-space} td{vertical-align} td{text-align} td[colspan] td[rowspan] th".split(" ");D("cellProperties",new CKEDITOR.dialogCommand("cellProperties",I({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:p,contentTransformations:[[{element:"td",left:function(O){return O.styles.background&&b.background(O.styles.background).color},right:function(O){O.styles["background-color"]=b.background(O.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(O){return O.attributes&&O.attributes.valign},right:function(O){O.styles["vertical-align"]=O.attributes.valign,delete O.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(O){return O.styles&&O.styles.height},right:function(O){CKEDITOR.tools.array.forEach(O.children,function(R){R.name in{td:1,th:1}&&(R.attributes["cke-row-height"]=O.styles.height)}),delete O.styles.height}}],[{element:"td",check:"td{height}",left:function(O){return(O=O.attributes)&&O["cke-row-height"]},right:function(O){O.styles.height=O.attributes["cke-row-height"],delete O.attributes["cke-row-height"]}}]]}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),D("rowDelete",I({requiredContent:"table",exec:function(O){(O=s(O=O.getSelection()))&&l(O)}})),D("rowInsertBefore",I({requiredContent:"table",exec:function(O){d(O=e(O=O.getSelection()),!0)}})),D("rowInsertAfter",I({requiredContent:"table",exec:function(O){d(O=e(O=O.getSelection()))}})),D("columnDelete",I({requiredContent:"table",exec:function(O){(O=function(h){CKEDITOR.env.webkit&&!h.isFake&&(h=function(F){var W,x,T;if(1!==(W=F.getRanges()).length||(W=W[0]).collapsed||0!==W.endOffset||"td"!==(T=(x=W.endContainer).getName().toLowerCase())&&"th"!==T)return F;for((T=x.getPrevious())||(T=x.getParent().getPrevious().getLast());T.type!==CKEDITOR.NODE_TEXT&&"br"!==T.getName().toLowerCase();)if(!(T=T.getLast()))return F;return W.setEndAt(T,CKEDITOR.POSITION_BEFORE_END),W.select()}(h));var R,_,D=h.getRanges(),b=(k=e(h))[0],p=k[k.length-1],k=b.getAscendant("table"),O=CKEDITOR.tools.buildTableMap(k),w=[];h.reset();var v=0;for(h=O.length;v<h;v++)for(var K=0,y=O[v].length;K<y;K++)void 0===R&&O[v][K]==b.$&&(R=K),O[v][K]==p.$&&(_=K);for(v=R;v<=_;v++)for(K=0;K<O.length;K++)p=O[K],b=new CKEDITOR.dom.element(k.$.rows[K]),(p=new CKEDITOR.dom.element(p[v])).$&&(1==p.$.colSpan?p.remove():--p.$.colSpan,K+=p.$.rowSpan-1,b.$.cells.length||w.push(b));return R=O[0].length-1>_?new CKEDITOR.dom.element(O[0][_+1]):R&&-1!==O[0][R-1].cellIndex?new CKEDITOR.dom.element(O[0][R-1]):new CKEDITOR.dom.element(k.$.parentNode),w.length==h&&(D[0].moveToPosition(k,CKEDITOR.POSITION_AFTER_END),D[0].select(),k.remove()),R}(O=O.getSelection()))&&l(O,!0)}})),D("columnInsertBefore",I({requiredContent:"table",exec:function(O){u(O=e(O=O.getSelection()),!0)}})),D("columnInsertAfter",I({requiredContent:"table",exec:function(O){u(O=e(O=O.getSelection()))}})),D("cellDelete",I({requiredContent:"table",exec:function(O){r(O=O.getSelection())}})),D("cellMerge",I({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(O,R){R.cell=t(O.getSelection()),l(R.cell,!0)}})),D("cellMergeRight",I({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(O,R){R.cell=t(O.getSelection(),"right"),l(R.cell,!0)}})),D("cellMergeDown",I({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(O,R){R.cell=t(O.getSelection(),"down"),l(R.cell,!0)}})),D("cellVerticalSplit",I({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(O){l(m(O.getSelection()))}})),D("cellHorizontalSplit",I({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(O){l(c(O.getSelection()))}})),D("cellInsertBefore",I({requiredContent:"table",exec:function(O){i(O=O.getSelection(),!0)}})),D("cellInsertAfter",I({requiredContent:"table",exec:function(O){i(O=O.getSelection())}})),h.addMenuItems&&h.addMenuItems({tablecell:{label:k.cell.menu,group:"tablecell",order:1,getItems:function(){var R=e(O=h.getSelection()),O={tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:t(O,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:t(O,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:t(O,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:m(O,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:c(O,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};return h.filter.check(p)&&(O.tablecell_properties=0<R.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),O}},tablecell_insertBefore:{label:k.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:k.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:k.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:k.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:k.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:k.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:k.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:k.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:k.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:k.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:k.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:k.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:k.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:k.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:k.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:k.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:k.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),h.contextMenu&&h.contextMenu.addListener(function(O,R,_){return(O=_.contains({td:1,th:1},1))&&!O.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getCellColIndex:a,insertRow:d,insertColumn:u,getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e,d,s,a,o){e=e.$.rows,s=s||0,a="number"==typeof a?a:e.length-1,o="number"==typeof o?o:-1;var u=-1,f=[];for(d=d||0;d<=a;d++){!f[++u]&&(f[u]=[]);for(var i=-1,r=s;r<=(-1===o?e[d].cells.length-1:o)&&(l=e[d].cells[r]);r++){for(i++;f[u][i];)i++;for(var n=isNaN(l.colSpan)?1:l.colSpan,l=isNaN(l.rowSpan)?1:l.rowSpan,t=0;t<l&&!(d+t>a);t++){f[u+t]||(f[u+t]=[]);for(var c=0;c<n;c++)f[u+t][i+c]=e[d].cells[r]}if(i+=n-1,-1!==o&&i>=o)break}}return f},function(){function e(R){return CKEDITOR.plugins.widget&&CKEDITOR.plugins.widget.isDomWidget(R)}function d(R,_){var T,N,w=R.getAscendant("table"),v=_.getAscendant("table"),K=CKEDITOR.tools.buildTableMap(w),y=l(R),F=l(_),W=[],x={};for(w.contains(v)&&(F=l(_=_.getAscendant({td:1,th:1}))),y>F&&(w=y,y=F,F=w,w=R,R=_,_=w),w=0;w<K[y].length;w++)if(R.$===K[y][w]){T=w;break}for(w=0;w<K[F].length;w++)if(_.$===K[F][w]){N=w;break}for(T>N&&(w=T,T=N,N=w),w=y;w<=F;w++)for(y=T;y<=N;y++)(v=new CKEDITOR.dom.element(K[w][y])).$&&!v.getCustomData("selected_cell")&&(W.push(v),CKEDITOR.dom.element.setMarker(x,v,"selected_cell",!0));return CKEDITOR.dom.element.clearAllMarkers(x),W}function o(R,_){var K,w=R.editable().find(".cke_table-faked-selection"),v=R.editable().findOne("[data-cke-table-faked-selection-table]");for(R.fire("lockSnapshot"),R.editable().removeClass("cke_table-faked-selection-editor"),K=0;K<w.count();K++)w.getItem(K).removeClass("cke_table-faked-selection");v&&v.data("cke-table-faked-selection-table",!1),R.fire("unlockSnapshot"),_&&(h={active:!1},R.getSelection().isInTable()&&R.getSelection().reset())}function u(R,_){var v,K,w=[];for(K=0;K<_.length;K++)(v=R.createRange()).setStartBefore(_[K]),v.setEndAfter(_[K]),w.push(v);R.getSelection().selectRanges(w)}function r(R){var K,_=(R=R.editor||R.sender.editor)&&R.getSelection(),w=_&&_.getRanges()||[],v=(v=w&&w[0].getEnclosedNode())&&v.type==CKEDITOR.NODE_ELEMENT&&v.is("img");if(_&&(o(R),_.isInTable()&&_.isFake))if(v)R.getSelection().reset();else if(!w[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")){for(1===w.length&&w[0]._getTableElement()&&w[0]._getTableElement().is("table")&&(K=w[0]._getTableElement()),K=D(_,K),R.fire("lockSnapshot"),_=0;_<K.length;_++)K[_].addClass("cke_table-faked-selection");0<K.length&&(R.editable().addClass("cke_table-faked-selection-editor"),K[0].getAscendant("table").data("cke-table-faked-selection-table","")),R.fire("unlockSnapshot")}}function l(R){return R.getAscendant("tr",!0).$.rowIndex}function n(R){function w(N){return!N.getAscendant("table",!0)&&N.getDocument().equals(K.document)}if(R.data.getTarget().getName&&("mouseup"===R.name||!e(R.data.getTarget()))){var K=R.editor||R.listenerData.editor,y=K.getSelection(1),F=function(R){return(R=R.editable().findOne(".cke_table-faked-selection"))&&R.getAscendant("table")}(K),x=(W=R.data.getTarget())&&W.getAscendant({td:1,th:1},!0),W=W&&W.getAscendant("table",!0),T={table:1,thead:1,tbody:1,tfoot:1,tr:1,td:1,th:1};W&&W.hasAttribute("data-cke-tableselection-ignored")||(A=y,H=W,(!("mousedown"!==(N=R).name||CKEDITOR.tools.getMouseButton(N)!==CKEDITOR.MOUSE_BUTTON_LEFT&&H)||((A=N.name===(CKEDITOR.env.gecko?"mousedown":"mouseup")&&!w(N.data.getTarget()))&&(A=!((N=N.data.getTarget().getAscendant({td:1,th:1},!0))&&N.hasClass("cke_table-faked-selection"))),A))&&o(K,!0),!h.active&&"mousedown"===R.name&&CKEDITOR.tools.getMouseButton(R)===CKEDITOR.MOUSE_BUTTON_LEFT&&W&&(h={active:!0},CKEDITOR.document.on("mouseup",n,null,{editor:K})),(x||W)&&function(R,_,w){var K,v=D(R.getSelection(!0));if(_=_.is("table")?null:_,(K=h.active&&!h.first)&&!(K=_)&&(K=R.getSelection().getRanges(),K=!!(1<v.length||K[0]&&!K[0].collapsed)),K)h.first=_||v[0],h.dirty=!_&&1!==v.length;else if(h.active&&_&&h.first.getAscendant("table").equals(_.getAscendant("table"))){if(v=d(h.first,_),!h.dirty&&1===v.length&&!e(w.data.getTarget()))return o(R,"mouseup"===w.name);h.dirty=!0,h.last=_,u(R,v)}}(K,x||W,R),"mouseup"===R.name&&(CKEDITOR.tools.getMouseButton(R)===CKEDITOR.MOUSE_BUTTON_LEFT&&(w(R.data.getTarget())||function(N,A){return!(!N||!A)&&(N.equals(A)||N.contains(A)||A.contains(N)||N.getCommonAncestor(A).is(T))}(F,W))&&function(R){var _=R.editable().find(".cke_table-faked-selection");1>_.count()||u(R,_=d(_.getItem(0),_.getItem(_.count()-1)))}(K),h={active:!1},CKEDITOR.document.removeListener("mouseup",n)))}var N,A,H}function t(R){var _=R.data.getTarget().getAscendant("table",!0);_&&_.hasAttribute("data-cke-tableselection-ignored")||(_=R.data.getTarget().getAscendant({td:1,th:1},!0))&&!_.hasClass("cke_table-faked-selection")&&(R.cancel(),R.data.preventDefault())}function m(R){var _=R.editor||R.sender.editor,w=_.getSelection();w.isInTable()&&(w.getRanges()[0]._getTableElement({table:1}).hasAttribute("data-cke-tableselection-ignored")||function(R,_){var N,A,P,H,v=R.getSelection(),K=v.createBookmarks(),y=R.document,F=R.createRange(),W=y.getDocumentElement().$,x=CKEDITOR.env.ie&&9>CKEDITOR.env.version,T=R.blockless||CKEDITOR.env.ie?"span":"div";y.getById("cke_table_copybin")||(N=y.createElement(T),(A=y.createElement(T)).setAttributes({id:"cke_table_copybin","data-cke-temp":"1"}),N.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),N.setStyle("ltr"==R.config.contentsLangDirection?"left":"right","-5000px"),N.setHtml(R.getSelectedHtml(!0)),R.fire("lockSnapshot"),A.append(N),R.editable().append(A),H=R.on("selectionChange",function(E){E.cancel()},null,null,0),x&&(P=W.scrollTop),F.selectNodeContents(N),F.select(),x&&(W.scrollTop=P),setTimeout(function(){A.remove(),v.selectBookmarks(K),H.removeListener(),R.fire("unlockSnapshot"),_&&(R.extractSelectedHtml(),R.fire("saveSnapshot"))},100))}(_,"cut"===R.name))}function g(R){this._reset(),R&&this.setSelectedCells(R)}function C(R,_,w){R.on("beforeCommandExec",function(v){-1!==CKEDITOR.tools.array.indexOf(_,v.data.name)&&(v.data.selectedCells=D(R.getSelection()))}),R.on("afterCommandExec",function(v){-1!==CKEDITOR.tools.array.indexOf(_,v.data.name)&&w(R,v.data)})}var I,D,k,b,p,h={active:!1};(g.prototype={})._reset=function(){this.cells={first:null,last:null,all:[]},this.rows={first:null,last:null}},g.prototype.setSelectedCells=function(R){this._reset(),R=R.slice(0),this._arraySortByDOMOrder(R),this.cells.all=R,this.cells.first=R[0],this.cells.last=R[R.length-1],this.rows.first=R[0].getAscendant("tr"),this.rows.last=this.cells.last.getAscendant("tr")},g.prototype.getTableMap=function(){var _,R=k(this.cells.first);e:{var K,w=(_=this.cells.last).getAscendant("table"),v=l(_);for(w=CKEDITOR.tools.buildTableMap(w),K=0;K<w[v].length;K++)if(new CKEDITOR.dom.element(w[v][K]).equals(_)){_=K;break e}_=void 0}return CKEDITOR.tools.buildTableMap(this._getTable(),l(this.rows.first),R,l(this.rows.last),_)},g.prototype._getTable=function(){return this.rows.first.getAscendant("table")},g.prototype.insertRow=function(R,_,w){if(void 0===R)R=1;else if(0>=R)return;for(var F,v=this.cells.first.$.cellIndex,K=this.cells.last.$.cellIndex,y=w?[]:this.cells.all,W=0;W<R;W++)F=b(w?this.cells.all:y,_),F=CKEDITOR.tools.array.filter(F.find("td, th").toArray(),function(x){return!!w||x.$.cellIndex>=v&&x.$.cellIndex<=K}),y=_?F.concat(y):y.concat(F);this.setSelectedCells(y)},g.prototype.insertColumn=function(R){function _(F){return(F=l(F))>=K&&F<=y}if(void 0===R)R=1;else if(0>=R)return;for(var v=(w=this.cells).all,K=l(w.first),y=l(w.last),w=0;w<R;w++)v=v.concat(CKEDITOR.tools.array.filter(p(v),_));this.setSelectedCells(v)},g.prototype.emptyCells=function(R){R=R||this.cells.all;for(var _=0;_<R.length;_++)R[_].setHtml("")},g.prototype._arraySortByDOMOrder=function(R){R.sort(function(_,w){return _.getPosition(w)&CKEDITOR.POSITION_PRECEDING?-1:1})};var O={onPaste:function(R){function _(N){return Math.max.apply(null,CKEDITOR.tools.array.map(N,function(A){return A.length},0))}var N,A,v=R.editor,K=v.getSelection();if(!(y=(y=K.getRanges()).length&&y[0]._getTableElement({table:1}))||!y.hasAttribute("data-cke-tableselection-ignored")){var x,T,F=D(K),y=this.findTableInPastedContent(v,R.data.dataValue),W=K.isInTable(!0)&&this.isBoundarySelection(K);!F.length||1===F.length&&!function(R){if(R)return(R=R.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),(R=R.getEnclosedNode())&&R.is&&R.is(CKEDITOR.dtd.$tableContent)}(K.getRanges()[0])&&!W||W&&!y||(F=F[0].getAscendant("table"),x=new g(D(K,F)),v.once("afterPaste",function(){var A;if(T){A=new CKEDITOR.dom.element(T[0][0]);var P=T[T.length-1];A=d(A,new CKEDITOR.dom.element(P[P.length-1]))}else A=x.cells.all;u(v,A)}),y?(R.stop(),W?(x.insertRow(1,1===W,!0),K.selectElement(x.rows.first)):(x.emptyCells(),u(v,x.cells.all)),R=x.getTableMap(),T=CKEDITOR.tools.buildTableMap(y),x.insertRow(T.length-R.length),x.insertColumn(_(T)-_(R)),R=x.getTableMap(),this.pasteTable(x,R,T),v.fire("saveSnapshot"),setTimeout(function(){v.fire("afterPaste")},0)):(N=x.cells.first,(A=v.createRange()).selectNodeContents(N),A.select(),v.once("afterPaste",function(){v.fire("lockSnapshot"),x.emptyCells(x.cells.all.slice(1)),u(v,x.cells.all),v.fire("unlockSnapshot")})))}},isBoundarySelection:function(R){var _=(R=R.getRanges()[0]).endContainer.getAscendant("tr",!0);if(_&&R.collapsed){if(R.checkBoundaryOfElement(_,CKEDITOR.START))return 1;if(R.checkBoundaryOfElement(_,CKEDITOR.END))return 2}return 0},findTableInPastedContent:function(R,_){var w=R.dataProcessor,v=new CKEDITOR.dom.element("body");return w||(w=new CKEDITOR.htmlDataProcessor(R)),v.setHtml(w.toHtml(_),{fixForBody:!1}),1<v.getChildCount()?null:v.findOne("table")},pasteTable:function(R,_,w){var v,W,x,T,N,K=k(R.cells.first),y=R._getTable(),F={};for(T=0;T<w.length;T++)for(W=new CKEDITOR.dom.element(y.$.rows[R.rows.first.$.rowIndex+T]),N=0;N<w[T].length;N++)x=new CKEDITOR.dom.element(w[T][N]),v=_[T]&&_[T][N]?new CKEDITOR.dom.element(_[T][N]):null,x&&!x.getCustomData("processed")?(v&&v.getParent()?x.replace(v):(0===N||w[T][N-1])&&((v=0!==N?new CKEDITOR.dom.element(w[T][N-1]):null)&&W.equals(v.getParent())?x.insertAfter(v):0<K?W.$.cells[K]?x.insertAfter(new CKEDITOR.dom.element(W.$.cells[K])):W.append(x):W.append(x,!0)),CKEDITOR.dom.element.setMarker(F,x,"processed",!0)):x.getCustomData("processed")&&v&&v.remove();CKEDITOR.dom.element.clearAllMarkers(F)}};CKEDITOR.plugins.tableselection={getCellsBetween:d,keyboardIntegration:function(R){function _(v){var K=v.getEnclosedNode();K&&"function"==typeof K.is&&K.is({td:1,th:1})?K.setText(""):v.deleteContents(),CKEDITOR.tools.array.forEach(v._find("td"),function(y){y.appendBogus()})}var v,y,F,w=R.editable();w.attachListener(w,"keydown",(v=R,y={37:1,38:1,39:1,40:1,8:1,46:1,13:1},delete(F=CKEDITOR.tools.extend({table:1},CKEDITOR.dtd.$tableContent)).td,delete F.th,function(W){var N,P,H,E,x=W.data.getKey(),T=W.data.getKeystroke(),A=37===x||38==x;if(y[x]&&!v.readOnly&&(N=v.getSelection())&&N.isInTable()&&N.isFake)if(H=(P=N.getRanges())[0]._getTableElement(),E=P[P.length-1]._getTableElement(),(13!==x||v.plugins.enterkey)&&(W.data.preventDefault(),W.cancel()),36<x&&41>x)P[0].moveToElementEditablePosition(A?H:E,!A),N.selectRanges([P[0]]);else if(13!==x||13===T||T===CKEDITOR.SHIFT+13){for(W=0;W<P.length;W++)_(P[W]);(W=function(W,x){if(!x.length)return null;var T=v.createRange(),N=CKEDITOR.dom.range.mergeRanges(x);CKEDITOR.tools.array.forEach(N,function(q){q.enlarge(CKEDITOR.ENLARGE_ELEMENT)});var q,P=(A=N[0].getBoundaryNodes()).startNode,A=A.endNode;if(P&&P.is&&P.is(F)){for(var H=P.getAscendant("table",!0),E=P.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,H),L=!1;E&&(P.contains(q=E)||!q.is||!q.is("td","th"));)E=E.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT,H);return!E&&A&&A.is&&!A.is("table")&&A.getNext()&&(E=A.getNext().findOne("td, th"),L=!0),E?T["moveToElementEdit"+(L?"Start":"End")](E):(T.setStartBefore(P.getAscendant("table",!0)),T.collapse(!0)),N[0].deleteContents(),[T]}return P?(T.moveToElementEditablePosition(P),[T]):void 0}(0,P))?P=W:P[0].moveToElementEditablePosition(H),N.selectRanges(P),13===x&&v.plugins.enterkey?(v.fire("lockSnapshot"),v.execCommand(13===T?"enter":"shiftEnter"),v.fire("unlockSnapshot"),v.fire("saveSnapshot")):13!==x&&v.fire("saveSnapshot")}}),null,null,-1),w.attachListener(w,"keypress",function(v){var F,K=R.getSelection(),y=v.data.$.charCode||13===v.data.getKey();if(!R.readOnly&&K&&K.isInTable()&&K.isFake&&y&&!(v.data.getKeystroke()&CKEDITOR.CTRL)){for(y=(v=K.getRanges())[0].getEnclosedNode().getAscendant({td:1,th:1},!0),F=0;F<v.length;F++)_(v[F]);y&&(v[0].moveToElementEditablePosition(y),K.selectRanges([v[0]]))}},null,null,-1)}},CKEDITOR.plugins.add("tableselection",{requires:"clipboard,tabletools",isSupportedEnvironment:function(){return!(CKEDITOR.env.ie&&11>CKEDITOR.env.version)},onLoad:function(){I=CKEDITOR.plugins.tabletools,D=I.getSelectedCells,k=I.getCellColIndex,b=I.insertRow,p=I.insertColumn,CKEDITOR.document.appendStyleSheet(this.path+"styles/tableselection.css")},init:function(R){this.isSupportedEnvironment()&&(R.addContentsCss&&R.addContentsCss(this.path+"styles/tableselection.css"),R.on("contentDom",function(){var _=R.editable(),w=_.isInline()?_:R.document,v={editor:R};_.attachListener(w,"mousedown",n,null,v),_.attachListener(w,"mousemove",n,null,v),_.attachListener(w,"mouseup",n,null,v),_.attachListener(_,"dragstart",t),_.attachListener(R,"selectionCheck",r),CKEDITOR.plugins.tableselection.keyboardIntegration(R),CKEDITOR.plugins.clipboard&&!CKEDITOR.plugins.clipboard.isCustomCopyCutSupported&&(_.attachListener(_,"cut",m),_.attachListener(_,"copy",m))}),R.on("paste",O.onPaste,O),C(R,"rowInsertBefore rowInsertAfter columnInsertBefore columnInsertAfter cellInsertBefore cellInsertAfter".split(" "),function(_,w){u(_,w.selectedCells)}),C(R,["cellMerge","cellMergeRight","cellMergeDown"],function(_,w){u(_,[w.commandData.cell])}),C(R,["cellDelete"],function(_){o(_,!0)}))}})}(),function(){var e=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],d={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(i){function r(g){n.enabled&&!1!==g.data.command.canUndo&&n.save()}function l(){n.enabled=!i.readOnly&&"wysiwyg"==i.mode,n.onChange()}var n=i.undoManager=new s(i),t=n.editingHandler=new u(n),c=i.addCommand("undo",{exec:function(){n.undo()&&(i.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),m=i.addCommand("redo",{exec:function(){n.redo()&&(i.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});i.setKeystroke([[e[0],"undo"],[e[1],"redo"],[e[2],"redo"]]),n.onChange=function(){c.setState(n.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),m.setState(n.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},i.on("beforeCommandExec",r),i.on("afterCommandExec",r),i.on("saveSnapshot",function(g){n.save(g.data&&g.data.contentOnly)}),i.on("contentDom",t.attachListeners,t),i.on("instanceReady",function(){i.fire("saveSnapshot")}),i.on("beforeModeUnload",function(){"wysiwyg"==i.mode&&n.save(!0)}),i.on("mode",l),i.on("readOnly",l),i.ui.addButton&&(i.ui.addButton("Undo",{label:i.lang.undo.undo,command:"undo",toolbar:"undo,10"}),i.ui.addButton("Redo",{label:i.lang.undo.redo,command:"redo",toolbar:"undo,20"})),i.resetUndo=function(){n.reset(),i.fire("saveSnapshot")},i.on("updateSnapshot",function(){n.currentImage&&n.update()}),i.on("lockSnapshot",function(g){n.lock((g=g.data)&&g.dontUpdate,g&&g.forceUpdate)}),i.on("unlockSnapshot",n.unlock,n)}}),CKEDITOR.plugins.undo={};var s=CKEDITOR.plugins.undo.UndoManager=function(i){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=i.config.undoStackSize||20,this.strokesLimit=25,this.editor=i,this.reset()};s.prototype={type:function(i,r){var l=s.getKeyGroup(i),n=this.strokesRecorded[l]+1;r=r||n>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),r?(n=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[l]=n,this.previousKeyGroup=l},keyGroupChanged:function(i){return s.getKeyGroup(i)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(i,r,l){var n=this.editor;if(this.locked||"ready"!=n.status||"wysiwyg"!=n.mode)return!1;var t=n.editable();if(!t||"ready"!=t.status||(t=this.snapshots,r||(r=new a(n)),!1===r.contents))return!1;if(this.currentImage)if(r.equalsContent(this.currentImage)){if(i||r.equalsSelection(this.currentImage))return!1}else!1!==l&&n.fire("change");return t.splice(this.index+1,t.length-this.index-1),t.length==this.limit&&t.shift(),this.index=t.push(r)-1,this.currentImage=r,!1!==l&&this.refreshState(),!0},restoreImage:function(i){var l,r=this.editor;i.bookmarks&&(r.focus(),l=r.getSelection()),this.locked={level:999},this.editor.loadSnapshot(i.contents),i.bookmarks?l.selectBookmarks(i.bookmarks):CKEDITOR.env.ie&&((l=this.editor.document.getBody().$.createTextRange()).collapse(!0),l.select()),this.locked=null,this.index=i.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),r.fire("change")},getNextImage:function(i){var n,r=this.snapshots,l=this.currentImage;if(l)if(i){for(n=this.index-1;0<=n;n--)if(!l.equalsContent(i=r[n]))return i.index=n,i}else for(n=this.index+1;n<r.length;n++)if(!l.equalsContent(i=r[n]))return i.index=n,i;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var i=this.getNextImage(!0);if(i)return this.restoreImage(i),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var i=this.getNextImage(!1);if(i)return this.restoreImage(i),!0}return!1},update:function(i){if(!this.locked){i||(i=new a(this.editor));for(var r=this.index,l=this.snapshots;0<r&&this.currentImage.equalsContent(l[r-1]);)--r;l.splice(r,this.index-r+1,i),this.index=r,this.currentImage=i}},updateSelection:function(i){if(!this.snapshots.length)return!1;var r=this.snapshots,l=r[r.length-1];return!(!l.equalsContent(i)||l.equalsSelection(i)||(this.currentImage=r[r.length-1]=i,0))},lock:function(i,r){if(this.locked)this.locked.level++;else if(i)this.locked={level:1};else{var l=null;if(r)l=!0;else{var n=new a(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(n)&&(l=n)}this.locked={update:l,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var i=this.locked.update;if(this.locked=null,!0===i)this.update();else if(i){var r=new a(this.editor,!0);i.equalsContent(r)||this.update()}}}},s.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},s.keyGroups={PRINTABLE:0,FUNCTIONAL:1},s.isNavigationKey=function(i){return!!s.navigationKeyCodes[i]},s.getKeyGroup=function(i){var r=s.keyGroups;return d[i]?r.FUNCTIONAL:r.PRINTABLE},s.getOppositeKeyGroup=function(i){var r=s.keyGroups;return i==r.FUNCTIONAL?r.PRINTABLE:r.FUNCTIONAL},s.ieFunctionalKeysBug=function(i){return CKEDITOR.env.ie&&s.getKeyGroup(i)==s.keyGroups.FUNCTIONAL};var a=CKEDITOR.plugins.undo.Image=function(i,r){this.editor=i,i.fire("beforeUndoImage");var l=i.getSnapshot();CKEDITOR.env.ie&&l&&(l=l.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=l,r||(this.bookmarks=(l=l&&i.getSelection())&&l.createBookmarks2(!0)),i.fire("afterUndoImage")},o=/\b(?:href|src|name)="[^"]*?"/gi;a.prototype={equalsContent:function(i){var r=this.contents;return i=i.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(r=r.replace(o,""),i=i.replace(o,"")),r==i},equalsSelection:function(i){var r=this.bookmarks;if(i=i.bookmarks,r||i){if(!r||!i||r.length!=i.length)return!1;for(var l=0;l<r.length;l++){var n=r[l],t=i[l];if(n.startOffset!=t.startOffset||n.endOffset!=t.endOffset||!CKEDITOR.tools.arrayCompare(n.start,t.start)||!CKEDITOR.tools.arrayCompare(n.end,t.end))return!1}}return!0}};var u=CKEDITOR.plugins.undo.NativeEditingHandler=function(i){this.undoManager=i,this.ignoreInputEvent=!1,this.keyEventsStack=new f,this.lastKeydownImage=null};u.prototype={onKeydown:function(i){var r=i.data.getKey();229!==r&&(-1<CKEDITOR.tools.indexOf(e,i.data.getKeystroke())?i.data.preventDefault():(this.keyEventsStack.cleanUp(i),i=this.undoManager,this.keyEventsStack.getLast(r)||this.keyEventsStack.push(r),this.lastKeydownImage=new a(i.editor),(s.isNavigationKey(r)||this.undoManager.keyGroupChanged(r))&&(i.strokesRecorded[0]||i.strokesRecorded[1])&&(i.save(!1,this.lastKeydownImage,!1),i.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var i=this.keyEventsStack.getLast();i||(i=this.keyEventsStack.push(0)),this.keyEventsStack.increment(i.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(i.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(i){var r=this.undoManager;i=i.data.getKey();var l=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(i),s.ieFunctionalKeysBug(i)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new a(r.editor,!0))||(0<l?r.type(i):s.isNavigationKey(i)&&this.onNavigationKey(!0))},onNavigationKey:function(i){var r=this.undoManager;!i&&r.save(!0,null,!1)||r.updateSelection(new a(r.editor)),r.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},activateInputEventListener:function(){this.ignoreInputEvent=!1},attachListeners:function(){var i=this.undoManager.editor,r=i.editable(),l=this;r.attachListener(r,"keydown",function(n){l.onKeydown(n),s.ieFunctionalKeysBug(n.data.getKey())&&l.onInput()},null,null,999),r.attachListener(r,CKEDITOR.env.ie?"keypress":"input",l.onInput,l,null,999),r.attachListener(r,"keyup",l.onKeyup,l,null,999),r.attachListener(r,"paste",l.ignoreInputEventListener,l,null,999),r.attachListener(r,"drop",l.ignoreInputEventListener,l,null,999),i.on("afterPaste",l.activateInputEventListener,l,null,999),r.attachListener(r.isInline()?r:i.document.getDocumentElement(),"click",function(){l.onNavigationKey()},null,null,999),r.attachListener(this.undoManager.editor,"blur",function(){l.keyEventsStack.remove(9)},null,null,999)}};var f=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};f.prototype={push:function(i){return i=this.stack.push({keyCode:i,inputs:0}),this.stack[i-1]},getLastIndex:function(i){if("number"!=typeof i)return this.stack.length-1;for(var r=this.stack.length;r--;)if(this.stack[r].keyCode==i)return r;return-1},getLast:function(i){return-1!=(i=this.getLastIndex(i))?this.stack[i]:null},increment:function(i){this.getLast(i).inputs++},remove:function(i){-1!=(i=this.getLastIndex(i))&&this.stack.splice(i,1)},resetInputs:function(i){if("number"==typeof i)this.getLast(i).inputs=0;else for(i=this.stack.length;i--;)this.stack[i].inputs=0},getTotalInputs:function(){for(var i=this.stack.length,r=0;i--;)r+=this.stack[i].inputs;return r},cleanUp:function(i){(i=i.data.$).ctrlKey||i.metaKey||this.remove(17),i.shiftKey||this.remove(16),i.altKey||this.remove(18)}}}(),function(){function e(r,l){CKEDITOR.tools.extend(this,{editor:r,editable:r.editable(),doc:r.document,win:r.window},l,!0),this.inline=this.editable.isInline(),this.inline||(this.frame=this.win.getFrame()),this.target=this[this.inline?"editable":"doc"]}function d(r,l){CKEDITOR.tools.extend(this,l,{editor:r},!0)}function s(r,l){var n=r.editable();CKEDITOR.tools.extend(this,{editor:r,editable:n,inline:n.isInline(),doc:r.document,win:r.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},l,!0),this.hidden={},this.visible={},this.inline||(this.frame=this.win.getFrame()),this.queryViewport();var t=CKEDITOR.tools.bind(this.queryViewport,this),c=CKEDITOR.tools.bind(this.hideVisible,this),m=CKEDITOR.tools.bind(this.removeAll,this);n.attachListener(this.winTop,"resize",t),n.attachListener(this.winTop,"scroll",t),n.attachListener(this.winTop,"resize",c),n.attachListener(this.win,"scroll",c),n.attachListener(this.inline?n:this.frame,"mouseout",function(g){var C=g.data.$.clientX;g=g.data.$.clientY,this.queryViewport(),(C<=this.rect.left||C>=this.rect.right||g<=this.rect.top||g>=this.rect.bottom)&&this.hideVisible(),(0>=C||C>=this.winTopPane.width||0>=g||g>=this.winTopPane.height)&&this.hideVisible()},this),n.attachListener(r,"resize",t),n.attachListener(r,"mode",m),r.on("destroy",m),this.lineTpl=new CKEDITOR.template('<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>').output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},u,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},o,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function a(r){var l;return(l=r&&r.type==CKEDITOR.NODE_ELEMENT)&&(l=!(f[r.getComputedStyle("float")]||f[r.getAttribute("align")])),l&&!i[r.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,e.prototype={start:function(r){var c,m,g,C,l=this,n=this.editor,t=this.doc,h=CKEDITOR.tools.eventsBuffer(50,function(){n.readOnly||"wysiwyg"!=n.mode||(l.relations={},(m=t.$.elementFromPoint(g,C))&&m.nodeType&&(c=new CKEDITOR.dom.element(m),l.traverseSearch(c),isNaN(g+C)||l.pixelSearch(c,g,C),r&&r(l.relations,g,C)))});this.listener=this.editable.attachListener(this.target,"mousemove",function(I){g=I.data.$.clientX,C=I.data.$.clientY,h.input()}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){h.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var r={};return r[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,r[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,r[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(l){var n=this.editor.createRange();return n.moveToPosition(this.relations[l.uid].element,r[l.type]),n}}(),store:function(){function r(l,n,t){var c=l.getUniqueId();c in t?t[c].type|=n:t[c]={element:l,type:n}}return function(l,n){var t;n&CKEDITOR.LINEUTILS_AFTER&&a(t=l.getNext())&&t.isVisible()&&(r(t,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_AFTER),n&CKEDITOR.LINEUTILS_INSIDE&&a(t=l.getFirst())&&t.isVisible()&&(r(t,CKEDITOR.LINEUTILS_BEFORE,this.relations),n^=CKEDITOR.LINEUTILS_INSIDE),r(l,n,this.relations)}}(),traverseSearch:function(r){var l,n,t;do{if(!(t=r.$["data-cke-expando"])||!(t in this.relations)){if(r.equals(this.editable))break;if(a(r))for(l in this.lookups)(n=this.lookups[l](r))&&this.store(r,n)}}while((!r||r.type!=CKEDITOR.NODE_ELEMENT||"true"!=r.getAttribute("contenteditable"))&&(r=r.getParent()))},pixelSearch:function(){function r(n,t,c,m,g){for(var h,C=0;g(c)&&(c+=m,25!=++C);)if(h=this.doc.$.elementFromPoint(t,c))if(h==n)C=0;else if(l(n,h)&&(C=0,a(h=new CKEDITOR.dom.element(h))))return h}var l=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(n,t){return n.contains(t)}:function(n,t){return!!(16&n.compareDocumentPosition(t))};return function(n,t,c){var m=this.win.getViewPaneSize().height,g=r.call(this,n.$,t,c,-1,function(C){return 0<C});if(t=r.call(this,n.$,t,c,1,function(C){return C<m}),g)for(this.traverseSearch(g);!g.getParent().equals(n);)g=g.getParent();if(t)for(this.traverseSearch(t);!t.getParent().equals(n);)t=t.getParent();for(;(g||t)&&(g&&(g=g.getNext(a)),g&&!g.equals(t)&&(this.traverseSearch(g),t&&(t=t.getPrevious(a)),t&&!t.equals(g)));)this.traverseSearch(t)}}(),greedySearch:function(){this.relations={};for(var n,t,c,r=this.editable.getElementsByTag("*"),l=0;n=r.getItem(l++);)if(!n.equals(this.editable)&&n.type==CKEDITOR.NODE_ELEMENT&&(n.hasAttribute("contenteditable")||!n.isReadOnly())&&a(n)&&n.isVisible())for(c in this.lookups)(t=this.lookups[c](n))&&this.store(n,t);return this.relations}},d.prototype={locate:function(){function r(l,n){var t=l.element[n===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return t&&a(t)?(l.siblingRect=t.getClientRect(),n==CKEDITOR.LINEUTILS_BEFORE?(l.siblingRect.bottom+l.elementRect.top)/2:(l.elementRect.bottom+l.siblingRect.top)/2):n==CKEDITOR.LINEUTILS_BEFORE?l.elementRect.top:l.elementRect.bottom}return function(l){var n;for(var t in this.locations={},l)(n=l[t]).elementRect=n.element.getClientRect(),n.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(t,CKEDITOR.LINEUTILS_BEFORE,r(n,CKEDITOR.LINEUTILS_BEFORE)),n.type&CKEDITOR.LINEUTILS_AFTER&&this.store(t,CKEDITOR.LINEUTILS_AFTER,r(n,CKEDITOR.LINEUTILS_AFTER)),n.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(t,CKEDITOR.LINEUTILS_INSIDE,(n.elementRect.top+n.elementRect.bottom)/2);return this.locations}}(),sort:function(){var r,l,n,t;return function(c,m){for(var g in l=[],r=this.locations)for(var C in r[g])if(n=Math.abs(c-r[g][C]),l.length){for(t=0;t<l.length;t++)if(n<l[t].dist){l.splice(t,0,{uid:+g,type:C,dist:n});break}t==l.length&&l.push({uid:+g,type:C,dist:n})}else l.push({uid:+g,type:C,dist:n});return void 0!==m?l.slice(0,m):l}}(),store:function(r,l,n){this.locations[r]||(this.locations[r]={}),this.locations[r][l]=n}};var o={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},u={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};s.prototype={removeAll:function(){for(var r in this.hidden)this.hidden[r].remove(),delete this.hidden[r];for(r in this.visible)this.visible[r].remove(),delete this.visible[r]},hideLine:function(r){var l=r.getUniqueId();r.hide(),this.hidden[l]=r,delete this.visible[l]},showLine:function(r){var l=r.getUniqueId();r.show(),this.visible[l]=r,delete this.hidden[l]},hideVisible:function(){for(var r in this.visible)this.hideLine(this.visible[r])},placeLine:function(r,l){var n,t,c;if(n=this.getStyle(r.uid,r.type)){for(c in this.visible)if(this.visible[c].getCustomData("hash")!==this.hash){t=this.visible[c];break}if(!t)for(c in this.hidden)if(this.hidden[c].getCustomData("hash")!==this.hash){this.showLine(t=this.hidden[c]);break}t||this.showLine(t=this.addLine()),t.setCustomData("hash",this.hash),this.visible[t.getUniqueId()]=t,t.setStyles(n),l&&l(t)}},getStyle:function(r,l){var n=this.relations[r],t=this.locations[r][l],c={};if(c.width=n.siblingRect?Math.max(n.siblingRect.width,n.elementRect.width):n.elementRect.width,c.top=this.inline?t+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+t,c.top-this.winTopScroll.y<this.rect.top||c.top-this.winTopScroll.y>this.rect.bottom)return!1;for(var m in this.inline?c.left=n.elementRect.left-this.rect.relativeX:(0<n.elementRect.left?c.left=this.rect.left+n.elementRect.left:(c.width+=n.elementRect.left,c.left=this.rect.left),0<(n=c.left+c.width-(this.rect.left+this.winPane.width))&&(c.width-=n)),c.left+=this.winTopScroll.x,c)c[m]=CKEDITOR.tools.cssLength(c[m]);return c},addLine:function(){var r=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return r.appendTo(this.container),r},prepare:function(r,l){this.relations=r,this.locations=l,this.hash=Math.random()},cleanup:function(){var r,l;for(l in this.visible)(r=this.visible[l]).getCustomData("hash")!==this.hash&&this.hideLine(r)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(r){r=r.getClientRect();var l=this.container.getDocumentPosition(),n=this.container.getComputedStyle("position");return r.relativeX=r.relativeY=0,"static"!=n&&(r.relativeY=l.y,r.relativeX=l.x,r.top-=r.relativeY,r.bottom-=r.relativeY,r.left-=r.relativeX,r.right-=r.relativeX),r}};var f={left:1,right:1,center:1},i={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:e,locator:d,liner:s}}(),function(){function e(d){return d.getName&&!d.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(d){if(CKEDITOR.env.webkit){var s=CKEDITOR.plugins.widgetselection;d.on("contentDom",function(a){var o=(a=a.editor).editable();o.attachListener(o,"keydown",function(u){u.data.getKeystroke()==CKEDITOR.CTRL+65&&CKEDITOR.tools.setTimeout(function(){s.addFillers(o)||s.removeFillers(o)},0)},null,null,-1),a.on("selectionCheck",function(u){s.removeFillers(u.editor.editable())}),a.on("paste",function(u){u.data.dataValue=s.cleanPasteData(u.data.dataValue)}),"selectall"in a.plugins&&s.addSelectAllIntegration(a)})}}}),CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"&nbsp;",fillerTagName:"div",addFillers:function(d){var s=d.editor;if(!this.isWholeContentSelected(d)&&0<d.getChildCount()){var a=d.getFirst(e),o=d.getLast(e);if(a&&a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable()&&(this.startFiller=this.createFiller(),d.append(this.startFiller,1)),o&&o.type==CKEDITOR.NODE_ELEMENT&&!o.isEditable()&&(this.endFiller=this.createFiller(!0),d.append(this.endFiller,0)),this.hasFiller(d))return(s=s.createRange()).selectNodeContents(d),s.select(),!0}return!1},removeFillers:function(d){if(this.hasFiller(d)&&!this.isWholeContentSelected(d)){var s=d.findOne(this.fillerTagName+"["+this.fillerAttribute+"=start]"),a=d.findOne(this.fillerTagName+"["+this.fillerAttribute+"=end]");this.startFiller&&s&&this.startFiller.equals(s)?this.removeFiller(this.startFiller,d):this.startFiller=s,this.endFiller&&a&&this.endFiller.equals(a)?this.removeFiller(this.endFiller,d):this.endFiller=a}},cleanPasteData:function(d){return d&&d.length&&(d=d.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),"")),d},isWholeContentSelected:function(d){var s=d.editor.getSelection().getRanges()[0];return!(!s||s&&s.collapsed||((s=s.clone()).enlarge(CKEDITOR.ENLARGE_ELEMENT),!(s&&d&&s.startContainer&&s.endContainer&&0===s.startOffset&&s.endOffset===d.getChildCount()&&s.startContainer.equals(d)&&s.endContainer.equals(d))))},hasFiller:function(d){return 0<d.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(d){var s=new CKEDITOR.dom.element(this.fillerTagName);return s.setHtml(this.fillerContent),s.setAttribute(this.fillerAttribute,d?"end":"start"),s.setAttribute("data-cke-temp",1),s.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"}),s},removeFiller:function(d,s){if(d){var f,i,a=s.editor,o=s.editor.getSelection().getRanges()[0].startPath(),u=a.createRange();o.contains(d)&&(f=d.getHtml(),i=!0),o="start"==d.getAttribute(this.fillerAttribute),d.remove(),f&&0<f.length&&f!=this.fillerContent?(s.insertHtmlIntoRange(f,a.getSelection().getRanges()[0]),u.setStartAt(s.getChild(s.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),a.getSelection().selectRanges([u])):i&&(o?u.setStartAt(s.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):u.setEndAt(s.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),s.editor.getSelection().selectRanges([u]))}},createFillerRegex:function(d){var s=this.createFiller(d).getOuterHtml().replace(/style="[^"]*"/gi,'style="[^"]*"').replace(/>[^<]*</gi,">[^<]*<");return new RegExp((d?"":"^")+s+(d?"$":""))},addSelectAllIntegration:function(d){var s=this;d.editable().attachListener(d,"beforeCommandExec",function(a){var o=d.editable();"selectAll"==a.data.name&&o&&s.addFillers(o)},null,null,9999)}}}(),function(){function e(S){this.editor=S,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},function(S){var M,U,$=S.editor;$.on("toHtml",function(z){var V,J=function(S){var $=[],M=S._.upcasts,U=S._.upcastCallbacks;return{toBeWrapped:$,iterator:function(z){var J,V,X,ee,Q;if("data-cke-widget-wrapper"in z.attributes)return(z=z.getFirst(d.isParserWidgetElement))&&$.push([z]),!1;if("data-widget"in z.attributes)return $.push([z]),!1;if(Q=M.length){if(z.attributes["data-cke-widget-upcasted"])return!1;for(ee=0,J=U.length;ee<J;++ee)if(!1===U[ee](z))return;for(ee=0;ee<Q;++ee)if(V=(J=M[ee])[0](z,X={}))return V instanceof CKEDITOR.htmlParser.element&&(z=V),z.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(X)),z.attributes["data-cke-widget-upcasted"]=1,$.push([z,J[1]]),!1}}}}(S);for(z.data.dataValue.forEach(J.iterator,CKEDITOR.NODE_ELEMENT,!0);V=J.toBeWrapped.pop();){var X=V[0],ee=X.parent;ee.type==CKEDITOR.NODE_ELEMENT&&ee.attributes["data-cke-widget-wrapper"]&&ee.replaceWith(X),S.wrapElement(V[0],V[1])}M=z.data.protectedWhitespaces?3==z.data.dataValue.children.length&&d.isParserWidgetWrapper(z.data.dataValue.children[1]):1==z.data.dataValue.children.length&&d.isParserWidgetWrapper(z.data.dataValue.children[0])},null,null,8),$.on("dataReady",function(){if(U)for(var J,V,z=$.editable().find(".cke_widget_wrapper"),X=0,ee=z.count();X<ee;++X)(V=(J=z.getItem(X)).getFirst(d.isDomWidgetElement)).type==CKEDITOR.NODE_ELEMENT&&V.data("widget")?(V.replace(J),S.wrapElement(V)):J.remove();U=0,S.destroyAll(!0),S.initOnAll()}),$.on("loadSnapshot",function(z){/data-cke-widget/.test(z.data)&&(U=1),S.destroyAll(!0)},null,null,9),$.on("paste",function(z){(z=z.data).dataValue=z.dataValue.replace(Z,D),z.range&&(z=d.getNestedEditable($.editable(),z.range.startContainer))&&(z=CKEDITOR.filter.instances[z.data("cke-filter")])&&$.setActiveFilter(z)}),$.on("afterInsertHtml",function(z){z.data.intoRange?S.checkWidgets({initOnlyNew:!0}):($.fire("lockSnapshot"),S.checkWidgets({initOnlyNew:!0,focusInited:M}),$.fire("unlockSnapshot"))})}(this),function(S){var $=S.editor,M={};$.on("toDataFormat",function(U){var z=CKEDITOR.tools.getNextNumber(),J=[];U.data.downcastingSessionId=z,M[z]=J,U.data.dataValue.forEach(function(V){var ee,X=V.attributes;if("data-cke-widget-white-space"in X){ee=r(V);var Q=l(V);ee.parent.attributes["data-cke-white-space-first"]&&(ee.value=ee.value.replace(/^&nbsp;/g," ")),Q.parent.attributes["data-cke-white-space-last"]&&(Q.value=Q.value.replace(/&nbsp;$/g," "))}if("data-cke-widget-id"in X)(X=S.instances[X["data-cke-widget-id"]])&&(ee=V.getFirst(d.isParserWidgetElement),J.push({wrapper:V,element:ee,widget:X,editables:{}}),"1"!=ee.attributes["data-cke-widget-keep-attr"]&&delete ee.attributes["data-widget"]);else if("data-cke-widget-editable"in X)return 0<J.length&&(J[J.length-1].editables[X["data-cke-widget-editable"]]=V),!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),$.on("toDataFormat",function(U){if(U.data.downcastingSessionId){U=M[U.data.downcastingSessionId];for(var z,J,V,X,ee,Q;z=U.shift();){for(Q in V=z.element,X=(J=z.widget)._.downcastFn&&J._.downcastFn.call(J,V),z.editables)delete(ee=z.editables[Q]).attributes.contenteditable,ee.setHtml(J.editables[Q].getData());X||(X=V),z.wrapper.replaceWith(X)}}},null,null,13),$.on("contentDomUnload",function(){S.destroyAll(!0)})}(this),this.on("checkWidgets",f),this.editor.on("contentDomInvalidated",this.checkWidgets,this),function(S){var $=S.editor;$.on("selectionCheck",function(){S.fire("checkSelection")}),S.on("checkSelection",S.checkSelection,S),$.on("selectionChange",function(M){var U=(M=d.getNestedEditable($.editable(),M.data.selection.getStartElement()))&&S.getByElement(M),z=S.widgetHoldingFocusedEditable;z?z===U&&z.focusedEditable.equals(M)||(h(S,z,null),U&&M&&h(S,U,M)):U&&M&&h(S,U,M)}),$.on("dataReady",function(){v(S).commit()}),$.on("blur",function(){var M;(M=S.focused)&&u(S,M),(M=S.widgetHoldingFocusedEditable)&&h(S,M,null)})}(this),function(S){var $=S.editor;$.on("contentDom",function(){var z,J,M=$.editable(),U=M.isInline()?M:$.document;M.attachListener(U,"mousedown",function(V){var X=V.data.getTarget();z=X instanceof CKEDITOR.dom.element?S.getByElement(X):null,J=0,z&&(z.inline&&X.type==CKEDITOR.NODE_ELEMENT&&X.hasAttribute("data-cke-widget-drag-handler")?(J=1,S.focused!=z&&$.getSelection().removeAllRanges()):d.getNestedEditable(z.wrapper,X)?z=null:(V.data.preventDefault(),CKEDITOR.env.ie||z.focus()))}),M.attachListener(U,"mouseup",function(){J&&z&&z.wrapper&&(J=0,z.focus())}),CKEDITOR.env.ie&&M.attachListener(U,"mouseup",function(){setTimeout(function(){z&&z.wrapper&&M.contains(z.wrapper)&&(z.focus(),z=null)})})}),$.on("doubleclick",function(M){var U=S.getByElement(M.data.element);if(U&&!d.getNestedEditable(U.wrapper,M.data.element))return U.fire("doubleclick",{element:M.data.element})},null,null,1)}(this),function(S){S.editor.on("key",function($){var z,M=S.focused,U=S.widgetHoldingFocusedEditable;return M?z=M.fire("key",{keyCode:$.data.keyCode}):U&&(M=$.data.keyCode,$=U.focusedEditable,M==CKEDITOR.CTRL+65?(M=$.getBogus(),(U=U.editor.createRange()).selectNodeContents($),M&&U.setEndAt(M,CKEDITOR.POSITION_BEFORE_START),U.select(),z=!1):8==M||46==M?(z=U.editor.getSelection().getRanges(),U=z[0],z=!(1==z.length&&U.collapsed&&U.checkBoundaryOfElement($,CKEDITOR[8==M?"START":"END"]))):z=void 0),z},null,null,1)}(this),function(S){var $=S.editor,M=CKEDITOR.plugins.lineutils;$.on("dragstart",function(U){var z=U.data.target;d.isDomDragHandler(z)&&(z=S.getByElement(z),U.data.dataTransfer.setData("cke/widget-id",z.id),$.focus(),z.focus())}),$.on("drop",function(U){var J=(z=U.data.dataTransfer).getData("cke/widget-id"),V=z.getTransferType($),z=$.createRange();""!==J&&V===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?U.cancel():""!==J&&V==CKEDITOR.DATA_TRANSFER_INTERNAL&&(J=S.instances[J])&&(z.setStartBefore(J.wrapper),z.setEndAfter(J.wrapper),U.data.dragRange=z,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,U.data.dataTransfer.setData("text/html",$.editable().getHtmlFromRange(z).getHtml()),$.widgets.destroy(J,!0))}),$.on("contentDom",function(){var U=$.editable();CKEDITOR.tools.extend(S,{finder:new M.finder($,{lookups:{default:function(z){if(!z.is(CKEDITOR.dtd.$listItem)&&z.is(CKEDITOR.dtd.$block)&&!d.isDomNestedEditable(z)&&!S._.draggedWidget.wrapper.contains(z)){var J=d.getNestedEditable(U,z);return J&&(z=S._.draggedWidget,S.getByElement(J)==z||(J=CKEDITOR.filter.instances[J.data("cke-filter")],z=z.requiredContent,J&&z&&!J.check(z)))?void 0:CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new M.locator($),liner:new M.liner($,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}(this),function(S){function $(U){S.focused&&F(S.focused,"cut"==U.name)}var M=S.editor;M.on("contentDom",function(){var U=M.editable();U.attachListener(U,"copy",$),U.attachListener(U,"cut",$)})}(this)}function d(S,$,M,U,z){var J=S.editor;CKEDITOR.tools.extend(this,U,{editor:J,id:$,inline:"span"==M.getParent().getName(),element:M,data:CKEDITOR.tools.extend({},"function"==typeof U.defaults?U.defaults():U.defaults),dataReady:!1,inited:!1,ready:!1,edit:d.prototype.edit,focusedEditable:null,definition:U,repository:S,draggable:!1!==U.draggable,_:{downcastFn:U.downcast&&"string"==typeof U.downcast?U.downcasts[U.downcast]:U.downcast}},!0),S.fire("instanceCreated",this),function(S,$){(function(S){(S.wrapper=S.element.getParent()).setAttribute("data-cke-widget-id",S.id)})(S),function(S){if(S.parts){var M,U,$={};for(U in S.parts)M=S.wrapper.findOne(S.parts[U]),$[U]=M;S.parts=$}}(S),function(S){var $,M,U=S.editables;if(S.editables={},S.editables)for($ in U)S.initEditable($,"string"==typeof(M=U[$])?{selector:M}:M)}(S),function(S){if(S.mask){var $=S.wrapper.findOne(".cke_widget_mask");$||(($=new CKEDITOR.dom.element("img",S.editor.document)).setAttributes({src:CKEDITOR.tools.transparentImageData,class:"cke_reset cke_widget_mask"}),S.wrapper.append($)),S.mask=$}}(S),function(S){if(S.draggable){var U,$=S.editor,M=S.wrapper.getLast(d.isDomDragHandlerContainer);M?U=M.findOne("img"):((M=new CKEDITOR.dom.element("span",$.document)).setAttributes({class:"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+$.plugins.widget.path+"images/handle.png)"}),(U=new CKEDITOR.dom.element("img",$.document)).setAttributes({class:"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:$.lang.widget.move,height:15,role:"presentation"}),S.inline&&U.setAttribute("draggable","true"),M.append(U),S.wrapper.append(M)),S.wrapper.on("dragover",function(z){z.data.preventDefault()}),S.wrapper.on("mouseenter",S.updateDragHandlerPosition,S),setTimeout(function(){S.on("data",S.updateDragHandlerPosition,S)},50),!S.inline&&(U.on("mousedown",H,S),CKEDITOR.env.ie&&9>CKEDITOR.env.version)&&U.on("dragstart",function(z){z.data.preventDefault(!0)}),S.dragHandlerContainer=M}}(S),function(S){var $=null;S.on("data",function(){var U,M=this.data.classes;if($!=M){for(U in $)M&&M[U]||this.removeClass(U);for(U in M)this.addClass(U);$=M}})}(S),function(S){S.on("data",function(){if(S.wrapper){var $=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());S.wrapper.setAttribute("role","region"),S.wrapper.setAttribute("aria-label",$)}},null,null,9999)}(S),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&S.wrapper.on("dragstart",function(M){var U=M.data.getTarget();d.getNestedEditable(S,U)||S.inline&&d.isDomDragHandler(U)||M.data.preventDefault()}),S.wrapper.removeClass("cke_widget_new"),S.element.addClass("cke_widget_element"),S.on("key",function(M){if(13==(M=M.data.keyCode))S.edit();else{if(M==CKEDITOR.CTRL+67||M==CKEDITOR.CTRL+88)return void F(S,M==CKEDITOR.CTRL+88);if(M in te||CKEDITOR.CTRL&M||CKEDITOR.ALT&M)return}return!1},null,null,999),S.on("doubleclick",function(M){S.edit()&&M.cancel()}),$.data&&S.on("data",$.data),$.edit&&S.on("edit",$.edit)}(this,U),this.init&&this.init(),this.inited=!0,(S=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(S))),z&&this.setData(z),this.data.classes||this.setData("classes",this.getClasses()),this.dataReady=!0,G(this),this.fire("data",this.data),this.isInited()&&J.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function s(S,$,M){CKEDITOR.dom.element.call(this,$.$),this.editor=S,this._={},$=this.filter=M.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=$?$.getAllowedEnterMode(S.enterMode):S.enterMode,this.shiftEnterMode=$?$.getAllowedEnterMode(S.shiftEnterMode,!0):S.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function u(S,$){if(S.focused=null,$.isInited()){var M=$.editor.checkDirty();S.fire("widgetBlurred",{widget:$}),$.setFocused(!1),!M&&$.editor.resetDirty()}}function f(S){if(S=S.data,"wysiwyg"==this.editor.mode){var U,z,J,V,$=this.editor.editable(),M=this.instances;if($){for(U in M)M[U].isReady()&&!$.contains(M[U].wrapper)&&this.destroy(M[U],!0);if(S&&S.initOnlyNew)M=this.initOnAll();else{var X=$.find(".cke_widget_wrapper");for(M=[],U=0,z=X.count();U<z;U++){if(J=X.getItem(U),V=!this.getByElement(J,!0)){e:{V=C;for(var ee=J;ee=ee.getParent();)if(V(ee)){V=!0;break e}V=!1}V=!V}V&&$.contains(J)&&(J.addClass("cke_widget_new"),M.push(this.initOn(J.getFirst(d.isDomWidgetElement))))}}S&&S.focusInited&&1==M.length&&M[0].focus()}}}function i(S){if(void 0!==S.attributes&&S.attributes["data-widget"]){var $=r(S),M=l(S),U=!1;$&&$.value&&$.value.match(/^\s/g)&&($.parent.attributes["data-cke-white-space-first"]=1,$.value=$.value.replace(/^\s/g,"&nbsp;"),U=!0),M&&M.value&&M.value.match(/\s$/g)&&(M.parent.attributes["data-cke-white-space-last"]=1,M.value=M.value.replace(/\s$/g,"&nbsp;"),U=!0),U&&(S.attributes["data-cke-widget-white-space"]=1)}}function r(S){return S.find(function($){return 3===$.type},!0).shift()}function l(S){return S.find(function($){return 3===$.type},!0).pop()}function n(S,$,M){if(!M.allowedContent&&!M.disallowedContent)return null;var U=this._.filters[S];return U||(this._.filters[S]=U={}),(S=U[$])||(S=M.allowedContent?new CKEDITOR.filter(M.allowedContent):this.editor.filter.clone(),U[$]=S,M.disallowedContent&&S.disallow(M.disallowedContent)),S}function c(S,$){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off",class:"cke_widget_wrapper cke_widget_new cke_widget_"+(S?"inline":"block")+($?" cke_widget_"+$:"")}}function m(S,$,M){if(S.type==CKEDITOR.NODE_ELEMENT&&(U=CKEDITOR.dtd[S.name])&&!U[M.name]){var U=S.split($),z=S.parent;return $=U.getIndex(),S.children.length||(--$,S.remove()),U.children.length||U.remove(),m(z,$,M)}S.add(M,$)}function g(S,$){return"boolean"==typeof S.inline?S.inline:!!CKEDITOR.dtd.$inline[$]}function C(S){return S.hasAttribute("data-cke-temp")}function h(S,$,M,U){var z=S.editor;z.fire("lockSnapshot"),M?(U=M.data("cke-widget-editable"),U=$.editables[U],S.widgetHoldingFocusedEditable=$,$.focusedEditable=U,M.addClass("cke_widget_editable_focused"),U.filter&&z.setActiveFilter(U.filter),z.setActiveEnterMode(U.enterMode,U.shiftEnterMode)):(U||$.focusedEditable.removeClass("cke_widget_editable_focused"),$.focusedEditable=null,S.widgetHoldingFocusedEditable=null,z.setActiveFilter(null),z.setActiveEnterMode(null,null)),z.fire("unlockSnapshot")}function D(S,$){return CKEDITOR.tools.trim($)}function v(S){var $=S.selected,M=[],U=$.slice(0),z=null;return{select:function(J){return 0>CKEDITOR.tools.indexOf($,J)&&M.push(J),0<=(J=CKEDITOR.tools.indexOf(U,J))&&U.splice(J,1),this},focus:function(J){return z=J,this},commit:function(){var V,X,J=S.focused!==z;for(S.editor.fire("lockSnapshot"),J&&(V=S.focused)&&u(S,V);V=U.pop();)$.splice(CKEDITOR.tools.indexOf($,V),1),V.isInited()&&(X=V.editor.checkDirty(),V.setSelected(!1),!X&&V.editor.resetDirty());for(J&&z&&(X=S.editor.checkDirty(),S.focused=z,S.fire("widgetFocused",{widget:z}),z.setFocused(!0),!X&&S.editor.resetDirty());V=M.pop();)$.push(V),V.setSelected(!0);S.editor.fire("unlockSnapshot")}}}function K(S,$,M){var U=0;$=W($);var J,z=S.data.classes||{};if($){for(z=CKEDITOR.tools.clone(z);J=$.pop();)M?z[J]||(U=z[J]=1):z[J]&&(delete z[J],U=1);U&&S.setData("classes",z)}}function y(S){S.cancel()}function F(S,$){var M=S.editor,U=M.document,z=CKEDITOR.env.edge&&16<=CKEDITOR.env.version;if(!U.getById("cke_copybin")){var J=!M.blockless&&!CKEDITOR.env.ie||z?"div":"span",V=(z=U.createElement(J),U.createElement(J));J=CKEDITOR.env.ie&&9>CKEDITOR.env.version,V.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),z.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),z.setStyle("ltr"==M.config.contentsLangDirection?"left":"right","-5000px");var X=M.createRange();X.setStartBefore(S.wrapper),X.setEndAfter(S.wrapper),z.setHtml('<span data-cke-copybin-start="1">\u200b</span>'+M.editable().getHtmlFromRange(X).getHtml()+'<span data-cke-copybin-end="1">\u200b</span>'),M.fire("saveSnapshot"),M.fire("lockSnapshot"),V.append(z),M.editable().append(V);var ee=M.on("selectionChange",y,null,null,0),Q=S.repository.on("checkSelection",y,null,null,0);if(J)var ne=U.getDocumentElement().$,ie=ne.scrollTop;(X=M.createRange()).selectNodeContents(z),X.select(),J&&(ne.scrollTop=ie),setTimeout(function(){$||S.focus(),V.remove(),ee.removeListener(),Q.removeListener(),M.fire("unlockSnapshot"),$&&!M.readOnly&&(S.repository.del(S),M.fire("saveSnapshot"))},100)}}function W(S){return(S=(S=S.getDefinition().attributes)&&S.class)?S.split(/\s+/):null}function x(){var S=CKEDITOR.document.getActive(),$=this.editor,M=$.editable();(M.isInline()?M:$.document.getWindow().getFrame()).equals(S)&&$.focusManager.focus(M)}function T(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function H(S){function $(){var oe;for(re.reset();oe=X.pop();)oe.removeListener();var se=ee;oe=S.sender;var le=this.repository.finder,ce=this.repository.liner,ae=this.editor,de=this.editor.editable();CKEDITOR.tools.isEmpty(ce.visible)||(se=le.getRange(se[0]),this.focus(),ae.fire("drop",{dropRange:se,target:se.startContainer})),de.removeClass("cke_widget_dragging"),ce.hideVisible(),ae.fire("dragend",{target:oe})}if(CKEDITOR.tools.getMouseButton(S)===CKEDITOR.MOUSE_BUTTON_LEFT){var Q,ne,M=this.repository.finder,U=this.repository.locator,z=this.repository.liner,J=this.editor,V=J.editable(),X=[],ee=[];this.repository._.draggedWidget=this;var ie=M.greedySearch(),re=CKEDITOR.tools.eventsBuffer(50,function(){Q=U.locate(ie),(ee=U.sort(ne,1)).length&&(z.prepare(ie,Q),z.placeLine(ee[0]),z.cleanup())});V.addClass("cke_widget_dragging"),X.push(V.on("mousemove",function(oe){ne=oe.data.$.clientY,re.input()})),J.fire("dragstart",{target:S.sender}),X.push(J.document.once("mouseup",$,this)),V.isInline()||X.push(CKEDITOR.document.once("mouseup",$,this))}}function G(S){S.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(S.data)))}function Y(){function S(){}function $(z,J,V){return!(!V||!this.checkElement(z))&&(z=V.widgets.getByElement(z,!0))&&z.checkStyleActive(this)}function M(z){function J(ie,re,oe){for(var se=ie.length,le=0;le<se;){if(re.call(oe,ie[le],le,ie))return ie[le];le++}}function V(ie){function re(oe,se){var le=CKEDITOR.tools.object.keys(oe),ce=CKEDITOR.tools.object.keys(se);if(le.length!==ce.length)return!1;for(var ae in oe)if(("object"!=typeof oe[ae]||"object"!=typeof se[ae]||!re(oe[ae],se[ae]))&&oe[ae]!==se[ae])return!1;return!0}return function(oe){return re(ie.getDefinition(),oe.getDefinition())}}var ee,X=z.widget;U[X]||(U[X]={});for(var Q=0,ne=z.group.length;Q<ne;Q++)U[X][ee=z.group[Q]]||(U[X][ee]=[]),J(ee=U[X][ee],V(z))||ee.push(z)}var U={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(z){this.widget=z.widget,(this.group="string"==typeof z.group?[z.group]:z.group)&&M(this)},apply:function(z){var J;z instanceof CKEDITOR.editor&&this.checkApplicable(z.elementPath(),z)&&(J=z.widgets.focused,this.group&&this.removeStylesFromSameGroup(z),J.applyStyle(this))},remove:function(z){z instanceof CKEDITOR.editor&&this.checkApplicable(z.elementPath(),z)&&z.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(z){var J,V,X=!1;if(!(z instanceof CKEDITOR.editor))return!1;if(V=z.elementPath(),this.checkApplicable(V,z))for(var ee=0,Q=this.group.length;ee<Q;ee++){J=U[this.widget][this.group[ee]];for(var ne=0;ne<J.length;ne++)J[ne]!==this&&J[ne].checkActive(V,z)&&(z.widgets.focused.removeStyle(J[ne]),X=!0)}return X},checkActive:function(z,J){return this.checkElementMatch(z.lastElement,0,J)},checkApplicable:function(z,J){return J instanceof CKEDITOR.editor&&this.checkElement(z.lastElement)},checkElementMatch:$,checkElementRemovable:$,checkElement:function(z){return!!d.isDomWidgetWrapper(z)&&(z=z.getFirst(d.isDomWidgetElement))&&z.data("widget")==this.widget},buildPreview:function(z){return z||this._.definition.name},toAllowedContentRules:function(z){if(!z)return null;var J,V={};return(z=z.widgets.registered[this.widget])?z.styleableElements?(J=this.getClassesArray())?(V[z.styleableElements]={classes:J,propertiesOnly:!0},V):null:z.styleToAllowedContentRules?z.styleToAllowedContentRules(this):null:null},getClassesArray:function(){var z=this._.definition.attributes&&this._.definition.attributes.class;return z?CKEDITOR.tools.trim(z).split(/\s+/):null},applyToRange:S,removeFromRange:S,applyToObject:S})}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){void 0!==CKEDITOR.document.$.querySelectorAll&&(CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid #ffd25c;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid #ffd25c}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #47a4f5}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}"),Y())},beforeInit:function(S){void 0!==CKEDITOR.document.$.querySelectorAll&&(S.widgets=new e(S))},afterInit:function(S){if(void 0!==CKEDITOR.document.$.querySelectorAll){var M,U,z,$=S.widgets.registered;for(U in $)(z=(M=$[U]).button)&&S.ui.addButton&&S.ui.addButton(CKEDITOR.tools.capitalize(M.name,!0),{label:z,command:M.name,toolbar:"insert,10"});!function(S){S.contextMenu&&S.contextMenu.addListener(function($){if($=S.widgets.getByElement($,!0))return $.fire("contextMenu",{})})}(S)}}}),e.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(S,$){return($=CKEDITOR.tools.prototypedCopy($)).name=S,$._=$._||{},this.editor.fire("widgetDefinition",$),$.template&&($.template=new CKEDITOR.template($.template)),function(S,$){S.addCommand($.name,{exec:function(M,U){function z(){M.widgets.finalizeCreation(ee)}if((J=M.widgets.focused)&&J.name==$.name)J.edit();else if($.insert)$.insert({editor:M,commandData:U});else if($.template){var V,J="function"==typeof $.defaults?$.defaults():$.defaults,X=(J=CKEDITOR.dom.element.createFromHtml($.template.output(J)),M.widgets.wrapElement(J,$.name)),ee=new CKEDITOR.dom.documentFragment(X.getDocument());ee.append(X),(V=M.widgets.initOn(J,$,U&&U.startupData))?(J=V.once("edit",function(ne){ne.data.dialog?V.once("dialog",function(ie){var re,oe;re=(ie=ie.data).once("ok",z,null,null,20),oe=ie.once("cancel",function(se){se.data&&!1===se.data.hide||M.widgets.destroy(V,!0)}),ie.once("hide",function(){re.removeListener(),oe.removeListener()})}):z()},null,null,999),V.edit(),J.removeListener()):z()}},allowedContent:$.allowedContent,requiredContent:$.requiredContent,contentForms:$.contentForms,contentTransformations:$.contentTransformations})}(this.editor,$),function(S,$){var V,X,ee,Q,z=$.upcast;z&&(V="string"==typeof z?function(V,X){var Q,ne,ee=$.upcast.split(",");for(ne=0;ne<ee.length;ne++)if((Q=ee[ne])===V.name)return $.upcasts[Q].call(this,V,X);return!1}:z,X=$,ee=$.upcastPriority||10,0>(Q=CKEDITOR.tools.getIndex(S._.upcasts,function(ne){return ne[2]>ee}))&&(Q=S._.upcasts.length),S._.upcasts.splice(Q,0,[CKEDITOR.tools.bind(V,X),X.name,ee]))}(this,$),this.registered[S]=$},addUpcastCallback:function(S){this._.upcastCallbacks.push(S)},checkSelection:function(){var U,S=this.editor.getSelection(),$=S.getSelectedElement(),M=v(this);if($&&(U=this.getByElement($,!0)))return M.focus(U).select(U).commit();if(!(S=S.getRanges()[0])||S.collapsed)return M.commit();for((S=new CKEDITOR.dom.walker(S)).evaluator=d.isDomWidgetWrapper;$=S.next();)M.select(this.getByElement($));M.commit()},checkWidgets:function(S){this.fire("checkWidgets",CKEDITOR.tools.copy(S||{}))},del:function(S){if(this.focused===S){var U,$=S.editor,M=$.createRange();(U=M.moveToClosestEditablePosition(S.wrapper,!0))||(U=M.moveToClosestEditablePosition(S.wrapper,!1)),U&&$.getSelection().selectRanges([M])}S.wrapper.remove(),this.destroy(S,!0)},destroy:function(S,$){this.widgetHoldingFocusedEditable===S&&h(this,S,null,$),S.destroy($),delete this.instances[S.id],this.fire("instanceDestroyed",S)},destroyAll:function(S,$){var M,U,z=this.instances;if($&&!S){z=(U=$.find(".cke_widget_wrapper")).count();for(var J=0;J<z;++J)(M=this.getByElement(U.getItem(J),!0))&&this.destroy(M)}else for(U in z)this.destroy(M=z[U],S)},finalizeCreation:function(S){(S=S.getFirst())&&d.isDomWidgetWrapper(S)&&(this.editor.insertElement(S),(S=this.getByElement(S)).ready=!0,S.fire("ready"),S.focus())},getByElement:function(){function S(M){return M.is($)&&M.data("cke-widget-id")}var $={div:1,span:1};return function(M,U){if(!M)return null;var z=S(M);if(!U&&!z){var J=this.editor.editable();do{M=M.getParent()}while(M&&!M.equals(J)&&!(z=S(M)))}return this.instances[z]||null}}(),initOn:function(S,$,M){if($?"string"==typeof $&&($=this.registered[$]):$=this.registered[S.data("widget")],!$)return null;var U=this.wrapElement(S,$.name);return U?U.hasClass("cke_widget_new")?(S=new d(this,this._.nextId++,S,$,M)).isInited()?this.instances[S.id]=S:null:this.getByElement(S):null},initOnAll:function(S){for(var M,$=[],U=(S=(S||this.editor.editable()).find(".cke_widget_new")).count();U--;)(M=this.initOn(S.getItem(U).getFirst(d.isDomWidgetElement)))&&$.push(M);return $},onWidget:function(S){var $=Array.prototype.slice.call(arguments);for(var M in $.shift(),this.instances){var U=this.instances[M];U.name==S&&U.on.apply(U,$)}this.on("instanceCreated",function(z){(z=z.data).name==S&&z.on.apply(z,$)})},parseElementClasses:function(S){if(!S)return null;S=CKEDITOR.tools.trim(S).split(/\s+/);for(var $,M={},U=0;$=S.pop();)-1==$.indexOf("cke_")&&(M[$]=U=1);return U?M:null},wrapElement:function(S,$){var U,z,M=null;if(S instanceof CKEDITOR.dom.element){if($=$||S.data("widget"),!(U=this.registered[$]))return null;if((M=S.getParent())&&M.type==CKEDITOR.NODE_ELEMENT&&M.data("cke-widget-wrapper"))return M;S.hasAttribute("data-cke-widget-keep-attr")||S.data("cke-widget-keep-attr",S.data("widget")?1:0),S.data("widget",$),(z=g(U,S.getName()))&&i(S),(M=new CKEDITOR.dom.element(z?"span":"div")).setAttributes(c(z,$)),M.data("cke-display-name",U.pathName?U.pathName:S.getName()),S.getParent(!0)&&M.replace(S),S.appendTo(M)}else if(S instanceof CKEDITOR.htmlParser.element){if(!(U=this.registered[$=$||S.attributes["data-widget"]]))return null;if((M=S.parent)&&M.type==CKEDITOR.NODE_ELEMENT&&M.attributes["data-cke-widget-wrapper"])return M;var J;"data-cke-widget-keep-attr"in S.attributes||(S.attributes["data-cke-widget-keep-attr"]=S.attributes["data-widget"]?1:0),$&&(S.attributes["data-widget"]=$),(z=g(U,S.name))&&i(S),(M=new CKEDITOR.htmlParser.element(z?"span":"div",c(z,$))).attributes["data-cke-display-name"]=U.pathName?U.pathName:S.name,(U=S.parent)&&(J=S.getIndex(),S.remove()),M.add(S),U&&m(U,J,M)}return M},_tests_createEditableFilter:n},CKEDITOR.event.implementOn(e.prototype),d.prototype={addClass:function(S){this.element.addClass(S),this.wrapper.addClass(d.WRAPPER_CLASS_PREFIX+S)},applyStyle:function(S){K(this,S,1)},checkStyleActive:function(S){var $;if(!(S=W(S)))return!1;for(;$=S.pop();)if(!this.hasClass($))return!1;return!0},destroy:function(S){if(this.fire("destroy"),this.editables)for(var $ in this.editables)this.destroyEditable($,S);S||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(S,$){var M=this.editables[S],U=!0;if(M.removeListener("focus",T),M.removeListener("blur",x),this.editor.focusManager.remove(M),M.filter){for(var z in this.repository.instances){var J=this.repository.instances[z];J.editables&&(J=J.editables[S])&&J!==M&&M.filter===J.filter&&(U=!1)}U&&(M.filter.destroy(),(U=this.repository._.filters[this.name])&&delete U[S])}$||(this.repository.destroyAll(!1,M),M.removeClass("cke_widget_editable"),M.removeClass("cke_widget_editable_focused"),M.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[S]},edit:function(){var S={dialog:this.dialog},$=this;return!(!1===this.fire("edit",S)||!S.dialog||(this.editor.openDialog(S.dialog,function(M){var U,z;!1!==$.fire("dialog",M)&&(U=M.on("show",function(){M.setupContent($)}),z=M.on("ok",function(){var J,V=$.on("data",function(X){J=1,X.cancel()},null,null,0);$.editor.fire("saveSnapshot"),M.commitContent($),V.removeListener(),J&&($.fire("data",$.data),$.editor.fire("saveSnapshot"))}),M.once("hide",function(){U.removeListener(),z.removeListener()}))}),0))},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(S){return this.element.hasClass(S)},initEditable:function(S,$){var M=this._findOneNotNested($.selector);return!(!M||!M.is(CKEDITOR.dtd.$editable)||(M=new s(this.editor,M,{filter:n.call(this.repository,this.name,S,$)}),this.editables[S]=M,M.setAttributes({contenteditable:"true","data-cke-widget-editable":S,"data-cke-enter-mode":M.enterMode}),M.filter&&M.data("cke-filter",M.filter.id),M.addClass("cke_widget_editable"),M.removeClass("cke_widget_editable_focused"),$.pathName&&M.data("cke-display-name",$.pathName),this.editor.focusManager.add(M),M.on("focus",T,this),CKEDITOR.env.ie&&M.on("blur",x,this),M._.initialSetData=!0,M.setData(M.getHtml()),0))},_findOneNotNested:function(S){S=this.wrapper.find(S);for(var $,M,U=0;U<S.count();U++)if(M=($=S.getItem(U)).getAscendant(d.isDomWidgetWrapper),this.wrapper.equals(M))return $;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var S=this.editor.getSelection();if(S){var $=this.editor.checkDirty();S.fake(this.wrapper),!$&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(S){this.element.removeClass(S),this.wrapper.removeClass(d.WRAPPER_CLASS_PREFIX+S)},removeStyle:function(S){K(this,S,0)},setData:function(S,$){var M=this.data,U=0;if("string"==typeof S)M[S]!==$&&(M[S]=$,U=1);else{var z=S;for(S in z)M[S]!==z[S]&&(U=1,M[S]=z[S])}return U&&this.dataReady&&(G(this),this.fire("data",M)),this},setFocused:function(S){return this.wrapper[S?"addClass":"removeClass"]("cke_widget_focused"),this.fire(S?"focus":"blur"),this},setSelected:function(S){return this.wrapper[S?"addClass":"removeClass"]("cke_widget_selected"),this.fire(S?"select":"deselect"),this},updateDragHandlerPosition:function(){var S=this.editor,M=this._.dragHandlerOffset,$={x:($=this.element.$).offsetLeft,y:$.offsetTop-15};M&&$.x==M.x&&$.y==M.y||(M=S.checkDirty(),S.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:$.y+"px",left:$.x+"px",display:"block"}),S.fire("unlockSnapshot"),!M&&S.resetDirty(),this._.dragHandlerOffset=$)}},CKEDITOR.event.implementOn(d.prototype),d.getNestedEditable=function(S,$){return!$||$.equals(S)?null:d.isDomNestedEditable($)?$:d.getNestedEditable(S,$.getParent())},d.isDomDragHandler=function(S){return S.type==CKEDITOR.NODE_ELEMENT&&S.hasAttribute("data-cke-widget-drag-handler")},d.isDomDragHandlerContainer=function(S){return S.type==CKEDITOR.NODE_ELEMENT&&S.hasClass("cke_widget_drag_handler_container")},d.isDomNestedEditable=function(S){return S.type==CKEDITOR.NODE_ELEMENT&&S.hasAttribute("data-cke-widget-editable")},d.isDomWidgetElement=function(S){return S.type==CKEDITOR.NODE_ELEMENT&&S.hasAttribute("data-widget")},d.isDomWidgetWrapper=function(S){return S.type==CKEDITOR.NODE_ELEMENT&&S.hasAttribute("data-cke-widget-wrapper")},d.isDomWidget=function(S){return!!S&&(this.isDomWidgetWrapper(S)||this.isDomWidgetElement(S))},d.isParserWidgetElement=function(S){return S.type==CKEDITOR.NODE_ELEMENT&&!!S.attributes["data-widget"]},d.isParserWidgetWrapper=function(S){return S.type==CKEDITOR.NODE_ELEMENT&&!!S.attributes["data-cke-widget-wrapper"]},d.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_",s.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(S){this._.initialSetData||this.editor.widgets.destroyAll(!1,this),this._.initialSetData=!1,S=this.editor.dataProcessor.toHtml(S,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(S),this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var Z=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,te={37:1,38:1,39:1,40:1,8:1,46:1};te[CKEDITOR.SHIFT+121]=1,CKEDITOR.plugins.widget=d,d.repository=e,d.nestedEditable=s}(),function(){function e(s,a,o){this.editor=s,this.notification=null,this._message=new CKEDITOR.template(a),this._singularMessage=o?new CKEDITOR.template(o):null,this._tasks=[],this._doneTasks=this._doneWeights=this._totalWeights=0}function d(s){this._weight=s||1,this._doneWeight=0,this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"}),e.prototype={createTask:function(s){s=s||{};var o,a=!this.notification;return a&&(this.notification=this._createNotification()),(o=this._addTask(s)).on("updated",this._onTaskUpdate,this),o.on("done",this._onTaskDone,this),o.on("canceled",function(){this._removeTask(o)},this),this.update(),a&&this.notification.show(),o},update:function(){this._updateNotification(),this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var s=this.getTaskCount(),a={current:this.getDoneTaskCount(),max:s,percentage:Math.round(100*this.getPercentage())};return(1==s&&this._singularMessage?this._singularMessage:this._message).output(a)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(s){return s=new d(s.weight),this._tasks.push(s),this._totalWeights+=s._weight,s},_removeTask:function(s){var a=CKEDITOR.tools.indexOf(this._tasks,s);-1!==a&&(s._doneWeight&&(this._doneWeights-=s._doneWeight),this._totalWeights-=s._weight,this._tasks.splice(a,1),this.update())},_onTaskUpdate:function(s){this._doneWeights+=s.data,this.update()},_onTaskDone:function(){this._doneTasks+=1,this.update()}},CKEDITOR.event.implementOn(e.prototype),d.prototype={done:function(){this.update(this._weight)},update:function(s){if(!this.isDone()&&!this.isCanceled()){var a=(s=Math.min(this._weight,s))-this._doneWeight;this._doneWeight=s,this.fire("updated",a),this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}},CKEDITOR.event.implementOn(d.prototype),CKEDITOR.plugins.notificationAggregator=e,CKEDITOR.plugins.notificationAggregator.task=d}(),CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(e){e.filter.allow("*[!data-widget,!data-cke-upload-id]")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported}}),CKEDITOR.fileTools||(CKEDITOR.fileTools={}),CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(e,d,s){var a=CKEDITOR.fileTools,o=e.uploadRepository;s.fileToElement&&e.on("paste",function(f){var t,c,i=e.widgets.registered[d],r=(f=f.data).dataTransfer,l=r.getFilesCount(),n=i.loadMethod||"loadAndUpload";if(!f.dataValue&&l)for(c=0;c<l;c++)if(t=r.getFile(c),!i.supportedTypes||a.isTypeSupported(t,i.supportedTypes)){var m=i.fileToElement(t);t=o.create(t,void 0,i.loaderType),m&&(t[n](i.uploadUrl,i.additionalRequestParameters),CKEDITOR.fileTools.markElement(m,d,t.id),"loadAndUpload"!=n&&"upload"!=n||i.skipNotifications||CKEDITOR.fileTools.bindNotifications(e,t),f.dataValue+=m.getOuterHtml())}},null,null,s.supportedTypes?10:20),CKEDITOR.tools.extend(s,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var n,t,f=this,i=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),r=o.loaders[i],l=CKEDITOR.tools.capitalize;r.on("update",function(c){"abort"===r.status&&"function"==typeof f.onAbort&&f.onAbort(r),f.wrapper&&f.wrapper.getParent()?(e.fire("lockSnapshot"),c="on"+l(r.status),("abort"===r.status||"function"!=typeof f[c]||!1!==f[c](r))&&(t="cke_upload_"+r.status,f.wrapper&&t!=n&&(n&&f.wrapper.removeClass(n),f.wrapper.addClass(t),n=t),"error"!=r.status&&"abort"!=r.status||e.widgets.del(f)),e.fire("unlockSnapshot")):(CKEDITOR.instances[e.name]&&e.editable().find('[data-cke-upload-id="'+i+'"]').count()||r.abort(),c.removeListener())}),r.update()},replaceWith:function(f,i){if(""===f.trim())e.widgets.del(this);else{var t,c,r=this==e.widgets.focused,l=e.editable(),n=e.createRange();r||(c=e.getSelection().createBookmarks()),n.setStartBefore(this.wrapper),n.setEndAfter(this.wrapper),r&&(t=n.createBookmark()),l.insertHtmlIntoRange(f,n,i),e.widgets.checkWidgets({initOnlyNew:!0}),e.widgets.destroy(this,!0),r?(n.moveToBookmark(t),n.select()):e.getSelection().selectBookmarks(c)}},_getLoader:function(){var f=this.wrapper.findOne("[data-cke-upload-id]");return f?this.editor.uploadRepository.loaders[f.data("cke-upload-id")]:null}}),e.widgets.add(d,s)},markElement:function(e,d,s){e.setAttributes({"data-cke-upload-id":s,"data-widget":d})},bindNotifications:function(e,d){var a,o=null;d.on("update",function(){!o&&d.uploadTotal&&((!(a=e._.uploadWidgetNotificaionAggregator)||a.isFinished())&&(a=e._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(e,e.lang.uploadwidget.uploadMany,e.lang.uploadwidget.uploadOne)).once("finished",function(){var u=a.getTaskCount();0===u?a.notification.hide():a.notification.update({message:1==u?e.lang.uploadwidget.doneOne:e.lang.uploadwidget.doneMany.replace("%1",u),type:"success",important:1})}),o=a.createTask({weight:d.uploadTotal})),o&&"uploading"==d.status&&o.update(d.uploaded)}),d.on("uploaded",function(){o&&o.done()}),d.on("error",function(){o&&o.cancel(),e.showNotification(d.message,"warning")}),d.on("abort",function(){o&&o.cancel(),CKEDITOR.instances[e.name]&&e.showNotification(e.lang.uploadwidget.abort,"info")})}}),function(){function e(a){return 9>=a&&(a="0"+a),String(a)}function d(a){var o=[(o=new Date).getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()];return s+=1,"image-"+CKEDITOR.tools.array.map(o,e).join("")+"-"+s+"."+a}var s=0;CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},isSupportedEnvironment:function(){return CKEDITOR.plugins.clipboard.isFileApiSupported},init:function(a){if(this.isSupportedEnvironment()){var o=CKEDITOR.fileTools,u=o.getUploadUrl(a.config,"image");u&&(o.addUploadWidget(a,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:u,fileToElement:function(){var f=new CKEDITOR.dom.element("img");return f.setAttribute("src","data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs="),f},parts:{img:"img"},onUploading:function(f){this.parts.img.setAttribute("src",f.data)},onUploaded:function(f){var i=this.parts.img.$;this.replaceWith('<img src="'+f.url+'" width="'+(f.responseData.width||i.naturalWidth)+'" height="'+(f.responseData.height||i.naturalHeight)+'">')}}),a.on("paste",function(f){if(f.data.dataValue.match(/<img[\s\S]+data:/i)){f=f.data;var r,l,n,i=document.implementation.createHTMLDocument("");for((i=new CKEDITOR.dom.element(i.body)).data("cke-editable",1),i.appendHtml(f.dataValue),r=i.find("img"),n=0;n<r.count();n++){var t=(l=r.getItem(n)).getAttribute("src"),c=t&&"data:"==t.substring(0,5),m=null===l.data("cke-realelement");c&&m&&!l.data("cke-upload-id")&&!l.isReadOnly(1)&&(c=(c=t.match(/image\/([a-z]+?);/i))&&c[1]||"jpg",(t=a.uploadRepository.create(t,d(c))).upload(u),o.markElement(l,"uploadimage",t.id),o.bindNotifications(a,t))}f.dataValue=i.getHtml()}}))}}})}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish="function"==typeof e.config.wsc_onFinish?e.config.wsc_onFinish:function(){},e.config.wsc_onClose="function"==typeof e.config.wsc_onClose?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,e.config.wsc_interfaceLang=e.config.wsc_interfaceLang,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},onLoad:function(e){"moono-lisa"==(CKEDITOR.skinName||e.config.skin)&&CKEDITOR.document.appendStyleSheet(CKEDITOR.getUrl(this.path+"skins/"+CKEDITOR.skin.name+"/wsc.css"))},init:function(e){var d=CKEDITOR.env;this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!(CKEDITOR.env.opera||CKEDITOR.env.air||document.domain!=window.location.hostname||d.ie&&(8>d.version||d.quirks))},void 0===e.plugins.scayt&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,click:function(s){var a=s.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?s.container.getText():s.document.getBody().getText();(a=a.replace(/\s/g,""))?s.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}}),function(){function e(o){function u(t){var c=!1;n.attachListener(n,"keydown",function(){var m=i.getBody().getElementsByTag(t);if(!c){for(var g=0;g<m.count();g++)m.getItem(g).setCustomData("retain",!0);c=!0}},null,null,1),n.attachListener(n,"keyup",function(){var m=i.getElementsByTag(t);c&&(1==m.count()&&!m.getItem(0).getCustomData("retain")&&CKEDITOR.tools.isEmpty(m.getItem(0).getAttributes())&&m.getItem(0).remove(1),c=!1)})}var f=this.editor,i=o.document,r=i.body,l=i.getElementById("cke_actscrpt");l&&l.parentNode.removeChild(l),(l=i.getElementById("cke_shimscrpt"))&&l.parentNode.removeChild(l),(l=i.getElementById("cke_basetagscrpt"))&&l.parentNode.removeChild(l),r.contentEditable=!0,CKEDITOR.env.ie&&(r.hideFocus=!0,r.disabled=!0,r.removeAttribute("disabled")),delete this._.isLoadingData,this.$=r,i=new CKEDITOR.dom.document(i),this.setup(),this.fixInitialSelection();var n=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&i.getDocumentElement().addClass(i.$.compatMode),CKEDITOR.env.ie&&!CKEDITOR.env.edge&&f.enterMode!=CKEDITOR.ENTER_P?u("p"):CKEDITOR.env.edge&&15>CKEDITOR.env.version&&f.enterMode!=CKEDITOR.ENTER_DIV&&u("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&i.getDocumentElement().on("mousedown",function(t){t.data.getTarget().is("html")&&setTimeout(function(){f.editable().focus()})}),function(o){function f(r){r.returnValue=!1}if(CKEDITOR.env.gecko)try{var i=o.document.$;i.execCommand("enableObjectResizing",!1,!o.config.disableObjectResizing),i.execCommand("enableInlineTableEditing",!1,!o.config.disableNativeTableHandles)}catch(r){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&o.config.disableObjectResizing&&function(){var r;o.editable().attachListener(o,"selectionChange",function(){var l=o.getSelection().getSelectedElement();l&&(r&&(r.detachEvent("onresizestart",f),r=null),l.$.attachEvent("onresizestart",f),r=l.$)})}()}(f);try{f.document.$.execCommand("2D-position",!1,!0)}catch(t){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==f.document.$.compatMode)&&this.attachListener(this,"keydown",function(t){var c=t.data.getKeystroke();if(33==c||34==c)if(CKEDITOR.env.ie)setTimeout(function(){f.getSelection().scrollIntoView()},0);else if(f.window.$.innerHeight>this.$.offsetHeight){var m=f.createRange();m[33==c?"moveToElementEditStart":"moveToElementEditEnd"](this),m.select(),t.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(i,"blur",function(){try{i.$.selection.empty()}catch(t){}}),CKEDITOR.env.iOS&&this.attachListener(i,"touchend",function(){o.focus()}),(r=f.document.getElementsByTag("title").getItem(0)).data("cke-title",r.getText()),CKEDITOR.env.ie&&(f.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready"),f.fire("contentDom"),this._.isPendingFocus&&(f.focus(),this._.isPendingFocus=!1),setTimeout(function(){f.fire("dataReady")},0)},0,this)}var a;CKEDITOR.plugins.add("wysiwygarea",{init:function(o){o.config.fullPage&&o.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),o.addMode("wysiwyg",function(u){function f(m){m&&m.removeListener(),o.editable(new a(o,r.$.contentWindow.document.body)),o.setData(o.getData(1),u)}var i="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",r=(i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(i)+"}())":"",CKEDITOR.dom.element.createFromHtml('<iframe src="'+i+'" frameBorder="0"></iframe>'));r.setStyles({width:"100%",height:"100%"}),r.addClass("cke_wysiwyg_frame").addClass("cke_reset"),(i=o.ui.space("contents")).append(r);var l=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;l&&r.on("load",f);var n=o.title,t=o.fire("ariaEditorHelpLabel",{}).label;if(n&&(CKEDITOR.env.ie&&t&&(n+=", "+t),r.setAttribute("title",n)),t){n=CKEDITOR.tools.getNextId();var c=CKEDITOR.dom.element.createFromHtml('<span id="'+n+'" class="cke_voice_label">'+t+"</span>");i.append(c,1),r.setAttribute("aria-describedby",n)}o.on("beforeModeUnload",function(m){m.removeListener(),c&&c.remove()}),r.setAttributes({tabIndex:o.tabIndex,allowTransparency:"true"}),!l&&f(),o.fire("ariaWidget",r)})}}),CKEDITOR.editor.prototype.addContentsCss=function(o){var u=this.config,f=u.contentsCss;CKEDITOR.tools.isArray(f)||(u.contentsCss=f?[f]:[]),u.contentsCss.push(o)},a=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(o){CKEDITOR.tools.setTimeout(e,0,this,o)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(o,u){var f=this.editor;if(u)this.setHtml(o),this.fixInitialSelection(),f.fire("dataReady");else{this._.isLoadingData=!0,f._.dataStore={id:1};var i=f.config,r=i.fullPage,l=i.docType,n=CKEDITOR.tools.buildStyleHtml(function(){var o=[];if(8<=CKEDITOR.document.$.documentMode){o.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var f,u=[];for(f in CKEDITOR.dtd.$removeEmpty)u.push("html.CSS1Compat "+f+"[contenteditable=false]");o.push(u.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(o.push("html{height:100% !important}"),o.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return o.push("html{cursor:text;*cursor:auto}"),o.push("img,input,textarea{cursor:default}"),o.join("\n")}()).replace(/<style>/,'<style data-cke-temp="1">');r||(n+=CKEDITOR.tools.buildStyleHtml(f.config.contentsCss));var t=i.baseHref?'<base href="'+i.baseHref+'" data-cke-temp="1" />':"";r&&(o=o.replace(/<!DOCTYPE[^>]*>/i,function(m){return f.docType=l=m,""}).replace(/<\?xml\s[^\?]*\?>/i,function(m){return f.xmlDeclaration=m,""})),o=f.dataProcessor.toHtml(o),r?(/<body[\s|>]/.test(o)||(o="<body>"+o),/<html[\s|>]/.test(o)||(o="<html>"+o+"</html>"),/<head[\s|>]/.test(o)?/<title[\s|>]/.test(o)||(o=o.replace(/<head[^>]*>/,"$&<title></title>")):o=o.replace(/<html[^>]*>/,"$&<head><title></title></head>"),t&&(o=o.replace(/<head[^>]*?>/,"$&"+t)),o=o.replace(/<\/head\s*>/,n+"$&"),o=l+o):o=i.docType+'<html dir="'+i.contentsLangDirection+'" lang="'+(i.contentsLanguage||f.langCode)+'"><head><title>'+this._.docTitle+"</title>"+t+n+"</head><body"+(i.bodyId?' id="'+i.bodyId+'"':"")+(i.bodyClass?' class="'+i.bodyClass+'"':"")+">"+o+"</body></html>",CKEDITOR.env.gecko&&(o=o.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(o=o.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e"))),i='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(i+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),t&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(i+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),o=o.replace(/(?=\s*<\/(:?head)>)/,i),this.clearCustomData(),this.clearListeners(),f.fire("contentDomUnload");var c=this.getDocument();try{c.write(o)}catch(m){setTimeout(function(){c.write(o)},0)}}},getData:function(o){if(o)return this.getHtml();var u=(o=this.editor).config,i=(f=u.fullPage)&&o.docType,r=f&&o.xmlDeclaration,l=this.getDocument(),f=f?l.getDocumentElement().getOuterHtml():l.getBody().getHtml();return CKEDITOR.env.gecko&&u.enterMode!=CKEDITOR.ENTER_BR&&(f=f.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),f=o.dataProcessor.toDataFormat(f),r&&(f=r+"\n"+f),i&&(f=i+"\n"+f),f},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:a.baseProto.focus.call(this)},detach:function(){var f,o=this.editor,u=o.document;try{f=o.window.getFrame()}catch(i){}a.baseProto.detach.call(this),this.clearCustomData(),u.getDocumentElement().clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),f&&f.getParent()?(f.clearCustomData(),(o=f.removeCustomData("onResize"))&&o.removeListener(),f.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,blockquote,notification,button,toolbar,clipboard,panel,floatpanel,menu,contextmenu,elementspath,indent,indentlist,list,enterkey,entities,popup,filetools,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,image,fakeobjects,link,magicline,maximize,pastefromword,pastetext,removeformat,resize,menubutton,scayt,showborders,sourcearea,specialchar,stylescombo,tab,table,tabletools,tableselection,undo,lineutils,widgetselection,widget,notificationaggregator,uploadwidget,uploadimage,wsc,wysiwygarea",CKEDITOR.config.skin="moono-lisa",function(){var e=function(d,s){var a=CKEDITOR.getUrl("plugins/"+s);d=d.split(",");for(var o=0;o<d.length;o++)CKEDITOR.skin.icons[d[o]]={path:a,offset:-d[++o],bgsize:d[++o]}};CKEDITOR.env.hidpi?e("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,copyformatting,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,easyimagealigncenter,552,,easyimagealignleft,576,,easyimagealignright,600,,easyimagealt,624,,easyimagefull,648,,easyimageside,672,,easyimageupload,696,,embed,720,,embedsemantic,744,,emojipanel,768,,find-rtl,792,,find,816,,replace,840,,flash,864,,button,888,,checkbox,912,,form,936,,hiddenfield,960,,imagebutton,984,,radio,1008,,select-rtl,1032,,select,1056,,textarea-rtl,1080,,textarea,1104,,textfield-rtl,1128,,textfield,1152,,horizontalrule,1176,,iframe,1200,,image,1224,,indent-rtl,1248,,indent,1272,,outdent-rtl,1296,,outdent,1320,,justifyblock,1344,,justifycenter,1368,,justifyleft,1392,,justifyright,1416,,language,1440,,anchor-rtl,1464,,anchor,1488,,link,1512,,unlink,1536,,bulletedlist-rtl,1560,,bulletedlist,1584,,numberedlist-rtl,1608,,numberedlist,1632,,mathjax,1656,,maximize,1680,,newpage-rtl,1704,,newpage,1728,,pagebreak-rtl,1752,,pagebreak,1776,,pastefromword-rtl,1800,,pastefromword,1824,,pastetext-rtl,1848,,pastetext,1872,,placeholder,1896,,preview-rtl,1920,,preview,1944,,print,1968,,removeformat,1992,,save,2016,,scayt,2040,,selectall,2064,,showblocks-rtl,2088,,showblocks,2112,,smiley,2136,,source-rtl,2160,,source,2184,,sourcedialog-rtl,2208,,sourcedialog,2232,,specialchar,2256,,table,2280,,templates-rtl,2304,,templates,2328,,uicolor,2352,,redo-rtl,2376,,redo,2400,,undo-rtl,2424,,undo,2448,,simplebox,4944,auto,spellchecker,2496,","icons_hidpi.png"):e("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,copyformatting,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,easyimagealigncenter,552,auto,easyimagealignleft,576,auto,easyimagealignright,600,auto,easyimagealt,624,auto,easyimagefull,648,auto,easyimageside,672,auto,easyimageupload,696,auto,embed,720,auto,embedsemantic,744,auto,emojipanel,768,auto,find-rtl,792,auto,find,816,auto,replace,840,auto,flash,864,auto,button,888,auto,checkbox,912,auto,form,936,auto,hiddenfield,960,auto,imagebutton,984,auto,radio,1008,auto,select-rtl,1032,auto,select,1056,auto,textarea-rtl,1080,auto,textarea,1104,auto,textfield-rtl,1128,auto,textfield,1152,auto,horizontalrule,1176,auto,iframe,1200,auto,image,1224,auto,indent-rtl,1248,auto,indent,1272,auto,outdent-rtl,1296,auto,outdent,1320,auto,justifyblock,1344,auto,justifycenter,1368,auto,justifyleft,1392,auto,justifyright,1416,auto,language,1440,auto,anchor-rtl,1464,auto,anchor,1488,auto,link,1512,auto,unlink,1536,auto,bulletedlist-rtl,1560,auto,bulletedlist,1584,auto,numberedlist-rtl,1608,auto,numberedlist,1632,auto,mathjax,1656,auto,maximize,1680,auto,newpage-rtl,1704,auto,newpage,1728,auto,pagebreak-rtl,1752,auto,pagebreak,1776,auto,pastefromword-rtl,1800,auto,pastefromword,1824,auto,pastetext-rtl,1848,auto,pastetext,1872,auto,placeholder,1896,auto,preview-rtl,1920,auto,preview,1944,auto,print,1968,auto,removeformat,1992,auto,save,2016,auto,scayt,2040,auto,selectall,2064,auto,showblocks-rtl,2088,auto,showblocks,2112,auto,smiley,2136,auto,source-rtl,2160,auto,source,2184,auto,sourcedialog-rtl,2208,auto,sourcedialog,2232,auto,specialchar,2256,auto,table,2280,auto,templates-rtl,2304,auto,templates,2328,auto,uicolor,2352,auto,redo-rtl,2376,auto,redo,2400,auto,undo-rtl,2424,auto,undo,2448,auto,simplebox,2472,auto,spellchecker,2496,auto","icons.png")}())},7154:()=>{window.CKEDITOR_BASEPATH="//cdn.ckeditor.com/4.6.2/full-all/"},74076:(e,d,s)=>{"use strict";s.r(d),s.d(d,{EditorsModule:()=>_});var a=s(17911),o=s(83668),u=s(86019),f=s(49133);const i=["host"];let r=(()=>{class w{constructor(){this.click=new o.EventEmitter}initialize(K){K.instance.addCommand(this.command,{exec:y=>{this.click.emit(y)}}),K.instance.ui.addButton(this.name,{label:this.label,command:this.command,toolbar:this.toolbar,icon:this.icon})}ngOnInit(){if(!this.name)throw new Error('Attribute "name" is required on <ckbutton>');if(!this.command)throw new Error('Attribute "command" is required on <ckbutton>')}}return w.\u0275fac=function(K){return new(K||w)},w.\u0275dir=o.\u0275\u0275defineDirective({type:w,selectors:[["ckbutton"]],inputs:{label:"label",command:"command",toolbar:"toolbar",name:"name",icon:"icon"},outputs:{click:"click"}}),w})(),l=(()=>{class w{ngAfterContentInit(){this.toolbarButtons.forEach(K=>K.toolbar=this.name)}initialize(K){K.instance.ui.addToolbarGroup(this.name,this.previous,this.subgroupOf),this.toolbarButtons.forEach(y=>{y.initialize(K)})}}return w.\u0275fac=function(K){return new(K||w)},w.\u0275dir=o.\u0275\u0275defineDirective({type:w,selectors:[["ckgroup"]],contentQueries:function(K,y,F){if(1&K&&o.\u0275\u0275contentQuery(F,r,4),2&K){let W;o.\u0275\u0275queryRefresh(W=o.\u0275\u0275loadQuery())&&(y.toolbarButtons=W)}},inputs:{name:"name",previous:"previous",subgroupOf:"subgroupOf"}}),w})(),n=(()=>{class w{constructor(K){this.zone=K,this.change=new o.EventEmitter,this.editorChange=new o.EventEmitter,this.ready=new o.EventEmitter,this.blur=new o.EventEmitter,this.focus=new o.EventEmitter,this.contentDom=new o.EventEmitter,this.fileUploadRequest=new o.EventEmitter,this.fileUploadResponse=new o.EventEmitter,this.paste=new o.EventEmitter,this.drop=new o.EventEmitter,this._value=""}get value(){return this._value}set value(K){K!==this._value&&(this._value=K,this.onChange(K))}ngOnChanges(K){K.readonly&&this.instance&&this.instance.setReadOnly(K.readonly.currentValue)}ngOnDestroy(){this.instance&&(this.instance.removeAllListeners(),CKEDITOR.instances[this.instance.name].destroy(),this.instance.destroy(),this.instance=null)}ngAfterViewInit(){this.ckeditorInit(this.config||{})}ngAfterViewChecked(){this.ckeditorInit(this.config||{})}updateValue(K){this.zone.run(()=>{this.value=K,this.onChange(K),this.onTouched(),this.change.emit(K)})}ckeditorInit(K){if("undefined"==typeof CKEDITOR)console.warn("CKEditor 4.x is missing (http://ckeditor.com/)");else{if(this.instance||!this.documentContains(this.host.nativeElement))return;this.readonly&&(K.readOnly=this.readonly),this.instance=CKEDITOR.replace(this.host.nativeElement,K),this.instance.setData(this.value),this.instance.on("instanceReady",y=>{this.instance.getData()!==this.value&&this.instance.setData(this.value),this.ready.emit(y)}),this.instance.on("change",y=>{this.onTouched();let F=this.instance.getData();this.value!==F&&(this.debounce?(this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(()=>{this.updateValue(F),this.debounceTimeout=null},parseInt(this.debounce))):this.updateValue(F)),this.editorChange.emit(y)}),this.instance.on("blur",y=>{this.blur.emit(y)}),this.instance.on("focus",y=>{this.focus.emit(y)}),this.instance.on("contentDom",y=>{this.contentDom.emit(y)}),this.instance.on("fileUploadRequest",y=>{this.fileUploadRequest.emit(y)}),this.instance.on("fileUploadResponse",y=>{this.fileUploadResponse.emit(y)}),this.instance.on("paste",y=>{this.paste.emit(y)}),this.instance.on("drop",y=>{this.drop.emit(y)}),this.toolbarGroups.forEach(y=>{y.initialize(this)}),this.toolbarButtons.forEach(y=>{y.initialize(this)})}}writeValue(K){this._value=K,this.instance&&this.instance.setData(K)}onChange(K){}onTouched(){}registerOnChange(K){this.onChange=K}registerOnTouched(K){this.onTouched=K}documentContains(K){return document.contains?document.contains(K):document.body.contains(K)}}return w.\u0275fac=function(K){return new(K||w)(o.\u0275\u0275directiveInject(o.NgZone))},w.\u0275cmp=o.\u0275\u0275defineComponent({type:w,selectors:[["ckeditor"]],contentQueries:function(K,y,F){if(1&K&&(o.\u0275\u0275contentQuery(F,r,4),o.\u0275\u0275contentQuery(F,l,4)),2&K){let W;o.\u0275\u0275queryRefresh(W=o.\u0275\u0275loadQuery())&&(y.toolbarButtons=W),o.\u0275\u0275queryRefresh(W=o.\u0275\u0275loadQuery())&&(y.toolbarGroups=W)}},viewQuery:function(K,y){if(1&K&&o.\u0275\u0275viewQuery(i,5),2&K){let F;o.\u0275\u0275queryRefresh(F=o.\u0275\u0275loadQuery())&&(y.host=F.first)}},inputs:{value:"value",config:"config",readonly:"readonly",debounce:"debounce"},outputs:{change:"change",editorChange:"editorChange",ready:"ready",blur:"blur",focus:"focus",contentDom:"contentDom",fileUploadRequest:"fileUploadRequest",fileUploadResponse:"fileUploadResponse",paste:"paste",drop:"drop"},features:[o.\u0275\u0275ProvidersFeature([{provide:f.JU,useExisting:(0,o.forwardRef)(()=>w),multi:!0}]),o.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["host",""]],template:function(K,y){1&K&&o.\u0275\u0275element(0,"textarea",null,0)},encapsulation:2}),w})(),t=(()=>{class w{}return w.\u0275fac=function(K){return new(K||w)},w.\u0275mod=o.\u0275\u0275defineNgModule({type:w}),w.\u0275inj=o.\u0275\u0275defineInjector({imports:[[u.ez]]}),w})();var c=s(64764),m=s(23935);let g=(()=>{class w{}return w.\u0275fac=function(K){return new(K||w)},w.\u0275cmp=o.\u0275\u0275defineComponent({type:w,selectors:[["ngx-editors"]],decls:1,vars:0,template:function(K,y){1&K&&o.\u0275\u0275element(0,"router-outlet")},directives:[m.lC],encapsulation:2}),w})();var C=s(76528);let h=(()=>{class w{}return w.\u0275fac=function(K){return new(K||w)},w.\u0275cmp=o.\u0275\u0275defineComponent({type:w,selectors:[["ngx-tiny-mce-page"]],decls:5,vars:0,template:function(K,y){1&K&&(o.\u0275\u0275elementStart(0,"nb-card"),o.\u0275\u0275elementStart(1,"nb-card-header"),o.\u0275\u0275text(2," Tiny MCE "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"nb-card-body"),o.\u0275\u0275element(4,"ngx-tiny-mce"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())},directives:[a.Asz,a.ndF,a.yKW,C.$],encapsulation:2}),w})();s(7154),s(96596);const k=function(){return{extraPlugins:"divarea",height:"320"}};const p=[{path:"",component:g,children:[{path:"tinymce",component:h},{path:"ckeditor",component:(()=>{class w{}return w.\u0275fac=function(K){return new(K||w)},w.\u0275cmp=o.\u0275\u0275defineComponent({type:w,selectors:[["ngx-ckeditor"]],decls:5,vars:2,consts:[[3,"config"]],template:function(K,y){1&K&&(o.\u0275\u0275elementStart(0,"nb-card"),o.\u0275\u0275elementStart(1,"nb-card-header"),o.\u0275\u0275text(2," CKEditor "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"nb-card-body"),o.\u0275\u0275element(4,"ckeditor",0),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&K&&(o.\u0275\u0275advance(4),o.\u0275\u0275property("config",o.\u0275\u0275pureFunction0(1,k)))},directives:[a.Asz,a.ndF,a.yKW,n],encapsulation:2}),w})()}]}];let O=(()=>{class w{}return w.\u0275fac=function(K){return new(K||w)},w.\u0275mod=o.\u0275\u0275defineNgModule({type:w}),w.\u0275inj=o.\u0275\u0275defineInjector({imports:[[m.Bz.forChild(p)],m.Bz]}),w})(),_=(()=>{class w{}return w.\u0275fac=function(K){return new(K||w)},w.\u0275mod=o.\u0275\u0275defineNgModule({type:w}),w.\u0275inj=o.\u0275\u0275defineInjector({imports:[[a.zyh,c.O,O,t]]}),w})()}}]);